npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.1.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.1.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.1.5
added 2 packages from 2 contributors, removed 45 packages, updated 2 packages and audited 892 packages in 7.681s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:38:39.274Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:38:39.274Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:38:39.275Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:38:39.275Z appoptics:debug using context provider: ace-context
2022-04-25T18:38:39.359Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:38:39.539Z appoptics:patching patched crypto 
2022-04-25T18:38:39.562Z appoptics:patching patched https 
2022-04-25T18:38:39.563Z appoptics:patching patched http 
2022-04-25T18:38:39.660Z appoptics:patching patched tedious 0.1.5
2022-04-25T18:38:39.665Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.1.5
       should support basic queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.1.5
       should support parameters with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.1.5
       should sanitize query with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.1.5
       should truncate long queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.1.5
       should do nothing when disabled with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.1.5
       should support basic queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.1.5
       should support parameters with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.1.5
       should sanitize query with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.1.5
       should truncate long queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.1.5
       should do nothing when disabled with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.1
updated 2 packages and audited 892 packages in 6.023s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:38:49.913Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:38:49.914Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:38:49.914Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:38:49.915Z appoptics:debug using context provider: ace-context
2022-04-25T18:38:49.990Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:38:50.140Z appoptics:patching patched crypto 
2022-04-25T18:38:50.159Z appoptics:patching patched https 
2022-04-25T18:38:50.160Z appoptics:patching patched http 
2022-04-25T18:38:50.241Z appoptics:patching patched tedious 0.2.1
2022-04-25T18:38:50.245Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.2
updated 1 package and audited 892 packages in 5.335s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:00.007Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:00.008Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:00.008Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:00.009Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:00.109Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:00.290Z appoptics:patching patched crypto 
2022-04-25T18:39:00.311Z appoptics:patching patched https 
2022-04-25T18:39:00.311Z appoptics:patching patched http 
2022-04-25T18:39:00.433Z appoptics:patching patched tedious 0.2.2
2022-04-25T18:39:00.437Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.3
removed 1 package, updated 1 package and audited 891 packages in 4.79s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:09.508Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:09.509Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:09.509Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:09.509Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:09.598Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:09.758Z appoptics:patching patched crypto 
2022-04-25T18:39:09.779Z appoptics:patching patched https 
2022-04-25T18:39:09.779Z appoptics:patching patched http 
2022-04-25T18:39:09.898Z appoptics:patching patched tedious 0.2.3
2022-04-25T18:39:09.902Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.4
updated 2 packages and audited 891 packages in 4.679s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:18.928Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:18.928Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:18.928Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:18.929Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:19.012Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:19.163Z appoptics:patching patched crypto 
2022-04-25T18:39:19.182Z appoptics:patching patched https 
2022-04-25T18:39:19.183Z appoptics:patching patched http 
2022-04-25T18:39:19.232Z appoptics:patching patched tedious 0.2.4
2022-04-25T18:39:19.236Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.3.0
updated 1 package and audited 891 packages in 5.384s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:28.860Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:28.860Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:28.861Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:28.861Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:28.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:29.149Z appoptics:patching patched crypto 
2022-04-25T18:39:29.174Z appoptics:patching patched https 
2022-04-25T18:39:29.174Z appoptics:patching patched http 
2022-04-25T18:39:29.224Z appoptics:patching patched tedious 0.3.0
2022-04-25T18:39:29.227Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 0.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 0.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 0.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 0.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 0.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 0.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 0.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 0.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 0.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.0.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.0.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.0.0
updated 1 package and audited 891 packages in 4.925s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:38.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:38.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:38.458Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:38.458Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:38.535Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:38.682Z appoptics:patching patched crypto 
2022-04-25T18:39:38.703Z appoptics:patching patched https 
2022-04-25T18:39:38.703Z appoptics:patching patched http 
2022-04-25T18:39:38.753Z appoptics:patching patched tedious 1.0.0
2022-04-25T18:39:38.757Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.1.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.1.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.1.0
added 1 package from 1 contributor, updated 1 package and audited 892 packages in 4.994s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:48.154Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:48.156Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:48.156Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:48.157Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:48.252Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:48.428Z appoptics:patching patched crypto 
2022-04-25T18:39:48.448Z appoptics:patching patched https 
2022-04-25T18:39:48.467Z appoptics:patching patched http 
2022-04-25T18:39:48.539Z appoptics:patching patched tedious 1.1.0
2022-04-25T18:39:48.543Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.0
updated 1 package and audited 892 packages in 5.297s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:39:58.071Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:58.072Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:58.072Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:58.073Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:58.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:58.299Z appoptics:patching patched crypto 
2022-04-25T18:39:58.319Z appoptics:patching patched https 
2022-04-25T18:39:58.319Z appoptics:patching patched http 
2022-04-25T18:39:58.372Z appoptics:patching patched tedious 1.2.0
2022-04-25T18:39:58.375Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.1
updated 1 package and audited 892 packages in 4.983s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:07.690Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:07.691Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:07.691Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:07.692Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:07.767Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:07.914Z appoptics:patching patched crypto 
2022-04-25T18:40:07.936Z appoptics:patching patched https 
2022-04-25T18:40:07.937Z appoptics:patching patched http 
2022-04-25T18:40:07.989Z appoptics:patching patched tedious 1.2.1
2022-04-25T18:40:07.993Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.2
updated 1 package and audited 892 packages in 6.034s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:18.341Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:18.342Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:18.343Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:18.343Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:18.419Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:18.568Z appoptics:patching patched crypto 
2022-04-25T18:40:18.589Z appoptics:patching patched https 
2022-04-25T18:40:18.589Z appoptics:patching patched http 
2022-04-25T18:40:18.639Z appoptics:patching patched tedious 1.2.2
2022-04-25T18:40:18.643Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.0
updated 1 package and audited 892 packages in 5.851s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:28.728Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:28.729Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:28.729Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:28.730Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:28.805Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:28.960Z appoptics:patching patched crypto 
2022-04-25T18:40:28.980Z appoptics:patching patched https 
2022-04-25T18:40:28.980Z appoptics:patching patched http 
2022-04-25T18:40:29.044Z appoptics:patching patched tedious 1.3.0
2022-04-25T18:40:29.048Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.1
updated 1 package and audited 892 packages in 5.696s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:39.397Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:39.398Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:39.399Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:39.399Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:39.476Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:39.623Z appoptics:patching patched crypto 
2022-04-25T18:40:39.646Z appoptics:patching patched https 
2022-04-25T18:40:39.646Z appoptics:patching patched http 
2022-04-25T18:40:39.703Z appoptics:patching patched tedious 1.3.1
2022-04-25T18:40:39.707Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.2
updated 1 package and audited 892 packages in 4.896s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:48.817Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:48.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:48.817Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:48.818Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:48.918Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:49.104Z appoptics:patching patched crypto 
2022-04-25T18:40:49.147Z appoptics:patching patched https 
2022-04-25T18:40:49.148Z appoptics:patching patched http 
2022-04-25T18:40:49.218Z appoptics:patching patched tedious 1.3.2
2022-04-25T18:40:49.221Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.3
updated 1 package and audited 892 packages in 4.377s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:40:57.852Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:57.852Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:57.852Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:57.853Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:57.928Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:58.073Z appoptics:patching patched crypto 
2022-04-25T18:40:58.094Z appoptics:patching patched https 
2022-04-25T18:40:58.094Z appoptics:patching patched http 
2022-04-25T18:40:58.150Z appoptics:patching patched tedious 1.3.3
2022-04-25T18:40:58.160Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.4
updated 1 package and audited 892 packages in 5.015s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:07.540Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:07.541Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:07.541Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:07.541Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:07.621Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:07.784Z appoptics:patching patched crypto 
2022-04-25T18:41:07.806Z appoptics:patching patched https 
2022-04-25T18:41:07.806Z appoptics:patching patched http 
2022-04-25T18:41:07.895Z appoptics:patching patched tedious 1.3.4
2022-04-25T18:41:07.899Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.5
updated 1 package and audited 892 packages in 4.95s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:17.092Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:17.093Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:17.093Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:17.093Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:17.168Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:17.313Z appoptics:patching patched crypto 
2022-04-25T18:41:17.343Z appoptics:patching patched https 
2022-04-25T18:41:17.343Z appoptics:patching patched http 
2022-04-25T18:41:17.391Z appoptics:patching patched tedious 1.3.5
2022-04-25T18:41:17.395Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.3.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.3.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.3.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.3.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.3.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.3.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.3.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.3.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.3.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.0
updated 1 package and audited 892 packages in 4.653s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:26.547Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:26.548Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:26.548Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:26.548Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:26.689Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:26.900Z appoptics:patching patched crypto 
2022-04-25T18:41:26.943Z appoptics:patching patched https 
2022-04-25T18:41:26.943Z appoptics:patching patched http 
2022-04-25T18:41:27.013Z appoptics:patching patched tedious 1.4.0
2022-04-25T18:41:27.017Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.1
updated 1 package and audited 892 packages in 4.624s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:35.913Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:35.914Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:35.914Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:35.915Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:35.993Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:36.185Z appoptics:patching patched crypto 
2022-04-25T18:41:36.212Z appoptics:patching patched https 
2022-04-25T18:41:36.212Z appoptics:patching patched http 
2022-04-25T18:41:36.271Z appoptics:patching patched tedious 1.4.1
2022-04-25T18:41:36.275Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.2
updated 1 package and audited 892 packages in 4.73s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:45.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:45.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:45.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:45.448Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:45.523Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:45.671Z appoptics:patching patched crypto 
2022-04-25T18:41:45.690Z appoptics:patching patched https 
2022-04-25T18:41:45.690Z appoptics:patching patched http 
2022-04-25T18:41:45.744Z appoptics:patching patched tedious 1.4.2
2022-04-25T18:41:45.748Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.3
updated 1 package and audited 892 packages in 5.526s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:41:55.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:55.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:55.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:55.652Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:55.727Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:55.877Z appoptics:patching patched crypto 
2022-04-25T18:41:55.896Z appoptics:patching patched https 
2022-04-25T18:41:55.896Z appoptics:patching patched http 
2022-04-25T18:41:55.961Z appoptics:patching patched tedious 1.4.3
2022-04-25T18:41:55.965Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.4.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.4.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.4.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.4.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.4.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.4.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.4.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.4.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.4.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.1
updated 1 package and audited 892 packages in 5.057s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:05.579Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:05.580Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:05.580Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:05.580Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:05.677Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:05.853Z appoptics:patching patched crypto 
2022-04-25T18:42:05.873Z appoptics:patching patched https 
2022-04-25T18:42:05.873Z appoptics:patching patched http 
2022-04-25T18:42:05.968Z appoptics:patching patched tedious 1.5.1
2022-04-25T18:42:05.972Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.2
updated 1 package and audited 892 packages in 4.455s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:14.671Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:14.672Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:14.672Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:14.673Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:14.767Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:14.915Z appoptics:patching patched crypto 
2022-04-25T18:42:14.936Z appoptics:patching patched https 
2022-04-25T18:42:14.936Z appoptics:patching patched http 
2022-04-25T18:42:14.987Z appoptics:patching patched tedious 1.5.2
2022-04-25T18:42:14.991Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.3
updated 1 package and audited 892 packages in 4.619s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:23.899Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:23.900Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:23.900Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:23.901Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:23.975Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:24.121Z appoptics:patching patched crypto 
2022-04-25T18:42:24.142Z appoptics:patching patched https 
2022-04-25T18:42:24.142Z appoptics:patching patched http 
2022-04-25T18:42:24.194Z appoptics:patching patched tedious 1.5.3
2022-04-25T18:42:24.198Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.4
updated 1 package and audited 892 packages in 5.221s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:34.303Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:34.303Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:34.304Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:34.304Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:34.380Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:34.530Z appoptics:patching patched crypto 
2022-04-25T18:42:34.550Z appoptics:patching patched https 
2022-04-25T18:42:34.550Z appoptics:patching patched http 
2022-04-25T18:42:34.605Z appoptics:patching patched tedious 1.5.4
2022-04-25T18:42:34.610Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.5
updated 1 package and audited 892 packages in 5.795s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:44.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:44.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:44.650Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:44.651Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:44.728Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:44.875Z appoptics:patching patched crypto 
2022-04-25T18:42:44.896Z appoptics:patching patched https 
2022-04-25T18:42:44.896Z appoptics:patching patched http 
2022-04-25T18:42:44.949Z appoptics:patching patched tedious 1.5.5
2022-04-25T18:42:44.953Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.6: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.6
updated 1 package and audited 892 packages in 5.091s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:42:54.402Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:54.403Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:54.403Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:54.403Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:54.500Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:54.675Z appoptics:patching patched crypto 
2022-04-25T18:42:54.703Z appoptics:patching patched https 
2022-04-25T18:42:54.704Z appoptics:patching patched http 
2022-04-25T18:42:54.797Z appoptics:patching patched tedious 1.5.6
2022-04-25T18:42:54.801Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.6
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.6
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.7: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.7
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.7
updated 1 package and audited 892 packages in 4.715s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:03.837Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:03.838Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:03.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:03.839Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:03.915Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:04.063Z appoptics:patching patched crypto 
2022-04-25T18:43:04.083Z appoptics:patching patched https 
2022-04-25T18:43:04.083Z appoptics:patching patched http 
2022-04-25T18:43:04.138Z appoptics:patching patched tedious 1.5.7
2022-04-25T18:43:04.142Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.7
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.7
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.8: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.8
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.8
updated 1 package and audited 892 packages in 5.155s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:13.661Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:13.661Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:13.661Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:13.662Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:13.741Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:13.890Z appoptics:patching patched crypto 
2022-04-25T18:43:13.910Z appoptics:patching patched https 
2022-04-25T18:43:13.911Z appoptics:patching patched http 
2022-04-25T18:43:13.962Z appoptics:patching patched tedious 1.5.8
2022-04-25T18:43:13.966Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.5.8
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.5.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.5.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.5.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.5.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.5.8
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.5.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.5.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.5.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.6.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.6.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.6.0
updated 1 package and audited 892 packages in 5.431s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:23.884Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:23.885Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:23.885Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:23.885Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:23.985Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:24.168Z appoptics:patching patched crypto 
2022-04-25T18:43:24.212Z appoptics:patching patched https 
2022-04-25T18:43:24.212Z appoptics:patching patched http 
2022-04-25T18:43:24.270Z appoptics:patching patched tedious 1.6.0
2022-04-25T18:43:24.274Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.7.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.7.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.7.0
updated 1 package and audited 892 packages in 5.416s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:33.952Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:33.953Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:33.953Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:33.954Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:34.028Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:34.176Z appoptics:patching patched crypto 
2022-04-25T18:43:34.195Z appoptics:patching patched https 
2022-04-25T18:43:34.195Z appoptics:patching patched http 
2022-04-25T18:43:34.248Z appoptics:patching patched tedious 1.7.0
2022-04-25T18:43:34.252Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.0
updated 1 package and audited 892 packages in 5.189s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:43.846Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:43.847Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:43.847Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:43.848Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:44.006Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:44.231Z appoptics:patching patched crypto 
2022-04-25T18:43:44.276Z appoptics:patching patched https 
2022-04-25T18:43:44.276Z appoptics:patching patched http 
2022-04-25T18:43:44.335Z appoptics:patching patched tedious 1.8.0
2022-04-25T18:43:44.339Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.8.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.8.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.1
updated 1 package and audited 892 packages in 4.368s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:43:52.944Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:52.945Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:52.945Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:52.946Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:53.021Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:53.178Z appoptics:patching patched crypto 
2022-04-25T18:43:53.218Z appoptics:patching patched https 
2022-04-25T18:43:53.218Z appoptics:patching patched http 
2022-04-25T18:43:53.317Z appoptics:patching patched tedious 1.8.1
2022-04-25T18:43:53.330Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.8.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.8.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.8.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.8.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.8.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.8.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.8.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.8.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.8.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.9.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"12.22.12","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.9.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.9.0
updated 1 package and audited 892 packages in 4.442s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:02.130Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:02.130Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:02.130Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:02.131Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:02.211Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:02.358Z appoptics:patching patched crypto 
2022-04-25T18:44:02.378Z appoptics:patching patched https 
2022-04-25T18:44:02.378Z appoptics:patching patched http 
2022-04-25T18:44:02.433Z appoptics:patching patched tedious 1.9.0
2022-04-25T18:44:02.437Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.9.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.9.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.9.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.9.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.9.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.9.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.9.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.9.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.9.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.9.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.9.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.10.0
updated 4 packages and audited 892 packages in 6.197s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:12.962Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:12.963Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:12.963Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:12.964Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:13.049Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:13.200Z appoptics:patching patched crypto 
2022-04-25T18:44:13.219Z appoptics:patching patched https 
2022-04-25T18:44:13.219Z appoptics:patching patched http 
2022-04-25T18:44:13.289Z appoptics:patching patched tedious 1.10.0
2022-04-25T18:44:13.293Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.10.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.10.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.10.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.10.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.10.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.10.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.10.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.10.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.10.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.10.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.10.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.0
updated 1 package and audited 892 packages in 5.753s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:23.283Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:23.283Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:23.283Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:23.284Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:23.360Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:23.508Z appoptics:patching patched crypto 
2022-04-25T18:44:23.527Z appoptics:patching patched https 
2022-04-25T18:44:23.528Z appoptics:patching patched http 
2022-04-25T18:44:23.584Z appoptics:patching patched tedious 1.11.0
2022-04-25T18:44:23.588Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.1
updated 1 package and audited 892 packages in 5.223s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:33.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:33.119Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:33.119Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:33.128Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:33.264Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:33.438Z appoptics:patching patched crypto 
2022-04-25T18:44:33.480Z appoptics:patching patched https 
2022-04-25T18:44:33.480Z appoptics:patching patched http 
2022-04-25T18:44:33.552Z appoptics:patching patched tedious 1.11.1
2022-04-25T18:44:33.556Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.2
updated 1 package and audited 892 packages in 4.881s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:42.773Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:42.774Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:42.774Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:42.775Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:42.856Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:43.002Z appoptics:patching patched crypto 
2022-04-25T18:44:43.028Z appoptics:patching patched https 
2022-04-25T18:44:43.028Z appoptics:patching patched http 
2022-04-25T18:44:43.094Z appoptics:patching patched tedious 1.11.2
2022-04-25T18:44:43.100Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.4
updated 1 package and audited 892 packages in 4.514s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:44:51.940Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:51.941Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:51.941Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:51.942Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:52.027Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:52.242Z appoptics:patching patched crypto 
2022-04-25T18:44:52.280Z appoptics:patching patched https 
2022-04-25T18:44:52.281Z appoptics:patching patched http 
2022-04-25T18:44:52.336Z appoptics:patching patched tedious 1.11.4
2022-04-25T18:44:52.341Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.5
updated 1 package and audited 892 packages in 5.029s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:01.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:01.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:01.687Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:01.688Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:01.764Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:01.912Z appoptics:patching patched crypto 
2022-04-25T18:45:01.935Z appoptics:patching patched https 
2022-04-25T18:45:01.935Z appoptics:patching patched http 
2022-04-25T18:45:01.989Z appoptics:patching patched tedious 1.11.5
2022-04-25T18:45:01.993Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  2) probes.tedious 1.11.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 1.11.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  4) probes.tedious 1.11.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 1.11.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  6) probes.tedious 1.11.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 1.11.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  8) probes.tedious 1.11.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 1.11.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)

  10) probes.tedious 1.11.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
      at TCP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.0
added 8 packages from 3 contributors, removed 1 package, updated 1 package and audited 899 packages in 6.055s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:12.306Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:12.307Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:12.307Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:12.307Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:12.383Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:12.531Z appoptics:patching patched crypto 
2022-04-25T18:45:12.554Z appoptics:patching patched https 
2022-04-25T18:45:12.555Z appoptics:patching patched http 
2022-04-25T18:45:12.647Z appoptics:patching patched tedious 1.12.0
2022-04-25T18:45:12.651Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  2) probes.tedious 1.12.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  3) probes.tedious 1.12.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  4) probes.tedious 1.12.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  5) probes.tedious 1.12.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  6) probes.tedious 1.12.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  7) probes.tedious 1.12.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  8) probes.tedious 1.12.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  9) probes.tedious 1.12.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  10) probes.tedious 1.12.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.1
updated 1 package and audited 899 packages in 4.797s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:21.873Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:21.874Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:21.874Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:21.875Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:22.012Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:22.196Z appoptics:patching patched crypto 
2022-04-25T18:45:22.237Z appoptics:patching patched https 
2022-04-25T18:45:22.238Z appoptics:patching patched http 
2022-04-25T18:45:22.350Z appoptics:patching patched tedious 1.12.1
2022-04-25T18:45:22.354Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.2
updated 1 package and audited 899 packages in 4.856s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:31.451Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:31.452Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:31.452Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:31.453Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:31.529Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:31.672Z appoptics:patching patched crypto 
2022-04-25T18:45:31.693Z appoptics:patching patched https 
2022-04-25T18:45:31.693Z appoptics:patching patched http 
2022-04-25T18:45:31.781Z appoptics:patching patched tedious 1.12.2
2022-04-25T18:45:31.785Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.3
updated 1 package and audited 899 packages in 4.359s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:40.515Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:40.516Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:40.516Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:40.517Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:40.595Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:40.798Z appoptics:patching patched crypto 
2022-04-25T18:45:40.823Z appoptics:patching patched https 
2022-04-25T18:45:40.823Z appoptics:patching patched http 
2022-04-25T18:45:40.913Z appoptics:patching patched tedious 1.12.3
2022-04-25T18:45:40.917Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.0
updated 1 package and audited 899 packages in 5.95s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:45:51.134Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:51.135Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:51.135Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:51.135Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:51.220Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:51.374Z appoptics:patching patched crypto 
2022-04-25T18:45:51.393Z appoptics:patching patched https 
2022-04-25T18:45:51.393Z appoptics:patching patched http 
2022-04-25T18:45:51.473Z appoptics:patching patched tedious 1.13.0
2022-04-25T18:45:51.477Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.1
updated 1 package and audited 899 packages in 5.829s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:01.599Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:01.600Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:01.600Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:01.601Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:01.684Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:01.847Z appoptics:patching patched crypto 
2022-04-25T18:46:01.869Z appoptics:patching patched https 
2022-04-25T18:46:01.869Z appoptics:patching patched http 
2022-04-25T18:46:01.946Z appoptics:patching patched tedious 1.13.1
2022-04-25T18:46:01.950Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.2
updated 1 package and audited 899 packages in 4.549s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:10.828Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:10.829Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:10.829Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:10.830Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:10.935Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:11.140Z appoptics:patching patched crypto 
2022-04-25T18:46:11.190Z appoptics:patching patched https 
2022-04-25T18:46:11.190Z appoptics:patching patched http 
2022-04-25T18:46:11.329Z appoptics:patching patched tedious 1.13.2
2022-04-25T18:46:11.333Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.14.0
added 1 package, updated 1 package and audited 900 packages in 4.42s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:20.232Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:20.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:20.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:20.233Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:20.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:20.485Z appoptics:patching patched crypto 
2022-04-25T18:46:20.523Z appoptics:patching patched https 
2022-04-25T18:46:20.524Z appoptics:patching patched http 
2022-04-25T18:46:20.595Z appoptics:patching patched tedious 1.14.0
2022-04-25T18:46:20.599Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.14.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.14.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  2) probes.tedious 1.14.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  3) probes.tedious 1.14.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  4) probes.tedious 1.14.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  5) probes.tedious 1.14.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  6) probes.tedious 1.14.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  7) probes.tedious 1.14.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  8) probes.tedious 1.14.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  9) probes.tedious 1.14.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  10) probes.tedious 1.14.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> core-js@2.6.12 postinstall /__w/appoptics-apm-node/appoptics-apm-node/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.15.0
added 2 packages from 2 contributors, updated 3 packages, moved 1 package and audited 902 packages in 5.827s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:30.926Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:30.927Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:30.927Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:30.928Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:31.026Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:31.210Z appoptics:patching patched crypto 
2022-04-25T18:46:31.254Z appoptics:patching patched https 
2022-04-25T18:46:31.254Z appoptics:patching patched http 
2022-04-25T18:46:31.377Z appoptics:patching patched tedious 1.15.0
2022-04-25T18:46:31.381Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.15.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.15.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 1.15.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 1.15.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 1.15.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 1.15.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 1.15.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 1.15.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 1.15.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 1.15.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 1.15.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.0
removed 2 packages, updated 1 package and audited 900 packages in 5.245s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:40.985Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:40.986Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:40.986Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:40.987Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:41.064Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:41.211Z appoptics:patching patched crypto 
2022-04-25T18:46:41.232Z appoptics:patching patched https 
2022-04-25T18:46:41.233Z appoptics:patching patched http 
2022-04-25T18:46:41.329Z appoptics:patching patched tedious 2.0.0
2022-04-25T18:46:41.333Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.1
updated 1 package and audited 900 packages in 6.944s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:46:52.628Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:52.629Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:52.629Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:52.630Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:52.732Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:52.904Z appoptics:patching patched crypto 
2022-04-25T18:46:52.947Z appoptics:patching patched https 
2022-04-25T18:46:52.948Z appoptics:patching patched http 
2022-04-25T18:46:53.066Z appoptics:patching patched tedious 2.0.1
2022-04-25T18:46:53.072Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> sspi-client@0.1.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! sspi-client@0.1.0 install: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the sspi-client@0.1.0 install script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T18_47_03_425Z-debug.log
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.1
added 7 packages from 13 contributors and audited 900 packages in 4.614s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:47:09.133Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:09.134Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:09.134Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:09.134Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:09.211Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:09.363Z appoptics:patching patched crypto 
2022-04-25T18:47:09.387Z appoptics:patching patched https 
2022-04-25T18:47:09.387Z appoptics:patching patched http 
2022-04-25T18:47:09.492Z appoptics:patching patched tedious 2.1.1
2022-04-25T18:47:09.496Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.2
updated 1 package and audited 900 packages in 5.174s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:47:18.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:18.909Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:18.909Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:18.910Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:18.982Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:19.136Z appoptics:patching patched crypto 
2022-04-25T18:47:19.160Z appoptics:patching patched https 
2022-04-25T18:47:19.160Z appoptics:patching patched http 
2022-04-25T18:47:19.259Z appoptics:patching patched tedious 2.1.2
2022-04-25T18:47:19.263Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.3
updated 1 package and audited 900 packages in 6.15s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:47:29.833Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:29.834Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:29.834Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:29.835Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:29.912Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:30.111Z appoptics:patching patched crypto 
2022-04-25T18:47:30.133Z appoptics:patching patched https 
2022-04-25T18:47:30.133Z appoptics:patching patched http 
2022-04-25T18:47:30.240Z appoptics:patching patched tedious 2.1.3
2022-04-25T18:47:30.244Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.4
updated 1 package and audited 900 packages in 6.337s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:47:40.813Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:40.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:40.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:40.815Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:40.891Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:41.036Z appoptics:patching patched crypto 
2022-04-25T18:47:41.058Z appoptics:patching patched https 
2022-04-25T18:47:41.058Z appoptics:patching patched http 
2022-04-25T18:47:41.158Z appoptics:patching patched tedious 2.1.4
2022-04-25T18:47:41.162Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.5
updated 1 package and audited 900 packages in 5.526s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:47:51.117Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:51.118Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:51.119Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:51.119Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:51.216Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:51.366Z appoptics:patching patched crypto 
2022-04-25T18:47:51.386Z appoptics:patching patched https 
2022-04-25T18:47:51.386Z appoptics:patching patched http 
2022-04-25T18:47:51.490Z appoptics:patching patched tedious 2.1.5
2022-04-25T18:47:51.496Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.0
updated 1 package and audited 900 packages in 4.949s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:00.785Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:00.786Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:00.786Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:00.787Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:00.876Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:01.051Z appoptics:patching patched crypto 
2022-04-25T18:48:01.076Z appoptics:patching patched https 
2022-04-25T18:48:01.076Z appoptics:patching patched http 
2022-04-25T18:48:01.172Z appoptics:patching patched tedious 2.2.0
2022-04-25T18:48:01.177Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.1
updated 1 package and audited 900 packages in 5.131s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:10.609Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:10.610Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:10.610Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:10.611Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:10.717Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:10.874Z appoptics:patching patched crypto 
2022-04-25T18:48:10.915Z appoptics:patching patched https 
2022-04-25T18:48:10.915Z appoptics:patching patched http 
2022-04-25T18:48:11.032Z appoptics:patching patched tedious 2.2.1
2022-04-25T18:48:11.036Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.2
updated 1 package and audited 900 packages in 4.686s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:20.019Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:20.020Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:20.020Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:20.020Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:20.095Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:20.243Z appoptics:patching patched crypto 
2022-04-25T18:48:20.262Z appoptics:patching patched https 
2022-04-25T18:48:20.263Z appoptics:patching patched http 
2022-04-25T18:48:20.366Z appoptics:patching patched tedious 2.2.2
2022-04-25T18:48:20.370Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.3
updated 1 package and audited 900 packages in 5.633s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:30.255Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:30.256Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:30.256Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:30.256Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:30.332Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:30.480Z appoptics:patching patched crypto 
2022-04-25T18:48:30.501Z appoptics:patching patched https 
2022-04-25T18:48:30.501Z appoptics:patching patched http 
2022-04-25T18:48:30.614Z appoptics:patching patched tedious 2.2.3
2022-04-25T18:48:30.618Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.4
updated 1 package and audited 900 packages in 5.169s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:39.995Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:39.996Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:39.996Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:39.997Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:40.071Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:40.221Z appoptics:patching patched crypto 
2022-04-25T18:48:40.245Z appoptics:patching patched https 
2022-04-25T18:48:40.245Z appoptics:patching patched http 
2022-04-25T18:48:40.351Z appoptics:patching patched tedious 2.2.4
2022-04-25T18:48:40.355Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.0
added 1 package from 1 contributor, updated 1 package and audited 901 packages in 5.158s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:49.876Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:49.877Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:49.877Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:49.878Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:49.969Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:50.161Z appoptics:patching patched crypto 
2022-04-25T18:48:50.204Z appoptics:patching patched https 
2022-04-25T18:48:50.204Z appoptics:patching patched http 
2022-04-25T18:48:50.343Z appoptics:patching patched tedious 2.3.0
2022-04-25T18:48:50.347Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.1
updated 1 package and audited 901 packages in 5.023s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:48:59.678Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:59.679Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:59.679Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:59.680Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:59.756Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:59.909Z appoptics:patching patched crypto 
2022-04-25T18:48:59.929Z appoptics:patching patched https 
2022-04-25T18:48:59.929Z appoptics:patching patched http 
2022-04-25T18:49:00.042Z appoptics:patching patched tedious 2.3.1
2022-04-25T18:49:00.046Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.4.0
added 1 package from 1 contributor, removed 1 package, updated 1 package and audited 901 packages in 5.395s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:49:09.749Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:09.750Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:09.750Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:09.751Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:09.832Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:09.978Z appoptics:patching patched crypto 
2022-04-25T18:49:09.999Z appoptics:patching patched https 
2022-04-25T18:49:09.999Z appoptics:patching patched http 
2022-04-25T18:49:10.114Z appoptics:patching patched tedious 2.4.0
2022-04-25T18:49:10.118Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.0
added 1 package from 1 contributor, updated 1 package and audited 902 packages in 5.737s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:49:20.216Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:20.217Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:20.217Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:20.217Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:20.295Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:20.440Z appoptics:patching patched crypto 
2022-04-25T18:49:20.461Z appoptics:patching patched https 
2022-04-25T18:49:20.461Z appoptics:patching patched http 
2022-04-25T18:49:20.574Z appoptics:patching patched tedious 2.5.0
2022-04-25T18:49:20.577Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.1
updated 1 package and audited 902 packages in 6.094s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:49:30.899Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:30.900Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:30.900Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:30.901Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:30.976Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:31.126Z appoptics:patching patched crypto 
2022-04-25T18:49:31.145Z appoptics:patching patched https 
2022-04-25T18:49:31.146Z appoptics:patching patched http 
2022-04-25T18:49:31.264Z appoptics:patching patched tedious 2.5.1
2022-04-25T18:49:31.268Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.0
updated 1 package and audited 902 packages in 6.328s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:49:41.902Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:41.903Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:41.903Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:41.903Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:41.978Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:42.166Z appoptics:patching patched crypto 
2022-04-25T18:49:42.186Z appoptics:patching patched https 
2022-04-25T18:49:42.187Z appoptics:patching patched http 
2022-04-25T18:49:42.305Z appoptics:patching patched tedious 2.6.0
2022-04-25T18:49:42.309Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.1
updated 1 package and audited 902 packages in 4.762s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:49:51.375Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:51.376Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:51.376Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:51.377Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:51.474Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:51.743Z appoptics:patching patched crypto 
2022-04-25T18:49:51.796Z appoptics:patching patched https 
2022-04-25T18:49:51.797Z appoptics:patching patched http 
2022-04-25T18:49:51.956Z appoptics:patching patched tedious 2.6.1
2022-04-25T18:49:51.960Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.2
updated 1 package and audited 902 packages in 5.234s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:01.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:01.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:01.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:01.557Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:01.654Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:01.902Z appoptics:patching patched crypto 
2022-04-25T18:50:01.922Z appoptics:patching patched https 
2022-04-25T18:50:01.923Z appoptics:patching patched http 
2022-04-25T18:50:02.046Z appoptics:patching patched tedious 2.6.2
2022-04-25T18:50:02.050Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.3
updated 1 package and audited 902 packages in 4.569s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:10.940Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:10.941Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:10.941Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:10.941Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:11.022Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:11.172Z appoptics:patching patched crypto 
2022-04-25T18:50:11.196Z appoptics:patching patched https 
2022-04-25T18:50:11.196Z appoptics:patching patched http 
2022-04-25T18:50:11.315Z appoptics:patching patched tedious 2.6.3
2022-04-25T18:50:11.319Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.4
added 1 package from 1 contributor, updated 1 package and audited 903 packages in 5.335s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:21.048Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:21.049Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:21.049Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:21.050Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:21.129Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:21.302Z appoptics:patching patched crypto 
2022-04-25T18:50:21.322Z appoptics:patching patched https 
2022-04-25T18:50:21.322Z appoptics:patching patched http 
2022-04-25T18:50:21.444Z appoptics:patching patched tedious 2.6.4
2022-04-25T18:50:21.448Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.0
updated 1 package and audited 903 packages in 5.285s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:31.010Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:31.011Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:31.011Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:31.012Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:31.088Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:31.239Z appoptics:patching patched crypto 
2022-04-25T18:50:31.264Z appoptics:patching patched https 
2022-04-25T18:50:31.265Z appoptics:patching patched http 
2022-04-25T18:50:31.392Z appoptics:patching patched tedious 2.7.0
2022-04-25T18:50:31.396Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.1
updated 1 package and audited 903 packages in 4.472s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:40.278Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:40.279Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:40.279Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:40.280Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:40.374Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:40.564Z appoptics:patching patched crypto 
2022-04-25T18:50:40.597Z appoptics:patching patched https 
2022-04-25T18:50:40.597Z appoptics:patching patched http 
2022-04-25T18:50:40.837Z appoptics:patching patched tedious 2.7.1
2022-04-25T18:50:40.841Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  2 passing (1s)
  4 failing

  1) probes.tedious 2.7.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.1
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1028:28)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1047:14)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:884:18)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.0
updated 1 package and audited 903 packages in 5.039s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:48.330Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:48.330Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:48.331Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:48.331Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:48.407Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:48.557Z appoptics:patching patched crypto 
2022-04-25T18:50:48.583Z appoptics:patching patched https 
2022-04-25T18:50:48.583Z appoptics:patching patched http 
2022-04-25T18:50:48.679Z appoptics:patching patched tedious 3.0.0
2022-04-25T18:50:48.683Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  2) probes.tedious 3.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  3) probes.tedious 3.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  4) probes.tedious 3.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  5) probes.tedious 3.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  6) probes.tedious 3.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  7) probes.tedious 3.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  8) probes.tedious 3.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  9) probes.tedious 3.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  10) probes.tedious 3.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.1
removed 9 packages, updated 2 packages and audited 894 packages in 5.777s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:50:58.871Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:58.872Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:58.872Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:58.873Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:58.975Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:59.143Z appoptics:patching patched crypto 
2022-04-25T18:50:59.195Z appoptics:patching patched https 
2022-04-25T18:50:59.213Z appoptics:patching patched http 
2022-04-25T18:50:59.302Z appoptics:patching patched tedious 3.0.1
2022-04-25T18:50:59.306Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  2) probes.tedious 3.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  3) probes.tedious 3.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  4) probes.tedious 3.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  5) probes.tedious 3.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  6) probes.tedious 3.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  7) probes.tedious 3.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  8) probes.tedious 3.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  9) probes.tedious 3.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  10) probes.tedious 3.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.0
updated 1 package and audited 894 packages in 5.833s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:09.388Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:09.388Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:09.388Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:09.389Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:09.468Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:09.632Z appoptics:patching patched crypto 
2022-04-25T18:51:09.651Z appoptics:patching patched https 
2022-04-25T18:51:09.652Z appoptics:patching patched http 
2022-04-25T18:51:09.732Z appoptics:patching patched tedious 4.0.0
2022-04-25T18:51:09.736Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 4.0.0
       should support basic queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  2) probes.tedious 4.0.0
       should support parameters with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  3) probes.tedious 4.0.0
       should sanitize query with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  4) probes.tedious 4.0.0
       should truncate long queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  5) probes.tedious 4.0.0
       should do nothing when disabled with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  6) probes.tedious 4.0.0
       should support basic queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  7) probes.tedious 4.0.0
       should support parameters with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  8) probes.tedious 4.0.0
       should sanitize query with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  9) probes.tedious 4.0.0
       should truncate long queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)

  10) probes.tedious 4.0.0
       should do nothing when disabled with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (internal/timers.js:554:17)
      at processTimers (internal/timers.js:497:7)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.1
updated 1 package and audited 894 packages in 5.677s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:19.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:19.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:19.922Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:19.922Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:20.039Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:20.189Z appoptics:patching patched crypto 
2022-04-25T18:51:20.209Z appoptics:patching patched https 
2022-04-25T18:51:20.210Z appoptics:patching patched http 
2022-04-25T18:51:20.287Z appoptics:patching patched tedious 4.0.1
2022-04-25T18:51:20.291Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.2
updated 1 package and audited 894 packages in 4.493s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:29.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:29.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:29.081Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:29.082Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:29.168Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:29.403Z appoptics:patching patched crypto 
2022-04-25T18:51:29.445Z appoptics:patching patched https 
2022-04-25T18:51:29.446Z appoptics:patching patched http 
2022-04-25T18:51:29.525Z appoptics:patching patched tedious 4.0.2
2022-04-25T18:51:29.529Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.3
updated 1 package and audited 894 packages in 4.36s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:38.223Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:38.223Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:38.223Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:38.224Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:38.300Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:38.446Z appoptics:patching patched crypto 
2022-04-25T18:51:38.466Z appoptics:patching patched https 
2022-04-25T18:51:38.466Z appoptics:patching patched http 
2022-04-25T18:51:38.543Z appoptics:patching patched tedious 4.0.3
2022-04-25T18:51:38.547Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.4
updated 1 package and audited 894 packages in 5.006s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:47.887Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:47.888Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:47.888Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:47.889Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:47.966Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:48.216Z appoptics:patching patched crypto 
2022-04-25T18:51:48.249Z appoptics:patching patched https 
2022-04-25T18:51:48.249Z appoptics:patching patched http 
2022-04-25T18:51:48.333Z appoptics:patching patched tedious 4.0.4
2022-04-25T18:51:48.337Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.0
added 29 packages from 62 contributors, updated 1 package and audited 923 packages in 6.659s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:51:59.318Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:59.319Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:59.319Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:59.319Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:59.394Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:59.548Z appoptics:patching patched crypto 
2022-04-25T18:51:59.601Z appoptics:patching patched https 
2022-04-25T18:51:59.602Z appoptics:patching patched http 
2022-04-25T18:51:59.669Z appoptics:patching patched zlib 
2022-04-25T18:51:59.718Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:59.718Z appoptics:patching patched fs 
2022-04-25T18:51:59.850Z appoptics:patching patched tedious 4.1.0
2022-04-25T18:51:59.854Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.1
updated 1 package and audited 923 packages in 5.015s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:52:09.369Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:09.369Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:09.369Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:09.370Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:09.445Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:09.608Z appoptics:patching patched crypto 
2022-04-25T18:52:09.639Z appoptics:patching patched https 
2022-04-25T18:52:09.642Z appoptics:patching patched http 
2022-04-25T18:52:09.730Z appoptics:patching patched zlib 
2022-04-25T18:52:09.780Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:09.781Z appoptics:patching patched fs 
2022-04-25T18:52:09.918Z appoptics:patching patched tedious 4.1.1
2022-04-25T18:52:09.922Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.2
updated 1 package and audited 923 packages in 4.611s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:52:18.923Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:18.924Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:18.924Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:18.925Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:19.004Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:19.205Z appoptics:patching patched crypto 
2022-04-25T18:52:19.225Z appoptics:patching patched https 
2022-04-25T18:52:19.226Z appoptics:patching patched http 
2022-04-25T18:52:19.303Z appoptics:patching patched zlib 
2022-04-25T18:52:19.355Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:19.355Z appoptics:patching patched fs 
2022-04-25T18:52:19.500Z appoptics:patching patched tedious 4.1.2
2022-04-25T18:52:19.504Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.3
updated 1 package and audited 923 packages in 4.714s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:52:28.593Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:28.594Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:28.594Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:28.595Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:28.686Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:28.902Z appoptics:patching patched crypto 
2022-04-25T18:52:28.946Z appoptics:patching patched https 
2022-04-25T18:52:28.947Z appoptics:patching patched http 
2022-04-25T18:52:29.009Z appoptics:patching patched zlib 
2022-04-25T18:52:29.053Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:29.053Z appoptics:patching patched fs 
2022-04-25T18:52:29.199Z appoptics:patching patched tedious 4.1.3
2022-04-25T18:52:29.203Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.1.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.1.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.1.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.1.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.1.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.1.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.2.0
updated 1 package and audited 923 packages in 4.897s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:52:38.391Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:38.392Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:38.392Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:38.392Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:38.469Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:38.618Z appoptics:patching patched crypto 
2022-04-25T18:52:38.638Z appoptics:patching patched https 
2022-04-25T18:52:38.638Z appoptics:patching patched http 
2022-04-25T18:52:38.706Z appoptics:patching patched zlib 
2022-04-25T18:52:38.753Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:38.753Z appoptics:patching patched fs 
2022-04-25T18:52:38.881Z appoptics:patching patched tedious 4.2.0
2022-04-25T18:52:38.884Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 4.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 4.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 4.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 4.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 4.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 4.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 4.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 4.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 4.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 4.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 4.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.0
updated 1 package and audited 923 packages in 6.111s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:52:49.424Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:49.425Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:49.425Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:49.425Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:49.510Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:49.675Z appoptics:patching patched crypto 
2022-04-25T18:52:49.696Z appoptics:patching patched https 
2022-04-25T18:52:49.697Z appoptics:patching patched http 
2022-04-25T18:52:49.761Z appoptics:patching patched zlib 
2022-04-25T18:52:49.807Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:49.807Z appoptics:patching patched fs 
2022-04-25T18:52:49.946Z appoptics:patching patched tedious 5.0.0
2022-04-25T18:52:49.950Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.1
updated 1 package and audited 923 packages in 6.391s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:00.684Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:00.685Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:00.685Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:00.686Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:00.773Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:00.942Z appoptics:patching patched crypto 
2022-04-25T18:53:00.962Z appoptics:patching patched https 
2022-04-25T18:53:00.962Z appoptics:patching patched http 
2022-04-25T18:53:01.024Z appoptics:patching patched zlib 
2022-04-25T18:53:01.070Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:01.070Z appoptics:patching patched fs 
2022-04-25T18:53:01.195Z appoptics:patching patched tedious 5.0.1
2022-04-25T18:53:01.199Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.2
updated 1 package and audited 923 packages in 5.67s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:11.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:11.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:11.267Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:11.267Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:11.342Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:11.520Z appoptics:patching patched crypto 
2022-04-25T18:53:11.540Z appoptics:patching patched https 
2022-04-25T18:53:11.540Z appoptics:patching patched http 
2022-04-25T18:53:11.622Z appoptics:patching patched zlib 
2022-04-25T18:53:11.668Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:11.668Z appoptics:patching patched fs 
2022-04-25T18:53:11.796Z appoptics:patching patched tedious 5.0.2
2022-04-25T18:53:11.799Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.3
updated 1 package and audited 923 packages in 5.023s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:21.132Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:21.133Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:21.133Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:21.134Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:21.213Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:21.399Z appoptics:patching patched crypto 
2022-04-25T18:53:21.441Z appoptics:patching patched https 
2022-04-25T18:53:21.441Z appoptics:patching patched http 
2022-04-25T18:53:21.532Z appoptics:patching patched zlib 
2022-04-25T18:53:21.618Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:21.618Z appoptics:patching patched fs 
2022-04-25T18:53:21.824Z appoptics:patching patched tedious 5.0.3
2022-04-25T18:53:21.829Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 5.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 5.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 5.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 5.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 5.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 5.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 5.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 5.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 5.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 5.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 5.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.0
updated 1 package and audited 923 packages in 4.958s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:31.346Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:31.347Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:31.347Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:31.348Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:31.423Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:31.581Z appoptics:patching patched crypto 
2022-04-25T18:53:31.610Z appoptics:patching patched https 
2022-04-25T18:53:31.611Z appoptics:patching patched http 
2022-04-25T18:53:31.670Z appoptics:patching patched zlib 
2022-04-25T18:53:31.717Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:31.717Z appoptics:patching patched fs 
2022-04-25T18:53:31.855Z appoptics:patching patched tedious 6.0.0
2022-04-25T18:53:31.860Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.1
updated 1 package and audited 923 packages in 5.84s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:42.187Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:42.188Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:42.188Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:42.189Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:42.268Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:42.462Z appoptics:patching patched crypto 
2022-04-25T18:53:42.502Z appoptics:patching patched https 
2022-04-25T18:53:42.503Z appoptics:patching patched http 
2022-04-25T18:53:42.560Z appoptics:patching patched zlib 
2022-04-25T18:53:42.606Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:42.606Z appoptics:patching patched fs 
2022-04-25T18:53:42.732Z appoptics:patching patched tedious 6.0.1
2022-04-25T18:53:42.736Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.0
updated 1 package and audited 923 packages in 4.558s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:53:51.597Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:51.597Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:51.597Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:51.598Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:51.683Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:51.836Z appoptics:patching patched crypto 
2022-04-25T18:53:51.857Z appoptics:patching patched https 
2022-04-25T18:53:51.857Z appoptics:patching patched http 
2022-04-25T18:53:51.917Z appoptics:patching patched zlib 
2022-04-25T18:53:51.963Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:51.964Z appoptics:patching patched fs 
2022-04-25T18:53:52.086Z appoptics:patching patched tedious 6.1.0
2022-04-25T18:53:52.090Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.1
updated 1 package and audited 923 packages in 5.759s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:02.159Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:02.160Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:02.160Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:02.161Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:02.237Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:02.388Z appoptics:patching patched crypto 
2022-04-25T18:54:02.409Z appoptics:patching patched https 
2022-04-25T18:54:02.409Z appoptics:patching patched http 
2022-04-25T18:54:02.503Z appoptics:patching patched zlib 
2022-04-25T18:54:02.564Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:02.564Z appoptics:patching patched fs 
2022-04-25T18:54:02.705Z appoptics:patching patched tedious 6.1.1
2022-04-25T18:54:02.709Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.2
updated 1 package and audited 923 packages in 5.536s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:12.553Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:12.554Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:12.554Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:12.555Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:12.656Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:12.861Z appoptics:patching patched crypto 
2022-04-25T18:54:12.904Z appoptics:patching patched https 
2022-04-25T18:54:12.905Z appoptics:patching patched http 
2022-04-25T18:54:12.972Z appoptics:patching patched zlib 
2022-04-25T18:54:13.017Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:13.017Z appoptics:patching patched fs 
2022-04-25T18:54:13.143Z appoptics:patching patched tedious 6.1.2
2022-04-25T18:54:13.147Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 6.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 6.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 6.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 6.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 6.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  8) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 6.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 6.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 6.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 6.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 6.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 6.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at processTicksAndRejections (internal/process/task_queues.js:83:21)

  18) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.0
updated 1 package and audited 923 packages in 4.577s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:22.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:22.178Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:22.178Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:22.178Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:22.278Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:22.482Z appoptics:patching patched crypto 
2022-04-25T18:54:22.531Z appoptics:patching patched https 
2022-04-25T18:54:22.532Z appoptics:patching patched http 
2022-04-25T18:54:22.599Z appoptics:patching patched zlib 
2022-04-25T18:54:22.657Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:22.657Z appoptics:patching patched fs 
2022-04-25T18:54:23.090Z appoptics:patching patched tedious 6.2.0
2022-04-25T18:54:23.117Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (42ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.1
added 1 package, removed 1 package, updated 1 package and audited 923 packages in 4.814s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:32.232Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:32.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:32.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:32.233Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:32.317Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:32.469Z appoptics:patching patched crypto 
2022-04-25T18:54:32.494Z appoptics:patching patched https 
2022-04-25T18:54:32.495Z appoptics:patching patched http 
2022-04-25T18:54:32.555Z appoptics:patching patched zlib 
2022-04-25T18:54:32.601Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:32.601Z appoptics:patching patched fs 
2022-04-25T18:54:32.723Z appoptics:patching patched tedious 6.2.1
2022-04-25T18:54:32.727Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (39ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.3.0
added 10 packages from 5 contributors, updated 1 package and audited 933 packages in 5.566s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:42.583Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:42.583Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:42.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:42.584Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:42.664Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:42.814Z appoptics:patching patched crypto 
2022-04-25T18:54:42.835Z appoptics:patching patched https 
2022-04-25T18:54:42.835Z appoptics:patching patched http 
2022-04-25T18:54:42.889Z appoptics:patching patched zlib 
2022-04-25T18:54:42.895Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:42.896Z appoptics:patching patched fs 
2022-04-25T18:54:43.107Z appoptics:patching patched tedious 6.3.0
2022-04-25T18:54:43.111Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (48ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.4.0
added 1 package from 35 contributors, updated 1 package and audited 934 packages in 4.992s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:54:52.849Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:52.849Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:52.849Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:52.850Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:52.925Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:53.075Z appoptics:patching patched crypto 
2022-04-25T18:54:53.100Z appoptics:patching patched https 
2022-04-25T18:54:53.100Z appoptics:patching patched http 
2022-04-25T18:54:53.156Z appoptics:patching patched zlib 
2022-04-25T18:54:53.163Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:53.163Z appoptics:patching patched fs 
2022-04-25T18:54:53.383Z appoptics:patching patched tedious 6.4.0
2022-04-25T18:54:53.391Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (43ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.5.0
added 2 packages from 1 contributor, removed 1 package, updated 3 packages and audited 935 packages in 6.351s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:04.136Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:04.137Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:04.137Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:04.138Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:04.215Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:04.370Z appoptics:patching patched crypto 
2022-04-25T18:55:04.392Z appoptics:patching patched https 
2022-04-25T18:55:04.392Z appoptics:patching patched http 
2022-04-25T18:55:04.448Z appoptics:patching patched zlib 
2022-04-25T18:55:04.455Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:04.455Z appoptics:patching patched fs 
2022-04-25T18:55:04.674Z appoptics:patching patched tedious 6.5.0
2022-04-25T18:55:04.678Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (43ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.0
updated 1 package and audited 935 packages in 6.063s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:15.113Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:15.114Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:15.114Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:15.115Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:15.195Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:15.352Z appoptics:patching patched crypto 
2022-04-25T18:55:15.373Z appoptics:patching patched https 
2022-04-25T18:55:15.373Z appoptics:patching patched http 
2022-04-25T18:55:15.431Z appoptics:patching patched zlib 
2022-04-25T18:55:15.437Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:15.437Z appoptics:patching patched fs 
2022-04-25T18:55:15.653Z appoptics:patching patched tedious 6.6.0
2022-04-25T18:55:15.657Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (45ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.1
added 1 package from 2 contributors, updated 1 package and audited 936 packages in 6.449s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:26.516Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:26.516Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:26.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:26.517Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:26.599Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:26.752Z appoptics:patching patched crypto 
2022-04-25T18:55:26.773Z appoptics:patching patched https 
2022-04-25T18:55:26.773Z appoptics:patching patched http 
2022-04-25T18:55:26.828Z appoptics:patching patched zlib 
2022-04-25T18:55:26.835Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:26.835Z appoptics:patching patched fs 
2022-04-25T18:55:27.053Z appoptics:patching patched tedious 6.6.1
2022-04-25T18:55:27.057Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (43ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.2
updated 1 package and audited 936 packages in 5.103s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:36.533Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:36.533Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:36.533Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:36.534Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:36.624Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:36.803Z appoptics:patching patched crypto 
2022-04-25T18:55:36.846Z appoptics:patching patched https 
2022-04-25T18:55:36.847Z appoptics:patching patched http 
2022-04-25T18:55:36.923Z appoptics:patching patched zlib 
2022-04-25T18:55:36.930Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:36.930Z appoptics:patching patched fs 
2022-04-25T18:55:37.192Z appoptics:patching patched tedious 6.6.2
2022-04-25T18:55:37.196Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (39ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.3
updated 1 package and audited 936 packages in 5.167s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:46.622Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:46.623Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:46.623Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:46.624Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:46.698Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:46.850Z appoptics:patching patched crypto 
2022-04-25T18:55:46.870Z appoptics:patching patched https 
2022-04-25T18:55:46.870Z appoptics:patching patched http 
2022-04-25T18:55:46.927Z appoptics:patching patched zlib 
2022-04-25T18:55:46.934Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:46.934Z appoptics:patching patched fs 
2022-04-25T18:55:47.153Z appoptics:patching patched tedious 6.6.3
2022-04-25T18:55:47.157Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (47ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.4
updated 1 package and audited 936 packages in 5.168s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:55:56.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:56.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:56.617Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:56.618Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:56.693Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:56.857Z appoptics:patching patched crypto 
2022-04-25T18:55:56.898Z appoptics:patching patched https 
2022-04-25T18:55:56.898Z appoptics:patching patched http 
2022-04-25T18:55:56.949Z appoptics:patching patched zlib 
2022-04-25T18:55:56.955Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:56.956Z appoptics:patching patched fs 
2022-04-25T18:55:57.177Z appoptics:patching patched tedious 6.6.4
2022-04-25T18:55:57.181Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (40ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.5
updated 1 package and audited 936 packages in 5.315s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:56:06.918Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:06.919Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:06.919Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:06.920Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:06.995Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:07.146Z appoptics:patching patched crypto 
2022-04-25T18:56:07.167Z appoptics:patching patched https 
2022-04-25T18:56:07.168Z appoptics:patching patched http 
2022-04-25T18:56:07.223Z appoptics:patching patched zlib 
2022-04-25T18:56:07.230Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:07.230Z appoptics:patching patched fs 
2022-04-25T18:56:07.448Z appoptics:patching patched tedious 6.6.5
2022-04-25T18:56:07.452Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (52ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.6
updated 1 package and audited 936 packages in 6.072s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:56:17.835Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:17.836Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:17.836Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:17.836Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:17.908Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:18.066Z appoptics:patching patched crypto 
2022-04-25T18:56:18.086Z appoptics:patching patched https 
2022-04-25T18:56:18.086Z appoptics:patching patched http 
2022-04-25T18:56:18.142Z appoptics:patching patched zlib 
2022-04-25T18:56:18.149Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:18.149Z appoptics:patching patched fs 
2022-04-25T18:56:18.369Z appoptics:patching patched tedious 6.6.6
2022-04-25T18:56:18.374Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (44ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.0
updated 1 package and audited 936 packages in 5.885s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:56:28.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:28.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:28.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:28.563Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:28.639Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:28.790Z appoptics:patching patched crypto 
2022-04-25T18:56:28.810Z appoptics:patching patched https 
2022-04-25T18:56:28.811Z appoptics:patching patched http 
2022-04-25T18:56:28.869Z appoptics:patching patched zlib 
2022-04-25T18:56:28.875Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:28.875Z appoptics:patching patched fs 
2022-04-25T18:56:29.097Z appoptics:patching patched tedious 6.7.0
2022-04-25T18:56:29.101Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (42ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.1
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 923 packages in 7.023s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:56:40.536Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:40.537Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:40.537Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:40.538Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:40.645Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:40.810Z appoptics:patching patched crypto 
2022-04-25T18:56:40.832Z appoptics:patching patched https 
2022-04-25T18:56:40.833Z appoptics:patching patched http 
2022-04-25T18:56:40.950Z appoptics:patching patched zlib 
2022-04-25T18:56:40.954Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:40.954Z appoptics:patching patched fs 
2022-04-25T18:56:41.125Z appoptics:patching patched tedious 6.7.1
2022-04-25T18:56:41.129Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (53ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@7.0.0
added 19 packages from 45 contributors, removed 8 packages, updated 6 packages, moved 1 package and audited 934 packages in 6.304s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:56:52.032Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:52.033Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:52.033Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:52.034Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:52.162Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:52.408Z appoptics:patching patched crypto 
2022-04-25T18:56:52.465Z appoptics:patching patched https 
2022-04-25T18:56:52.467Z appoptics:patching patched http 
2022-04-25T18:56:52.547Z appoptics:patching patched zlib 
2022-04-25T18:56:52.554Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:52.554Z appoptics:patching patched fs 
2022-04-25T18:56:52.779Z appoptics:patching patched tedious 7.0.0
2022-04-25T18:56:52.783Z appoptics:debug starting runtimeMetrics


  probes.tedious 7.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (50ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.0
added 1 package from 1 contributor, updated 1 package and audited 935 packages in 5.432s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:02.585Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:02.586Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:02.586Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:02.587Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:02.691Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:02.860Z appoptics:patching patched crypto 
2022-04-25T18:57:02.893Z appoptics:patching patched https 
2022-04-25T18:57:02.893Z appoptics:patching patched http 
2022-04-25T18:57:02.992Z appoptics:patching patched zlib 
2022-04-25T18:57:03.006Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:03.007Z appoptics:patching patched fs 
2022-04-25T18:57:03.342Z appoptics:patching patched tedious 8.0.0
2022-04-25T18:57:03.346Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (45ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
updated 1 package and audited 935 packages in 4.922s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:12.742Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:12.743Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:12.743Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:12.744Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:12.816Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:12.978Z appoptics:patching patched crypto 
2022-04-25T18:57:12.997Z appoptics:patching patched https 
2022-04-25T18:57:12.998Z appoptics:patching patched http 
2022-04-25T18:57:13.055Z appoptics:patching patched zlib 
2022-04-25T18:57:13.062Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:13.062Z appoptics:patching patched fs 
2022-04-25T18:57:13.330Z appoptics:patching patched tedious 8.0.1
2022-04-25T18:57:13.334Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (43ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.0
updated 2 packages and audited 935 packages in 5.893s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:23.652Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:23.652Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:23.653Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:23.653Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:23.728Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:23.898Z appoptics:patching patched crypto 
2022-04-25T18:57:23.968Z appoptics:patching patched https 
2022-04-25T18:57:23.968Z appoptics:patching patched http 
2022-04-25T18:57:24.047Z appoptics:patching patched zlib 
2022-04-25T18:57:24.053Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:24.054Z appoptics:patching patched fs 
2022-04-25T18:57:24.318Z appoptics:patching patched tedious 8.1.0
2022-04-25T18:57:24.322Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.1
updated 1 package and audited 935 packages in 5.332s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:34.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:34.283Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:34.283Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:34.284Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:34.370Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:34.522Z appoptics:patching patched crypto 
2022-04-25T18:57:34.543Z appoptics:patching patched https 
2022-04-25T18:57:34.543Z appoptics:patching patched http 
2022-04-25T18:57:34.597Z appoptics:patching patched zlib 
2022-04-25T18:57:34.604Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:34.604Z appoptics:patching patched fs 
2022-04-25T18:57:34.847Z appoptics:patching patched tedious 8.1.1
2022-04-25T18:57:34.851Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.2.0
updated 1 package and audited 935 packages in 5.193s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:44.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:44.618Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:44.618Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:44.619Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:44.698Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:44.882Z appoptics:patching patched crypto 
2022-04-25T18:57:44.927Z appoptics:patching patched https 
2022-04-25T18:57:44.927Z appoptics:patching patched http 
2022-04-25T18:57:45.001Z appoptics:patching patched zlib 
2022-04-25T18:57:45.008Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:45.008Z appoptics:patching patched fs 
2022-04-25T18:57:45.295Z appoptics:patching patched tedious 8.2.0
2022-04-25T18:57:45.299Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:57:46 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.0
updated 1 package and audited 935 packages in 5.642s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:57:55.281Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:55.282Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:55.282Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:55.283Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:55.358Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:55.555Z appoptics:patching patched crypto 
2022-04-25T18:57:55.592Z appoptics:patching patched https 
2022-04-25T18:57:55.593Z appoptics:patching patched http 
2022-04-25T18:57:55.663Z appoptics:patching patched zlib 
2022-04-25T18:57:55.670Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:55.670Z appoptics:patching patched fs 
2022-04-25T18:57:55.957Z appoptics:patching patched tedious 8.3.0
2022-04-25T18:57:55.961Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:57:56 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:57:56 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.1
updated 1 package and audited 935 packages in 5.578s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:05.901Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:05.902Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:05.902Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:05.902Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:05.978Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:06.132Z appoptics:patching patched crypto 
2022-04-25T18:58:06.151Z appoptics:patching patched https 
2022-04-25T18:58:06.152Z appoptics:patching patched http 
2022-04-25T18:58:06.238Z appoptics:patching patched zlib 
2022-04-25T18:58:06.244Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:06.245Z appoptics:patching patched fs 
2022-04-25T18:58:06.514Z appoptics:patching patched tedious 8.3.1
2022-04-25T18:58:06.518Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:58:07 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:58:07 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 8.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 8.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 8.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 8.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 8.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 8.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 8.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 8.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 8.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 8.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 8.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.0
updated 1 package and audited 935 packages in 6.05s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:17.306Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:17.307Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:17.307Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:17.309Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:17.461Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:17.665Z appoptics:patching patched crypto 
2022-04-25T18:58:17.698Z appoptics:patching patched https 
2022-04-25T18:58:17.698Z appoptics:patching patched http 
2022-04-25T18:58:17.782Z appoptics:patching patched zlib 
2022-04-25T18:58:17.788Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:17.789Z appoptics:patching patched fs 
2022-04-25T18:58:18.073Z appoptics:patching patched tedious 9.0.0
2022-04-25T18:58:18.077Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:58:18 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.1
updated 1 package and audited 935 packages in 5.338s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:28.079Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:28.080Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:28.080Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:28.081Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:28.178Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:28.468Z appoptics:patching patched crypto 
2022-04-25T18:58:28.538Z appoptics:patching patched https 
2022-04-25T18:58:28.539Z appoptics:patching patched http 
2022-04-25T18:58:28.656Z appoptics:patching patched zlib 
2022-04-25T18:58:28.665Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:28.665Z appoptics:patching patched fs 
2022-04-25T18:58:29.047Z appoptics:patching patched tedious 9.0.1
2022-04-25T18:58:29.057Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:58:29 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.0
updated 1 package and audited 935 packages in 5.304s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:38.751Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:38.752Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:38.752Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:38.752Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:38.841Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:39.002Z appoptics:patching patched crypto 
2022-04-25T18:58:39.022Z appoptics:patching patched https 
2022-04-25T18:58:39.022Z appoptics:patching patched http 
2022-04-25T18:58:39.080Z appoptics:patching patched zlib 
2022-04-25T18:58:39.086Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:39.086Z appoptics:patching patched fs 
2022-04-25T18:58:39.327Z appoptics:patching patched tedious 9.1.0
2022-04-25T18:58:39.331Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:58:40 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.1
updated 3 packages and audited 935 packages in 5.065s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:48.788Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:48.789Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:48.789Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:48.789Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:48.870Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:49.039Z appoptics:patching patched crypto 
2022-04-25T18:58:49.060Z appoptics:patching patched https 
2022-04-25T18:58:49.060Z appoptics:patching patched http 
2022-04-25T18:58:49.117Z appoptics:patching patched zlib 
2022-04-25T18:58:49.124Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:49.124Z appoptics:patching patched fs 
2022-04-25T18:58:49.367Z appoptics:patching patched tedious 9.1.1
2022-04-25T18:58:49.371Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:58:50 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.0
updated 1 package and audited 935 packages in 4.871s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:58:58.818Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:58.819Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:58.819Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:58.819Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:58.896Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:59.051Z appoptics:patching patched crypto 
2022-04-25T18:58:59.072Z appoptics:patching patched https 
2022-04-25T18:58:59.072Z appoptics:patching patched http 
2022-04-25T18:58:59.126Z appoptics:patching patched zlib 
2022-04-25T18:58:59.132Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:59.133Z appoptics:patching patched fs 
2022-04-25T18:58:59.376Z appoptics:patching patched tedious 9.2.0
2022-04-25T18:58:59.380Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:59:00 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:59:00 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.1
updated 1 package and audited 935 packages in 5.917s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:59:09.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:09.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:09.654Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:09.654Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:09.731Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:09.882Z appoptics:patching patched crypto 
2022-04-25T18:59:09.903Z appoptics:patching patched https 
2022-04-25T18:59:09.903Z appoptics:patching patched http 
2022-04-25T18:59:09.960Z appoptics:patching patched zlib 
2022-04-25T18:59:09.966Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:09.966Z appoptics:patching patched fs 
2022-04-25T18:59:10.211Z appoptics:patching patched tedious 9.2.1
2022-04-25T18:59:10.215Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:59:10 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:59:11 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.2
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 922 packages in 5.89s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:59:20.478Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:20.478Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:20.478Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:20.479Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:20.557Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:20.713Z appoptics:patching patched crypto 
2022-04-25T18:59:20.734Z appoptics:patching patched https 
2022-04-25T18:59:20.734Z appoptics:patching patched http 
2022-04-25T18:59:20.813Z appoptics:patching patched zlib 
2022-04-25T18:59:20.817Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:20.817Z appoptics:patching patched fs 
2022-04-25T18:59:20.984Z appoptics:patching patched tedious 9.2.2
2022-04-25T18:59:20.988Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:59:21 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:59:21 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.3
added 22 packages from 54 contributors, updated 2 packages, moved 2 packages and audited 944 packages in 5.614s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:59:31.280Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:31.280Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:31.281Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:31.281Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:31.356Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:31.507Z appoptics:patching patched crypto 
2022-04-25T18:59:31.530Z appoptics:patching patched https 
2022-04-25T18:59:31.531Z appoptics:patching patched http 
2022-04-25T18:59:31.606Z appoptics:patching patched zlib 
2022-04-25T18:59:31.609Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:31.610Z appoptics:patching patched fs 
2022-04-25T18:59:31.922Z appoptics:patching patched tedious 9.2.3
2022-04-25T18:59:31.926Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Mon, 25 Apr 2022 18:59:32 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Mon, 25 Apr 2022 18:59:32 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/task_queues.js:79:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 9.2.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 9.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 9.2.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 9.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 9.2.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 9.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 9.2.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 9.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 9.2.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 9.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 9.2.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@10.0.0
updated 1 package and audited 944 packages in 4.721s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:59:40.962Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:40.962Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:40.962Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:40.963Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:41.038Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:41.222Z appoptics:patching patched crypto 
2022-04-25T18:59:41.265Z appoptics:patching patched https 
2022-04-25T18:59:41.266Z appoptics:patching patched http 
2022-04-25T18:59:41.360Z appoptics:patching patched zlib 
2022-04-25T18:59:41.364Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:41.364Z appoptics:patching patched fs 
2022-04-25T18:59:41.683Z appoptics:patching patched tedious 10.0.0
2022-04-25T18:59:41.687Z appoptics:debug starting runtimeMetrics


  probes.tedious 10.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 10.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 10.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 10.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 10.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 10.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 10.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 10.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 10.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 10.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 10.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 10.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 10.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.0
updated 1 package and audited 944 packages in 4.836s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T18:59:50.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:50.909Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:50.910Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:50.910Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:50.986Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:51.137Z appoptics:patching patched crypto 
2022-04-25T18:59:51.158Z appoptics:patching patched https 
2022-04-25T18:59:51.159Z appoptics:patching patched http 
2022-04-25T18:59:51.236Z appoptics:patching patched zlib 
2022-04-25T18:59:51.239Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:51.239Z appoptics:patching patched fs 
2022-04-25T18:59:51.516Z appoptics:patching patched tedious 11.0.0
2022-04-25T18:59:51.520Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.1
added 1 package from 3 contributors, removed 22 packages, updated 3 packages, moved 2 packages and audited 923 packages in 5.741s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:01.681Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:01.682Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:01.682Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:01.682Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:01.758Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:01.911Z appoptics:patching patched crypto 
2022-04-25T19:00:01.947Z appoptics:patching patched https 
2022-04-25T19:00:01.948Z appoptics:patching patched http 
2022-04-25T19:00:02.037Z appoptics:patching patched zlib 
2022-04-25T19:00:02.041Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:02.041Z appoptics:patching patched fs 
2022-04-25T19:00:02.211Z appoptics:patching patched tedious 11.0.1
2022-04-25T19:00:02.215Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.2
added 1 package from 1 contributor, updated 1 package and audited 924 packages in 5.797s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:12.644Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:12.645Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:12.645Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:12.646Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:12.718Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:12.885Z appoptics:patching patched crypto 
2022-04-25T19:00:12.906Z appoptics:patching patched https 
2022-04-25T19:00:12.906Z appoptics:patching patched http 
2022-04-25T19:00:12.984Z appoptics:patching patched zlib 
2022-04-25T19:00:12.988Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:12.988Z appoptics:patching patched fs 
2022-04-25T19:00:13.154Z appoptics:patching patched tedious 11.0.2
2022-04-25T19:00:13.158Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.3
updated 1 package and audited 924 packages in 5.943s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:23.567Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:23.568Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:23.568Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:23.569Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:23.654Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:23.804Z appoptics:patching patched crypto 
2022-04-25T19:00:23.826Z appoptics:patching patched https 
2022-04-25T19:00:23.826Z appoptics:patching patched http 
2022-04-25T19:00:23.902Z appoptics:patching patched zlib 
2022-04-25T19:00:23.905Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:23.906Z appoptics:patching patched fs 
2022-04-25T19:00:24.117Z appoptics:patching patched tedious 11.0.3
2022-04-25T19:00:24.121Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.4
updated 1 package and audited 924 packages in 6.112s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:34.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:34.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:34.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:34.556Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:34.639Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:34.792Z appoptics:patching patched crypto 
2022-04-25T19:00:34.814Z appoptics:patching patched https 
2022-04-25T19:00:34.814Z appoptics:patching patched http 
2022-04-25T19:00:34.890Z appoptics:patching patched zlib 
2022-04-25T19:00:34.893Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:34.894Z appoptics:patching patched fs 
2022-04-25T19:00:35.056Z appoptics:patching patched tedious 11.0.4
2022-04-25T19:00:35.060Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.5
updated 1 package and audited 924 packages in 5.442s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:44.883Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:44.884Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:44.884Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:44.885Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:44.961Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:45.114Z appoptics:patching patched crypto 
2022-04-25T19:00:45.135Z appoptics:patching patched https 
2022-04-25T19:00:45.136Z appoptics:patching patched http 
2022-04-25T19:00:45.215Z appoptics:patching patched zlib 
2022-04-25T19:00:45.219Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:45.219Z appoptics:patching patched fs 
2022-04-25T19:00:45.409Z appoptics:patching patched tedious 11.0.5
2022-04-25T19:00:45.413Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.6
updated 1 package and audited 924 packages in 4.961s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:00:54.981Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:54.981Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:54.982Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:54.982Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:55.078Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:55.260Z appoptics:patching patched crypto 
2022-04-25T19:00:55.304Z appoptics:patching patched https 
2022-04-25T19:00:55.304Z appoptics:patching patched http 
2022-04-25T19:00:55.403Z appoptics:patching patched zlib 
2022-04-25T19:00:55.407Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:55.407Z appoptics:patching patched fs 
2022-04-25T19:00:55.766Z appoptics:patching patched tedious 11.0.6
2022-04-25T19:00:55.770Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.6
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.6
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.6
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.6
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.6
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.6
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.6
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.6
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.7
updated 1 package and audited 924 packages in 5.606s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:01:05.810Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:05.811Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:05.811Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:05.812Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:05.965Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:06.117Z appoptics:patching patched crypto 
2022-04-25T19:01:06.141Z appoptics:patching patched https 
2022-04-25T19:01:06.141Z appoptics:patching patched http 
2022-04-25T19:01:06.223Z appoptics:patching patched zlib 
2022-04-25T19:01:06.226Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:06.227Z appoptics:patching patched fs 
2022-04-25T19:01:06.438Z appoptics:patching patched tedious 11.0.7
2022-04-25T19:01:06.442Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.7
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.7
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.7
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.7
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.7
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.7
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.7
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.7
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.8
updated 1 package and audited 924 packages in 5.257s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:01:16.197Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:16.198Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:16.198Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:16.198Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:16.274Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:16.426Z appoptics:patching patched crypto 
2022-04-25T19:01:16.446Z appoptics:patching patched https 
2022-04-25T19:01:16.447Z appoptics:patching patched http 
2022-04-25T19:01:16.525Z appoptics:patching patched zlib 
2022-04-25T19:01:16.528Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:16.529Z appoptics:patching patched fs 
2022-04-25T19:01:16.692Z appoptics:patching patched tedious 11.0.8
2022-04-25T19:01:16.696Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.8
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.8
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.8
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.8
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.8
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.8
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.8
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.8
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_01_32_335Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.0.9
added 56 packages from 41 contributors, removed 2 packages, updated 4 packages and audited 1015 packages in 12.422s

92 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:01:33.553Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:33.554Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:33.554Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:33.555Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:33.630Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:33.782Z appoptics:patching patched crypto 
2022-04-25T19:01:33.816Z appoptics:patching patched https 
2022-04-25T19:01:33.817Z appoptics:patching patched http 
2022-04-25T19:01:33.890Z appoptics:patching patched zlib 
2022-04-25T19:01:33.894Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:33.894Z appoptics:patching patched fs 
2022-04-25T19:01:34.071Z appoptics:patching patched tedious 11.0.9
2022-04-25T19:01:34.074Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.9
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.9
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.9
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.9
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.9
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.9
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.9
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.9
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.9
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.9
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.9
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.9
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.9
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_01_45_373Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.0.10
updated 1 package and audited 1015 packages in 8.294s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:01:46.875Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:46.876Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:46.876Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:46.876Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:46.960Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:47.139Z appoptics:patching patched crypto 
2022-04-25T19:01:47.159Z appoptics:patching patched https 
2022-04-25T19:01:47.160Z appoptics:patching patched http 
2022-04-25T19:01:47.238Z appoptics:patching patched zlib 
2022-04-25T19:01:47.241Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:47.242Z appoptics:patching patched fs 
2022-04-25T19:01:47.406Z appoptics:patching patched tedious 11.0.10
2022-04-25T19:01:47.410Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.10
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.10
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.0.10
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.0.10
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.0.10
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.0.10
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.0.10
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.0.10
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.0.10
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.0.10
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.0.10
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.0.10
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.0.10
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_01_59_030Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.1.0
updated 1 package and audited 1015 packages in 8.389s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:02:00.293Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:00.294Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:00.294Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:00.294Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:00.369Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:00.528Z appoptics:patching patched crypto 
2022-04-25T19:02:00.550Z appoptics:patching patched https 
2022-04-25T19:02:00.550Z appoptics:patching patched http 
2022-04-25T19:02:00.634Z appoptics:patching patched zlib 
2022-04-25T19:02:00.638Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:00.638Z appoptics:patching patched fs 
2022-04-25T19:02:00.813Z appoptics:patching patched tedious 11.1.0
2022-04-25T19:02:00.817Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_02_12_835Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.1.1
updated 1 package and audited 1015 packages in 8.825s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:02:14.072Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:14.073Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:14.073Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:14.074Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:14.150Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:14.329Z appoptics:patching patched crypto 
2022-04-25T19:02:14.358Z appoptics:patching patched https 
2022-04-25T19:02:14.359Z appoptics:patching patched http 
2022-04-25T19:02:14.434Z appoptics:patching patched zlib 
2022-04-25T19:02:14.438Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:14.438Z appoptics:patching patched fs 
2022-04-25T19:02:14.609Z appoptics:patching patched tedious 11.1.1
2022-04-25T19:02:14.613Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_02_26_072Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.2.0
updated 1 package and audited 1015 packages in 8.213s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:02:27.313Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:27.314Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:27.314Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:27.315Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:27.404Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:27.590Z appoptics:patching patched crypto 
2022-04-25T19:02:27.611Z appoptics:patching patched https 
2022-04-25T19:02:27.611Z appoptics:patching patched http 
2022-04-25T19:02:27.693Z appoptics:patching patched zlib 
2022-04-25T19:02:27.697Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:27.697Z appoptics:patching patched fs 
2022-04-25T19:02:27.869Z appoptics:patching patched tedious 11.2.0
2022-04-25T19:02:27.873Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  17) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  19) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  20) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_02_38_759Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.3.0
added 1 package from 2 contributors, updated 4 packages and audited 1016 packages in 7.635s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:02:39.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:39.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:39.921Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:39.922Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:39.997Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:40.196Z appoptics:patching patched crypto 
2022-04-25T19:02:40.219Z appoptics:patching patched https 
2022-04-25T19:02:40.219Z appoptics:patching patched http 
2022-04-25T19:02:40.300Z appoptics:patching patched zlib 
2022-04-25T19:02:40.304Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:40.304Z appoptics:patching patched fs 
2022-04-25T19:02:40.478Z appoptics:patching patched tedious 11.3.0
2022-04-25T19:02:40.481Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_02_51_500Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.3.1
updated 1 package and audited 1016 packages in 7.979s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:02:53.176Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:53.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:53.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:53.178Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:53.254Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:53.408Z appoptics:patching patched crypto 
2022-04-25T19:02:53.429Z appoptics:patching patched https 
2022-04-25T19:02:53.429Z appoptics:patching patched http 
2022-04-25T19:02:53.508Z appoptics:patching patched zlib 
2022-04-25T19:02:53.512Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:53.512Z appoptics:patching patched fs 
2022-04-25T19:02:53.682Z appoptics:patching patched tedious 11.3.1
2022-04-25T19:02:53.686Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_03_05_502Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.0
updated 1 package and audited 1016 packages in 8.544s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:03:06.764Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:06.765Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:06.765Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:06.766Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:06.842Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:06.996Z appoptics:patching patched crypto 
2022-04-25T19:03:07.017Z appoptics:patching patched https 
2022-04-25T19:03:07.017Z appoptics:patching patched http 
2022-04-25T19:03:07.094Z appoptics:patching patched zlib 
2022-04-25T19:03:07.097Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:07.098Z appoptics:patching patched fs 
2022-04-25T19:03:07.292Z appoptics:patching patched tedious 11.4.0
2022-04-25T19:03:07.296Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_03_20_581Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.1
updated 1 package and audited 1016 packages in 10.021s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:03:21.862Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:21.862Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:21.863Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:21.863Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:21.939Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:22.097Z appoptics:patching patched crypto 
2022-04-25T19:03:22.120Z appoptics:patching patched https 
2022-04-25T19:03:22.120Z appoptics:patching patched http 
2022-04-25T19:03:22.225Z appoptics:patching patched zlib 
2022-04-25T19:03:22.230Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:22.231Z appoptics:patching patched fs 
2022-04-25T19:03:22.441Z appoptics:patching patched tedious 11.4.1
2022-04-25T19:03:22.445Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_03_33_096Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.4.2
updated 1 package and audited 1016 packages in 7.413s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:03:34.400Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:34.401Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:34.401Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:34.401Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:34.500Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:34.715Z appoptics:patching patched crypto 
2022-04-25T19:03:34.753Z appoptics:patching patched https 
2022-04-25T19:03:34.753Z appoptics:patching patched http 
2022-04-25T19:03:34.837Z appoptics:patching patched zlib 
2022-04-25T19:03:34.841Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:34.842Z appoptics:patching patched fs 
2022-04-25T19:03:35.061Z appoptics:patching patched tedious 11.4.2
2022-04-25T19:03:35.065Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.4.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.4.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.4.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.4.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.4.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.4.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_03_45_509Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.5.0
updated 1 package and audited 1016 packages in 7.097s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:03:46.965Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:46.965Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:46.965Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:46.966Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:47.087Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:47.448Z appoptics:patching patched crypto 
2022-04-25T19:03:47.506Z appoptics:patching patched https 
2022-04-25T19:03:47.510Z appoptics:patching patched http 
2022-04-25T19:03:47.686Z appoptics:patching patched zlib 
2022-04-25T19:03:47.695Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:47.700Z appoptics:patching patched fs 
2022-04-25T19:03:48.078Z appoptics:patching patched tedious 11.5.0
2022-04-25T19:03:48.084Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.5.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.5.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.5.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.5.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.5.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.5.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_03_59_872Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.6.0
updated 1 package and audited 1016 packages in 8.835s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:04:01.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:01.608Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:01.608Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:01.609Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:01.761Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:01.973Z appoptics:patching patched crypto 
2022-04-25T19:04:01.995Z appoptics:patching patched https 
2022-04-25T19:04:01.995Z appoptics:patching patched http 
2022-04-25T19:04:02.072Z appoptics:patching patched zlib 
2022-04-25T19:04:02.075Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:02.076Z appoptics:patching patched fs 
2022-04-25T19:04:02.259Z appoptics:patching patched tedious 11.6.0
2022-04-25T19:04:02.264Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.6.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.6.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.6.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.6.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.6.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.6.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_04_13_166Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.6.1
updated 1 package and audited 1016 packages in 7.925s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:04:14.903Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:14.904Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:14.904Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:14.905Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:14.993Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:15.173Z appoptics:patching patched crypto 
2022-04-25T19:04:15.195Z appoptics:patching patched https 
2022-04-25T19:04:15.196Z appoptics:patching patched http 
2022-04-25T19:04:15.276Z appoptics:patching patched zlib 
2022-04-25T19:04:15.280Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:15.280Z appoptics:patching patched fs 
2022-04-25T19:04:15.455Z appoptics:patching patched tedious 11.6.1
2022-04-25T19:04:15.459Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.6.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.6.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.6.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.6.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.6.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.6.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_04_26_803Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.7.0
updated 1 package and audited 1016 packages in 8.338s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:04:28.244Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:28.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:28.245Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:28.246Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:28.322Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:28.481Z appoptics:patching patched crypto 
2022-04-25T19:04:28.501Z appoptics:patching patched https 
2022-04-25T19:04:28.502Z appoptics:patching patched http 
2022-04-25T19:04:28.577Z appoptics:patching patched zlib 
2022-04-25T19:04:28.581Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:28.581Z appoptics:patching patched fs 
2022-04-25T19:04:28.756Z appoptics:patching patched tedious 11.7.0
2022-04-25T19:04:28.760Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.7.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.7.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.7.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.7.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.7.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.7.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_04_39_528Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@11.8.0
updated 1 package and audited 1016 packages in 7.605s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:04:40.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:40.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:40.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:40.815Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:40.909Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:41.079Z appoptics:patching patched crypto 
2022-04-25T19:04:41.102Z appoptics:patching patched https 
2022-04-25T19:04:41.103Z appoptics:patching patched http 
2022-04-25T19:04:41.179Z appoptics:patching patched zlib 
2022-04-25T19:04:41.182Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:41.183Z appoptics:patching patched fs 
2022-04-25T19:04:41.359Z appoptics:patching patched tedious 11.8.0
2022-04-25T19:04:41.363Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 11.8.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 11.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 11.8.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 11.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 11.8.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 11.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 11.8.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 11.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 11.8.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 11.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 11.8.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_04_52_140Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.0.0
updated 1 package and audited 1016 packages in 7.604s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:04:53.434Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:53.435Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:53.435Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:53.435Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:53.525Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:53.693Z appoptics:patching patched crypto 
2022-04-25T19:04:53.718Z appoptics:patching patched https 
2022-04-25T19:04:53.718Z appoptics:patching patched http 
2022-04-25T19:04:53.888Z appoptics:patching patched zlib 
2022-04-25T19:04:53.892Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:53.892Z appoptics:patching patched fs 
2022-04-25T19:04:54.102Z appoptics:patching patched tedious 12.0.0
2022-04-25T19:04:54.106Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_05_06_543Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.1.0
updated 1 package and audited 1016 packages in 9.228s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:05:07.881Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:07.882Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:07.882Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:07.883Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:07.960Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:08.117Z appoptics:patching patched crypto 
2022-04-25T19:05:08.138Z appoptics:patching patched https 
2022-04-25T19:05:08.138Z appoptics:patching patched http 
2022-04-25T19:05:08.218Z appoptics:patching patched zlib 
2022-04-25T19:05:08.222Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:08.222Z appoptics:patching patched fs 
2022-04-25T19:05:08.423Z appoptics:patching patched tedious 12.1.0
2022-04-25T19:05:08.429Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_05_19_980Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.2.0
updated 1 package and audited 1016 packages in 8.273s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:05:21.213Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:21.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:21.214Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:21.215Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:21.290Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:21.443Z appoptics:patching patched crypto 
2022-04-25T19:05:21.464Z appoptics:patching patched https 
2022-04-25T19:05:21.465Z appoptics:patching patched http 
2022-04-25T19:05:21.544Z appoptics:patching patched zlib 
2022-04-25T19:05:21.548Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:21.548Z appoptics:patching patched fs 
2022-04-25T19:05:21.783Z appoptics:patching patched tedious 12.2.0
2022-04-25T19:05:21.787Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_05_33_488Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@12.3.0
updated 3 packages and audited 1016 packages in 8.525s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:05:34.730Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:34.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:34.731Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:34.731Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:34.807Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:34.969Z appoptics:patching patched crypto 
2022-04-25T19:05:34.990Z appoptics:patching patched https 
2022-04-25T19:05:34.991Z appoptics:patching patched http 
2022-04-25T19:05:35.067Z appoptics:patching patched zlib 
2022-04-25T19:05:35.070Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:35.070Z appoptics:patching patched fs 
2022-04-25T19:05:35.254Z appoptics:patching patched tedious 12.3.0
2022-04-25T19:05:35.258Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 12.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 12.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 12.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 12.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 12.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 12.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 12.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 12.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 12.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 12.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 12.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_05_47_201Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.0
removed 17 packages, updated 1 package and audited 999 packages in 8.542s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:05:48.382Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:48.383Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:48.383Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:48.384Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:48.454Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:48.621Z appoptics:patching patched crypto 
2022-04-25T19:05:48.655Z appoptics:patching patched https 
2022-04-25T19:05:48.655Z appoptics:patching patched http 
2022-04-25T19:05:48.725Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:48.725Z appoptics:patching patched fs 
2022-04-25T19:05:48.744Z appoptics:patching patched zlib 
2022-04-25T19:05:48.940Z appoptics:patching patched tedious 13.0.0
2022-04-25T19:05:48.945Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_05_59_927Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.1
updated 1 package and audited 999 packages in 7.836s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:06:01.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:01.446Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:01.446Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:01.447Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:01.538Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:01.703Z appoptics:patching patched crypto 
2022-04-25T19:06:01.726Z appoptics:patching patched https 
2022-04-25T19:06:01.727Z appoptics:patching patched http 
2022-04-25T19:06:01.811Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:01.812Z appoptics:patching patched fs 
2022-04-25T19:06:01.834Z appoptics:patching patched zlib 
2022-04-25T19:06:02.019Z appoptics:patching patched tedious 13.0.1
2022-04-25T19:06:02.023Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_06_14_498Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.2
updated 1 package and audited 999 packages in 9.213s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:06:15.757Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:15.758Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:15.758Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:15.759Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:15.838Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:15.990Z appoptics:patching patched crypto 
2022-04-25T19:06:16.013Z appoptics:patching patched https 
2022-04-25T19:06:16.014Z appoptics:patching patched http 
2022-04-25T19:06:16.091Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:16.092Z appoptics:patching patched fs 
2022-04-25T19:06:16.110Z appoptics:patching patched zlib 
2022-04-25T19:06:16.286Z appoptics:patching patched tedious 13.0.2
2022-04-25T19:06:16.290Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_06_27_109Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.3
updated 1 package and audited 999 packages in 7.601s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:06:28.331Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:28.331Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:28.331Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:28.332Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:28.407Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:28.571Z appoptics:patching patched crypto 
2022-04-25T19:06:28.593Z appoptics:patching patched https 
2022-04-25T19:06:28.593Z appoptics:patching patched http 
2022-04-25T19:06:28.682Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:28.682Z appoptics:patching patched fs 
2022-04-25T19:06:28.706Z appoptics:patching patched zlib 
2022-04-25T19:06:28.892Z appoptics:patching patched tedious 13.0.3
2022-04-25T19:06:28.896Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_06_40_397Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.4
updated 1 package and audited 999 packages in 8.194s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:06:41.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:41.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:41.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:41.652Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:41.748Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:41.929Z appoptics:patching patched crypto 
2022-04-25T19:06:41.973Z appoptics:patching patched https 
2022-04-25T19:06:41.973Z appoptics:patching patched http 
2022-04-25T19:06:42.069Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:42.070Z appoptics:patching patched fs 
2022-04-25T19:06:42.089Z appoptics:patching patched zlib 
2022-04-25T19:06:42.332Z appoptics:patching patched tedious 13.0.4
2022-04-25T19:06:42.336Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_06_53_897Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.0.5
updated 1 package and audited 999 packages in 8.597s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:06:55.627Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:55.628Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:55.628Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:55.629Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:55.756Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:55.951Z appoptics:patching patched crypto 
2022-04-25T19:06:55.995Z appoptics:patching patched https 
2022-04-25T19:06:55.996Z appoptics:patching patched http 
2022-04-25T19:06:56.094Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:56.095Z appoptics:patching patched fs 
2022-04-25T19:06:56.114Z appoptics:patching patched zlib 
2022-04-25T19:06:56.322Z appoptics:patching patched tedious 13.0.5
2022-04-25T19:06:56.326Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_07_06_491Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.1.0
updated 1 package and audited 999 packages in 7.649s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:07:08.769Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:08.769Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:08.769Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:08.770Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:08.849Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:09.008Z appoptics:patching patched crypto 
2022-04-25T19:07:09.034Z appoptics:patching patched https 
2022-04-25T19:07:09.034Z appoptics:patching patched http 
2022-04-25T19:07:09.139Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:09.139Z appoptics:patching patched fs 
2022-04-25T19:07:09.159Z appoptics:patching patched zlib 
2022-04-25T19:07:09.349Z appoptics:patching patched tedious 13.1.0
2022-04-25T19:07:09.353Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_07_19_881Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@13.2.0
updated 1 package and audited 999 packages in 7.734s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:07:21.753Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:21.754Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:21.754Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:21.754Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:21.829Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:21.987Z appoptics:patching patched crypto 
2022-04-25T19:07:22.008Z appoptics:patching patched https 
2022-04-25T19:07:22.008Z appoptics:patching patched http 
2022-04-25T19:07:22.084Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:22.085Z appoptics:patching patched fs 
2022-04-25T19:07:22.103Z appoptics:patching patched zlib 
2022-04-25T19:07:22.280Z appoptics:patching patched tedious 13.2.0
2022-04-25T19:07:22.284Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 13.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 13.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 13.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 13.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 13.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 13.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 13.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 13.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 13.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 13.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 13.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_07_32_996Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.0.0
updated 1 package and audited 999 packages in 8.246s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:07:34.924Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:34.924Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:34.924Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:34.925Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:35.000Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:35.156Z appoptics:patching patched crypto 
2022-04-25T19:07:35.178Z appoptics:patching patched https 
2022-04-25T19:07:35.179Z appoptics:patching patched http 
2022-04-25T19:07:35.255Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:35.256Z appoptics:patching patched fs 
2022-04-25T19:07:35.274Z appoptics:patching patched zlib 
2022-04-25T19:07:35.451Z appoptics:patching patched tedious 14.0.0
2022-04-25T19:07:35.455Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.0.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.0.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.0.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.0.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.0.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.0.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_07_46_150Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.1.0
updated 1 package and audited 999 packages in 7.691s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:07:47.568Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:47.568Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:47.568Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:47.569Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:47.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:47.831Z appoptics:patching patched crypto 
2022-04-25T19:07:47.863Z appoptics:patching patched https 
2022-04-25T19:07:47.864Z appoptics:patching patched http 
2022-04-25T19:07:47.943Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:47.943Z appoptics:patching patched fs 
2022-04-25T19:07:47.966Z appoptics:patching patched zlib 
2022-04-25T19:07:48.159Z appoptics:patching patched tedious 14.1.0
2022-04-25T19:07:48.163Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5174) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.1.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.1.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.1.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.1.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.1.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.1.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

prebuild-install WARN install EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'

> keytar@7.9.0 build /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: EACCES: permission denied, mkdir '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar/build'
gyp ERR! System Linux 5.13.0-1021-azure
gyp ERR! command "/__t/node/12.22.12/x64/bin/node" "/__t/node/12.22.12/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v5.1.0
gyp ERR! not ok 
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! keytar@7.9.0 build: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the keytar@7.9.0 build script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
npm WARN Local package.json exists, but node_modules missing, did you mean to install?

npm ERR! A complete log of this run can be found in:
npm ERR!     /github/home/.npm/_logs/2022-04-25T19_08_00_160Z-debug.log
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 (node_modules/keytar):
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: keytar@7.9.0 install: `prebuild-install || npm run build`
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1

+ tedious@14.2.0
updated 1 package and audited 999 packages in 8.682s

90 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:08:01.342Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:01.343Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:01.343Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:01.344Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:01.420Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:01.575Z appoptics:patching patched crypto 
2022-04-25T19:08:01.605Z appoptics:patching patched https 
2022-04-25T19:08:01.605Z appoptics:patching patched http 
2022-04-25T19:08:01.688Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:01.689Z appoptics:patching patched fs 
2022-04-25T19:08:01.707Z appoptics:patching patched zlib 
2022-04-25T19:08:01.891Z appoptics:patching patched tedious 14.2.0
2022-04-25T19:08:01.895Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5234) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.2.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.2.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.2.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.2.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.2.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.2.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.3.0
added 5 packages from 3 contributors, removed 9 packages, updated 5 packages and audited 958 packages in 7.978s

87 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:08:14.460Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:14.461Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:14.461Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:14.461Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:14.535Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:14.711Z appoptics:patching patched crypto 
2022-04-25T19:08:14.755Z appoptics:patching patched https 
2022-04-25T19:08:14.756Z appoptics:patching patched http 
2022-04-25T19:08:14.820Z appoptics:patching patched zlib 
2022-04-25T19:08:14.877Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:14.877Z appoptics:patching patched fs 
2022-04-25T19:08:15.024Z appoptics:patching patched tedious 14.3.0
2022-04-25T19:08:15.029Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5256) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.3.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.3.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.3.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.3.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.3.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.3.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.4.0
updated 1 package and audited 958 packages in 5.961s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-25T19:08:25.473Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:25.474Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:25.474Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:25.474Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:25.551Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:25.707Z appoptics:patching patched crypto 
2022-04-25T19:08:25.728Z appoptics:patching patched https 
2022-04-25T19:08:25.728Z appoptics:patching patched http 
2022-04-25T19:08:25.792Z appoptics:patching patched zlib 
2022-04-25T19:08:25.845Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:25.846Z appoptics:patching patched fs 
2022-04-25T19:08:25.980Z appoptics:patching patched tedious 14.4.0
2022-04-25T19:08:25.984Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:5278) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.4.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) probes.tedious 14.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  3) probes.tedious 14.4.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  4) probes.tedious 14.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  5) probes.tedious 14.4.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  6) probes.tedious 14.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  7) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  8) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  9) probes.tedious 14.4.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  10) probes.tedious 14.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  11) probes.tedious 14.4.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  12) probes.tedious 14.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  13) probes.tedious 14.4.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  14) probes.tedious 14.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)

  15) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:108:12)
      at onwriteError (_stream_writable.js:418:5)
      at onwrite (_stream_writable.js:445:5)
      at doWrite (_stream_writable.js:399:11)
      at writeOrBuffer (_stream_writable.js:387:5)
      at Socket.Writable.write (_stream_writable.js:318:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:718:22)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:213:10)
      at Message.<anonymous> (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1241:12)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  16) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:921:8)
      at UDP.callbackTrampoline (internal/async_hooks.js:126:14)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
added 27 packages from 51 contributors, removed 50 packages, updated 7 packages, moved 1 package and audited 935 packages in 7.415s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
