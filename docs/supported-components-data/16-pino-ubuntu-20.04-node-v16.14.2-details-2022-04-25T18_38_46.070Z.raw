
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:38:54.043Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:38:54.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:38:54.044Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:38:54.044Z appoptics:debug using context provider: ace-context
2022-04-25T18:38:54.120Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:38:54.322Z appoptics:patching patched crypto 
2022-04-25T18:38:54.346Z appoptics:patching patched https 
2022-04-25T18:38:54.347Z appoptics:patching patched http 
2022-04-25T18:38:54.398Z appoptics:patching patched pino 2.3.0
2022-04-25T18:38:54.402Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:03.236Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:03.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:03.237Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:03.238Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:03.340Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:03.528Z appoptics:patching patched crypto 
2022-04-25T18:39:03.550Z appoptics:patching patched https 
2022-04-25T18:39:03.550Z appoptics:patching patched http 
2022-04-25T18:39:03.599Z appoptics:patching patched pino 2.4.0
2022-04-25T18:39:03.603Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:11.803Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:11.804Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:11.804Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:11.805Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:11.986Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:12.142Z appoptics:patching patched crypto 
2022-04-25T18:39:12.184Z appoptics:patching patched https 
2022-04-25T18:39:12.185Z appoptics:patching patched http 
2022-04-25T18:39:12.220Z appoptics:patching patched pino 2.4.1
2022-04-25T18:39:12.225Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:19.244Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:19.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:19.245Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:19.246Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:19.322Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:19.467Z appoptics:patching patched crypto 
2022-04-25T18:39:19.491Z appoptics:patching patched https 
2022-04-25T18:39:19.492Z appoptics:patching patched http 
2022-04-25T18:39:19.541Z appoptics:patching patched pino 2.4.2
2022-04-25T18:39:19.546Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:27.543Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:27.544Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:27.544Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:27.544Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:27.616Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:27.757Z appoptics:patching patched crypto 
2022-04-25T18:39:27.780Z appoptics:patching patched https 
2022-04-25T18:39:27.781Z appoptics:patching patched http 
2022-04-25T18:39:27.823Z appoptics:patching patched pino 2.4.3
2022-04-25T18:39:27.828Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:35.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:35.607Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:35.608Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:35.608Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:35.718Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:35.926Z appoptics:patching patched crypto 
2022-04-25T18:39:35.982Z appoptics:patching patched https 
2022-04-25T18:39:35.983Z appoptics:patching patched http 
2022-04-25T18:39:36.023Z appoptics:patching patched pino 2.4.4
2022-04-25T18:39:36.027Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (189ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:43.188Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:43.188Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:43.188Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:43.189Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:43.261Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:43.402Z appoptics:patching patched crypto 
2022-04-25T18:39:43.435Z appoptics:patching patched https 
2022-04-25T18:39:43.436Z appoptics:patching patched http 
2022-04-25T18:39:43.478Z appoptics:patching patched pino 2.5.0
2022-04-25T18:39:43.482Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:51.296Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:51.296Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:51.296Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:51.297Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:51.370Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:51.511Z appoptics:patching patched crypto 
2022-04-25T18:39:51.532Z appoptics:patching patched https 
2022-04-25T18:39:51.533Z appoptics:patching patched http 
2022-04-25T18:39:51.582Z appoptics:patching patched pino 2.6.0
2022-04-25T18:39:51.586Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:58.808Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:58.809Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:58.809Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:58.810Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:58.894Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:59.058Z appoptics:patching patched crypto 
2022-04-25T18:39:59.097Z appoptics:patching patched https 
2022-04-25T18:39:59.097Z appoptics:patching patched http 
2022-04-25T18:39:59.152Z appoptics:patching patched pino 2.6.1
2022-04-25T18:39:59.157Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:07.091Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:07.091Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:07.091Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:07.092Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:07.163Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:07.302Z appoptics:patching patched crypto 
2022-04-25T18:40:07.335Z appoptics:patching patched https 
2022-04-25T18:40:07.336Z appoptics:patching patched http 
2022-04-25T18:40:07.377Z appoptics:patching patched pino 2.7.0
2022-04-25T18:40:07.382Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:15.310Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:15.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:15.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:15.312Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:15.399Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:15.560Z appoptics:patching patched crypto 
2022-04-25T18:40:15.606Z appoptics:patching patched https 
2022-04-25T18:40:15.607Z appoptics:patching patched http 
2022-04-25T18:40:15.655Z appoptics:patching patched pino 2.7.1
2022-04-25T18:40:15.659Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (200ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:22.479Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:22.480Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:22.480Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:22.481Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:22.553Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:22.692Z appoptics:patching patched crypto 
2022-04-25T18:40:22.714Z appoptics:patching patched https 
2022-04-25T18:40:22.714Z appoptics:patching patched http 
2022-04-25T18:40:22.761Z appoptics:patching patched pino 2.7.2
2022-04-25T18:40:22.765Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:30.630Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:30.631Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:30.631Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:30.632Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:30.703Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:30.844Z appoptics:patching patched crypto 
2022-04-25T18:40:30.865Z appoptics:patching patched https 
2022-04-25T18:40:30.866Z appoptics:patching patched http 
2022-04-25T18:40:30.916Z appoptics:patching patched pino 2.7.3
2022-04-25T18:40:30.920Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:39.172Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:39.172Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:39.172Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:39.173Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:39.245Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:39.387Z appoptics:patching patched crypto 
2022-04-25T18:40:39.420Z appoptics:patching patched https 
2022-04-25T18:40:39.420Z appoptics:patching patched http 
2022-04-25T18:40:39.465Z appoptics:patching patched pino 2.7.4
2022-04-25T18:40:39.469Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:46.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:46.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:46.646Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:46.647Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:46.717Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:46.857Z appoptics:patching patched crypto 
2022-04-25T18:40:46.878Z appoptics:patching patched https 
2022-04-25T18:40:46.879Z appoptics:patching patched http 
2022-04-25T18:40:46.925Z appoptics:patching patched pino 2.7.5
2022-04-25T18:40:46.929Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:54.980Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:54.981Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:54.981Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:54.982Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:55.054Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:55.194Z appoptics:patching patched crypto 
2022-04-25T18:40:55.216Z appoptics:patching patched https 
2022-04-25T18:40:55.216Z appoptics:patching patched http 
2022-04-25T18:40:55.265Z appoptics:patching patched pino 2.8.0
2022-04-25T18:40:55.269Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:02.858Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:02.858Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:02.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:02.859Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:02.957Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:03.118Z appoptics:patching patched crypto 
2022-04-25T18:41:03.175Z appoptics:patching patched https 
2022-04-25T18:41:03.176Z appoptics:patching patched http 
2022-04-25T18:41:03.220Z appoptics:patching patched pino 2.8.1
2022-04-25T18:41:03.224Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:10.352Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:10.353Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:10.353Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:10.353Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:10.426Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:10.566Z appoptics:patching patched crypto 
2022-04-25T18:41:10.598Z appoptics:patching patched https 
2022-04-25T18:41:10.599Z appoptics:patching patched http 
2022-04-25T18:41:10.666Z appoptics:patching patched pino 2.8.2
2022-04-25T18:41:10.670Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (193ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:18.801Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:18.802Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:18.802Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:18.803Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:18.880Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:19.026Z appoptics:patching patched crypto 
2022-04-25T18:41:19.049Z appoptics:patching patched https 
2022-04-25T18:41:19.050Z appoptics:patching patched http 
2022-04-25T18:41:19.109Z appoptics:patching patched pino 2.8.3
2022-04-25T18:41:19.114Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (188ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:26.551Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:26.551Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:26.551Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:26.552Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:26.625Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:26.789Z appoptics:patching patched crypto 
2022-04-25T18:41:26.836Z appoptics:patching patched https 
2022-04-25T18:41:26.837Z appoptics:patching patched http 
2022-04-25T18:41:26.897Z appoptics:patching patched pino 2.9.0
2022-04-25T18:41:26.901Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:34.800Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:34.801Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:34.801Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:34.802Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:34.877Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:35.019Z appoptics:patching patched crypto 
2022-04-25T18:41:35.040Z appoptics:patching patched https 
2022-04-25T18:41:35.040Z appoptics:patching patched http 
2022-04-25T18:41:35.097Z appoptics:patching patched pino 2.10.0
2022-04-25T18:41:35.101Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:42.846Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:42.847Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:42.847Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:42.848Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:42.920Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:43.088Z appoptics:patching patched crypto 
2022-04-25T18:41:43.120Z appoptics:patching patched https 
2022-04-25T18:41:43.120Z appoptics:patching patched http 
2022-04-25T18:41:43.171Z appoptics:patching patched pino 2.10.1
2022-04-25T18:41:43.175Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:50.430Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:50.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:50.430Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:50.431Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:50.501Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:50.635Z appoptics:patching patched crypto 
2022-04-25T18:41:50.656Z appoptics:patching patched https 
2022-04-25T18:41:50.657Z appoptics:patching patched http 
2022-04-25T18:41:50.710Z appoptics:patching patched pino 2.11.0
2022-04-25T18:41:50.714Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:58.740Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:58.740Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:58.741Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:58.741Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:58.812Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:58.951Z appoptics:patching patched crypto 
2022-04-25T18:41:58.972Z appoptics:patching patched https 
2022-04-25T18:41:58.972Z appoptics:patching patched http 
2022-04-25T18:41:59.028Z appoptics:patching patched pino 2.12.0
2022-04-25T18:41:59.032Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:06.632Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:06.632Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:06.632Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:06.633Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:06.786Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:07.149Z appoptics:patching patched crypto 
2022-04-25T18:42:07.233Z appoptics:patching patched https 
2022-04-25T18:42:07.237Z appoptics:patching patched http 
2022-04-25T18:42:07.319Z appoptics:patching patched pino 2.12.1
2022-04-25T18:42:07.323Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:14.154Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:14.154Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:14.154Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:14.155Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:14.229Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:14.365Z appoptics:patching patched crypto 
2022-04-25T18:42:14.385Z appoptics:patching patched https 
2022-04-25T18:42:14.386Z appoptics:patching patched http 
2022-04-25T18:42:14.439Z appoptics:patching patched pino 2.12.2
2022-04-25T18:42:14.444Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:22.708Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:22.708Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:22.708Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:22.709Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:22.781Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:22.957Z appoptics:patching patched crypto 
2022-04-25T18:42:22.978Z appoptics:patching patched https 
2022-04-25T18:42:22.979Z appoptics:patching patched http 
2022-04-25T18:42:23.034Z appoptics:patching patched pino 2.12.3
2022-04-25T18:42:23.039Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:30.340Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:30.341Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:30.341Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:30.342Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:30.425Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:30.584Z appoptics:patching patched crypto 
2022-04-25T18:42:30.630Z appoptics:patching patched https 
2022-04-25T18:42:30.630Z appoptics:patching patched http 
2022-04-25T18:42:30.688Z appoptics:patching patched pino 2.12.4
2022-04-25T18:42:30.692Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (236ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:38.359Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:38.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:38.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:38.360Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:38.431Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:38.569Z appoptics:patching patched crypto 
2022-04-25T18:42:38.589Z appoptics:patching patched https 
2022-04-25T18:42:38.590Z appoptics:patching patched http 
2022-04-25T18:42:38.647Z appoptics:patching patched pino 2.13.0
2022-04-25T18:42:38.651Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:46.427Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:46.428Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:46.428Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:46.429Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:46.500Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:46.648Z appoptics:patching patched crypto 
2022-04-25T18:42:46.678Z appoptics:patching patched https 
2022-04-25T18:42:46.678Z appoptics:patching patched http 
2022-04-25T18:42:46.721Z appoptics:patching patched pino 2.13.2
2022-04-25T18:42:46.725Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:42:53.918Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:42:53.919Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:42:53.919Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:42:53.920Z appoptics:debug using context provider: ace-context
2022-04-25T18:42:53.992Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:42:54.131Z appoptics:patching patched crypto 
2022-04-25T18:42:54.152Z appoptics:patching patched https 
2022-04-25T18:42:54.153Z appoptics:patching patched http 
2022-04-25T18:42:54.211Z appoptics:patching patched pino 2.14.0
2022-04-25T18:42:54.216Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:04.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:04.807Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:04.807Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:04.808Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:04.879Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:05.022Z appoptics:patching patched crypto 
2022-04-25T18:43:05.043Z appoptics:patching patched https 
2022-04-25T18:43:05.044Z appoptics:patching patched http 
2022-04-25T18:43:05.107Z appoptics:patching patched pino 2.15.0
2022-04-25T18:43:05.112Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 14s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:19.285Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:19.286Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:19.286Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:19.287Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:19.364Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:19.535Z appoptics:patching patched crypto 
2022-04-25T18:43:19.578Z appoptics:patching patched https 
2022-04-25T18:43:19.578Z appoptics:patching patched http 
2022-04-25T18:43:19.611Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:43:19.612Z appoptics:patching patched fs 
2022-04-25T18:43:19.638Z appoptics:patching patched pino 2.16.0
2022-04-25T18:43:19.643Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (198ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:27.533Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:27.534Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:27.534Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:27.535Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:27.608Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:27.750Z appoptics:patching patched crypto 
2022-04-25T18:43:27.772Z appoptics:patching patched https 
2022-04-25T18:43:27.773Z appoptics:patching patched http 
2022-04-25T18:43:27.807Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:43:27.807Z appoptics:patching patched fs 
2022-04-25T18:43:27.822Z appoptics:patching patched pino 3.0.0
2022-04-25T18:43:27.827Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:35.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:35.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:35.970Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:35.971Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:36.081Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:36.241Z appoptics:patching patched crypto 
2022-04-25T18:43:36.265Z appoptics:patching patched https 
2022-04-25T18:43:36.265Z appoptics:patching patched http 
2022-04-25T18:43:36.302Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:43:36.302Z appoptics:patching patched fs 
2022-04-25T18:43:36.318Z appoptics:patching patched pino 3.0.1
2022-04-25T18:43:36.323Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:43.231Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:43.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:43.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:43.233Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:43.305Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:43.448Z appoptics:patching patched crypto 
2022-04-25T18:43:43.487Z appoptics:patching patched https 
2022-04-25T18:43:43.487Z appoptics:patching patched http 
2022-04-25T18:43:43.509Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:43:43.509Z appoptics:patching patched fs 
2022-04-25T18:43:43.525Z appoptics:patching patched pino 3.0.2
2022-04-25T18:43:43.529Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (199ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:43:51.761Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:43:51.762Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:43:51.762Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:43:51.763Z appoptics:debug using context provider: ace-context
2022-04-25T18:43:51.835Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:43:51.976Z appoptics:patching patched crypto 
2022-04-25T18:43:51.997Z appoptics:patching patched https 
2022-04-25T18:43:51.997Z appoptics:patching patched http 
2022-04-25T18:43:52.032Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:43:52.032Z appoptics:patching patched fs 
2022-04-25T18:43:52.048Z appoptics:patching patched pino 3.0.3
2022-04-25T18:43:52.052Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:00.635Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:00.636Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:00.636Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:00.637Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:00.709Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:00.850Z appoptics:patching patched crypto 
2022-04-25T18:44:00.886Z appoptics:patching patched https 
2022-04-25T18:44:00.887Z appoptics:patching patched http 
2022-04-25T18:44:00.917Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:00.917Z appoptics:patching patched fs 
2022-04-25T18:44:00.935Z appoptics:patching patched pino 3.0.4
2022-04-25T18:44:00.940Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:08.305Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:08.305Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:08.305Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:08.306Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:08.379Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:08.519Z appoptics:patching patched crypto 
2022-04-25T18:44:08.540Z appoptics:patching patched https 
2022-04-25T18:44:08.541Z appoptics:patching patched http 
2022-04-25T18:44:08.575Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:08.576Z appoptics:patching patched fs 
2022-04-25T18:44:08.591Z appoptics:patching patched pino 3.0.5
2022-04-25T18:44:08.595Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:16.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:16.653Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:16.653Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:16.654Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:16.729Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:16.896Z appoptics:patching patched crypto 
2022-04-25T18:44:16.917Z appoptics:patching patched https 
2022-04-25T18:44:16.917Z appoptics:patching patched http 
2022-04-25T18:44:16.952Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:16.952Z appoptics:patching patched fs 
2022-04-25T18:44:16.968Z appoptics:patching patched pino 3.0.6
2022-04-25T18:44:16.972Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:24.957Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:24.958Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:24.958Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:24.959Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:25.031Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:25.176Z appoptics:patching patched crypto 
2022-04-25T18:44:25.197Z appoptics:patching patched https 
2022-04-25T18:44:25.198Z appoptics:patching patched http 
2022-04-25T18:44:25.232Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:25.232Z appoptics:patching patched fs 
2022-04-25T18:44:25.248Z appoptics:patching patched pino 3.0.7
2022-04-25T18:44:25.252Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:32.703Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:32.703Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:32.703Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:32.704Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:32.776Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:32.917Z appoptics:patching patched crypto 
2022-04-25T18:44:32.940Z appoptics:patching patched https 
2022-04-25T18:44:32.941Z appoptics:patching patched http 
2022-04-25T18:44:32.973Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:32.973Z appoptics:patching patched fs 
2022-04-25T18:44:32.989Z appoptics:patching patched pino 3.1.0
2022-04-25T18:44:32.993Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:40.945Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:40.945Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:40.946Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:40.946Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:41.020Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:41.167Z appoptics:patching patched crypto 
2022-04-25T18:44:41.191Z appoptics:patching patched https 
2022-04-25T18:44:41.192Z appoptics:patching patched http 
2022-04-25T18:44:41.223Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:41.223Z appoptics:patching patched fs 
2022-04-25T18:44:41.240Z appoptics:patching patched pino 3.1.1
2022-04-25T18:44:41.244Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:48.817Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:48.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:48.817Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:48.818Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:48.907Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:49.079Z appoptics:patching patched crypto 
2022-04-25T18:44:49.170Z appoptics:patching patched https 
2022-04-25T18:44:49.170Z appoptics:patching patched http 
2022-04-25T18:44:49.224Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:49.225Z appoptics:patching patched fs 
2022-04-25T18:44:49.260Z appoptics:patching patched pino 3.1.2
2022-04-25T18:44:49.264Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (255ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:44:56.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:44:56.773Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:44:56.773Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:44:56.774Z appoptics:debug using context provider: ace-context
2022-04-25T18:44:56.845Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:44:56.985Z appoptics:patching patched crypto 
2022-04-25T18:44:57.006Z appoptics:patching patched https 
2022-04-25T18:44:57.007Z appoptics:patching patched http 
2022-04-25T18:44:57.041Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:44:57.042Z appoptics:patching patched fs 
2022-04-25T18:44:57.057Z appoptics:patching patched pino 3.1.3
2022-04-25T18:44:57.061Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:04.982Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:04.983Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:04.983Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:04.983Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:05.070Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:05.312Z appoptics:patching patched crypto 
2022-04-25T18:45:05.391Z appoptics:patching patched https 
2022-04-25T18:45:05.392Z appoptics:patching patched http 
2022-04-25T18:45:05.478Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:05.486Z appoptics:patching patched fs 
2022-04-25T18:45:05.537Z appoptics:patching patched pino 3.2.0
2022-04-25T18:45:05.543Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:12.507Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:12.508Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:12.508Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:12.509Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:12.591Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:12.765Z appoptics:patching patched crypto 
2022-04-25T18:45:12.801Z appoptics:patching patched https 
2022-04-25T18:45:12.801Z appoptics:patching patched http 
2022-04-25T18:45:12.823Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:12.824Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at Object.exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:20.259Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:20.260Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:20.260Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:20.261Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:20.332Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:20.470Z appoptics:patching patched crypto 
2022-04-25T18:45:20.492Z appoptics:patching patched https 
2022-04-25T18:45:20.493Z appoptics:patching patched http 
2022-04-25T18:45:20.523Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:20.524Z appoptics:patching patched fs 
2022-04-25T18:45:20.541Z appoptics:patching patched pino 3.3.1
2022-04-25T18:45:20.546Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:28.602Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:28.603Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:28.603Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:28.604Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:28.683Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:28.830Z appoptics:patching patched crypto 
2022-04-25T18:45:28.851Z appoptics:patching patched https 
2022-04-25T18:45:28.852Z appoptics:patching patched http 
2022-04-25T18:45:28.886Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:28.887Z appoptics:patching patched fs 
2022-04-25T18:45:28.905Z appoptics:patching patched pino 3.3.2
2022-04-25T18:45:28.909Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


added 2 packages, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:36.115Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:36.116Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:36.116Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:36.116Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:36.190Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:36.333Z appoptics:patching patched crypto 
2022-04-25T18:45:36.353Z appoptics:patching patched https 
2022-04-25T18:45:36.353Z appoptics:patching patched http 
2022-04-25T18:45:36.386Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:36.387Z appoptics:patching patched fs 
2022-04-25T18:45:36.405Z appoptics:patching patched pino 3.4.0
2022-04-25T18:45:36.410Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:44.419Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:44.419Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:44.420Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:44.420Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:44.491Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:44.643Z appoptics:patching patched crypto 
2022-04-25T18:45:44.664Z appoptics:patching patched https 
2022-04-25T18:45:44.665Z appoptics:patching patched http 
2022-04-25T18:45:44.698Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:44.698Z appoptics:patching patched fs 
2022-04-25T18:45:44.716Z appoptics:patching patched pino 4.0.0
2022-04-25T18:45:44.720Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:53.270Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:53.270Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:53.270Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:53.271Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:53.343Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:53.485Z appoptics:patching patched crypto 
2022-04-25T18:45:53.507Z appoptics:patching patched https 
2022-04-25T18:45:53.507Z appoptics:patching patched http 
2022-04-25T18:45:53.542Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:45:53.542Z appoptics:patching patched fs 
2022-04-25T18:45:53.561Z appoptics:patching patched pino 4.0.1
2022-04-25T18:45:53.565Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:00.576Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:00.577Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:00.577Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:00.578Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:00.649Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:00.795Z appoptics:patching patched crypto 
2022-04-25T18:46:00.852Z appoptics:patching patched https 
2022-04-25T18:46:00.853Z appoptics:patching patched http 
2022-04-25T18:46:00.892Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:00.893Z appoptics:patching patched fs 
2022-04-25T18:46:00.913Z appoptics:patching patched pino 4.0.2
2022-04-25T18:46:00.917Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:08.828Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:08.829Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:08.829Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:08.829Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:08.901Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:09.042Z appoptics:patching patched crypto 
2022-04-25T18:46:09.063Z appoptics:patching patched https 
2022-04-25T18:46:09.064Z appoptics:patching patched http 
2022-04-25T18:46:09.099Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:09.099Z appoptics:patching patched fs 
2022-04-25T18:46:09.117Z appoptics:patching patched pino 4.0.3
2022-04-25T18:46:09.122Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:16.581Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:16.582Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:16.582Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:16.583Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:16.747Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:16.988Z appoptics:patching patched crypto 
2022-04-25T18:46:17.024Z appoptics:patching patched https 
2022-04-25T18:46:17.025Z appoptics:patching patched http 
2022-04-25T18:46:17.080Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:17.081Z appoptics:patching patched fs 
2022-04-25T18:46:17.105Z appoptics:patching patched pino 4.1.0
2022-04-25T18:46:17.112Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (221ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:24.476Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:24.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:24.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:24.478Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:24.549Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:24.690Z appoptics:patching patched crypto 
2022-04-25T18:46:24.711Z appoptics:patching patched https 
2022-04-25T18:46:24.711Z appoptics:patching patched http 
2022-04-25T18:46:24.738Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:24.746Z appoptics:patching patched fs 
2022-04-25T18:46:24.765Z appoptics:patching patched pino 4.1.1
2022-04-25T18:46:24.769Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:32.755Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:32.756Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:32.756Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:32.757Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:32.885Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:33.027Z appoptics:patching patched crypto 
2022-04-25T18:46:33.048Z appoptics:patching patched https 
2022-04-25T18:46:33.048Z appoptics:patching patched http 
2022-04-25T18:46:33.084Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:33.085Z appoptics:patching patched fs 
2022-04-25T18:46:33.103Z appoptics:patching patched pino 4.1.2
2022-04-25T18:46:33.108Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:40.351Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:40.352Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:40.352Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:40.353Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:40.434Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:40.597Z appoptics:patching patched crypto 
2022-04-25T18:46:40.679Z appoptics:patching patched https 
2022-04-25T18:46:40.680Z appoptics:patching patched http 
2022-04-25T18:46:40.724Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:40.725Z appoptics:patching patched fs 
2022-04-25T18:46:40.743Z appoptics:patching patched pino 4.2.0
2022-04-25T18:46:40.748Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:48.315Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:48.316Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:48.316Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:48.317Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:48.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:48.529Z appoptics:patching patched crypto 
2022-04-25T18:46:48.563Z appoptics:patching patched https 
2022-04-25T18:46:48.563Z appoptics:patching patched http 
2022-04-25T18:46:48.592Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:48.593Z appoptics:patching patched fs 
2022-04-25T18:46:48.610Z appoptics:patching patched pino 4.2.1
2022-04-25T18:46:48.615Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:56.376Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:56.376Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:56.376Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:56.377Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:56.469Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:56.618Z appoptics:patching patched crypto 
2022-04-25T18:46:56.639Z appoptics:patching patched https 
2022-04-25T18:46:56.662Z appoptics:patching patched http 
2022-04-25T18:46:56.715Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:46:56.716Z appoptics:patching patched fs 
2022-04-25T18:46:56.749Z appoptics:patching patched pino 4.2.2
2022-04-25T18:46:56.760Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:03.631Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:03.632Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:03.632Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:03.633Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:03.702Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:03.841Z appoptics:patching patched crypto 
2022-04-25T18:47:03.862Z appoptics:patching patched https 
2022-04-25T18:47:03.863Z appoptics:patching patched http 
2022-04-25T18:47:03.895Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:03.895Z appoptics:patching patched fs 
2022-04-25T18:47:03.913Z appoptics:patching patched pino 4.2.3
2022-04-25T18:47:03.917Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:11.763Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:11.764Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:11.764Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:11.764Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:11.835Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:11.973Z appoptics:patching patched crypto 
2022-04-25T18:47:11.994Z appoptics:patching patched https 
2022-04-25T18:47:11.995Z appoptics:patching patched http 
2022-04-25T18:47:12.029Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:12.029Z appoptics:patching patched fs 
2022-04-25T18:47:12.047Z appoptics:patching patched pino 4.2.4
2022-04-25T18:47:12.051Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:20.164Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:20.165Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:20.165Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:20.166Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:20.272Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:20.448Z appoptics:patching patched crypto 
2022-04-25T18:47:20.470Z appoptics:patching patched https 
2022-04-25T18:47:20.470Z appoptics:patching patched http 
2022-04-25T18:47:20.503Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:20.504Z appoptics:patching patched fs 
2022-04-25T18:47:20.523Z appoptics:patching patched pino 4.3.0
2022-04-25T18:47:20.527Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:27.568Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:27.569Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:27.569Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:27.569Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:27.642Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:27.789Z appoptics:patching patched crypto 
2022-04-25T18:47:27.840Z appoptics:patching patched https 
2022-04-25T18:47:27.841Z appoptics:patching patched http 
2022-04-25T18:47:27.866Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:27.866Z appoptics:patching patched fs 
2022-04-25T18:47:27.889Z appoptics:patching patched pino 4.4.0
2022-04-25T18:47:27.893Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:36.062Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:36.063Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:36.063Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:36.064Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:36.136Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:36.278Z appoptics:patching patched crypto 
2022-04-25T18:47:36.312Z appoptics:patching patched https 
2022-04-25T18:47:36.313Z appoptics:patching patched http 
2022-04-25T18:47:36.333Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:36.334Z appoptics:patching patched fs 
2022-04-25T18:47:36.352Z appoptics:patching patched pino 4.5.0
2022-04-25T18:47:36.356Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:43.959Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:43.966Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:43.966Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:43.969Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:44.112Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:44.326Z appoptics:patching patched crypto 
2022-04-25T18:47:44.372Z appoptics:patching patched https 
2022-04-25T18:47:44.373Z appoptics:patching patched http 
2022-04-25T18:47:44.409Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:44.410Z appoptics:patching patched fs 
2022-04-25T18:47:44.428Z appoptics:patching patched pino 4.5.1
2022-04-25T18:47:44.433Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:51.670Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:51.671Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:51.671Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:51.671Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:51.743Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:51.908Z appoptics:patching patched crypto 
2022-04-25T18:47:51.938Z appoptics:patching patched https 
2022-04-25T18:47:51.938Z appoptics:patching patched http 
2022-04-25T18:47:51.990Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:47:51.990Z appoptics:patching patched fs 
2022-04-25T18:47:52.010Z appoptics:patching patched pino 4.5.2
2022-04-25T18:47:52.014Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (188ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:59.724Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:59.724Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:59.724Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:59.725Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:59.799Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:59.943Z appoptics:patching patched crypto 
2022-04-25T18:47:59.966Z appoptics:patching patched https 
2022-04-25T18:47:59.967Z appoptics:patching patched http 
2022-04-25T18:48:00.036Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:00.036Z appoptics:patching patched fs 
2022-04-25T18:48:00.061Z appoptics:patching patched pino 4.5.3
2022-04-25T18:48:00.065Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 939 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:10.492Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:10.492Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:10.493Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:10.493Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:10.567Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:10.737Z appoptics:patching patched crypto 
2022-04-25T18:48:10.759Z appoptics:patching patched https 
2022-04-25T18:48:10.759Z appoptics:patching patched http 
2022-04-25T18:48:10.795Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:10.795Z appoptics:patching patched fs 
2022-04-25T18:48:10.814Z appoptics:patching patched pino 4.5.4
2022-04-25T18:48:10.818Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:24.095Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:24.096Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:24.096Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:24.097Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:24.183Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:24.326Z appoptics:patching patched crypto 
2022-04-25T18:48:24.356Z appoptics:patching patched https 
2022-04-25T18:48:24.357Z appoptics:patching patched http 
2022-04-25T18:48:24.389Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:24.389Z appoptics:patching patched fs 
2022-04-25T18:48:24.407Z appoptics:patching patched pino 4.6.0
2022-04-25T18:48:24.411Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (188ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:32.247Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:32.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:32.249Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:32.250Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:32.328Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:32.491Z appoptics:patching patched crypto 
2022-04-25T18:48:32.538Z appoptics:patching patched https 
2022-04-25T18:48:32.539Z appoptics:patching patched http 
2022-04-25T18:48:32.575Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:32.575Z appoptics:patching patched fs 
2022-04-25T18:48:32.601Z appoptics:patching patched pino 4.7.0
2022-04-25T18:48:32.605Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (202ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:40.583Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:40.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:40.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:40.585Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:40.657Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:40.802Z appoptics:patching patched crypto 
2022-04-25T18:48:40.826Z appoptics:patching patched https 
2022-04-25T18:48:40.827Z appoptics:patching patched http 
2022-04-25T18:48:40.862Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:40.862Z appoptics:patching patched fs 
2022-04-25T18:48:40.887Z appoptics:patching patched pino 4.7.1
2022-04-25T18:48:40.891Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (195ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:49.330Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:49.331Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:49.331Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:49.332Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:49.405Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:49.575Z appoptics:patching patched crypto 
2022-04-25T18:48:49.619Z appoptics:patching patched https 
2022-04-25T18:48:49.620Z appoptics:patching patched http 
2022-04-25T18:48:49.655Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:49.656Z appoptics:patching patched fs 
2022-04-25T18:48:49.680Z appoptics:patching patched pino 4.7.2
2022-04-25T18:48:49.684Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:56.736Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:56.736Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:56.736Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:56.737Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:56.811Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:56.963Z appoptics:patching patched crypto 
2022-04-25T18:48:56.987Z appoptics:patching patched https 
2022-04-25T18:48:56.987Z appoptics:patching patched http 
2022-04-25T18:48:57.024Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:48:57.025Z appoptics:patching patched fs 
2022-04-25T18:48:57.049Z appoptics:patching patched pino 4.7.3
2022-04-25T18:48:57.053Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:05.397Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:05.398Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:05.398Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:05.399Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:05.472Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:05.634Z appoptics:patching patched crypto 
2022-04-25T18:49:05.677Z appoptics:patching patched https 
2022-04-25T18:49:05.678Z appoptics:patching patched http 
2022-04-25T18:49:05.709Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:05.710Z appoptics:patching patched fs 
2022-04-25T18:49:05.734Z appoptics:patching patched pino 4.8.0
2022-04-25T18:49:05.738Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:14.005Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:14.006Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:14.006Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:14.007Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:14.080Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:14.224Z appoptics:patching patched crypto 
2022-04-25T18:49:14.245Z appoptics:patching patched https 
2022-04-25T18:49:14.246Z appoptics:patching patched http 
2022-04-25T18:49:14.281Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:14.282Z appoptics:patching patched fs 
2022-04-25T18:49:14.306Z appoptics:patching patched pino 4.8.1
2022-04-25T18:49:14.310Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:21.565Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:21.565Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:21.566Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:21.566Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:21.656Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:21.894Z appoptics:patching patched crypto 
2022-04-25T18:49:21.935Z appoptics:patching patched https 
2022-04-25T18:49:21.936Z appoptics:patching patched http 
2022-04-25T18:49:21.976Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:21.976Z appoptics:patching patched fs 
2022-04-25T18:49:22.002Z appoptics:patching patched pino 4.8.2
2022-04-25T18:49:22.006Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (189ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:29.724Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:29.725Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:29.725Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:29.726Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:29.814Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:29.957Z appoptics:patching patched crypto 
2022-04-25T18:49:29.979Z appoptics:patching patched https 
2022-04-25T18:49:29.980Z appoptics:patching patched http 
2022-04-25T18:49:30.014Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:30.014Z appoptics:patching patched fs 
2022-04-25T18:49:30.038Z appoptics:patching patched pino 4.9.0
2022-04-25T18:49:30.042Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:38.222Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:38.223Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:38.223Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:38.224Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:38.296Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:38.438Z appoptics:patching patched crypto 
2022-04-25T18:49:38.460Z appoptics:patching patched https 
2022-04-25T18:49:38.461Z appoptics:patching patched http 
2022-04-25T18:49:38.495Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:38.495Z appoptics:patching patched fs 
2022-04-25T18:49:38.519Z appoptics:patching patched pino 4.10.0
2022-04-25T18:49:38.523Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (203ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:45.907Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:45.907Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:45.907Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:45.908Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:45.980Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:46.128Z appoptics:patching patched crypto 
2022-04-25T18:49:46.152Z appoptics:patching patched https 
2022-04-25T18:49:46.153Z appoptics:patching patched http 
2022-04-25T18:49:46.183Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:46.183Z appoptics:patching patched fs 
2022-04-25T18:49:46.207Z appoptics:patching patched pino 4.10.1
2022-04-25T18:49:46.211Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:54.121Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:54.122Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:54.122Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:54.123Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:54.204Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:54.378Z appoptics:patching patched crypto 
2022-04-25T18:49:54.414Z appoptics:patching patched https 
2022-04-25T18:49:54.414Z appoptics:patching patched http 
2022-04-25T18:49:54.449Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:54.450Z appoptics:patching patched fs 
2022-04-25T18:49:54.476Z appoptics:patching patched pino 4.10.2
2022-04-25T18:49:54.480Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (189ms)


changed 2 packages, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:01.959Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:01.960Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:01.960Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:01.961Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:02.037Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:02.228Z appoptics:patching patched crypto 
2022-04-25T18:50:02.281Z appoptics:patching patched https 
2022-04-25T18:50:02.282Z appoptics:patching patched http 
2022-04-25T18:50:02.312Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:02.313Z appoptics:patching patched fs 
2022-04-25T18:50:02.384Z appoptics:patching patched pino 4.10.3
2022-04-25T18:50:02.389Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:09.881Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:09.882Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:09.882Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:09.883Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:09.955Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:10.098Z appoptics:patching patched crypto 
2022-04-25T18:50:10.121Z appoptics:patching patched https 
2022-04-25T18:50:10.122Z appoptics:patching patched http 
2022-04-25T18:50:10.158Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:10.158Z appoptics:patching patched fs 
2022-04-25T18:50:10.182Z appoptics:patching patched pino 4.10.4
2022-04-25T18:50:10.186Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:18.463Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:18.464Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:18.464Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:18.465Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:18.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:18.710Z appoptics:patching patched crypto 
2022-04-25T18:50:18.731Z appoptics:patching patched https 
2022-04-25T18:50:18.732Z appoptics:patching patched http 
2022-04-25T18:50:18.766Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:18.766Z appoptics:patching patched fs 
2022-04-25T18:50:18.791Z appoptics:patching patched pino 4.11.0
2022-04-25T18:50:18.795Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


added 1 package, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:25.941Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:25.942Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:25.942Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:25.942Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:26.037Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:26.207Z appoptics:patching patched crypto 
2022-04-25T18:50:26.256Z appoptics:patching patched https 
2022-04-25T18:50:26.258Z appoptics:patching patched http 
2022-04-25T18:50:26.334Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:26.335Z appoptics:patching patched fs 
2022-04-25T18:50:26.388Z appoptics:patching patched pino 4.12.0
2022-04-25T18:50:26.394Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:34.237Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:34.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:34.237Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:34.238Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:34.310Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:34.450Z appoptics:patching patched crypto 
2022-04-25T18:50:34.481Z appoptics:patching patched https 
2022-04-25T18:50:34.482Z appoptics:patching patched http 
2022-04-25T18:50:34.504Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:34.505Z appoptics:patching patched fs 
2022-04-25T18:50:34.528Z appoptics:patching patched pino 4.13.0
2022-04-25T18:50:34.532Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 2 packages, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:42.948Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:42.949Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:42.949Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:42.949Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:43.039Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:43.198Z appoptics:patching patched crypto 
2022-04-25T18:50:43.219Z appoptics:patching patched https 
2022-04-25T18:50:43.220Z appoptics:patching patched http 
2022-04-25T18:50:43.254Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:43.255Z appoptics:patching patched fs 
2022-04-25T18:50:43.279Z appoptics:patching patched pino 4.14.0
2022-04-25T18:50:43.283Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (199ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:50.155Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:50.155Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:50.155Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:50.156Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:50.228Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:50.368Z appoptics:patching patched crypto 
2022-04-25T18:50:50.391Z appoptics:patching patched https 
2022-04-25T18:50:50.391Z appoptics:patching patched http 
2022-04-25T18:50:50.426Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:50.427Z appoptics:patching patched fs 
2022-04-25T18:50:50.454Z appoptics:patching patched pino 4.15.0
2022-04-25T18:50:50.459Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:58.779Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:58.780Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:58.780Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:58.781Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:58.852Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:58.992Z appoptics:patching patched crypto 
2022-04-25T18:50:59.013Z appoptics:patching patched https 
2022-04-25T18:50:59.014Z appoptics:patching patched http 
2022-04-25T18:50:59.051Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:59.051Z appoptics:patching patched fs 
2022-04-25T18:50:59.075Z appoptics:patching patched pino 4.15.1
2022-04-25T18:50:59.079Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:06.997Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:06.998Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:06.998Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:06.999Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:07.071Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:07.213Z appoptics:patching patched crypto 
2022-04-25T18:51:07.234Z appoptics:patching patched https 
2022-04-25T18:51:07.235Z appoptics:patching patched http 
2022-04-25T18:51:07.274Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:07.275Z appoptics:patching patched fs 
2022-04-25T18:51:07.299Z appoptics:patching patched pino 4.15.2
2022-04-25T18:51:07.303Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 2 packages, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:14.573Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:14.574Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:14.574Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:14.574Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:14.646Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:14.788Z appoptics:patching patched crypto 
2022-04-25T18:51:14.810Z appoptics:patching patched https 
2022-04-25T18:51:14.810Z appoptics:patching patched http 
2022-04-25T18:51:14.846Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:14.847Z appoptics:patching patched fs 
2022-04-25T18:51:14.870Z appoptics:patching patched pino 4.15.3
2022-04-25T18:51:14.875Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:22.573Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:22.574Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:22.574Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:22.575Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:22.644Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:22.797Z appoptics:patching patched crypto 
2022-04-25T18:51:22.833Z appoptics:patching patched https 
2022-04-25T18:51:22.834Z appoptics:patching patched http 
2022-04-25T18:51:22.874Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:22.875Z appoptics:patching patched fs 
2022-04-25T18:51:22.899Z appoptics:patching patched pino 4.15.4
2022-04-25T18:51:22.903Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:30.495Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:30.496Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:30.496Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:30.497Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:30.598Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:30.745Z appoptics:patching patched crypto 
2022-04-25T18:51:30.778Z appoptics:patching patched https 
2022-04-25T18:51:30.779Z appoptics:patching patched http 
2022-04-25T18:51:30.827Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:30.827Z appoptics:patching patched fs 
2022-04-25T18:51:30.856Z appoptics:patching patched pino 4.16.0
2022-04-25T18:51:30.861Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (198ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:38.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:38.078Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:38.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:38.079Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:38.150Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:38.289Z appoptics:patching patched crypto 
2022-04-25T18:51:38.310Z appoptics:patching patched https 
2022-04-25T18:51:38.310Z appoptics:patching patched http 
2022-04-25T18:51:38.353Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:38.354Z appoptics:patching patched fs 
2022-04-25T18:51:38.384Z appoptics:patching patched pino 4.16.1
2022-04-25T18:51:38.390Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:46.229Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:46.230Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:46.230Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:46.231Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:46.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:46.486Z appoptics:patching patched crypto 
2022-04-25T18:51:46.531Z appoptics:patching patched https 
2022-04-25T18:51:46.531Z appoptics:patching patched http 
2022-04-25T18:51:46.572Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:46.572Z appoptics:patching patched fs 
2022-04-25T18:51:46.600Z appoptics:patching patched pino 4.17.0
2022-04-25T18:51:46.604Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:53.701Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:53.701Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:53.701Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:53.702Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:53.787Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:53.953Z appoptics:patching patched crypto 
2022-04-25T18:51:54.000Z appoptics:patching patched https 
2022-04-25T18:51:54.001Z appoptics:patching patched http 
2022-04-25T18:51:54.039Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:54.040Z appoptics:patching patched fs 
2022-04-25T18:51:54.066Z appoptics:patching patched pino 4.17.1
2022-04-25T18:51:54.070Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (198ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:01.794Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:01.795Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:01.795Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:01.796Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:01.868Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:02.013Z appoptics:patching patched crypto 
2022-04-25T18:52:02.047Z appoptics:patching patched https 
2022-04-25T18:52:02.048Z appoptics:patching patched http 
2022-04-25T18:52:02.078Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:02.079Z appoptics:patching patched fs 
2022-04-25T18:52:02.103Z appoptics:patching patched pino 4.17.2
2022-04-25T18:52:02.107Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:09.995Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:09.995Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:09.995Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:09.996Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:10.070Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:10.215Z appoptics:patching patched crypto 
2022-04-25T18:52:10.236Z appoptics:patching patched https 
2022-04-25T18:52:10.237Z appoptics:patching patched http 
2022-04-25T18:52:10.284Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:10.285Z appoptics:patching patched fs 
2022-04-25T18:52:10.309Z appoptics:patching patched pino 4.17.3
2022-04-25T18:52:10.314Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:17.408Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:17.409Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:17.409Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:17.410Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:17.482Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:17.625Z appoptics:patching patched crypto 
2022-04-25T18:52:17.646Z appoptics:patching patched https 
2022-04-25T18:52:17.646Z appoptics:patching patched http 
2022-04-25T18:52:17.681Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:17.682Z appoptics:patching patched fs 
2022-04-25T18:52:17.706Z appoptics:patching patched pino 4.17.5
2022-04-25T18:52:17.711Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:26.011Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:26.011Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:26.011Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:26.012Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:26.083Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:26.224Z appoptics:patching patched crypto 
2022-04-25T18:52:26.246Z appoptics:patching patched https 
2022-04-25T18:52:26.246Z appoptics:patching patched http 
2022-04-25T18:52:26.275Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:26.276Z appoptics:patching patched fs 
2022-04-25T18:52:26.312Z appoptics:patching patched pino 4.17.6
2022-04-25T18:52:26.316Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:34.807Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:34.808Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:34.808Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:34.809Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:34.883Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:35.044Z appoptics:patching patched crypto 
2022-04-25T18:52:35.065Z appoptics:patching patched https 
2022-04-25T18:52:35.066Z appoptics:patching patched http 
2022-04-25T18:52:35.102Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:35.102Z appoptics:patching patched fs 
2022-04-25T18:52:35.112Z appoptics:patching patched pino 5.0.0
2022-04-25T18:52:35.116Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 2 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:42.146Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:42.147Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:42.147Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:42.148Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:42.225Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:42.379Z appoptics:patching patched crypto 
2022-04-25T18:52:42.433Z appoptics:patching patched https 
2022-04-25T18:52:42.433Z appoptics:patching patched http 
2022-04-25T18:52:42.472Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:42.473Z appoptics:patching patched fs 
2022-04-25T18:52:42.483Z appoptics:patching patched pino 5.0.1
2022-04-25T18:52:42.487Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (194ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:50.399Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:50.400Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:50.400Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:50.401Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:50.475Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:50.619Z appoptics:patching patched crypto 
2022-04-25T18:52:50.640Z appoptics:patching patched https 
2022-04-25T18:52:50.640Z appoptics:patching patched http 
2022-04-25T18:52:50.681Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:50.682Z appoptics:patching patched fs 
2022-04-25T18:52:50.692Z appoptics:patching patched pino 5.0.2
2022-04-25T18:52:50.696Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (189ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:58.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:58.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:58.327Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:58.328Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:58.420Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:58.637Z appoptics:patching patched crypto 
2022-04-25T18:52:58.702Z appoptics:patching patched https 
2022-04-25T18:52:58.703Z appoptics:patching patched http 
2022-04-25T18:52:58.738Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:58.738Z appoptics:patching patched fs 
2022-04-25T18:52:58.752Z appoptics:patching patched pino 5.0.3
2022-04-25T18:52:58.765Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:06.082Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:06.082Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:06.083Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:06.083Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:06.154Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:06.295Z appoptics:patching patched crypto 
2022-04-25T18:53:06.325Z appoptics:patching patched https 
2022-04-25T18:53:06.326Z appoptics:patching patched http 
2022-04-25T18:53:06.348Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:06.348Z appoptics:patching patched fs 
2022-04-25T18:53:06.357Z appoptics:patching patched pino 5.0.4
2022-04-25T18:53:06.362Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 929 packages in 11s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:17.769Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:17.770Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:17.770Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:17.771Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:17.842Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:17.986Z appoptics:patching patched crypto 
2022-04-25T18:53:18.008Z appoptics:patching patched https 
2022-04-25T18:53:18.008Z appoptics:patching patched http 
2022-04-25T18:53:18.045Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:18.045Z appoptics:patching patched fs 
2022-04-25T18:53:18.055Z appoptics:patching patched pino 5.0.5
2022-04-25T18:53:18.059Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:31.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:31.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:31.328Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:31.328Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:31.401Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:31.544Z appoptics:patching patched crypto 
2022-04-25T18:53:31.565Z appoptics:patching patched https 
2022-04-25T18:53:31.566Z appoptics:patching patched http 
2022-04-25T18:53:31.600Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:31.601Z appoptics:patching patched fs 
2022-04-25T18:53:31.610Z appoptics:patching patched pino 5.1.0
2022-04-25T18:53:31.615Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:39.754Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:39.755Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:39.755Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:39.756Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:39.828Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:39.971Z appoptics:patching patched crypto 
2022-04-25T18:53:39.991Z appoptics:patching patched https 
2022-04-25T18:53:39.992Z appoptics:patching patched http 
2022-04-25T18:53:40.027Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:40.028Z appoptics:patching patched fs 
2022-04-25T18:53:40.037Z appoptics:patching patched pino 5.1.1
2022-04-25T18:53:40.041Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:47.393Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:47.394Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:47.394Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:47.395Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:47.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:47.647Z appoptics:patching patched crypto 
2022-04-25T18:53:47.694Z appoptics:patching patched https 
2022-04-25T18:53:47.694Z appoptics:patching patched http 
2022-04-25T18:53:47.735Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:47.736Z appoptics:patching patched fs 
2022-04-25T18:53:47.747Z appoptics:patching patched pino 5.2.0
2022-04-25T18:53:47.752Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:55.013Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:55.013Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:55.013Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:55.014Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:55.086Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:55.230Z appoptics:patching patched crypto 
2022-04-25T18:53:55.252Z appoptics:patching patched https 
2022-04-25T18:53:55.252Z appoptics:patching patched http 
2022-04-25T18:53:55.289Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:55.290Z appoptics:patching patched fs 
2022-04-25T18:53:55.299Z appoptics:patching patched pino 5.3.0
2022-04-25T18:53:55.303Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:03.471Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:03.471Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:03.471Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:03.472Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:03.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:03.688Z appoptics:patching patched crypto 
2022-04-25T18:54:03.729Z appoptics:patching patched https 
2022-04-25T18:54:03.729Z appoptics:patching patched http 
2022-04-25T18:54:03.751Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:03.752Z appoptics:patching patched fs 
2022-04-25T18:54:03.761Z appoptics:patching patched pino 5.3.1
2022-04-25T18:54:03.765Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:10.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:10.815Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:10.815Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:10.816Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:10.889Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:11.030Z appoptics:patching patched crypto 
2022-04-25T18:54:11.051Z appoptics:patching patched https 
2022-04-25T18:54:11.051Z appoptics:patching patched http 
2022-04-25T18:54:11.092Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:11.092Z appoptics:patching patched fs 
2022-04-25T18:54:11.104Z appoptics:patching patched pino 5.4.0
2022-04-25T18:54:11.108Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (234ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:19.070Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:19.071Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:19.071Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:19.071Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:19.143Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:19.283Z appoptics:patching patched crypto 
2022-04-25T18:54:19.319Z appoptics:patching patched https 
2022-04-25T18:54:19.320Z appoptics:patching patched http 
2022-04-25T18:54:19.350Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:19.351Z appoptics:patching patched fs 
2022-04-25T18:54:19.360Z appoptics:patching patched pino 5.4.1
2022-04-25T18:54:19.364Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:27.668Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:27.668Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:27.668Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:27.669Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:27.741Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:27.882Z appoptics:patching patched crypto 
2022-04-25T18:54:27.903Z appoptics:patching patched https 
2022-04-25T18:54:27.904Z appoptics:patching patched http 
2022-04-25T18:54:27.940Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:27.940Z appoptics:patching patched fs 
2022-04-25T18:54:27.949Z appoptics:patching patched pino 5.5.0
2022-04-25T18:54:27.954Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:35.083Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:35.084Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:35.084Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:35.085Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:35.155Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:35.299Z appoptics:patching patched crypto 
2022-04-25T18:54:35.320Z appoptics:patching patched https 
2022-04-25T18:54:35.320Z appoptics:patching patched http 
2022-04-25T18:54:35.370Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:35.370Z appoptics:patching patched fs 
2022-04-25T18:54:35.380Z appoptics:patching patched pino 5.6.0
2022-04-25T18:54:35.384Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:42.732Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:42.733Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:42.733Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:42.734Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:42.808Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:42.948Z appoptics:patching patched crypto 
2022-04-25T18:54:42.969Z appoptics:patching patched https 
2022-04-25T18:54:42.969Z appoptics:patching patched http 
2022-04-25T18:54:43.005Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:43.005Z appoptics:patching patched fs 
2022-04-25T18:54:43.015Z appoptics:patching patched pino 5.6.1
2022-04-25T18:54:43.019Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:50.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:50.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:50.618Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:50.619Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:50.726Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:50.950Z appoptics:patching patched crypto 
2022-04-25T18:54:51.005Z appoptics:patching patched https 
2022-04-25T18:54:51.006Z appoptics:patching patched http 
2022-04-25T18:54:51.046Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:51.047Z appoptics:patching patched fs 
2022-04-25T18:54:51.056Z appoptics:patching patched pino 5.6.2
2022-04-25T18:54:51.060Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:58.307Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:58.308Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:58.308Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:58.308Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:58.379Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:58.519Z appoptics:patching patched crypto 
2022-04-25T18:54:58.542Z appoptics:patching patched https 
2022-04-25T18:54:58.543Z appoptics:patching patched http 
2022-04-25T18:54:58.575Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:58.576Z appoptics:patching patched fs 
2022-04-25T18:54:58.585Z appoptics:patching patched pino 5.6.3
2022-04-25T18:54:58.589Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:06.220Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:06.221Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:06.221Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:06.222Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:06.293Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:06.434Z appoptics:patching patched crypto 
2022-04-25T18:55:06.496Z appoptics:patching patched https 
2022-04-25T18:55:06.497Z appoptics:patching patched http 
2022-04-25T18:55:06.521Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:06.522Z appoptics:patching patched fs 
2022-04-25T18:55:06.540Z appoptics:patching patched pino 5.6.4
2022-04-25T18:55:06.544Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:13.820Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:13.821Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:13.821Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:13.822Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:13.894Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:14.080Z appoptics:patching patched crypto 
2022-04-25T18:55:14.126Z appoptics:patching patched https 
2022-04-25T18:55:14.127Z appoptics:patching patched http 
2022-04-25T18:55:14.164Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:14.164Z appoptics:patching patched fs 
2022-04-25T18:55:14.174Z appoptics:patching patched pino 5.7.0
2022-04-25T18:55:14.178Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:21.854Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:21.854Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:21.855Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:21.856Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:21.925Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:22.072Z appoptics:patching patched crypto 
2022-04-25T18:55:22.093Z appoptics:patching patched https 
2022-04-25T18:55:22.094Z appoptics:patching patched http 
2022-04-25T18:55:22.127Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:22.128Z appoptics:patching patched fs 
2022-04-25T18:55:22.137Z appoptics:patching patched pino 5.8.0
2022-04-25T18:55:22.142Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:30.152Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:30.153Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:30.153Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:30.153Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:30.225Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:30.365Z appoptics:patching patched crypto 
2022-04-25T18:55:30.399Z appoptics:patching patched https 
2022-04-25T18:55:30.400Z appoptics:patching patched http 
2022-04-25T18:55:30.432Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:30.433Z appoptics:patching patched fs 
2022-04-25T18:55:30.438Z appoptics:patching patched pino 5.8.1
2022-04-25T18:55:30.442Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:37.415Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:37.418Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:37.418Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:37.421Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:37.494Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:37.646Z appoptics:patching patched crypto 
2022-04-25T18:55:37.675Z appoptics:patching patched https 
2022-04-25T18:55:37.675Z appoptics:patching patched http 
2022-04-25T18:55:37.719Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:37.719Z appoptics:patching patched fs 
2022-04-25T18:55:37.725Z appoptics:patching patched pino 5.9.0
2022-04-25T18:55:37.729Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


added 1 package, changed 2 packages, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:45.601Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:45.601Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:45.601Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:45.602Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:45.688Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:45.844Z appoptics:patching patched crypto 
2022-04-25T18:55:45.875Z appoptics:patching patched https 
2022-04-25T18:55:45.876Z appoptics:patching patched http 
2022-04-25T18:55:45.921Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:45.921Z appoptics:patching patched fs 
2022-04-25T18:55:45.927Z appoptics:patching patched pino 5.10.1
2022-04-25T18:55:45.931Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 930 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:54.151Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:54.151Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:54.151Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:54.152Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:54.223Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:54.362Z appoptics:patching patched crypto 
2022-04-25T18:55:54.384Z appoptics:patching patched https 
2022-04-25T18:55:54.384Z appoptics:patching patched http 
2022-04-25T18:55:54.422Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:54.423Z appoptics:patching patched fs 
2022-04-25T18:55:54.428Z appoptics:patching patched pino 5.10.2
2022-04-25T18:55:54.432Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:01.186Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:01.187Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:01.187Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:01.188Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:01.256Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:01.394Z appoptics:patching patched crypto 
2022-04-25T18:56:01.424Z appoptics:patching patched https 
2022-04-25T18:56:01.424Z appoptics:patching patched http 
2022-04-25T18:56:01.458Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:01.459Z appoptics:patching patched fs 
2022-04-25T18:56:01.465Z appoptics:patching patched pino 5.10.3
2022-04-25T18:56:01.469Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:09.533Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:09.534Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:09.534Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:09.535Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:09.605Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:09.750Z appoptics:patching patched crypto 
2022-04-25T18:56:09.786Z appoptics:patching patched https 
2022-04-25T18:56:09.786Z appoptics:patching patched http 
2022-04-25T18:56:09.818Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:09.819Z appoptics:patching patched fs 
2022-04-25T18:56:09.825Z appoptics:patching patched pino 5.10.4
2022-04-25T18:56:09.829Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


removed 3 packages, changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:17.097Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:17.098Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:17.098Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:17.099Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:17.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:17.437Z appoptics:patching patched crypto 
2022-04-25T18:56:17.474Z appoptics:patching patched https 
2022-04-25T18:56:17.477Z appoptics:patching patched http 
2022-04-25T18:56:17.568Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:17.568Z appoptics:patching patched fs 
2022-04-25T18:56:17.574Z appoptics:patching patched pino 5.10.5
2022-04-25T18:56:17.579Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:24.810Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:24.811Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:24.811Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:24.812Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:24.883Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:25.023Z appoptics:patching patched crypto 
2022-04-25T18:56:25.044Z appoptics:patching patched https 
2022-04-25T18:56:25.045Z appoptics:patching patched http 
2022-04-25T18:56:25.085Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:25.086Z appoptics:patching patched fs 
2022-04-25T18:56:25.092Z appoptics:patching patched pino 5.10.6
2022-04-25T18:56:25.096Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:33.176Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:33.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:33.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:33.178Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:33.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:33.401Z appoptics:patching patched crypto 
2022-04-25T18:56:33.422Z appoptics:patching patched https 
2022-04-25T18:56:33.423Z appoptics:patching patched http 
2022-04-25T18:56:33.459Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:33.460Z appoptics:patching patched fs 
2022-04-25T18:56:33.465Z appoptics:patching patched pino 5.10.7
2022-04-25T18:56:33.469Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:40.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:40.713Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:40.713Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:40.714Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:40.784Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:40.922Z appoptics:patching patched crypto 
2022-04-25T18:56:40.942Z appoptics:patching patched https 
2022-04-25T18:56:40.943Z appoptics:patching patched http 
2022-04-25T18:56:40.980Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:40.980Z appoptics:patching patched fs 
2022-04-25T18:56:40.986Z appoptics:patching patched pino 5.10.8
2022-04-25T18:56:40.990Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:48.796Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:48.797Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:48.797Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:48.798Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:48.869Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:49.057Z appoptics:patching patched crypto 
2022-04-25T18:56:49.117Z appoptics:patching patched https 
2022-04-25T18:56:49.118Z appoptics:patching patched http 
2022-04-25T18:56:49.164Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:49.164Z appoptics:patching patched fs 
2022-04-25T18:56:49.170Z appoptics:patching patched pino 5.10.9
2022-04-25T18:56:49.174Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:56.852Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:56.853Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:56.853Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:56.854Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:56.938Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:57.095Z appoptics:patching patched crypto 
2022-04-25T18:56:57.123Z appoptics:patching patched https 
2022-04-25T18:56:57.124Z appoptics:patching patched http 
2022-04-25T18:56:57.161Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:57.161Z appoptics:patching patched fs 
2022-04-25T18:56:57.167Z appoptics:patching patched pino 5.10.10
2022-04-25T18:56:57.171Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:04.354Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:04.355Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:04.355Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:04.356Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:04.441Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:04.589Z appoptics:patching patched crypto 
2022-04-25T18:57:04.612Z appoptics:patching patched https 
2022-04-25T18:57:04.612Z appoptics:patching patched http 
2022-04-25T18:57:04.647Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:04.647Z appoptics:patching patched fs 
2022-04-25T18:57:04.653Z appoptics:patching patched pino 5.11.0
2022-04-25T18:57:04.658Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:12.816Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:12.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:12.817Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:12.818Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:12.889Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:13.030Z appoptics:patching patched crypto 
2022-04-25T18:57:13.052Z appoptics:patching patched https 
2022-04-25T18:57:13.052Z appoptics:patching patched http 
2022-04-25T18:57:13.091Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:13.092Z appoptics:patching patched fs 
2022-04-25T18:57:13.098Z appoptics:patching patched pino 5.11.1
2022-04-25T18:57:13.102Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:20.618Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:20.618Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:20.618Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:20.619Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:20.733Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:20.945Z appoptics:patching patched crypto 
2022-04-25T18:57:21.021Z appoptics:patching patched https 
2022-04-25T18:57:21.022Z appoptics:patching patched http 
2022-04-25T18:57:21.108Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:21.109Z appoptics:patching patched fs 
2022-04-25T18:57:21.119Z appoptics:patching patched pino 5.11.2
2022-04-25T18:57:21.126Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (220ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:28.193Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:28.194Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:28.194Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:28.194Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:28.266Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:28.404Z appoptics:patching patched crypto 
2022-04-25T18:57:28.425Z appoptics:patching patched https 
2022-04-25T18:57:28.425Z appoptics:patching patched http 
2022-04-25T18:57:28.464Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:28.465Z appoptics:patching patched fs 
2022-04-25T18:57:28.471Z appoptics:patching patched pino 5.11.3
2022-04-25T18:57:28.475Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:36.543Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:36.544Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:36.544Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:36.544Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:36.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:36.752Z appoptics:patching patched crypto 
2022-04-25T18:57:36.772Z appoptics:patching patched https 
2022-04-25T18:57:36.773Z appoptics:patching patched http 
2022-04-25T18:57:36.812Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:36.812Z appoptics:patching patched fs 
2022-04-25T18:57:36.818Z appoptics:patching patched pino 5.12.0
2022-04-25T18:57:36.822Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:43.612Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:43.612Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:43.613Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:43.613Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:43.696Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:43.857Z appoptics:patching patched crypto 
2022-04-25T18:57:43.901Z appoptics:patching patched https 
2022-04-25T18:57:43.902Z appoptics:patching patched http 
2022-04-25T18:57:43.941Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:43.942Z appoptics:patching patched fs 
2022-04-25T18:57:43.948Z appoptics:patching patched pino 5.12.1
2022-04-25T18:57:43.952Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:51.430Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:51.431Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:51.431Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:51.432Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:51.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:51.645Z appoptics:patching patched crypto 
2022-04-25T18:57:51.666Z appoptics:patching patched https 
2022-04-25T18:57:51.667Z appoptics:patching patched http 
2022-04-25T18:57:51.705Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:51.706Z appoptics:patching patched fs 
2022-04-25T18:57:51.711Z appoptics:patching patched pino 5.12.2
2022-04-25T18:57:51.716Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:59.640Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:59.641Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:59.641Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:59.641Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:59.714Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:59.853Z appoptics:patching patched crypto 
2022-04-25T18:57:59.874Z appoptics:patching patched https 
2022-04-25T18:57:59.875Z appoptics:patching patched http 
2022-04-25T18:57:59.913Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:59.914Z appoptics:patching patched fs 
2022-04-25T18:57:59.919Z appoptics:patching patched pino 5.12.3
2022-04-25T18:57:59.924Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:07.019Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:07.019Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:07.019Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:07.020Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:07.093Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:07.242Z appoptics:patching patched crypto 
2022-04-25T18:58:07.279Z appoptics:patching patched https 
2022-04-25T18:58:07.279Z appoptics:patching patched http 
2022-04-25T18:58:07.324Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:07.324Z appoptics:patching patched fs 
2022-04-25T18:58:07.330Z appoptics:patching patched pino 5.12.4
2022-04-25T18:58:07.335Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 927 packages in 12s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:19.642Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:19.643Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:19.643Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:19.644Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:19.717Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:19.857Z appoptics:patching patched crypto 
2022-04-25T18:58:19.881Z appoptics:patching patched https 
2022-04-25T18:58:19.881Z appoptics:patching patched http 
2022-04-25T18:58:19.914Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:19.915Z appoptics:patching patched fs 
2022-04-25T18:58:19.920Z appoptics:patching patched pino 5.12.5
2022-04-25T18:58:19.925Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 927 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:33.812Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:33.813Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:33.813Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:33.814Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:33.902Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:34.101Z appoptics:patching patched crypto 
2022-04-25T18:58:34.164Z appoptics:patching patched https 
2022-04-25T18:58:34.164Z appoptics:patching patched http 
2022-04-25T18:58:34.213Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:34.213Z appoptics:patching patched fs 
2022-04-25T18:58:34.220Z appoptics:patching patched pino 5.12.6
2022-04-25T18:58:34.224Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (193ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:41.734Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:41.735Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:41.735Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:41.736Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:41.807Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:41.951Z appoptics:patching patched crypto 
2022-04-25T18:58:41.974Z appoptics:patching patched https 
2022-04-25T18:58:41.975Z appoptics:patching patched http 
2022-04-25T18:58:42.010Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:42.010Z appoptics:patching patched fs 
2022-04-25T18:58:42.016Z appoptics:patching patched pino 5.13.0
2022-04-25T18:58:42.020Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:49.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:49.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:49.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:49.707Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:49.793Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:49.955Z appoptics:patching patched crypto 
2022-04-25T18:58:50.002Z appoptics:patching patched https 
2022-04-25T18:58:50.003Z appoptics:patching patched http 
2022-04-25T18:58:50.044Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:50.045Z appoptics:patching patched fs 
2022-04-25T18:58:50.052Z appoptics:patching patched pino 5.13.1
2022-04-25T18:58:50.056Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:56.984Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:56.985Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:56.985Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:56.986Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:57.059Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:57.203Z appoptics:patching patched crypto 
2022-04-25T18:58:57.227Z appoptics:patching patched https 
2022-04-25T18:58:57.228Z appoptics:patching patched http 
2022-04-25T18:58:57.266Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:57.267Z appoptics:patching patched fs 
2022-04-25T18:58:57.273Z appoptics:patching patched pino 5.13.2
2022-04-25T18:58:57.279Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:05.014Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:05.015Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:05.015Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:05.016Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:05.094Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:05.236Z appoptics:patching patched crypto 
2022-04-25T18:59:05.257Z appoptics:patching patched https 
2022-04-25T18:59:05.258Z appoptics:patching patched http 
2022-04-25T18:59:05.296Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:05.297Z appoptics:patching patched fs 
2022-04-25T18:59:05.302Z appoptics:patching patched pino 5.13.3
2022-04-25T18:59:05.307Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:13.302Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:13.303Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:13.303Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:13.304Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:13.376Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:13.516Z appoptics:patching patched crypto 
2022-04-25T18:59:13.537Z appoptics:patching patched https 
2022-04-25T18:59:13.538Z appoptics:patching patched http 
2022-04-25T18:59:13.575Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:13.576Z appoptics:patching patched fs 
2022-04-25T18:59:13.581Z appoptics:patching patched pino 5.13.4
2022-04-25T18:59:13.586Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:20.438Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:20.439Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:20.439Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:20.440Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:20.511Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:20.649Z appoptics:patching patched crypto 
2022-04-25T18:59:20.671Z appoptics:patching patched https 
2022-04-25T18:59:20.672Z appoptics:patching patched http 
2022-04-25T18:59:20.710Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:20.710Z appoptics:patching patched fs 
2022-04-25T18:59:20.716Z appoptics:patching patched pino 5.13.5
2022-04-25T18:59:20.720Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:28.891Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:28.892Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:28.892Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:28.892Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:28.964Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:29.103Z appoptics:patching patched crypto 
2022-04-25T18:59:29.124Z appoptics:patching patched https 
2022-04-25T18:59:29.125Z appoptics:patching patched http 
2022-04-25T18:59:29.164Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:29.165Z appoptics:patching patched fs 
2022-04-25T18:59:29.170Z appoptics:patching patched pino 5.13.6
2022-04-25T18:59:29.175Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:37.076Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:37.077Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:37.077Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:37.078Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:37.213Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:37.440Z appoptics:patching patched crypto 
2022-04-25T18:59:37.481Z appoptics:patching patched https 
2022-04-25T18:59:37.482Z appoptics:patching patched http 
2022-04-25T18:59:37.524Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:37.525Z appoptics:patching patched fs 
2022-04-25T18:59:37.531Z appoptics:patching patched pino 5.14.0
2022-04-25T18:59:37.535Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (203ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:44.487Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:44.488Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:44.488Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:44.489Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:44.560Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:44.700Z appoptics:patching patched crypto 
2022-04-25T18:59:44.724Z appoptics:patching patched https 
2022-04-25T18:59:44.725Z appoptics:patching patched http 
2022-04-25T18:59:44.761Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:44.761Z appoptics:patching patched fs 
2022-04-25T18:59:44.767Z appoptics:patching patched pino 5.15.0
2022-04-25T18:59:44.771Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:52.991Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:52.992Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:52.992Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:52.993Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:53.066Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:53.207Z appoptics:patching patched crypto 
2022-04-25T18:59:53.228Z appoptics:patching patched https 
2022-04-25T18:59:53.229Z appoptics:patching patched http 
2022-04-25T18:59:53.268Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:53.268Z appoptics:patching patched fs 
2022-04-25T18:59:53.275Z appoptics:patching patched pino 5.16.0
2022-04-25T18:59:53.279Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:00.393Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:00.394Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:00.394Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:00.395Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:00.471Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:00.624Z appoptics:patching patched crypto 
2022-04-25T19:00:00.662Z appoptics:patching patched https 
2022-04-25T19:00:00.663Z appoptics:patching patched http 
2022-04-25T19:00:00.707Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:00.707Z appoptics:patching patched fs 
2022-04-25T19:00:00.713Z appoptics:patching patched pino 5.17.0
2022-04-25T19:00:00.718Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 3 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:08.416Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:08.417Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:08.417Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:08.418Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:08.490Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:08.633Z appoptics:patching patched crypto 
2022-04-25T19:00:08.656Z appoptics:patching patched https 
2022-04-25T19:00:08.656Z appoptics:patching patched http 
2022-04-25T19:00:08.703Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:08.704Z appoptics:patching patched fs 
2022-04-25T19:00:08.721Z appoptics:patching patched pino 6.0.0
2022-04-25T19:00:08.726Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (199ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3859
         "time": 1650913208760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3859
         "time": 1650913208773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3859
         "time": 1650913208777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3859
         "time": 1650913208781
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3859
         "time": 1650913208784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3859
         "time": 1650913208788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3859
         "time": 1650913208790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3859
         "time": 1650913208791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3859
         "time": 1650913208793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3859
         "time": 1650913208795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3859
         "time": 1650913208796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3859
         "time": 1650913208798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3859
         "time": 1650913208903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9DA786F211A47279650A75CDD0FDA3B788E27E08-1"
         "pid": 3859
         "time": 1650913208933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:16.416Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:16.416Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:16.416Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:16.417Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:16.489Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:16.629Z appoptics:patching patched crypto 
2022-04-25T19:00:16.650Z appoptics:patching patched https 
2022-04-25T19:00:16.651Z appoptics:patching patched http 
2022-04-25T19:00:16.692Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:16.692Z appoptics:patching patched fs 
2022-04-25T19:00:16.699Z appoptics:patching patched pino 6.1.0
2022-04-25T19:00:16.703Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3881
         "time": 1650913216733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3881
         "time": 1650913216743
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3881
         "time": 1650913216747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3881
         "time": 1650913216751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3881
         "time": 1650913216754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3881
         "time": 1650913216757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3881
         "time": 1650913216759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3881
         "time": 1650913216761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3881
         "time": 1650913216763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3881
         "time": 1650913216765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3881
         "time": 1650913216766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3881
         "time": 1650913216768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3881
         "time": 1650913216872
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7B97C3E2BB3689A5CD54497E6DDE841174C998C8-1"
         "pid": 3881
         "time": 1650913216903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:23.994Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:23.994Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:23.994Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:23.995Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:24.067Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:24.210Z appoptics:patching patched crypto 
2022-04-25T19:00:24.231Z appoptics:patching patched https 
2022-04-25T19:00:24.232Z appoptics:patching patched http 
2022-04-25T19:00:24.271Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:24.271Z appoptics:patching patched fs 
2022-04-25T19:00:24.278Z appoptics:patching patched pino 6.1.1
2022-04-25T19:00:24.282Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3903
         "time": 1650913224311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3903
         "time": 1650913224320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3903
         "time": 1650913224324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3903
         "time": 1650913224327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3903
         "time": 1650913224330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3903
         "time": 1650913224334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3903
         "time": 1650913224336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3903
         "time": 1650913224337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3903
         "time": 1650913224339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3903
         "time": 1650913224341
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3903
         "time": 1650913224342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3903
         "time": 1650913224344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3903
         "time": 1650913224450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6A16970A05A408BF8371E845EECE6FEFC59EB6C3-1"
         "pid": 3903
         "time": 1650913224480
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:32.241Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:32.242Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:32.242Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:32.242Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:32.314Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:32.460Z appoptics:patching patched crypto 
2022-04-25T19:00:32.481Z appoptics:patching patched https 
2022-04-25T19:00:32.482Z appoptics:patching patched http 
2022-04-25T19:00:32.520Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:32.521Z appoptics:patching patched fs 
2022-04-25T19:00:32.527Z appoptics:patching patched pino 6.2.0
2022-04-25T19:00:32.531Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3925
         "time": 1650913232560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3925
         "time": 1650913232569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3925
         "time": 1650913232574
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3925
         "time": 1650913232577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3925
         "time": 1650913232580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3925
         "time": 1650913232583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3925
         "time": 1650913232585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3925
         "time": 1650913232587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3925
         "time": 1650913232588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3925
         "time": 1650913232590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3925
         "time": 1650913232591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3925
         "time": 1650913232593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3925
         "time": 1650913232699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4CC6AC25667FAB6B7CE7260C9A49FE4FE226A6D4-1"
         "pid": 3925
         "time": 1650913232728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:40.775Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:40.776Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:40.776Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:40.777Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:40.859Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:41.018Z appoptics:patching patched crypto 
2022-04-25T19:00:41.064Z appoptics:patching patched https 
2022-04-25T19:00:41.065Z appoptics:patching patched http 
2022-04-25T19:00:41.102Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:41.103Z appoptics:patching patched fs 
2022-04-25T19:00:41.109Z appoptics:patching patched pino 6.2.1
2022-04-25T19:00:41.114Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3947
         "time": 1650913241145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3947
         "time": 1650913241154
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3947
         "time": 1650913241160
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3947
         "time": 1650913241163
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3947
         "time": 1650913241166
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3947
         "time": 1650913241170
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3947
         "time": 1650913241172
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3947
         "time": 1650913241174
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3947
         "time": 1650913241176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3947
         "time": 1650913241178
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3947
         "time": 1650913241180
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3947
         "time": 1650913241182
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3947
         "time": 1650913241286
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 04A71E7292940929EADBA4C8BD093909A4A06062-1"
         "pid": 3947
         "time": 1650913241315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:48.189Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:48.190Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:48.190Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:48.191Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:48.261Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:48.400Z appoptics:patching patched crypto 
2022-04-25T19:00:48.432Z appoptics:patching patched https 
2022-04-25T19:00:48.432Z appoptics:patching patched http 
2022-04-25T19:00:48.458Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:48.459Z appoptics:patching patched fs 
2022-04-25T19:00:48.465Z appoptics:patching patched pino 6.3.0
2022-04-25T19:00:48.469Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3969
         "time": 1650913248498
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3969
         "time": 1650913248506
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3969
         "time": 1650913248511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3969
         "time": 1650913248514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3969
         "time": 1650913248517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3969
         "time": 1650913248521
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3969
         "time": 1650913248523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3969
         "time": 1650913248524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3969
         "time": 1650913248526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3969
         "time": 1650913248528
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3969
         "time": 1650913248529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3969
         "time": 1650913248531
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3969
         "time": 1650913248636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A6E0682CEAC1B63D5F83B7E81E837C752030C59C-1"
         "pid": 3969
         "time": 1650913248667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:56.903Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:56.904Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:56.904Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:56.905Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:56.975Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:57.123Z appoptics:patching patched crypto 
2022-04-25T19:00:57.163Z appoptics:patching patched https 
2022-04-25T19:00:57.164Z appoptics:patching patched http 
2022-04-25T19:00:57.191Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:57.191Z appoptics:patching patched fs 
2022-04-25T19:00:57.198Z appoptics:patching patched pino 6.3.1
2022-04-25T19:00:57.202Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3991
         "time": 1650913257233
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3991
         "time": 1650913257242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3991
         "time": 1650913257246
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3991
         "time": 1650913257250
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3991
         "time": 1650913257253
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3991
         "time": 1650913257257
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3991
         "time": 1650913257259
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3991
         "time": 1650913257261
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3991
         "time": 1650913257262
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3991
         "time": 1650913257264
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3991
         "time": 1650913257266
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3991
         "time": 1650913257268
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3991
         "time": 1650913257372
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3C7A765EFED99EF10DD50E92F2727E0AEF8D55AF-1"
         "pid": 3991
         "time": 1650913257401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:04.975Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:04.976Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:04.976Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:04.977Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:05.063Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:05.221Z appoptics:patching patched crypto 
2022-04-25T19:01:05.258Z appoptics:patching patched https 
2022-04-25T19:01:05.259Z appoptics:patching patched http 
2022-04-25T19:01:05.302Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:05.303Z appoptics:patching patched fs 
2022-04-25T19:01:05.315Z appoptics:patching patched pino 6.3.2
2022-04-25T19:01:05.327Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (207ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4013
         "time": 1650913265366
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4013
         "time": 1650913265376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4013
         "time": 1650913265381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4013
         "time": 1650913265384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4013
         "time": 1650913265387
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4013
         "time": 1650913265391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4013
         "time": 1650913265393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4013
         "time": 1650913265394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4013
         "time": 1650913265396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4013
         "time": 1650913265398
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4013
         "time": 1650913265402
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4013
         "time": 1650913265407
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4013
         "time": 1650913265512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0C3AC906E6B0B9AB86D974CAD7D11B06874DEC39-1"
         "pid": 4013
         "time": 1650913265541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:12.571Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:12.571Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:12.571Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:12.572Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:12.645Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:12.785Z appoptics:patching patched crypto 
2022-04-25T19:01:12.806Z appoptics:patching patched https 
2022-04-25T19:01:12.807Z appoptics:patching patched http 
2022-04-25T19:01:12.847Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:12.847Z appoptics:patching patched fs 
2022-04-25T19:01:12.854Z appoptics:patching patched pino 6.4.0
2022-04-25T19:01:12.858Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4035
         "time": 1650913272887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "541D848B5E62ABAE5DF55E5F791E6A9087AD5987-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4035
         "time": 1650913272895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C75147B4A519E9FD3BFE0F2E53CAFF59BFCC2C10-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4035
         "time": 1650913272900
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4A12676C958DAD6EE609DCC5E3B51942517E6CE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4035
         "time": 1650913272903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0477293776537736568FA8EEEB8794E1D630A8D4-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4035
         "time": 1650913272906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4035
         "time": 1650913272909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F93A7BCBA432042513501C6A1305FE592D09003-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4035
         "time": 1650913272911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CA51ABCFA6F823EFF93401980E056192BA7D9EA-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4035
         "time": 1650913272913
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4035
         "time": 1650913272915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AE34CEE72A389A59D340D53B548C92CDAB2AB2E2-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4035
         "time": 1650913272916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4035
         "time": 1650913272918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E20107286666E8BC223668664A151FF48046AAD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4035
         "time": 1650913272920
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "177EAC4340148FB06C13E751247EA8EF03AABA35-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4035
         "time": 1650913273024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 276B6B499F1BC6DA4962EA3CD7270EC89204B876-1"
         "pid": 4035
         "time": 1650913273055
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:20.899Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:20.900Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:20.900Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:20.901Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:20.973Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:21.142Z appoptics:patching patched crypto 
2022-04-25T19:01:21.163Z appoptics:patching patched https 
2022-04-25T19:01:21.164Z appoptics:patching patched http 
2022-04-25T19:01:21.203Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:21.203Z appoptics:patching patched fs 
2022-04-25T19:01:21.209Z appoptics:patching patched pino 6.4.1
2022-04-25T19:01:21.213Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4057
         "time": 1650913281242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9B4D8C983B87F9594BAEEE1A0ACF1F3373AFFF83-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4057
         "time": 1650913281251
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1E62EF29FE74807711C12BA53318D99EEDFD7F9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4057
         "time": 1650913281255
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C234BDA8BACDAAF147C709D3304FFD0605481FC2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4057
         "time": 1650913281259
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA28CB4993A75FBE5F27DF0E8F4BCBD9B528DBA8-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4057
         "time": 1650913281261
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4057
         "time": 1650913281265
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A49B073EDC5696DBAE50829B7ACCD3BA3671A5FF-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4057
         "time": 1650913281266
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9ED3A936182275FBFEDF4A29429E8CB1DC2CEFD8-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4057
         "time": 1650913281268
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4057
         "time": 1650913281270
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F09944BDE19617BA9DEEDD49DE5D683C59FCD494-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4057
         "time": 1650913281271
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4057
         "time": 1650913281273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D65067F37C1AFBE9A3516FD8BC00C924086FE20-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4057
         "time": 1650913281275
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "721318650777F0EA5EAAAD0B844F16E0611107FD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4057
         "time": 1650913281381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 36CF01C7DB265BCE641213654250124E845FF630-1"
         "pid": 4057
         "time": 1650913281410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:28.424Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:28.425Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:28.425Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:28.426Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:28.499Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:28.666Z appoptics:patching patched crypto 
2022-04-25T19:01:28.723Z appoptics:patching patched https 
2022-04-25T19:01:28.724Z appoptics:patching patched http 
2022-04-25T19:01:28.755Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:28.755Z appoptics:patching patched fs 
2022-04-25T19:01:28.762Z appoptics:patching patched pino 6.5.0
2022-04-25T19:01:28.767Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4079
         "time": 1650913288797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D4E8B673997F1046DFF25253D1CC29FC546A544-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4079
         "time": 1650913288806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "531013123C7282807974E85E39FC36C4783B58A5-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4079
         "time": 1650913288810
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62F55527270F41848C3EB58525759C55DC4AC3ED-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4079
         "time": 1650913288814
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9DCA233DF64C75901160FC345C36FA8ADBF85708-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4079
         "time": 1650913288817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4079
         "time": 1650913288821
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C17C5230FA113E04F71D9BAF0FAECDECDE27EEEA-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4079
         "time": 1650913288823
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "98B2E02AEB7AAE75662293302A73CB8291F98FB1-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4079
         "time": 1650913288824
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4079
         "time": 1650913288826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0EE7C52BE70EC057DAB9FD5E51B1DCF0B004D2F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4079
         "time": 1650913288828
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4079
         "time": 1650913288829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5249480807B5EBC242FBD3470765D96C6FD9E99A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4079
         "time": 1650913288831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85375ADDC10D2D27508E0EC0CBB2ED32B2ECCE42-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4079
         "time": 1650913288936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A847D4DF14D28FEC3DCE2C84CC0B3A8B4267E829-1"
         "pid": 4079
         "time": 1650913288966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:36.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:36.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:36.178Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:36.178Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:36.246Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:36.388Z appoptics:patching patched crypto 
2022-04-25T19:01:36.409Z appoptics:patching patched https 
2022-04-25T19:01:36.409Z appoptics:patching patched http 
2022-04-25T19:01:36.447Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:36.448Z appoptics:patching patched fs 
2022-04-25T19:01:36.454Z appoptics:patching patched pino 6.5.1
2022-04-25T19:01:36.458Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4101
         "time": 1650913296487
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "73D86C6AE1728AA8CC3D0EC985A6DDEB10A3EB11-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4101
         "time": 1650913296496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E8279F7AA0C931E87A31ABC3EE6836ED3D8784F2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4101
         "time": 1650913296500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D35F7CFAE29263057F497A87746B61ABF19FB496-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4101
         "time": 1650913296503
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "84D3829194775C13106784AC1EC5E79A9BA6B789-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4101
         "time": 1650913296506
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4101
         "time": 1650913296510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE323978E639B9557AD860EFCD906F5661C5B6B9-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4101
         "time": 1650913296511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "11128FB5D14EDF5F5E1C1AF5FA36C795360EA72D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4101
         "time": 1650913296513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4101
         "time": 1650913296515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B8BFCD5B22DAC1B9B660D95D8A47E39712A2EB8-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4101
         "time": 1650913296516
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4101
         "time": 1650913296518
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B36CF2595A2CED5BE6A04003EDB45365B3AF774-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4101
         "time": 1650913296520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FCC86BF7EB423F79E4E7CAAEE52C914F513EE234-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4101
         "time": 1650913296625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CCAE5B9B94BD6EE3CC4F575B091DFBB5D8C70CC9-1"
         "pid": 4101
         "time": 1650913296654
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:44.371Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:44.372Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:44.372Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:44.372Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:44.446Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:44.597Z appoptics:patching patched crypto 
2022-04-25T19:01:44.637Z appoptics:patching patched https 
2022-04-25T19:01:44.637Z appoptics:patching patched http 
2022-04-25T19:01:44.666Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:44.666Z appoptics:patching patched fs 
2022-04-25T19:01:44.673Z appoptics:patching patched pino 6.6.0
2022-04-25T19:01:44.677Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4123
         "time": 1650913304709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E0ADE220607563AF6FE2F836D35266D68BF42CAB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4123
         "time": 1650913304718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "52F0FA6759D54117B0D6E18302170CB4ECAF1C27-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4123
         "time": 1650913304722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "863343B3AB363983BEF310050518DB6BC950DB50-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4123
         "time": 1650913304726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39C4C05C13448832851E75DC2ECE1A126BE51177-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4123
         "time": 1650913304729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4123
         "time": 1650913304733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9AE65459026306769B7A70932DC3BBB2B2FFDC11-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4123
         "time": 1650913304735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "266CF42D780D96098FFB6EBAA01972560BCAF48E-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4123
         "time": 1650913304737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4123
         "time": 1650913304738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "485ED5877DCEE11E93E72DAFE41206C3FC995DC5-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4123
         "time": 1650913304740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4123
         "time": 1650913304742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DBA57056CFC86CF07290DADE29529A3E7E50204B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4123
         "time": 1650913304745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF351F46B4E0D1B5B7066E2C7B56C0F85492226E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4123
         "time": 1650913304850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A0380647016133745A409B89A19531935477CC2B-1"
         "pid": 4123
         "time": 1650913304879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:51.938Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:51.939Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:51.939Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:51.940Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:52.010Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:52.147Z appoptics:patching patched crypto 
2022-04-25T19:01:52.168Z appoptics:patching patched https 
2022-04-25T19:01:52.169Z appoptics:patching patched http 
2022-04-25T19:01:52.205Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:52.206Z appoptics:patching patched fs 
2022-04-25T19:01:52.212Z appoptics:patching patched pino 6.6.1
2022-04-25T19:01:52.216Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4145
         "time": 1650913312245
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFD8B52849F5B074DA8E8589BE44E59EBA3B7C39-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4145
         "time": 1650913312253
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1694E06CF9D373C0A61AEA52E791E8331F078860-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4145
         "time": 1650913312258
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6F250B68EDADACF41FC780266F3AD6B4634F8B2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4145
         "time": 1650913312261
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63409884082B7CF6018318578F61619288D0CA8D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4145
         "time": 1650913312263
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4145
         "time": 1650913312267
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77958A07BD704120C43324B8603945F07944F641-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4145
         "time": 1650913312268
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "527D400F11E1AB31B79D5BD66C9E29090C0221A9-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4145
         "time": 1650913312270
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4145
         "time": 1650913312271
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CC7066EB560A3D17B2A794F8A7255FCCF7AB67FB-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4145
         "time": 1650913312273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4145
         "time": 1650913312274
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F64BFB01236749D76B2CC90ABD9EAA3C868CBB55-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4145
         "time": 1650913312276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DCBEBEB146BEEF0DFF499FB07CFE9D442FA9DA9C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4145
         "time": 1650913312382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BFC005605DCA6896F70FAF27FDCA11CD82F5BB72-1"
         "pid": 4145
         "time": 1650913312411
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:00.162Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:00.163Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:00.163Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:00.164Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:00.267Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:00.424Z appoptics:patching patched crypto 
2022-04-25T19:02:00.471Z appoptics:patching patched https 
2022-04-25T19:02:00.472Z appoptics:patching patched http 
2022-04-25T19:02:00.514Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:00.514Z appoptics:patching patched fs 
2022-04-25T19:02:00.522Z appoptics:patching patched pino 6.7.0
2022-04-25T19:02:00.527Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4167
         "time": 1650913320559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C0F5F3F9C05BED9C64F529986026A7C97E657F36-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4167
         "time": 1650913320568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E47F29938CDABBDD79EC44CAA451B53A5EC16D0A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4167
         "time": 1650913320572
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A357C7100263E35D36D94430EDF051FC8208244B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4167
         "time": 1650913320575
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D82373F4382183A006A089E2B667EC1DD9DB762-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4167
         "time": 1650913320577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4167
         "time": 1650913320581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38DA05E3E675C6CE615065A261B40BC8E9D47EF0-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4167
         "time": 1650913320583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "560A17179ECC793B215AEC1EF5CACE065B2E7569-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4167
         "time": 1650913320584
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4167
         "time": 1650913320586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B6431B8468FF11DE3CD695329948ED9C2B1ED9D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4167
         "time": 1650913320587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4167
         "time": 1650913320589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B321A90A795C0CFA42EA4F9563BED515AA77092-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4167
         "time": 1650913320591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6BB0648454447B94C154A1E5DB72DA0AD4607E8-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4167
         "time": 1650913320697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 66881EA3CFA5AE36B0C10726B79648EBCC314EA0-1"
         "pid": 4167
         "time": 1650913320727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:08.209Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:08.210Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:08.210Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:08.211Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:08.282Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:08.424Z appoptics:patching patched crypto 
2022-04-25T19:02:08.447Z appoptics:patching patched https 
2022-04-25T19:02:08.448Z appoptics:patching patched http 
2022-04-25T19:02:08.482Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:08.482Z appoptics:patching patched fs 
2022-04-25T19:02:08.489Z appoptics:patching patched pino 6.8.0
2022-04-25T19:02:08.493Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4189
         "time": 1650913328522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B68D217B05A3688BC2194E124E81E3DB741A049-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4189
         "time": 1650913328531
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3FF9CA188DC14564760942CAA48315F85612BB1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4189
         "time": 1650913328536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62A0F7A9B045759C6606B36F463F25CBCDAEAC9F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4189
         "time": 1650913328539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F15BF5CAE5776C64C292409A7BF9400CCD864B03-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4189
         "time": 1650913328542
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4189
         "time": 1650913328545
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FDFFBC545ADC05872D57591864601B32CF6FAAE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4189
         "time": 1650913328547
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "22DA4155EA01B407E4FD003E484F716BB0A205E7-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4189
         "time": 1650913328549
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4189
         "time": 1650913328550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D75620EB3F4F76004EB2B892C66245BAABD0CD5C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4189
         "time": 1650913328552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4189
         "time": 1650913328553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A05F331B45BF2FB7C7851842CC26EF91EC7675B7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4189
         "time": 1650913328555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "10D648DBC424716067FC16226DBD27421C8CB797-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4189
         "time": 1650913328660
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F2DBA7E730F466CA9ED05A886F372D6AF3CEBDFF-1"
         "pid": 4189
         "time": 1650913328691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:15.809Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:15.810Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:15.810Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:15.811Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:15.884Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:16.024Z appoptics:patching patched crypto 
2022-04-25T19:02:16.044Z appoptics:patching patched https 
2022-04-25T19:02:16.045Z appoptics:patching patched http 
2022-04-25T19:02:16.084Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:16.085Z appoptics:patching patched fs 
2022-04-25T19:02:16.091Z appoptics:patching patched pino 6.9.0
2022-04-25T19:02:16.095Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4211
         "time": 1650913336124
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA1ABD6C3942D990C6040A336C925F2EA71006FF-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4211
         "time": 1650913336133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B37C83FD6C399C747063315C449B856AC8DB890-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4211
         "time": 1650913336137
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "91615F3CDEBF267F1C98429763EBDD4C885A3A6C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4211
         "time": 1650913336141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CE9AE3F039F6DD7DAADB475B09FD1F18D24485B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4211
         "time": 1650913336143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4211
         "time": 1650913336147
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BFCFD667E123CF9B9109393BD85602C471A359A2-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4211
         "time": 1650913336149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "352115A866D589FEAFC71A3CD32DDD3477CC48DE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4211
         "time": 1650913336150
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4211
         "time": 1650913336152
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF505A66C7E9F72CD7DC4A3E74888B6D810B67C4-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4211
         "time": 1650913336153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4211
         "time": 1650913336155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77EC3285F4E78D5FDDA4032F350B7A3DC93E9624-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4211
         "time": 1650913336157
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8F869AB542B35CDD6466F14E2463C3D5A5FFE5F8-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4211
         "time": 1650913336262
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5AC1141AC500615FBCCE8D9AE89D7396722B0ABE-1"
         "pid": 4211
         "time": 1650913336292
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:24.175Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:24.176Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:24.176Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:24.177Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:24.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:24.391Z appoptics:patching patched crypto 
2022-04-25T19:02:24.412Z appoptics:patching patched https 
2022-04-25T19:02:24.412Z appoptics:patching patched http 
2022-04-25T19:02:24.451Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:24.451Z appoptics:patching patched fs 
2022-04-25T19:02:24.458Z appoptics:patching patched pino 6.10.0
2022-04-25T19:02:24.462Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4233
         "time": 1650913344492
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE08B478D4C6DA3A4CF4757BEDCA92521D9DBF37-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4233
         "time": 1650913344502
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6A3FB170E68114BB59A025C68F349011FE61D6E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4233
         "time": 1650913344506
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "858340416D3B32ABD944D8A8ABB40174C6613D91-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4233
         "time": 1650913344509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C7B5EE3EA8575AE0BB626C643F3FB78B010DD3A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4233
         "time": 1650913344512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4233
         "time": 1650913344516
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7BA4B21A94FCE53DF87E61EE39B3697D1AE5FDC-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4233
         "time": 1650913344517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F9A7A30294FBFCCA89CC826073FE094FB2CCCB1-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4233
         "time": 1650913344519
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4233
         "time": 1650913344521
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "177606657C9E969DE544818F4A9E430FD0DBD23E-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4233
         "time": 1650913344522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4233
         "time": 1650913344523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BA6E2E20E7F5FEC89722616B02ABD422E41325F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4233
         "time": 1650913344526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BEF8EEB87ADF96A70378A73B3782F7F3C6421281-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4233
         "time": 1650913344631
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9CDEB480DE6C6594D8C0E2C251AFE7E34CF3FAB0-1"
         "pid": 4233
         "time": 1650913344660
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:32.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:32.078Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:32.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:32.082Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:32.159Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:32.321Z appoptics:patching patched crypto 
2022-04-25T19:02:32.343Z appoptics:patching patched https 
2022-04-25T19:02:32.344Z appoptics:patching patched http 
2022-04-25T19:02:32.378Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:32.379Z appoptics:patching patched fs 
2022-04-25T19:02:32.388Z appoptics:patching patched pino 6.11.0
2022-04-25T19:02:32.409Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4255
         "time": 1650913352442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "071087C02A6832575BC43038C198F41DDE0019BC-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4255
         "time": 1650913352451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A2FD7933631C2F5C0CE4239CA4A23130CFBB7E2C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4255
         "time": 1650913352456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C8DFC80323A16293FD0A0283D952B56BD8F0109-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4255
         "time": 1650913352459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "83BCF1965712CD91F0DCB8B4C531DE327083147F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4255
         "time": 1650913352462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4255
         "time": 1650913352465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48AFB3D9C9ACA9750D5C9B03738FD7AEB7E9489C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4255
         "time": 1650913352467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87D1A48AE9B183403691FAE72275E070CB77EAB3-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4255
         "time": 1650913352469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4255
         "time": 1650913352470
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3E5B3577A2E2192B46A431DCF8AAD0ED6557E2F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4255
         "time": 1650913352472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4255
         "time": 1650913352473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C056FF5DBA2D4D62CC96F4EB537AAD18B3D9F5A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4255
         "time": 1650913352475
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5285672A2A6EAB21E9FAFCA42D5598C13373BF25-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4255
         "time": 1650913352580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3C4D8271438783B41A9732DE370A9E533F81F894-1"
         "pid": 4255
         "time": 1650913352609
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:39.768Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:39.768Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:39.769Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:39.769Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:39.841Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:39.982Z appoptics:patching patched crypto 
2022-04-25T19:02:40.006Z appoptics:patching patched https 
2022-04-25T19:02:40.006Z appoptics:patching patched http 
2022-04-25T19:02:40.040Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:40.041Z appoptics:patching patched fs 
2022-04-25T19:02:40.047Z appoptics:patching patched pino 6.11.1
2022-04-25T19:02:40.051Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4277
         "time": 1650913360081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C85CFB8EB5C43BC9CB3CD9409088DE96C104A0C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4277
         "time": 1650913360089
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5126239E53571A380F9FBCF42B8466B1DF6698A3-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4277
         "time": 1650913360094
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9903C3E79112175CFB1DFB4234CC8D5BD2EA6D0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4277
         "time": 1650913360097
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC5DC03CEF84B9D57B3996F59C9EA4648215A19F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4277
         "time": 1650913360100
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4277
         "time": 1650913360103
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EBA1922C1A2DB44FFDC7E16C0D8387CCBF7D671-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4277
         "time": 1650913360105
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04D09B4EE59E7F108C620651DC9FAFC93DA34084-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4277
         "time": 1650913360107
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4277
         "time": 1650913360109
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "033F2AADC97F6841BB473BAB7AB12A9CD99D41F9-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4277
         "time": 1650913360111
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4277
         "time": 1650913360112
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E1E51E79B5418E8085EE8461CA569F63EC4DA80-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4277
         "time": 1650913360115
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E495E1884DE1848052E1A41E4B3730C14ED20A70-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4277
         "time": 1650913360221
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4C44303FE704655B748672C2841A9101CD856429-1"
         "pid": 4277
         "time": 1650913360251
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:48.343Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:48.344Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:48.344Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:48.345Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:48.437Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:48.599Z appoptics:patching patched crypto 
2022-04-25T19:02:48.621Z appoptics:patching patched https 
2022-04-25T19:02:48.621Z appoptics:patching patched http 
2022-04-25T19:02:48.663Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:48.664Z appoptics:patching patched fs 
2022-04-25T19:02:48.670Z appoptics:patching patched pino 6.11.2
2022-04-25T19:02:48.675Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4299
         "time": 1650913368704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A53AC9D8D5BAE39CFE34E2416C1A18775C3BB9DA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4299
         "time": 1650913368715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F41D370A5A1E393EA8BBC6918F569F31C95AF71-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4299
         "time": 1650913368719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "06445C6346192508B103321F995765566CB4A61C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4299
         "time": 1650913368722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9AEFDB77A2C5554B62C33536C27729626AFFDFF1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4299
         "time": 1650913368725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4299
         "time": 1650913368729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59A1770EEC5F92B6FC170B75F51677D94F8AB829-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4299
         "time": 1650913368731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B5AAF6194149594547D3DD46439D44B5EE022A8-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4299
         "time": 1650913368733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4299
         "time": 1650913368734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4832BC652D98810BF3982FA3578471D91F22169-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4299
         "time": 1650913368736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4299
         "time": 1650913368737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BD06E13D74688BCEC18E6B80E321E2B44C871C6-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4299
         "time": 1650913368740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "443209853FE27BC2AFEBD1A2C3AAE5516D5DFBE7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4299
         "time": 1650913368845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 136FECEFAA30FA5854C614CA1D4DF680513D39B6-1"
         "pid": 4299
         "time": 1650913368874
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:55.662Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:55.663Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:55.663Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:55.664Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:55.749Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:55.984Z appoptics:patching patched crypto 
2022-04-25T19:02:56.030Z appoptics:patching patched https 
2022-04-25T19:02:56.031Z appoptics:patching patched http 
2022-04-25T19:02:56.098Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:56.098Z appoptics:patching patched fs 
2022-04-25T19:02:56.112Z appoptics:patching patched pino 6.11.3
2022-04-25T19:02:56.118Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (326ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4321
         "time": 1650913376182
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30AEA95ECB125E864771DA420A56D0F78A023741-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4321
         "time": 1650913376205
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A7F8B7F6794FADA3A00F7E49CF7E7BB51FB35139-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4321
         "time": 1650913376228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "351DB3C0239DA08BDB8A685947788AF003CD3615-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4321
         "time": 1650913376246
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C1FDF6518D23FC6C5BE51B354900E517CB52CAEB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4321
         "time": 1650913376257
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4321
         "time": 1650913376274
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3970E599852A2F807326AFC21B8BBCA0A90CD1A3-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4321
         "time": 1650913376284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D12488CF45010C2EF3E3D319737EB6E4EAE94709-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4321
         "time": 1650913376294
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4321
         "time": 1650913376303
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55B50EF51F3CCA3F9C4C3F667680E84952B44343-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4321
         "time": 1650913376316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4321
         "time": 1650913376318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "128B85F78697D771490FE58CDE8DE5C03673CBC2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4321
         "time": 1650913376323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED261476B336EDDACA46047ECDF5F1BA8EBE87C1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4321
         "time": 1650913376428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E974F1F439CF7230F2C519C5AF5E74DF9904E408-1"
         "pid": 4321
         "time": 1650913376457
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:03.949Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:03.950Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:03.950Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:03.951Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:04.024Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:04.165Z appoptics:patching patched crypto 
2022-04-25T19:03:04.186Z appoptics:patching patched https 
2022-04-25T19:03:04.186Z appoptics:patching patched http 
2022-04-25T19:03:04.227Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:04.227Z appoptics:patching patched fs 
2022-04-25T19:03:04.233Z appoptics:patching patched pino 6.12.0
2022-04-25T19:03:04.238Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4343
         "time": 1650913384267
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A11BF91F05CEA77BE784912B12760DDC6340E18B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4343
         "time": 1650913384276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E852B0F11AF66BF39CA7BD60B4BC4742273DC2E2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4343
         "time": 1650913384281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6233F576D34612359CD20F06DA4D89C94B6EBFCC-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4343
         "time": 1650913384284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D02A32923E931F6F195FAEEBB49C421720A81B37-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4343
         "time": 1650913384287
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4343
         "time": 1650913384290
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1FF064FAC654A50F83ED80E95C303210B45D5BD-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4343
         "time": 1650913384292
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F8E2A6536479B0511DFE89BD1B4F662290D75F91-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4343
         "time": 1650913384294
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4343
         "time": 1650913384295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9F9E025608BCE8206671AF87FFD5976D77632817-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4343
         "time": 1650913384297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4343
         "time": 1650913384298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85F1852F906A16CB24694010FC26DBA45793A095-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4343
         "time": 1650913384300
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3FC84257CA628990CCFAA80071F26C5117293490-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4343
         "time": 1650913384407
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C2F38CEA63F6595873F1E2A5F07A5145D6AAB616-1"
         "pid": 4343
         "time": 1650913384438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:12.392Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:12.393Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:12.393Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:12.394Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:12.468Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:12.631Z appoptics:patching patched crypto 
2022-04-25T19:03:12.652Z appoptics:patching patched https 
2022-04-25T19:03:12.653Z appoptics:patching patched http 
2022-04-25T19:03:12.703Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:12.704Z appoptics:patching patched fs 
2022-04-25T19:03:12.711Z appoptics:patching patched pino 6.13.0
2022-04-25T19:03:12.715Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4365
         "time": 1650913392746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68C7547000138DFD32FE9A429B9E55F778CB930D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4365
         "time": 1650913392756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB4F5937391E0C66FA5E07F7A5EAB6938CC0F973-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4365
         "time": 1650913392760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C111579E5A8327C564CD21EDF228922E1214FBE1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4365
         "time": 1650913392763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FE842AF9A6C120F657A706865CC9E5DA55F3F69-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4365
         "time": 1650913392767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4365
         "time": 1650913392770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "939C8EA97ABC6E06BFF22D13BD8B8359BE8AD629-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4365
         "time": 1650913392772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51A871FC60716748498C3F71E704C43E35665E38-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4365
         "time": 1650913392774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4365
         "time": 1650913392775
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "062E4F45D12FC8B1C4BA785204B14B3AAFAE2167-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4365
         "time": 1650913392777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4365
         "time": 1650913392779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D3B7A05CFF4CBD5AF17F5DA01816A8B723282EA3-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4365
         "time": 1650913392781
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "914A3355777A186A7DE2D84B60AC487B6F056A5F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4365
         "time": 1650913392885
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B91819EDCB52EEE76607CFFE080B0D4EE116A48A-1"
         "pid": 4365
         "time": 1650913392915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 1 package, and audited 928 packages in 12s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:25.347Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:25.348Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:25.348Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:25.349Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:25.420Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:25.563Z appoptics:patching patched crypto 
2022-04-25T19:03:25.584Z appoptics:patching patched https 
2022-04-25T19:03:25.585Z appoptics:patching patched http 
2022-04-25T19:03:25.625Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:25.626Z appoptics:patching patched fs 
2022-04-25T19:03:25.633Z appoptics:patching patched pino 6.13.1
2022-04-25T19:03:25.637Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4387
         "time": 1650913405667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B1F4113214428F500766B45B5AD7814066EC1889-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4387
         "time": 1650913405677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "050F1D4536D4D856A5557F767B00F8F3014E63EE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4387
         "time": 1650913405681
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55A2CFCD8F35D888CE1DA374AF7B2780A601359A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4387
         "time": 1650913405684
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CBBAF7DB00C781A150774B459BDE0B1A2BCDDCE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4387
         "time": 1650913405687
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4387
         "time": 1650913405691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D3104F9546F0D54258FAB45BDA6D3FEAAAF903A-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4387
         "time": 1650913405693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "67B41A9174C12B355633D1D9DBAEA81118C35883-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4387
         "time": 1650913405694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4387
         "time": 1650913405696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B26ED8E0DCC8738FE707317F7EAFD6AE74135A05-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4387
         "time": 1650913405697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4387
         "time": 1650913405699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A51D10A4BA0DF16A148DEBEA4DBAC04F8FA00791-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4387
         "time": 1650913405701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "244F4FEC7A774B960138ABB7B7FD28DF71A6F2EA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4387
         "time": 1650913405807
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 2B37D0006BB8F9CBF6BDBA1AD68CA397090C5182-1"
         "pid": 4387
         "time": 1650913405837
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:39.792Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:39.793Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:39.793Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:39.794Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:39.880Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:40.039Z appoptics:patching patched crypto 
2022-04-25T19:03:40.100Z appoptics:patching patched https 
2022-04-25T19:03:40.101Z appoptics:patching patched http 
2022-04-25T19:03:40.128Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:40.128Z appoptics:patching patched fs 
2022-04-25T19:03:40.135Z appoptics:patching patched pino 6.13.2
2022-04-25T19:03:40.140Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4409
         "time": 1650913420170
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "89F216122D0B1E889BDBA68556DF70329EDE068B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4409
         "time": 1650913420179
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2D38A9FE8D346A88BC9B09245B442A511A71C7AB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4409
         "time": 1650913420184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EC0F1A9564160A18234D8EBE9A1D88F3EB90465C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4409
         "time": 1650913420187
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C598B11D8623C74840BF487E386395FA7197F3C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4409
         "time": 1650913420190
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4409
         "time": 1650913420193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1BB554073959D80D94B0C24398EC62753909BAB4-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4409
         "time": 1650913420195
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D92FA10D3426DF3318E54BAA503E14BF5472048-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4409
         "time": 1650913420197
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4409
         "time": 1650913420199
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0193CB955A0EE48E2AAB226D83CBAE2E745EF10C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4409
         "time": 1650913420200
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4409
         "time": 1650913420202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "73CA77DA14A3CC28C4318168269E322C66D44ABA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4409
         "time": 1650913420204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9412C26DC2B7A1F9C559C7EE54FF58670C6A5583-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4409
         "time": 1650913420308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BC9700DA5954613D89FB7A9B7513A0AF0B52FED7-1"
         "pid": 4409
         "time": 1650913420337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:48.067Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:48.068Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:48.068Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:48.068Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:48.142Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:48.290Z appoptics:patching patched crypto 
2022-04-25T19:03:48.313Z appoptics:patching patched https 
2022-04-25T19:03:48.314Z appoptics:patching patched http 
2022-04-25T19:03:48.360Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:48.361Z appoptics:patching patched fs 
2022-04-25T19:03:48.369Z appoptics:patching patched pino 6.13.3
2022-04-25T19:03:48.374Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4431
         "time": 1650913428409
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6D45A5DD67DD6E24D470F41FE13BDB1ABB9B746-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4431
         "time": 1650913428418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A57F22DC4E6CFB49AEA02222FDF0EC1F62E78B3C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4431
         "time": 1650913428423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2543055B42238243ECF21AB9D9E3EAFFFF5E8CF0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4431
         "time": 1650913428426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F904B118DA26B3C97B6661DDDF2EF2F555E065C6-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4431
         "time": 1650913428429
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4431
         "time": 1650913428432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DF2D8300C9233E1A399BE3BE1943D3C1C4CFCE30-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4431
         "time": 1650913428434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "847CBBE0EA9E4A3B5295CE630B4E5C6412648645-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4431
         "time": 1650913428436
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4431
         "time": 1650913428438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4DA8C4B2AB3ABB9B89E37A6600070B4BB24A3E6-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4431
         "time": 1650913428439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4431
         "time": 1650913428441
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D47AE7E84DB3E72C8587A232F20D1E2633B82F48-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4431
         "time": 1650913428443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2FB582CBB9A5EB10FCD0CBEB31A2DF082F18E703-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4431
         "time": 1650913428548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CF4B6306BD43370A0A7DF32E07FE078CADB100E2-1"
         "pid": 4431
         "time": 1650913428577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:55.828Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:55.829Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:55.829Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:55.830Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:55.904Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:56.049Z appoptics:patching patched crypto 
2022-04-25T19:03:56.070Z appoptics:patching patched https 
2022-04-25T19:03:56.071Z appoptics:patching patched http 
2022-04-25T19:03:56.113Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:56.113Z appoptics:patching patched fs 
2022-04-25T19:03:56.121Z appoptics:patching patched pino 6.13.4
2022-04-25T19:03:56.125Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4453
         "time": 1650913436155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9752B828C1A1F2A84E8A0FC3BC32D1F21C1A16AE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4453
         "time": 1650913436164
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "65289FE3CCC86EE1399CF0D7CF2C0FDF99794A29-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4453
         "time": 1650913436168
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "03EAFCBD7FB47E1E9A092F96C61D60FDDDE1031E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4453
         "time": 1650913436172
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F50984603A7381E35E48138CD5157270DF8E694B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4453
         "time": 1650913436174
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4453
         "time": 1650913436178
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "24030CE1A93601A5AB023EB83233644724D33AAF-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4453
         "time": 1650913436180
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE65BBC62BCF89207F7E77B48A8A860AF72BD529-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4453
         "time": 1650913436181
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4453
         "time": 1650913436183
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D3EB4BFEB4009AC0B7C60D4B91AD6627A01A5386-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4453
         "time": 1650913436184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4453
         "time": 1650913436186
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B86FD72231A98E221586AA9286428EDDBE69360E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4453
         "time": 1650913436188
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26D17D61CFD2DE8E19D775336A65F75FFF4977E0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4453
         "time": 1650913436294
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 43B6AC0E689F93D39230CD901B38F2AB397DEC41-1"
         "pid": 4453
         "time": 1650913436323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:04.206Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:04.207Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:04.207Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:04.208Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:04.281Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:04.425Z appoptics:patching patched crypto 
2022-04-25T19:04:04.447Z appoptics:patching patched https 
2022-04-25T19:04:04.448Z appoptics:patching patched http 
2022-04-25T19:04:04.487Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:04.488Z appoptics:patching patched fs 
2022-04-25T19:04:04.495Z appoptics:patching patched pino 6.14.0
2022-04-25T19:04:04.499Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4475
         "time": 1650913444529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED0E6820B1DD6912FF2FA6F6846829CAB2CF64EA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4475
         "time": 1650913444539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82074EA04D5D027EA5A4C2A515D525B67C641B15-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4475
         "time": 1650913444543
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "974D8F4DFA4F45B5951D5043A023B4C4FD429291-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4475
         "time": 1650913444547
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "246CEF56C4BF80969B3780F48C68D276DF95AFE0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4475
         "time": 1650913444550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4475
         "time": 1650913444553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0BEFCA34CF6FF123385A7DFC1185C05A147A458-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4475
         "time": 1650913444555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02C2D7D4CB75D1B151C423231F31381AB5150753-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4475
         "time": 1650913444557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4475
         "time": 1650913444558
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F1426B3F1B0419AD16239DEA762F6C92D206007-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4475
         "time": 1650913444560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4475
         "time": 1650913444561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "050488C24C1941D6F29962F6B0D153739E3D0195-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4475
         "time": 1650913444563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9A0D657387A3443BACBF099C12C8191D37D8507-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4475
         "time": 1650913444669
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 99D40C42BAB3B60B647BE43974AF21BF7A84A49A-1"
         "pid": 4475
         "time": 1650913444700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:12.253Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:12.255Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:12.255Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:12.256Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:12.359Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:12.589Z appoptics:patching patched crypto 
2022-04-25T19:04:12.700Z appoptics:patching patched https 
2022-04-25T19:04:12.701Z appoptics:patching patched http 
2022-04-25T19:04:12.760Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:12.761Z appoptics:patching patched fs 
2022-04-25T19:04:12.769Z appoptics:patching patched pino 7.0.0
2022-04-25T19:04:12.773Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4497
         "time": 1650913452803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7A321CB34823D68C52B5DDF5860D229CDA4BE4F9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4497
         "time": 1650913452811
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C74D53D980BD5CF87AE5A3E2E7B6983999E4BAA1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4497
         "time": 1650913452816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9984FC3D046BA11754CB7CAE4B0BAC2B809DA1EC-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4497
         "time": 1650913452819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A61FFBA0C0B25BD264E635B2C9A8CB70E1C7BCDE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4497
         "time": 1650913452822
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4497
         "time": 1650913452825
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD7E3654D75F9B3EFB85FDA09BE998C50511CE88-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4497
         "time": 1650913452827
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C52921B479125763C4BB0FB56D47E20E35D1914-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4497
         "time": 1650913452829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4497
         "time": 1650913452830
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC623EC63B49CE3273E1D0EDE426993E0644FE1F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4497
         "time": 1650913452832
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4497
         "time": 1650913452833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16BE037D4367010B99A707A271D9B4668CC9EF86-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4497
         "time": 1650913452836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16B38A5F7756A447FABC04079619B4AF9FB3FFEB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4497
         "time": 1650913452941
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FF9CEB358329DAE09540F73F712E13A4927C90BC-1"
         "pid": 4497
         "time": 1650913452969
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:19.834Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:19.835Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:19.835Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:19.836Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:19.925Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:20.079Z appoptics:patching patched crypto 
2022-04-25T19:04:20.099Z appoptics:patching patched https 
2022-04-25T19:04:20.100Z appoptics:patching patched http 
2022-04-25T19:04:20.142Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:20.143Z appoptics:patching patched fs 
2022-04-25T19:04:20.151Z appoptics:patching patched pino 7.0.1
2022-04-25T19:04:20.155Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4519
         "time": 1650913460185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCB00E3109849C4E17948F995A11B4B5FE164042-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4519
         "time": 1650913460193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "040F6CF3600F0B42C5FDC21792BC87B76E6FE94D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4519
         "time": 1650913460198
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B711AFC94D246993C8090BA1E1908A8E65048B6D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4519
         "time": 1650913460201
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09CFC46DCF9AF6041B95DADB94D4B5A4D13B377D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4519
         "time": 1650913460204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4519
         "time": 1650913460207
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "37E9B3C40AB25DD37AEDC649A52415DC5FDE800F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4519
         "time": 1650913460209
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6E3EEA28B0E742D93F6B6AF932D419F58389CDE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4519
         "time": 1650913460210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4519
         "time": 1650913460212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4CCCD194D439FD8195F4C1B01A098D1A675038BB-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4519
         "time": 1650913460213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4519
         "time": 1650913460215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B8315B36E471C2D66AAD2F9C8D7E1D35BF4E11CD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4519
         "time": 1650913460217
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B33586680D78F201A158EAD4BD56F5F3EFEE8F7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4519
         "time": 1650913460322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6FB1398BEFF4A37CBB659442A455DC62B349B890-1"
         "pid": 4519
         "time": 1650913460351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:28.661Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:28.661Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:28.661Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:28.662Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:28.735Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:28.884Z appoptics:patching patched crypto 
2022-04-25T19:04:28.917Z appoptics:patching patched https 
2022-04-25T19:04:28.917Z appoptics:patching patched http 
2022-04-25T19:04:28.967Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:28.967Z appoptics:patching patched fs 
2022-04-25T19:04:28.975Z appoptics:patching patched pino 7.0.2
2022-04-25T19:04:28.980Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (199ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4541
         "time": 1650913469013
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4216F27A228BFC5928D806FBE705A7395BB91E1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4541
         "time": 1650913469024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C05479AFA2B87D3FF73C54C48BC156D5CED42006-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4541
         "time": 1650913469028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40AD8AB2FBEC69A6259C199202D38C6F4939E4F9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4541
         "time": 1650913469031
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "14433E74512D06E00545B9BCD8D83ED1E1A93138-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4541
         "time": 1650913469034
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4541
         "time": 1650913469038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "72A54E49C88DA02C382CAFF55C81D966BBAFBDAD-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4541
         "time": 1650913469040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C5CA8B6BCB65801200E0243FDEAE499BF5F3363A-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4541
         "time": 1650913469041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4541
         "time": 1650913469043
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7FF78FF67BCADA87412AE0BDAA33C0637AB0F0F7-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4541
         "time": 1650913469044
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4541
         "time": 1650913469046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "532EC9D7F71F6C38229E630A53D0EE0C11238322-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4541
         "time": 1650913469048
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "57B1446E31F1BBA343EDBFD7037068881FDC20EB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4541
         "time": 1650913469153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 41E8CD06F2144F4FAF2408C8CE24E9DA958126E3-1"
         "pid": 4541
         "time": 1650913469184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:36.158Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:36.159Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:36.159Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:36.160Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:36.302Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:36.571Z appoptics:patching patched crypto 
2022-04-25T19:04:36.651Z appoptics:patching patched https 
2022-04-25T19:04:36.652Z appoptics:patching patched http 
2022-04-25T19:04:36.724Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:36.724Z appoptics:patching patched fs 
2022-04-25T19:04:36.739Z appoptics:patching patched pino 7.0.3
2022-04-25T19:04:36.750Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (259ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4563
         "time": 1650913476808
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DDE39857D259C09C4040C4333B9FA31234DEA121-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4563
         "time": 1650913476828
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A06C270939B8B4F3E7CEB9B86AD26EC8EBA558E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4563
         "time": 1650913476838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CC09FC0AA431BA064C8B47DC427FB05A32C2DFE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4563
         "time": 1650913476845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "697EB1B14534043725F8D71DB382EBD5922CA58C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4563
         "time": 1650913476848
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4563
         "time": 1650913476857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3270CEBE6A1FBBFDC432FB58BB6415EEF06D2DE8-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4563
         "time": 1650913476865
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4D337E5FB4582897756EF6E4239276D12CCC8E34-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4563
         "time": 1650913476868
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4563
         "time": 1650913476870
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38C751B01AF8B908F099F140C9595D9DBB5DDDA8-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4563
         "time": 1650913476872
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4563
         "time": 1650913476879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AFE26AE61016D1E9D8A0C418885F2E5EE1E3522-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4563
         "time": 1650913476883
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CAFAE57A697EA1CC34465724655147D7A2753F3-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4563
         "time": 1650913476987
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6F475D3397BEB35606CCD18767AD207E12637DE5-1"
         "pid": 4563
         "time": 1650913477017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:44.721Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:44.722Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:44.722Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:44.723Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:44.793Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:44.932Z appoptics:patching patched crypto 
2022-04-25T19:04:44.953Z appoptics:patching patched https 
2022-04-25T19:04:44.954Z appoptics:patching patched http 
2022-04-25T19:04:44.992Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:44.992Z appoptics:patching patched fs 
2022-04-25T19:04:45.000Z appoptics:patching patched pino 7.0.4
2022-04-25T19:04:45.004Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4585
         "time": 1650913485033
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3725067C501BA2D24DEF1D89C4AA7F449DADD5E2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4585
         "time": 1650913485042
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "239E230700842FE8F1D2B90405D282B51BF12463-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4585
         "time": 1650913485046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02BC502D1F67ACB2DCA0106F32728EE572CD249D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4585
         "time": 1650913485049
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DCC729E00902F134D637DB5EBA90CFFCCF49C9D0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4585
         "time": 1650913485052
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4585
         "time": 1650913485055
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "52791F230235B923A91A869FCE445CD0F3B5DA59-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4585
         "time": 1650913485057
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A176DCF4B773D2E2C0718C505BF4423EA396525C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4585
         "time": 1650913485059
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4585
         "time": 1650913485060
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8513C0D8EA8644FBAD8979D8165686ABC4DFAA81-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4585
         "time": 1650913485062
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4585
         "time": 1650913485063
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C235FAFFD6FD2B04FC53CE7E5969E493EC0E6E52-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4585
         "time": 1650913485066
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0807E39F4335F87E217D8B392A1910B9305853E4-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4585
         "time": 1650913485172
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AB37EBF1607ACE915C1B6E99DD44E0715A4E99E0-1"
         "pid": 4585
         "time": 1650913485203
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:52.912Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:52.913Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:52.913Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:52.913Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:52.985Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:53.140Z appoptics:patching patched crypto 
2022-04-25T19:04:53.176Z appoptics:patching patched https 
2022-04-25T19:04:53.177Z appoptics:patching patched http 
2022-04-25T19:04:53.229Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:53.230Z appoptics:patching patched fs 
2022-04-25T19:04:53.238Z appoptics:patching patched pino 7.0.5
2022-04-25T19:04:53.243Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4607
         "time": 1650913493272
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC954AE1803CA6A41A5FBF8D586F39CD5FA9ACD6-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4607
         "time": 1650913493281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "777AF0CCDFD8C7944CF05E546534B3F47B9746B7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4607
         "time": 1650913493285
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C96970F056E053EF3256FD3A55A3183598A8E743-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4607
         "time": 1650913493288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B8C477400E190D21594B8263B6C5A00B15DBCB61-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4607
         "time": 1650913493291
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4607
         "time": 1650913493295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C7BDEE2D0FF8DA300FB2F9BF3BC06530584CCA0-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4607
         "time": 1650913493297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D88B3DED55FA8E58F40EB9BE2827E269DD67AE6C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4607
         "time": 1650913493298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4607
         "time": 1650913493300
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A8088B644095AF507F8DC4F8F18FAE458C5E50A-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4607
         "time": 1650913493301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4607
         "time": 1650913493303
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD150EE7AAE762AC18535AB36A6C0EA2E7CCE59F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4607
         "time": 1650913493305
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A8975F2DD587F4FCAD101E827DF87EB7AAE679B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4607
         "time": 1650913493415
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B800F832F0E807E81E9AECD026C811956B7273D1-1"
         "pid": 4607
         "time": 1650913493443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:00.689Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:00.689Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:00.689Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:00.690Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:00.762Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:00.902Z appoptics:patching patched crypto 
2022-04-25T19:05:00.923Z appoptics:patching patched https 
2022-04-25T19:05:00.923Z appoptics:patching patched http 
2022-04-25T19:05:00.963Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:00.964Z appoptics:patching patched fs 
2022-04-25T19:05:00.973Z appoptics:patching patched pino 7.1.0
2022-04-25T19:05:00.978Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4629
         "time": 1650913501006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C1572A71900361AE41DAAB315D4F94514DA2151-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4629
         "time": 1650913501016
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3D7471ED1F42BDDBD162712FC165CA891F2A83E1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4629
         "time": 1650913501020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31C53C60C53518070658E2F95A716CC34CF403C2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4629
         "time": 1650913501023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C801BF68C0BCB4C25076C57CAC5E83BED0D5D1E5-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4629
         "time": 1650913501026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4629
         "time": 1650913501030
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9904D251E9833551FC61EAE9BE7F0D61F9AA9171-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4629
         "time": 1650913501032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "91248D7262CDB3F58A6C94318769180B5CCC6CD0-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4629
         "time": 1650913501033
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4629
         "time": 1650913501035
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1516C69CC0956EAC2D643A158AD923D3C0BAD7E9-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4629
         "time": 1650913501036
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4629
         "time": 1650913501038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A7980E6C28329B9BABDE5AB553058CCBA07EB9D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4629
         "time": 1650913501040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F9DAF28329195B0A8B303D9F5A620FA07D54B04-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4629
         "time": 1650913501146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 04445892AA052B869B5EE9E4AD228AF480805885-1"
         "pid": 4629
         "time": 1650913501176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:08.630Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:08.631Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:08.631Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:08.632Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:08.703Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:08.862Z appoptics:patching patched crypto 
2022-04-25T19:05:08.924Z appoptics:patching patched https 
2022-04-25T19:05:08.925Z appoptics:patching patched http 
2022-04-25T19:05:08.954Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:08.954Z appoptics:patching patched fs 
2022-04-25T19:05:08.963Z appoptics:patching patched pino 7.2.0
2022-04-25T19:05:08.968Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4651
         "time": 1650913508997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13F66C4A67C2CB799884D3A3181276CF0EE4DF4A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4651
         "time": 1650913509006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6201C169DF3FF5117AC0613D4CA703CBDD5F8410-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4651
         "time": 1650913509011
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "567AD6D80080D236D1C16ACDF7B64AFC1289E576-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4651
         "time": 1650913509014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50E18778B8767A345FBB14396E06631F45E1B7C6-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4651
         "time": 1650913509017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4651
         "time": 1650913509021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30AEEA40161997B35468863D68B630DEB6526B24-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4651
         "time": 1650913509023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A33C1A3A8CCE00414BEC790F417C1D03692102B2-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4651
         "time": 1650913509025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4651
         "time": 1650913509026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E8F5EE6A809AA8DB5705E329B6E1A7D35F7E3194-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4651
         "time": 1650913509028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4651
         "time": 1650913509030
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "53FD63FB11E994EB406F977A7291FABFA8A0622F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4651
         "time": 1650913509032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85714F09B61330FDE5305ED869C64068BBB6FA01-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4651
         "time": 1650913509136
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F2C3886ACA83E94E3CE9955B727FA2F32FA52EE3-1"
         "pid": 4651
         "time": 1650913509165
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:16.967Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:16.968Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:16.968Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:16.968Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:17.042Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:17.190Z appoptics:patching patched crypto 
2022-04-25T19:05:17.212Z appoptics:patching patched https 
2022-04-25T19:05:17.212Z appoptics:patching patched http 
2022-04-25T19:05:17.253Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:17.253Z appoptics:patching patched fs 
2022-04-25T19:05:17.263Z appoptics:patching patched pino 7.3.0
2022-04-25T19:05:17.267Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4673
         "time": 1650913517296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35DFB9AAAD5361E19EA95212668D5F6456CFCA8D-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4673
         "time": 1650913517305
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68F4B01B7370EBBBF569AC309B0A09543D3776D0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4673
         "time": 1650913517309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1B353D7CCD2D3D42B39C68A459742D8981A51ADC-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4673
         "time": 1650913517312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D1A981BD0AC5F5EF8E1ABCABD81A5B6B6051A1EC-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4673
         "time": 1650913517315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4673
         "time": 1650913517318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "98227FA5EBB51134D159366F86B72395B5DFB337-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4673
         "time": 1650913517320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "225DF704C7D682DA63620DEE7ABC1C6512D73F47-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4673
         "time": 1650913517322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4673
         "time": 1650913517323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3763B62A4CA3DF2D7EE260BA1503073E695DF879-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4673
         "time": 1650913517325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4673
         "time": 1650913517326
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB448B683BF6EFDA22692C25BB88DD4124BE88B8-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4673
         "time": 1650913517328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE422A360B4A62AE9BDAF03091BA3C18EAFE116E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4673
         "time": 1650913517433
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 517F7AF7B300444CEC71CBD1D575035960EB6D7B-1"
         "pid": 4673
         "time": 1650913517464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:24.788Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:24.789Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:24.789Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:24.790Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:24.865Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:25.012Z appoptics:patching patched crypto 
2022-04-25T19:05:25.034Z appoptics:patching patched https 
2022-04-25T19:05:25.034Z appoptics:patching patched http 
2022-04-25T19:05:25.075Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:25.075Z appoptics:patching patched fs 
2022-04-25T19:05:25.085Z appoptics:patching patched pino 7.4.0
2022-04-25T19:05:25.089Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4695
         "time": 1650913525118
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA329A798DA9637E2E950949E07E269063AF08EF-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4695
         "time": 1650913525127
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD114362C395D199BC7CA22FA8FC8215D3D9E6CD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4695
         "time": 1650913525131
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F0E9EBDB2B2C5B4E787F3C4CCFD3F2DAD5229B30-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4695
         "time": 1650913525135
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27009D678152DD45FD432ACCCE19ECED2FE18AEA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4695
         "time": 1650913525138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4695
         "time": 1650913525141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45D83B8C9390F7CFEACC3613497F3A83767A82EA-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4695
         "time": 1650913525143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1BED9CCDC15C829ACEF75EC6E941A65ED40CCC8C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4695
         "time": 1650913525145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4695
         "time": 1650913525146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09F6CD0F1BF45CC1BA6573975BD8C6489AB6C4A4-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4695
         "time": 1650913525148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4695
         "time": 1650913525149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A94E98F57DB1D0350AABA38FB7E2D254833CB821-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4695
         "time": 1650913525152
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AE5C520F0A37FB0F97D00C143A4F04666CA5ACE0-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4695
         "time": 1650913525258
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 253F8F67E2A8624666620F52AF6F60D952A35775-1"
         "pid": 4695
         "time": 1650913525288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:32.968Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:32.969Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:32.969Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:32.970Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:33.041Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:33.180Z appoptics:patching patched crypto 
2022-04-25T19:05:33.200Z appoptics:patching patched https 
2022-04-25T19:05:33.201Z appoptics:patching patched http 
2022-04-25T19:05:33.242Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:33.242Z appoptics:patching patched fs 
2022-04-25T19:05:33.251Z appoptics:patching patched pino 7.4.1
2022-04-25T19:05:33.256Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4717
         "time": 1650913533285
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "745F9C009E26D6F63E20DE417645B568CDC2A5D3-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4717
         "time": 1650913533294
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4E540B10A988E97AC13F447DBFBC70E69E56412C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4717
         "time": 1650913533298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "322948A39B93879C9AF64DAF63669998EEE2AB02-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4717
         "time": 1650913533301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A873FAE77ABB4BC5E546781C45D32FD5BF0CAAE-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4717
         "time": 1650913533304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4717
         "time": 1650913533307
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "462D6940EAB88AA9914823343F255B61F2F6553C-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4717
         "time": 1650913533309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B329957A51F27AE99C3937FBD8D23529362099F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4717
         "time": 1650913533311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4717
         "time": 1650913533312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "179FA6142F525B5B00E2B4FC0FB68679374DA709-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4717
         "time": 1650913533314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4717
         "time": 1650913533315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3171B58CE0F92842A120D9D5A0D27BC9DA4ED4C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4717
         "time": 1650913533318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BCDBED339F633E242CEABD5A4398084DAA1619A7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4717
         "time": 1650913533424
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D297D67BA3BEE239B2004068F1A32327D01E06EB-1"
         "pid": 4717
         "time": 1650913533453
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:40.890Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:40.890Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:40.891Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:40.891Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:40.977Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:41.158Z appoptics:patching patched crypto 
2022-04-25T19:05:41.246Z appoptics:patching patched https 
2022-04-25T19:05:41.247Z appoptics:patching patched http 
2022-04-25T19:05:41.321Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:41.321Z appoptics:patching patched fs 
2022-04-25T19:05:41.335Z appoptics:patching patched pino 7.5.0
2022-04-25T19:05:41.342Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (226ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4739
         "time": 1650913541419
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1527756C3CF9135E41E3F5EC5A7D2C27EBF46975-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4739
         "time": 1650913541430
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DE56FE97F89B1DC0B74506352D5D84C3D351E67-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4739
         "time": 1650913541435
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3ADBA30832F1650A6F1E4A6672029B41FE654242-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4739
         "time": 1650913541438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "75D2B9FDBDF5CE5D8201246B5BEAB513E7C2E703-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4739
         "time": 1650913541443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4739
         "time": 1650913541447
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4CB0FCCEF7F8BF950C7074A9DD0F5C3E135C036-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4739
         "time": 1650913541449
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4CFB67A2C4D43E64C0D8F44A96D61227DEF5F9FD-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4739
         "time": 1650913541451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4739
         "time": 1650913541453
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "90F640F8CFD604B49858129097EB6E04F6AE855D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4739
         "time": 1650913541454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4739
         "time": 1650913541456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "78626837E4C91EC206ABA57581D1651284C08A03-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4739
         "time": 1650913541458
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D0D87A8D3E6F452613E484F9670E22FDF631266-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4739
         "time": 1650913541564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CA9D3281E677FAD2C21D0E174EF20DB9B95442BD-1"
         "pid": 4739
         "time": 1650913541595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:48.436Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:48.437Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:48.437Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:48.438Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:48.509Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:48.649Z appoptics:patching patched crypto 
2022-04-25T19:05:48.671Z appoptics:patching patched https 
2022-04-25T19:05:48.672Z appoptics:patching patched http 
2022-04-25T19:05:48.712Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:48.712Z appoptics:patching patched fs 
2022-04-25T19:05:48.722Z appoptics:patching patched pino 7.5.1
2022-04-25T19:05:48.726Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4761
         "time": 1650913548756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C838333D48626CE54B90C3B2C435F2A25A1246A8-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4761
         "time": 1650913548764
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A945ED258F6A25B7BD00260923D2EDDD6956884F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4761
         "time": 1650913548769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E1A98C507E47FA190EC5B6D3FC1212B146DF83C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4761
         "time": 1650913548772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EEA6390CC0563E77371ED3809758B56F7E5CE757-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4761
         "time": 1650913548775
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4761
         "time": 1650913548778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A01477824B0050BFC759993A942A341F5339D18-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4761
         "time": 1650913548780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "868F7233E95AEA3876AC8EF50F1A78D3AA5CED1A-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4761
         "time": 1650913548781
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4761
         "time": 1650913548783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "25B0F85E7EB3DE5981AAD483068028A5F3F2EA7D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4761
         "time": 1650913548784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4761
         "time": 1650913548786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8ECB02560D013D17469C3BF3FD5EACE7C5654FAD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4761
         "time": 1650913548788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3826CC782A7442DBE95134ECB87D45982C9E9F34-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4761
         "time": 1650913548892
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6DF8ABE27BF3A2F77BCC6F6F1E27CEDF393F04AF-1"
         "pid": 4761
         "time": 1650913548923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:56.974Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:56.975Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:56.975Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:56.975Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:57.054Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:57.194Z appoptics:patching patched crypto 
2022-04-25T19:05:57.217Z appoptics:patching patched https 
2022-04-25T19:05:57.217Z appoptics:patching patched http 
2022-04-25T19:05:57.255Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:57.256Z appoptics:patching patched fs 
2022-04-25T19:05:57.265Z appoptics:patching patched pino 7.6.0
2022-04-25T19:05:57.269Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4783
         "time": 1650913557298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35B4B29A0BB4CA17D9D8BAF04E19D7C7811F3C11-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4783
         "time": 1650913557307
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13B8FC8CEFDF2774CF1B8554629948A61AD3D182-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4783
         "time": 1650913557311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AC607518548583F3E903331F051A00A1A47C6BBA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4783
         "time": 1650913557314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF887E7F579AD4FF1D882F6B42827A3689C52028-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4783
         "time": 1650913557317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4783
         "time": 1650913557320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "43259C930EDADE19C0C4621DEC76703DD7651A34-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4783
         "time": 1650913557322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAE732E86AD1E652EDD10F348A99A9BA078C63BE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4783
         "time": 1650913557324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4783
         "time": 1650913557326
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48C2BFB814681A6E5A8494EE9D0EDD7B0542B13E-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4783
         "time": 1650913557327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4783
         "time": 1650913557329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A3FD9D9AB35E576D916D2A169B14921A53143C3-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4783
         "time": 1650913557331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3269945A05432D8795501E5A9FFD369513E98667-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4783
         "time": 1650913557437
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E6AE01B149DF395C3B27E40A0D38F5EBB7300C73-1"
         "pid": 4783
         "time": 1650913557467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:04.160Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:04.161Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:04.161Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:04.162Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:04.247Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:04.406Z appoptics:patching patched crypto 
2022-04-25T19:06:04.467Z appoptics:patching patched https 
2022-04-25T19:06:04.467Z appoptics:patching patched http 
2022-04-25T19:06:04.489Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:04.490Z appoptics:patching patched fs 
2022-04-25T19:06:04.506Z appoptics:patching patched pino 7.6.1
2022-04-25T19:06:04.510Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (216ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4805
         "time": 1650913564541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45E727E8E8DE001CACD2236CA1E72016C4BC47C1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4805
         "time": 1650913564550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D2C032CA580FE7BD5D88C3D578DA1306B8170F80-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4805
         "time": 1650913564554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E87942642DDEE05C0003860C3A974621A1393741-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4805
         "time": 1650913564566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3FB9ED0D51F17597A2AE4728205F2B56EFD88143-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4805
         "time": 1650913564571
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4805
         "time": 1650913564580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5E56AE95AB16839AD60E345B7D9F08D625D6C80-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4805
         "time": 1650913564581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "12668E1FD91BFDDFAF59BAD0ABD503FF8F735129-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4805
         "time": 1650913564584
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4805
         "time": 1650913564590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F0CFDF91C1E5ED5216450D6ABC09C6E76EF8D66B-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4805
         "time": 1650913564591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4805
         "time": 1650913564593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D3B019F61B6B475C29523BF2806EF92336C1D53-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4805
         "time": 1650913564598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BF347A470C8A3576DC4539C5CA9DE03FA315C676-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4805
         "time": 1650913564704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 50636ACDA322D03EF854E43181ECA716E13C5773-1"
         "pid": 4805
         "time": 1650913564732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:12.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:12.714Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:12.714Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:12.714Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:12.786Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:12.925Z appoptics:patching patched crypto 
2022-04-25T19:06:12.945Z appoptics:patching patched https 
2022-04-25T19:06:12.946Z appoptics:patching patched http 
2022-04-25T19:06:12.981Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:12.981Z appoptics:patching patched fs 
2022-04-25T19:06:12.996Z appoptics:patching patched pino 7.6.2
2022-04-25T19:06:13.001Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (209ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4827
         "time": 1650913573029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "421FC27001112DF846DADACB350AD4891B24165A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4827
         "time": 1650913573040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A898813A38C93F2557A377C0A06672AA7D6D817F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4827
         "time": 1650913573045
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "394AFAF86CE10C43CC37A626124E9D86FC513B40-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4827
         "time": 1650913573049
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "37B7F061FE2CDD044D1553D401ACFD12EEDDE32B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4827
         "time": 1650913573056
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4827
         "time": 1650913573062
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "669A11E630E82113F759BEF225FDA48AD43B6148-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4827
         "time": 1650913573070
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E25DF0BE0430E62685B3EF721FB1FBD4D0052AED-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4827
         "time": 1650913573072
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4827
         "time": 1650913573074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F0C37D39F483B96AE10C3CD7250919C1085F591B-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4827
         "time": 1650913573075
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4827
         "time": 1650913573077
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "29ECF35304446B3A59B7DB856CBE7E91DAA1D890-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4827
         "time": 1650913573079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E9588A1A8F3B3430BD89C8B476139DD0B87EEBDD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4827
         "time": 1650913573185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C4142C0C5F2139A9E936532815B484F320B31A5E-1"
         "pid": 4827
         "time": 1650913573215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:21.423Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:21.423Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:21.423Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:21.424Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:21.496Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:21.639Z appoptics:patching patched crypto 
2022-04-25T19:06:21.660Z appoptics:patching patched https 
2022-04-25T19:06:21.661Z appoptics:patching patched http 
2022-04-25T19:06:21.696Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:21.696Z appoptics:patching patched fs 
2022-04-25T19:06:21.712Z appoptics:patching patched pino 7.6.3
2022-04-25T19:06:21.716Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (198ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4849
         "time": 1650913581745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5CDA8D341E0284B2787F3E6983D3E19B4D648ABD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4849
         "time": 1650913581755
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ABC8232C0770908F22182FC03F34CBC3A79DD8D4-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4849
         "time": 1650913581759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB1DC49440800EFBB18DD5D06418DBD4DF19E6E7-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4849
         "time": 1650913581763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "144F078E35AE469C9B836A07A648C7FA7EE1295F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4849
         "time": 1650913581765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4849
         "time": 1650913581769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ECC2942A02FA5F925D1CDD69FFBF50D772EF268D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4849
         "time": 1650913581771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "895A6CF53B3DE0E297C1C4E82BDE35D960B58AC3-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4849
         "time": 1650913581772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4849
         "time": 1650913581774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFD0A0802089F0D76EAA3837DAF28FAC7BBF4325-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4849
         "time": 1650913581776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4849
         "time": 1650913581777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15963E4CBDDE9DE3C9E8EA6F31F420CCF461B973-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4849
         "time": 1650913581779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DB32C6955122281EF522976C797DE81B4F6727C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4849
         "time": 1650913581889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9CA3709AD2827FD4C367AEAF09960B1239A7793F-1"
         "pid": 4849
         "time": 1650913581920
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:29.186Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:29.187Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:29.187Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:29.188Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:29.260Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:29.401Z appoptics:patching patched crypto 
2022-04-25T19:06:29.422Z appoptics:patching patched https 
2022-04-25T19:06:29.423Z appoptics:patching patched http 
2022-04-25T19:06:29.464Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:29.465Z appoptics:patching patched fs 
2022-04-25T19:06:29.496Z appoptics:patching patched pino 7.6.4
2022-04-25T19:06:29.500Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4871
         "time": 1650913589532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5E552F9369505D34EC4C20AABA781F5467082A1A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4871
         "time": 1650913589541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A06A14198A1A5CAF548E034891A66E8F2BA26AE2-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4871
         "time": 1650913589546
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5ABB26C5C6FD95E39EA9451B84B4B17C2810515-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4871
         "time": 1650913589549
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "74EAAF9340C2D473FF97D5750E3E6B3690566F47-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4871
         "time": 1650913589552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4871
         "time": 1650913589556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02A47C41A35AB69424314B8EF88CC29B186F79C7-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4871
         "time": 1650913589557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EC404CACFF6EEB033F0D3691E4BEF63537FF31B6-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4871
         "time": 1650913589559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4871
         "time": 1650913589561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3936842DDA8A6A2666F108B3677996688FB4CF72-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4871
         "time": 1650913589562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4871
         "time": 1650913589564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9433225B41E559FE1BE45B319DCABEB2A909DCBA-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4871
         "time": 1650913589566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F0CDDE7669086AAB62F7D6E16F25100BB1FE23B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4871
         "time": 1650913589670
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1A175F256B7DE1E0FF15DB8852061560C28803AF-1"
         "pid": 4871
         "time": 1650913589700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:37.376Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:37.377Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:37.377Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:37.378Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:37.449Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:37.587Z appoptics:patching patched crypto 
2022-04-25T19:06:37.607Z appoptics:patching patched https 
2022-04-25T19:06:37.608Z appoptics:patching patched http 
2022-04-25T19:06:37.648Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:37.648Z appoptics:patching patched fs 
2022-04-25T19:06:37.657Z appoptics:patching patched pino 7.6.5
2022-04-25T19:06:37.661Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4893
         "time": 1650913597690
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D51A7A7C32AB70C0E524CC673CA1AE6EDB62A925-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4893
         "time": 1650913597699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DDB2BFF8DAEDB04E47EC0AD679F7080EA0C3376-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4893
         "time": 1650913597704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EAEF9EF532E18BF1175E716FF3E28B3F5D779A1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4893
         "time": 1650913597707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D27CA42550B8502067114E27B0C74A8514D92044-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4893
         "time": 1650913597710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4893
         "time": 1650913597713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D806FFA8E0F0F6600708DEA824C9982C51295B56-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4893
         "time": 1650913597715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E2E72A633F812F5AD9314FADDB5167DA227043E6-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4893
         "time": 1650913597717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4893
         "time": 1650913597718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33330A8270AD6D9E6F9208C8974C0B8109BEA4CE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4893
         "time": 1650913597720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4893
         "time": 1650913597721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EE0CC74F053AB23732BB40AFC83FB0CDAD5E59A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4893
         "time": 1650913597723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BDC5B0E1B1A697020F9012D7AC3B5F95B46DDB68-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4893
         "time": 1650913597829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0526DAF2566793BE943B5BDAA4C44F72AC8BD648-1"
         "pid": 4893
         "time": 1650913597860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:45.878Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:45.879Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:45.879Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:45.879Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:45.951Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:46.093Z appoptics:patching patched crypto 
2022-04-25T19:06:46.115Z appoptics:patching patched https 
2022-04-25T19:06:46.115Z appoptics:patching patched http 
2022-04-25T19:06:46.156Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:46.156Z appoptics:patching patched fs 
2022-04-25T19:06:46.165Z appoptics:patching patched pino 7.7.0
2022-04-25T19:06:46.169Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4915
         "time": 1650913606199
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "36B6F3C2A5C55D1425C15BDEDC481AB7757685D6-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4915
         "time": 1650913606207
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "987E5C7130E2059D7B8BC72E5FAD89C498B38C10-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4915
         "time": 1650913606212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "232762A88A91D6637EA7A912EE7CB7946258A75E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4915
         "time": 1650913606215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C4E7AA6BA4CBB0B51187BCDC868FAB598912F56-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4915
         "time": 1650913606218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4915
         "time": 1650913606221
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB7851CF5AA6D86B88BF92E2E60219D86B774719-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4915
         "time": 1650913606223
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "69E0A72B7AEFC436016BAE50FEA11E4FD5FAA6C1-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4915
         "time": 1650913606225
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4915
         "time": 1650913606227
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "771A7A9A824416E161F2D17E6F0FB7D2870C979E-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4915
         "time": 1650913606228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4915
         "time": 1650913606230
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6ADDDA7403C5D67541A89C717F7DBE99CDF4AD38-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4915
         "time": 1650913606232
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18262B0EB00253503102377ADC0B621898D1034C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4915
         "time": 1650913606337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9E4CC8F19E51464C2691DDA476354F43AA907794-1"
         "pid": 4915
         "time": 1650913606368
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:53.430Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:53.431Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:53.431Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:53.432Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:53.522Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:53.681Z appoptics:patching patched crypto 
2022-04-25T19:06:53.702Z appoptics:patching patched https 
2022-04-25T19:06:53.703Z appoptics:patching patched http 
2022-04-25T19:06:53.744Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:53.745Z appoptics:patching patched fs 
2022-04-25T19:06:53.754Z appoptics:patching patched pino 7.8.0
2022-04-25T19:06:53.758Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4937
         "time": 1650913613787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B92E41DD9679C95152F3490A9562FBF499259843-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4937
         "time": 1650913613796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B3F03C3C0491FC7ECB63BA71EE8FCCFAE5233D9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4937
         "time": 1650913613800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60DBDC68D26B0E74442424B6F506AF2D80E063EB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4937
         "time": 1650913613803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF8C1E15957F6BE41FCD2CA7CE07AFC614C766DB-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4937
         "time": 1650913613806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4937
         "time": 1650913613809
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB89E4D6FD82ABB511E2DA868386F3656A8AF5F3-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4937
         "time": 1650913613811
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A95ABD0F3C197F5B6029A18589998D8B4A5065F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4937
         "time": 1650913613813
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4937
         "time": 1650913613814
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16D36DA428AF552BC11D6D3108CE477EE01C3899-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4937
         "time": 1650913613816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4937
         "time": 1650913613817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "79DCAC7E1D1E2EF45132A83A49794F37DF04250F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4937
         "time": 1650913613819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01D063FEF438B0A3A8071679C1938280111628B5-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4937
         "time": 1650913613924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8E36A626F0E095893B6811BFE7D9C423C7F2CC3A-1"
         "pid": 4937
         "time": 1650913613956
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:01.424Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:01.425Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:01.425Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:01.425Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:01.496Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:01.636Z appoptics:patching patched crypto 
2022-04-25T19:07:01.657Z appoptics:patching patched https 
2022-04-25T19:07:01.658Z appoptics:patching patched http 
2022-04-25T19:07:01.708Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:01.708Z appoptics:patching patched fs 
2022-04-25T19:07:01.722Z appoptics:patching patched pino 7.8.1
2022-04-25T19:07:01.728Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (198ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4959
         "time": 1650913621760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7399B4540DDBE3B49906C2B98BFD8314D9FAEE24-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4959
         "time": 1650913621772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9239FD52225AD1F73E1056D5215A0F6387C2728E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4959
         "time": 1650913621776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FD577C52D0998BC24E0D4A8AE684AB8857F90D34-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4959
         "time": 1650913621779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9AE613DB50E340C5373DE307F4C8B86F543DCEE1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4959
         "time": 1650913621783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4959
         "time": 1650913621786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BBDBD53BFA5DC9A43C4B58770E30CEA2911AF529-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4959
         "time": 1650913621788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "553787B4CAA7460BA20BE46E92A2F736D92EF811-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4959
         "time": 1650913621790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4959
         "time": 1650913621791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "80DCA009213BDA55206DFDB5CBB6223F14F5D05F-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4959
         "time": 1650913621793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4959
         "time": 1650913621794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41BD678348A3AD53B197ED035B36F1995D45FE5F-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4959
         "time": 1650913621798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB0D81D92D9D08CA28A78E9462CF838D2A8187CF-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4959
         "time": 1650913621901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 52485D4F5E4C56185FD7C7ABC6C3B2C953690F0F-1"
         "pid": 4959
         "time": 1650913621931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:09.620Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:09.621Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:09.621Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:09.622Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:09.719Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:09.872Z appoptics:patching patched crypto 
2022-04-25T19:07:09.893Z appoptics:patching patched https 
2022-04-25T19:07:09.894Z appoptics:patching patched http 
2022-04-25T19:07:09.933Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:09.934Z appoptics:patching patched fs 
2022-04-25T19:07:09.943Z appoptics:patching patched pino 7.9.0
2022-04-25T19:07:09.948Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4981
         "time": 1650913629977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27F0B60DEBC67B5F6B0BD771D304A3C5DF75DAA5-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4981
         "time": 1650913629986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51E6AA02F7E38DFD4DFB65A206442C8C1B1D0498-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4981
         "time": 1650913629991
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AC25E282AF524FB5477E4FFE0CB84C0C027F5E88-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4981
         "time": 1650913629994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "438F0FBE17D083A675ECF82D81AB0909F07C73D9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4981
         "time": 1650913629997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4981
         "time": 1650913630000
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3905979BC7B209F6AB7E5727E34DA4566ED08371-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4981
         "time": 1650913630002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8170B02BB360B7DD2242958CFC6B90B2D38778D5-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4981
         "time": 1650913630003
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4981
         "time": 1650913630005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2ED2F7F8AF1D0A24D851D592160CC864AB78D5A9-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4981
         "time": 1650913630006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 4981
         "time": 1650913630008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35A60C14125CAFB29122778C9DEC35C5A1FDE84C-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4981
         "time": 1650913630010
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DBAE2D31BC659652674D42439C984CEE8C625E1E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4981
         "time": 1650913630115
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 89A17B0DB63E0B9DED24F8732E0591C10D77F063-1"
         "pid": 4981
         "time": 1650913630144
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:17.374Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:17.374Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:17.374Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:17.375Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:17.447Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:17.592Z appoptics:patching patched crypto 
2022-04-25T19:07:17.615Z appoptics:patching patched https 
2022-04-25T19:07:17.616Z appoptics:patching patched http 
2022-04-25T19:07:17.650Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:17.651Z appoptics:patching patched fs 
2022-04-25T19:07:17.660Z appoptics:patching patched pino 7.9.1
2022-04-25T19:07:17.664Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5003
         "time": 1650913637693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A15AB8EBB1CA5A28C70F003A9A4D2A5F19DF27DF-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5003
         "time": 1650913637702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4183A15329D04F0C4C952EB39E001BE7EC06CFCD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5003
         "time": 1650913637706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F19219AE9224526CA52F08F3E2D34AF5EB24FE69-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5003
         "time": 1650913637709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "751856BF52B6D692EC7EFD7A7B9FE03547F3C4BD-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5003
         "time": 1650913637712
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5003
         "time": 1650913637716
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9DF2755E9CBA752846F2356330B18ED0797F919-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5003
         "time": 1650913637718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41DB404D53F21675717E6594B3F6277BCA6554BF-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5003
         "time": 1650913637720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5003
         "time": 1650913637721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55AC39A9147F6CEBD6BDEF89D99ED8E6486987CE-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5003
         "time": 1650913637723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 5003
         "time": 1650913637724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60181DFA0A96FD9DE5AF6327A193A64241F0D842-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5003
         "time": 1650913637727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C6447E84A288150FC820C4532D8B27BE7DEABD4-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5003
         "time": 1650913637831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6958DC54B91D6AC7737A9EAE2EC3057D32C8FE85-1"
         "pid": 5003
         "time": 1650913637861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:26.125Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:26.129Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:26.129Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:26.130Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:26.200Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:26.353Z appoptics:patching patched crypto 
2022-04-25T19:07:26.411Z appoptics:patching patched https 
2022-04-25T19:07:26.412Z appoptics:patching patched http 
2022-04-25T19:07:26.444Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:26.445Z appoptics:patching patched fs 
2022-04-25T19:07:26.455Z appoptics:patching patched pino 7.9.2
2022-04-25T19:07:26.459Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (200ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5025
         "time": 1650913646490
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85B1DCED21CD8C3AEC82BAB4A6CC3699CAE30755-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5025
         "time": 1650913646500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DD0C0F9D1D9DFEA9A786735AFF510F2072FE45E-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5025
         "time": 1650913646505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "34C4385CE0A91FD34983BBAD05E04C138D061C64-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5025
         "time": 1650913646509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9D3295E95416192CE1639D7E5301364C5D9DAF7B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5025
         "time": 1650913646512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5025
         "time": 1650913646517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E173D453000E7C6BAD1F28411882EA6DD7E3E45A-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5025
         "time": 1650913646520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68936C6A610C9A6CC8ECA518088CEFE158F67CC5-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5025
         "time": 1650913646522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5025
         "time": 1650913646524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "668F038FE5CDD5A51577D2223522A670F62BB04D-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5025
         "time": 1650913646525
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 5025
         "time": 1650913646527
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA2F93950A796402BBF8D172F95B217F9A9BDFB1-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5025
         "time": 1650913646530
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "597920E3E3B538FA970557E49C464D1A91DF199B-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5025
         "time": 1650913646636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4D42AA22DFC4B31B27D13D9238303A7FE7C76541-1"
         "pid": 5025
         "time": 1650913646665
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:33.856Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:33.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:33.857Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:33.857Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:33.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:34.152Z appoptics:patching patched crypto 
2022-04-25T19:07:34.196Z appoptics:patching patched https 
2022-04-25T19:07:34.197Z appoptics:patching patched http 
2022-04-25T19:07:34.240Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:34.240Z appoptics:patching patched fs 
2022-04-25T19:07:34.249Z appoptics:patching patched pino 7.10.0
2022-04-25T19:07:34.254Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (204ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5047
         "time": 1650913654288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B7A83EE3535EEAB066A6396AD8697CF1D51DD07-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5047
         "time": 1650913654297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A9A1BDD41BA6FEA5CF3FDC4B6130F93D379F2C9-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5047
         "time": 1650913654302
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1B49E3D93D071E2260993C7B725AB31743EAA23-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5047
         "time": 1650913654306
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5B87F03C94BA43A423603968E9DBD1EB97C303A-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5047
         "time": 1650913654309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5047
         "time": 1650913654313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88ED9C8ABEC467E73DD7CC524E1AD2C38069E158-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5047
         "time": 1650913654316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E9EA78434F5EA7131549EE254D0B781284297F6-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5047
         "time": 1650913654318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5047
         "time": 1650913654320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB2302EE7666400422368A13511D1D3DE3C0FB78-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5047
         "time": 1650913654322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "always insert"
         "pid": 5047
         "time": 1650913654324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0E85768A91275875FC062859CEA17BCF2F87B69-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5047
         "time": 1650913654326
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2FD093B6F48840BADC37DB575E3D116E2D076157-1"
      +  }
         "hostname": "4b0a02740482"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5047
         "time": 1650913654432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9FD813D8D95C21DA1A87CD032627E1BAD805CFFE-1"
         "pid": 5047
         "time": 1650913654463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
