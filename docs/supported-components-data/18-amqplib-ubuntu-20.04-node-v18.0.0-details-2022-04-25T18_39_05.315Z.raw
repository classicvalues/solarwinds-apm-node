npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:13.837Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:13.838Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:13.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:13.839Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:13.916Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:14.056Z appoptics:patching patched crypto 
2022-04-25T18:39:14.083Z appoptics:patching patched https 
2022-04-25T18:39:14.084Z appoptics:patching patched http 
2022-04-25T18:39:14.141Z appoptics:patching patched amqplib 0.2.0
2022-04-25T18:39:14.143Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:39:14.146Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at process.processImmediate (node:internal/timers:471:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at process.processImmediate (node:internal/timers:471:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:27.088Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:27.089Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:27.089Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:27.090Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:27.169Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:27.316Z appoptics:patching patched crypto 
2022-04-25T18:39:27.355Z appoptics:patching patched https 
2022-04-25T18:39:27.356Z appoptics:patching patched http 
2022-04-25T18:39:27.413Z appoptics:patching patched amqplib 0.2.1
2022-04-25T18:39:27.415Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:39:27.418Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:846) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (72ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (267ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:37.078Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:37.079Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:37.079Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:37.080Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:37.153Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:37.293Z appoptics:patching patched crypto 
2022-04-25T18:39:37.318Z appoptics:patching patched https 
2022-04-25T18:39:37.319Z appoptics:patching patched http 
2022-04-25T18:39:37.391Z appoptics:patching patched amqplib 0.3.0
2022-04-25T18:39:37.393Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:39:37.396Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:868) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)


  7 passing (253ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:45.532Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:45.533Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:45.533Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:45.533Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:45.697Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:46.011Z appoptics:patching patched crypto 
2022-04-25T18:39:46.044Z appoptics:patching patched https 
2022-04-25T18:39:46.045Z appoptics:patching patched http 
2022-04-25T18:39:46.200Z appoptics:patching patched amqplib 0.3.1
2022-04-25T18:39:46.206Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:39:46.209Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:890) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (87ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (53ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (364ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:39:54.715Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:39:54.715Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:39:54.715Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:39:54.716Z appoptics:debug using context provider: ace-context
2022-04-25T18:39:54.788Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:39:54.921Z appoptics:patching patched crypto 
2022-04-25T18:39:54.942Z appoptics:patching patched https 
2022-04-25T18:39:54.943Z appoptics:patching patched http 
2022-04-25T18:39:55.001Z appoptics:patching patched amqplib 0.3.2
2022-04-25T18:39:55.003Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:39:55.006Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:912) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (50ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (51ms)


  7 passing (204ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:04.276Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:04.277Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:04.277Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:04.278Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:04.348Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:04.479Z appoptics:patching patched crypto 
2022-04-25T18:40:04.500Z appoptics:patching patched https 
2022-04-25T18:40:04.501Z appoptics:patching patched http 
2022-04-25T18:40:04.560Z appoptics:patching patched amqplib 0.4.0
2022-04-25T18:40:04.562Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:04.565Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:934) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (198ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:527:28)
      at Connection.emit (node:events:527:28)
      at C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:527:28)
      at emitReadable_ (node:internal/streams/readable:590:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:527:28)
      at Connection.emit (node:events:527:28)
      at C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:527:28)
      at emitReadable_ (node:internal/streams/readable:590:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:12.672Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:12.673Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:12.673Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:12.673Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:12.766Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:12.921Z appoptics:patching patched crypto 
2022-04-25T18:40:12.971Z appoptics:patching patched https 
2022-04-25T18:40:12.972Z appoptics:patching patched http 
2022-04-25T18:40:13.040Z appoptics:patching patched amqplib 0.4.1
2022-04-25T18:40:13.042Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:13.045Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:956) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (276ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:21.354Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:21.354Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:21.354Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:21.355Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:21.455Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:21.614Z appoptics:patching patched crypto 
2022-04-25T18:40:21.637Z appoptics:patching patched https 
2022-04-25T18:40:21.638Z appoptics:patching patched http 
2022-04-25T18:40:21.703Z appoptics:patching patched amqplib 0.4.2
2022-04-25T18:40:21.706Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:21.708Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:978) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (59ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (242ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 923 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:29.873Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:29.873Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:29.873Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:29.874Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:29.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:30.096Z appoptics:patching patched crypto 
2022-04-25T18:40:30.120Z appoptics:patching patched https 
2022-04-25T18:40:30.120Z appoptics:patching patched http 
2022-04-25T18:40:30.213Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:40:30.216Z appoptics:patching patched amqplib 0.5.1
2022-04-25T18:40:30.218Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:30.221Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:1000) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (256ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:38.444Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:38.445Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:38.445Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:38.446Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:38.515Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:38.644Z appoptics:patching patched crypto 
2022-04-25T18:40:38.665Z appoptics:patching patched https 
2022-04-25T18:40:38.665Z appoptics:patching patched http 
2022-04-25T18:40:38.737Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:40:38.740Z appoptics:patching patched amqplib 0.5.2
2022-04-25T18:40:38.742Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:38.744Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:1022) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (66ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (54ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (242ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:46.451Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:46.451Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:46.451Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:46.452Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:46.548Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:46.696Z appoptics:patching patched crypto 
2022-04-25T18:40:46.716Z appoptics:patching patched https 
2022-04-25T18:40:46.717Z appoptics:patching patched http 
2022-04-25T18:40:46.837Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:40:46.840Z appoptics:patching patched amqplib 0.5.3
2022-04-25T18:40:46.842Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:40:46.845Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:1044) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)


  7 passing (248ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:40:55.481Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:40:55.482Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:40:55.482Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:40:55.483Z appoptics:debug using context provider: ace-context
2022-04-25T18:40:55.552Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:40:55.681Z appoptics:patching patched crypto 
2022-04-25T18:40:55.701Z appoptics:patching patched https 
2022-04-25T18:40:55.702Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:03.845Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:03.845Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:03.846Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:03.846Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:03.934Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:04.089Z appoptics:patching patched crypto 
2022-04-25T18:41:04.137Z appoptics:patching patched https 
2022-04-25T18:41:04.138Z appoptics:patching patched http 
2022-04-25T18:41:04.217Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:04.220Z appoptics:patching patched amqplib 0.5.5
2022-04-25T18:41:04.222Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:04.225Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:1084) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (84ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (280ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:11.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:11.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:11.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:11.563Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:11.640Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:11.817Z appoptics:patching patched crypto 
2022-04-25T18:41:11.849Z appoptics:patching patched https 
2022-04-25T18:41:11.850Z appoptics:patching patched http 
2022-04-25T18:41:11.928Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:11.931Z appoptics:patching patched amqplib 0.5.6
2022-04-25T18:41:11.933Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:11.936Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:1106) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)


  7 passing (266ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:20.899Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:20.900Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:20.900Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:20.901Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:20.970Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:21.101Z appoptics:patching patched crypto 
2022-04-25T18:41:21.122Z appoptics:patching patched https 
2022-04-25T18:41:21.122Z appoptics:patching patched http 
2022-04-25T18:41:21.202Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:21.205Z appoptics:patching patched amqplib 0.6.0
2022-04-25T18:41:21.207Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:21.209Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:1128) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (61ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (289ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:29.523Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:29.523Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:29.523Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:29.524Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:29.595Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:29.727Z appoptics:patching patched crypto 
2022-04-25T18:41:29.747Z appoptics:patching patched https 
2022-04-25T18:41:29.748Z appoptics:patching patched http 
2022-04-25T18:41:29.821Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:29.823Z appoptics:patching patched amqplib 0.7.0
2022-04-25T18:41:29.825Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:29.828Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:1150) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (54ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (202ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:36.919Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:36.919Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:36.919Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:36.920Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:37.004Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:37.170Z appoptics:patching patched crypto 
2022-04-25T18:41:37.203Z appoptics:patching patched https 
2022-04-25T18:41:37.205Z appoptics:patching patched http 
2022-04-25T18:41:37.323Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:37.326Z appoptics:patching patched amqplib 0.7.1
2022-04-25T18:41:37.329Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:37.333Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:1172) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (67ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (284ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:41:45.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:41:45.183Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:41:45.183Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:41:45.183Z appoptics:debug using context provider: ace-context
2022-04-25T18:41:45.254Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:41:45.385Z appoptics:patching patched crypto 
2022-04-25T18:41:45.405Z appoptics:patching patched https 
2022-04-25T18:41:45.406Z appoptics:patching patched http 
2022-04-25T18:41:45.481Z appoptics:patching patched bluebird 3.7.2
2022-04-25T18:41:45.483Z appoptics:patching patched amqplib 0.8.0
2022-04-25T18:41:45.485Z appoptics:patching patched amqplib/callback_api 
2022-04-25T18:41:45.487Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:1194) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (52ms)


  7 passing (255ms)


up to date, audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
