
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:07.899Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:07.900Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:07.900Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:07.900Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:08.017Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:08.180Z appoptics:patching patched crypto 
2022-04-25T18:45:08.245Z appoptics:patching patched https 
2022-04-25T18:45:08.247Z appoptics:patching patched http 
2022-04-25T18:45:08.346Z appoptics:patching patched pino 2.3.0
2022-04-25T18:45:08.351Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (236ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:16.365Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:16.366Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:16.366Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:16.367Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:16.462Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:16.608Z appoptics:patching patched crypto 
2022-04-25T18:45:16.629Z appoptics:patching patched https 
2022-04-25T18:45:16.630Z appoptics:patching patched http 
2022-04-25T18:45:16.689Z appoptics:patching patched pino 2.4.0
2022-04-25T18:45:16.694Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:25.870Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:25.871Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:25.871Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:25.872Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:25.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:26.077Z appoptics:patching patched crypto 
2022-04-25T18:45:26.097Z appoptics:patching patched https 
2022-04-25T18:45:26.097Z appoptics:patching patched http 
2022-04-25T18:45:26.148Z appoptics:patching patched pino 2.4.1
2022-04-25T18:45:26.152Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:34.289Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:34.290Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:34.290Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:34.291Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:34.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:34.574Z appoptics:patching patched crypto 
2022-04-25T18:45:34.613Z appoptics:patching patched https 
2022-04-25T18:45:34.614Z appoptics:patching patched http 
2022-04-25T18:45:34.655Z appoptics:patching patched pino 2.4.2
2022-04-25T18:45:34.659Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:42.071Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:42.072Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:42.072Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:42.073Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:42.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:42.305Z appoptics:patching patched crypto 
2022-04-25T18:45:42.326Z appoptics:patching patched https 
2022-04-25T18:45:42.327Z appoptics:patching patched http 
2022-04-25T18:45:42.395Z appoptics:patching patched pino 2.4.3
2022-04-25T18:45:42.400Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:50.707Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:50.708Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:50.708Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:50.708Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:50.778Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:50.907Z appoptics:patching patched crypto 
2022-04-25T18:45:50.927Z appoptics:patching patched https 
2022-04-25T18:45:50.928Z appoptics:patching patched http 
2022-04-25T18:45:50.976Z appoptics:patching patched pino 2.4.4
2022-04-25T18:45:50.980Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:45:59.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:45:59.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:45:59.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:45:59.219Z appoptics:debug using context provider: ace-context
2022-04-25T18:45:59.293Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:45:59.426Z appoptics:patching patched crypto 
2022-04-25T18:45:59.446Z appoptics:patching patched https 
2022-04-25T18:45:59.447Z appoptics:patching patched http 
2022-04-25T18:45:59.501Z appoptics:patching patched pino 2.5.0
2022-04-25T18:45:59.505Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:06.972Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:06.972Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:06.972Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:06.973Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:07.040Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:07.166Z appoptics:patching patched crypto 
2022-04-25T18:46:07.185Z appoptics:patching patched https 
2022-04-25T18:46:07.186Z appoptics:patching patched http 
2022-04-25T18:46:07.236Z appoptics:patching patched pino 2.6.0
2022-04-25T18:46:07.241Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:15.365Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:15.366Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:15.366Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:15.367Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:15.436Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:15.572Z appoptics:patching patched crypto 
2022-04-25T18:46:15.593Z appoptics:patching patched https 
2022-04-25T18:46:15.593Z appoptics:patching patched http 
2022-04-25T18:46:15.643Z appoptics:patching patched pino 2.6.1
2022-04-25T18:46:15.647Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:23.825Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:23.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:23.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:23.827Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:23.897Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:24.021Z appoptics:patching patched crypto 
2022-04-25T18:46:24.041Z appoptics:patching patched https 
2022-04-25T18:46:24.041Z appoptics:patching patched http 
2022-04-25T18:46:24.091Z appoptics:patching patched pino 2.7.0
2022-04-25T18:46:24.095Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:31.475Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:31.475Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:31.475Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:31.476Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:31.539Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:31.660Z appoptics:patching patched crypto 
2022-04-25T18:46:31.679Z appoptics:patching patched https 
2022-04-25T18:46:31.680Z appoptics:patching patched http 
2022-04-25T18:46:31.729Z appoptics:patching patched pino 2.7.1
2022-04-25T18:46:31.733Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:39.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:39.249Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:39.249Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:39.250Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:39.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:39.450Z appoptics:patching patched crypto 
2022-04-25T18:46:39.474Z appoptics:patching patched https 
2022-04-25T18:46:39.474Z appoptics:patching patched http 
2022-04-25T18:46:39.521Z appoptics:patching patched pino 2.7.2
2022-04-25T18:46:39.525Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:46.517Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:46.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:46.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:46.518Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:46.607Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:46.750Z appoptics:patching patched crypto 
2022-04-25T18:46:46.791Z appoptics:patching patched https 
2022-04-25T18:46:46.792Z appoptics:patching patched http 
2022-04-25T18:46:46.837Z appoptics:patching patched pino 2.7.3
2022-04-25T18:46:46.841Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:46:54.021Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:46:54.021Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:46:54.021Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:46:54.022Z appoptics:debug using context provider: ace-context
2022-04-25T18:46:54.086Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:46:54.205Z appoptics:patching patched crypto 
2022-04-25T18:46:54.222Z appoptics:patching patched https 
2022-04-25T18:46:54.223Z appoptics:patching patched http 
2022-04-25T18:46:54.272Z appoptics:patching patched pino 2.7.4
2022-04-25T18:46:54.276Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:01.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:01.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:01.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:01.815Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:01.890Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:02.019Z appoptics:patching patched crypto 
2022-04-25T18:47:02.039Z appoptics:patching patched https 
2022-04-25T18:47:02.040Z appoptics:patching patched http 
2022-04-25T18:47:02.096Z appoptics:patching patched pino 2.7.5
2022-04-25T18:47:02.106Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (200ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:09.200Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:09.201Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:09.201Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:09.202Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:09.269Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:09.397Z appoptics:patching patched crypto 
2022-04-25T18:47:09.417Z appoptics:patching patched https 
2022-04-25T18:47:09.418Z appoptics:patching patched http 
2022-04-25T18:47:09.461Z appoptics:patching patched pino 2.8.0
2022-04-25T18:47:09.465Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:17.458Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:17.459Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:17.459Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:17.460Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:17.534Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:17.667Z appoptics:patching patched crypto 
2022-04-25T18:47:17.687Z appoptics:patching patched https 
2022-04-25T18:47:17.688Z appoptics:patching patched http 
2022-04-25T18:47:17.747Z appoptics:patching patched pino 2.8.1
2022-04-25T18:47:17.751Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:25.970Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:25.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:25.971Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:25.971Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:26.043Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:26.174Z appoptics:patching patched crypto 
2022-04-25T18:47:26.194Z appoptics:patching patched https 
2022-04-25T18:47:26.194Z appoptics:patching patched http 
2022-04-25T18:47:26.253Z appoptics:patching patched pino 2.8.2
2022-04-25T18:47:26.257Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:33.411Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:33.411Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:33.411Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:33.412Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:33.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:33.644Z appoptics:patching patched crypto 
2022-04-25T18:47:33.665Z appoptics:patching patched https 
2022-04-25T18:47:33.665Z appoptics:patching patched http 
2022-04-25T18:47:33.722Z appoptics:patching patched pino 2.8.3
2022-04-25T18:47:33.726Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:41.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:41.815Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:41.815Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:41.816Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:41.884Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:42.019Z appoptics:patching patched crypto 
2022-04-25T18:47:42.039Z appoptics:patching patched https 
2022-04-25T18:47:42.040Z appoptics:patching patched http 
2022-04-25T18:47:42.093Z appoptics:patching patched pino 2.9.0
2022-04-25T18:47:42.098Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:49.892Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:49.893Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:49.893Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:49.894Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:49.985Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:50.175Z appoptics:patching patched crypto 
2022-04-25T18:47:50.219Z appoptics:patching patched https 
2022-04-25T18:47:50.220Z appoptics:patching patched http 
2022-04-25T18:47:50.285Z appoptics:patching patched pino 2.10.0
2022-04-25T18:47:50.290Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:47:57.918Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:47:57.919Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:47:57.919Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:47:57.920Z appoptics:debug using context provider: ace-context
2022-04-25T18:47:57.985Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:47:58.114Z appoptics:patching patched crypto 
2022-04-25T18:47:58.134Z appoptics:patching patched https 
2022-04-25T18:47:58.135Z appoptics:patching patched http 
2022-04-25T18:47:58.192Z appoptics:patching patched pino 2.10.1
2022-04-25T18:47:58.196Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:05.628Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:05.628Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:05.628Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:05.629Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:05.697Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:05.821Z appoptics:patching patched crypto 
2022-04-25T18:48:05.840Z appoptics:patching patched https 
2022-04-25T18:48:05.841Z appoptics:patching patched http 
2022-04-25T18:48:05.894Z appoptics:patching patched pino 2.11.0
2022-04-25T18:48:05.898Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:13.206Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:13.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:13.206Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:13.207Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:13.284Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:13.413Z appoptics:patching patched crypto 
2022-04-25T18:48:13.456Z appoptics:patching patched https 
2022-04-25T18:48:13.456Z appoptics:patching patched http 
2022-04-25T18:48:13.507Z appoptics:patching patched pino 2.12.0
2022-04-25T18:48:13.510Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:21.123Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:21.124Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:21.124Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:21.125Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:21.198Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:21.333Z appoptics:patching patched crypto 
2022-04-25T18:48:21.354Z appoptics:patching patched https 
2022-04-25T18:48:21.354Z appoptics:patching patched http 
2022-04-25T18:48:21.408Z appoptics:patching patched pino 2.12.1
2022-04-25T18:48:21.412Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:29.514Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:29.515Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:29.515Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:29.516Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:29.604Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:29.771Z appoptics:patching patched crypto 
2022-04-25T18:48:29.792Z appoptics:patching patched https 
2022-04-25T18:48:29.792Z appoptics:patching patched http 
2022-04-25T18:48:29.875Z appoptics:patching patched pino 2.12.2
2022-04-25T18:48:29.879Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:37.564Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:37.564Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:37.564Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:37.565Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:37.651Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:37.808Z appoptics:patching patched crypto 
2022-04-25T18:48:37.829Z appoptics:patching patched https 
2022-04-25T18:48:37.830Z appoptics:patching patched http 
2022-04-25T18:48:37.920Z appoptics:patching patched pino 2.12.3
2022-04-25T18:48:37.925Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (198ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:46.034Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:46.035Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:46.035Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:46.035Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:46.111Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:46.249Z appoptics:patching patched crypto 
2022-04-25T18:48:46.269Z appoptics:patching patched https 
2022-04-25T18:48:46.269Z appoptics:patching patched http 
2022-04-25T18:48:46.325Z appoptics:patching patched pino 2.12.4
2022-04-25T18:48:46.329Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:48:56.173Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:48:56.174Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:48:56.174Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:48:56.174Z appoptics:debug using context provider: ace-context
2022-04-25T18:48:56.245Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:48:56.380Z appoptics:patching patched crypto 
2022-04-25T18:48:56.399Z appoptics:patching patched https 
2022-04-25T18:48:56.400Z appoptics:patching patched http 
2022-04-25T18:48:56.454Z appoptics:patching patched pino 2.13.0
2022-04-25T18:48:56.458Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 21s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:18.678Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:18.679Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:18.679Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:18.680Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:18.749Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:18.885Z appoptics:patching patched crypto 
2022-04-25T18:49:18.905Z appoptics:patching patched https 
2022-04-25T18:49:18.906Z appoptics:patching patched http 
2022-04-25T18:49:18.958Z appoptics:patching patched pino 2.13.2
2022-04-25T18:49:18.962Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:26.871Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:26.872Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:26.872Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:26.872Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:26.951Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:27.091Z appoptics:patching patched crypto 
2022-04-25T18:49:27.147Z appoptics:patching patched https 
2022-04-25T18:49:27.148Z appoptics:patching patched http 
2022-04-25T18:49:27.190Z appoptics:patching patched pino 2.14.0
2022-04-25T18:49:27.194Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:34.663Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:34.664Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:34.664Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:34.665Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:34.732Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:34.856Z appoptics:patching patched crypto 
2022-04-25T18:49:34.875Z appoptics:patching patched https 
2022-04-25T18:49:34.877Z appoptics:patching patched http 
2022-04-25T18:49:34.933Z appoptics:patching patched pino 2.15.0
2022-04-25T18:49:34.937Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:42.811Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:42.811Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:42.811Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:42.812Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:42.879Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:43.021Z appoptics:patching patched crypto 
2022-04-25T18:49:43.067Z appoptics:patching patched https 
2022-04-25T18:49:43.068Z appoptics:patching patched http 
2022-04-25T18:49:43.096Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:43.096Z appoptics:patching patched fs 
2022-04-25T18:49:43.119Z appoptics:patching patched pino 2.16.0
2022-04-25T18:49:43.123Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:50.884Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:50.885Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:50.885Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:50.886Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:50.954Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:51.101Z appoptics:patching patched crypto 
2022-04-25T18:49:51.152Z appoptics:patching patched https 
2022-04-25T18:49:51.184Z appoptics:patching patched http 
2022-04-25T18:49:51.240Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:51.240Z appoptics:patching patched fs 
2022-04-25T18:49:51.269Z appoptics:patching patched pino 3.0.0
2022-04-25T18:49:51.273Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:49:59.116Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:49:59.117Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:49:59.117Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:49:59.118Z appoptics:debug using context provider: ace-context
2022-04-25T18:49:59.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:49:59.316Z appoptics:patching patched crypto 
2022-04-25T18:49:59.335Z appoptics:patching patched https 
2022-04-25T18:49:59.336Z appoptics:patching patched http 
2022-04-25T18:49:59.368Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:49:59.368Z appoptics:patching patched fs 
2022-04-25T18:49:59.389Z appoptics:patching patched pino 3.0.1
2022-04-25T18:49:59.393Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:07.516Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:07.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:07.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:07.518Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:07.592Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:07.735Z appoptics:patching patched crypto 
2022-04-25T18:50:07.755Z appoptics:patching patched https 
2022-04-25T18:50:07.756Z appoptics:patching patched http 
2022-04-25T18:50:07.796Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:07.797Z appoptics:patching patched fs 
2022-04-25T18:50:07.813Z appoptics:patching patched pino 3.0.2
2022-04-25T18:50:07.818Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:15.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:15.119Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:15.119Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:15.119Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:15.189Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:15.331Z appoptics:patching patched crypto 
2022-04-25T18:50:15.362Z appoptics:patching patched https 
2022-04-25T18:50:15.363Z appoptics:patching patched http 
2022-04-25T18:50:15.390Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:15.390Z appoptics:patching patched fs 
2022-04-25T18:50:15.405Z appoptics:patching patched pino 3.0.3
2022-04-25T18:50:15.409Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:24.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:24.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:24.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:24.044Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:24.124Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:24.287Z appoptics:patching patched crypto 
2022-04-25T18:50:24.312Z appoptics:patching patched https 
2022-04-25T18:50:24.313Z appoptics:patching patched http 
2022-04-25T18:50:24.353Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:24.354Z appoptics:patching patched fs 
2022-04-25T18:50:24.370Z appoptics:patching patched pino 3.0.4
2022-04-25T18:50:24.374Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:32.460Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:32.461Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:32.461Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:32.461Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:32.528Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:32.657Z appoptics:patching patched crypto 
2022-04-25T18:50:32.676Z appoptics:patching patched https 
2022-04-25T18:50:32.677Z appoptics:patching patched http 
2022-04-25T18:50:32.709Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:32.710Z appoptics:patching patched fs 
2022-04-25T18:50:32.729Z appoptics:patching patched pino 3.0.5
2022-04-25T18:50:32.733Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:39.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:39.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:39.687Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:39.688Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:39.753Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:39.877Z appoptics:patching patched crypto 
2022-04-25T18:50:39.897Z appoptics:patching patched https 
2022-04-25T18:50:39.897Z appoptics:patching patched http 
2022-04-25T18:50:39.927Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:39.928Z appoptics:patching patched fs 
2022-04-25T18:50:39.942Z appoptics:patching patched pino 3.0.6
2022-04-25T18:50:39.946Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:48.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:48.178Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:48.178Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:48.179Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:48.248Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:48.373Z appoptics:patching patched crypto 
2022-04-25T18:50:48.392Z appoptics:patching patched https 
2022-04-25T18:50:48.393Z appoptics:patching patched http 
2022-04-25T18:50:48.424Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:48.424Z appoptics:patching patched fs 
2022-04-25T18:50:48.444Z appoptics:patching patched pino 3.0.7
2022-04-25T18:50:48.449Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:50:56.186Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:50:56.186Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:50:56.186Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:50:56.188Z appoptics:debug using context provider: ace-context
2022-04-25T18:50:56.284Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:50:56.432Z appoptics:patching patched crypto 
2022-04-25T18:50:56.460Z appoptics:patching patched https 
2022-04-25T18:50:56.461Z appoptics:patching patched http 
2022-04-25T18:50:56.492Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:50:56.493Z appoptics:patching patched fs 
2022-04-25T18:50:56.507Z appoptics:patching patched pino 3.1.0
2022-04-25T18:50:56.511Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:03.846Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:03.847Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:03.847Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:03.848Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:03.928Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:04.073Z appoptics:patching patched crypto 
2022-04-25T18:51:04.093Z appoptics:patching patched https 
2022-04-25T18:51:04.093Z appoptics:patching patched http 
2022-04-25T18:51:04.135Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:04.135Z appoptics:patching patched fs 
2022-04-25T18:51:04.150Z appoptics:patching patched pino 3.1.1
2022-04-25T18:51:04.155Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:12.310Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:12.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:12.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:12.312Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:12.412Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:12.537Z appoptics:patching patched crypto 
2022-04-25T18:51:12.556Z appoptics:patching patched https 
2022-04-25T18:51:12.557Z appoptics:patching patched http 
2022-04-25T18:51:12.591Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:12.591Z appoptics:patching patched fs 
2022-04-25T18:51:12.606Z appoptics:patching patched pino 3.1.2
2022-04-25T18:51:12.610Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:19.847Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:19.848Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:19.848Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:19.849Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:19.932Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:20.076Z appoptics:patching patched crypto 
2022-04-25T18:51:20.122Z appoptics:patching patched https 
2022-04-25T18:51:20.123Z appoptics:patching patched http 
2022-04-25T18:51:20.158Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:20.159Z appoptics:patching patched fs 
2022-04-25T18:51:20.174Z appoptics:patching patched pino 3.1.3
2022-04-25T18:51:20.178Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:27.426Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:27.429Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:27.429Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:27.433Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:27.569Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:27.712Z appoptics:patching patched crypto 
2022-04-25T18:51:27.756Z appoptics:patching patched https 
2022-04-25T18:51:27.757Z appoptics:patching patched http 
2022-04-25T18:51:27.789Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:27.789Z appoptics:patching patched fs 
2022-04-25T18:51:27.805Z appoptics:patching patched pino 3.2.0
2022-04-25T18:51:27.809Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:35.702Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:35.702Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:35.702Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:35.703Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:35.770Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:35.900Z appoptics:patching patched crypto 
2022-04-25T18:51:35.920Z appoptics:patching patched https 
2022-04-25T18:51:35.921Z appoptics:patching patched http 
2022-04-25T18:51:35.954Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:35.954Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:43.480Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:43.481Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:43.481Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:43.482Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:43.591Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:43.750Z appoptics:patching patched crypto 
2022-04-25T18:51:43.775Z appoptics:patching patched https 
2022-04-25T18:51:43.801Z appoptics:patching patched http 
2022-04-25T18:51:43.838Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:43.838Z appoptics:patching patched fs 
2022-04-25T18:51:43.856Z appoptics:patching patched pino 3.3.1
2022-04-25T18:51:43.861Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:52.007Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:52.008Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:52.008Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:52.009Z appoptics:debug using context provider: ace-context
2022-04-25T18:51:52.077Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:51:52.215Z appoptics:patching patched crypto 
2022-04-25T18:51:52.236Z appoptics:patching patched https 
2022-04-25T18:51:52.236Z appoptics:patching patched http 
2022-04-25T18:51:52.269Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:51:52.269Z appoptics:patching patched fs 
2022-04-25T18:51:52.286Z appoptics:patching patched pino 3.3.2
2022-04-25T18:51:52.291Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


added 2 packages, changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:51:59.972Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:51:59.973Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:51:59.973Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:51:59.974Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:00.062Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:00.216Z appoptics:patching patched crypto 
2022-04-25T18:52:00.264Z appoptics:patching patched https 
2022-04-25T18:52:00.265Z appoptics:patching patched http 
2022-04-25T18:52:00.301Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:00.301Z appoptics:patching patched fs 
2022-04-25T18:52:00.320Z appoptics:patching patched pino 3.4.0
2022-04-25T18:52:00.325Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:07.190Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:07.191Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:07.191Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:07.192Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:07.258Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:07.384Z appoptics:patching patched crypto 
2022-04-25T18:52:07.404Z appoptics:patching patched https 
2022-04-25T18:52:07.405Z appoptics:patching patched http 
2022-04-25T18:52:07.438Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:07.439Z appoptics:patching patched fs 
2022-04-25T18:52:07.456Z appoptics:patching patched pino 4.0.0
2022-04-25T18:52:07.460Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:15.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:15.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:15.458Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:15.459Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:15.545Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:15.696Z appoptics:patching patched crypto 
2022-04-25T18:52:15.714Z appoptics:patching patched https 
2022-04-25T18:52:15.716Z appoptics:patching patched http 
2022-04-25T18:52:15.765Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:15.765Z appoptics:patching patched fs 
2022-04-25T18:52:15.783Z appoptics:patching patched pino 4.0.1
2022-04-25T18:52:15.787Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:23.869Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:23.871Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:23.871Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:23.873Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:23.973Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:24.100Z appoptics:patching patched crypto 
2022-04-25T18:52:24.119Z appoptics:patching patched https 
2022-04-25T18:52:24.120Z appoptics:patching patched http 
2022-04-25T18:52:24.160Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:24.160Z appoptics:patching patched fs 
2022-04-25T18:52:24.185Z appoptics:patching patched pino 4.0.2
2022-04-25T18:52:24.191Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (197ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:31.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:31.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:31.103Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:31.104Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:31.168Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:31.286Z appoptics:patching patched crypto 
2022-04-25T18:52:31.304Z appoptics:patching patched https 
2022-04-25T18:52:31.305Z appoptics:patching patched http 
2022-04-25T18:52:31.334Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:31.334Z appoptics:patching patched fs 
2022-04-25T18:52:31.354Z appoptics:patching patched pino 4.0.3
2022-04-25T18:52:31.360Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:39.337Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:39.338Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:39.338Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:39.339Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:39.407Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:39.539Z appoptics:patching patched crypto 
2022-04-25T18:52:39.559Z appoptics:patching patched https 
2022-04-25T18:52:39.560Z appoptics:patching patched http 
2022-04-25T18:52:39.586Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:39.592Z appoptics:patching patched fs 
2022-04-25T18:52:39.611Z appoptics:patching patched pino 4.1.0
2022-04-25T18:52:39.615Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:46.785Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:46.786Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:46.786Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:46.787Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:46.855Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:47.000Z appoptics:patching patched crypto 
2022-04-25T18:52:47.022Z appoptics:patching patched https 
2022-04-25T18:52:47.023Z appoptics:patching patched http 
2022-04-25T18:52:47.080Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:47.080Z appoptics:patching patched fs 
2022-04-25T18:52:47.099Z appoptics:patching patched pino 4.1.1
2022-04-25T18:52:47.103Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:52:54.831Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:52:54.831Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:52:54.831Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:52:54.832Z appoptics:debug using context provider: ace-context
2022-04-25T18:52:54.911Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:52:55.041Z appoptics:patching patched crypto 
2022-04-25T18:52:55.061Z appoptics:patching patched https 
2022-04-25T18:52:55.062Z appoptics:patching patched http 
2022-04-25T18:52:55.093Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:52:55.097Z appoptics:patching patched fs 
2022-04-25T18:52:55.115Z appoptics:patching patched pino 4.1.2
2022-04-25T18:52:55.119Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (194ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:03.125Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:03.126Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:03.126Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:03.127Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:03.205Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:03.331Z appoptics:patching patched crypto 
2022-04-25T18:53:03.350Z appoptics:patching patched https 
2022-04-25T18:53:03.350Z appoptics:patching patched http 
2022-04-25T18:53:03.380Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:03.380Z appoptics:patching patched fs 
2022-04-25T18:53:03.397Z appoptics:patching patched pino 4.2.0
2022-04-25T18:53:03.401Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:10.967Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:10.968Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:10.968Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:10.969Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:11.045Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:11.173Z appoptics:patching patched crypto 
2022-04-25T18:53:11.193Z appoptics:patching patched https 
2022-04-25T18:53:11.194Z appoptics:patching patched http 
2022-04-25T18:53:11.223Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:11.227Z appoptics:patching patched fs 
2022-04-25T18:53:11.245Z appoptics:patching patched pino 4.2.1
2022-04-25T18:53:11.252Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:18.836Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:18.837Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:18.837Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:18.838Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:18.906Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:19.031Z appoptics:patching patched crypto 
2022-04-25T18:53:19.050Z appoptics:patching patched https 
2022-04-25T18:53:19.051Z appoptics:patching patched http 
2022-04-25T18:53:19.089Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:19.089Z appoptics:patching patched fs 
2022-04-25T18:53:19.106Z appoptics:patching patched pino 4.2.2
2022-04-25T18:53:19.110Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:26.837Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:26.838Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:26.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:26.839Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:26.907Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:27.038Z appoptics:patching patched crypto 
2022-04-25T18:53:27.059Z appoptics:patching patched https 
2022-04-25T18:53:27.060Z appoptics:patching patched http 
2022-04-25T18:53:27.091Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:27.096Z appoptics:patching patched fs 
2022-04-25T18:53:27.113Z appoptics:patching patched pino 4.2.3
2022-04-25T18:53:27.117Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:34.233Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:34.233Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:34.233Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:34.234Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:34.300Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:34.425Z appoptics:patching patched crypto 
2022-04-25T18:53:34.443Z appoptics:patching patched https 
2022-04-25T18:53:34.444Z appoptics:patching patched http 
2022-04-25T18:53:34.474Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:34.475Z appoptics:patching patched fs 
2022-04-25T18:53:34.496Z appoptics:patching patched pino 4.2.4
2022-04-25T18:53:34.500Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:42.585Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:42.586Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:42.586Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:42.586Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:42.652Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:42.775Z appoptics:patching patched crypto 
2022-04-25T18:53:42.794Z appoptics:patching patched https 
2022-04-25T18:53:42.794Z appoptics:patching patched http 
2022-04-25T18:53:42.825Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:42.825Z appoptics:patching patched fs 
2022-04-25T18:53:42.847Z appoptics:patching patched pino 4.3.0
2022-04-25T18:53:42.851Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:53:50.444Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:53:50.444Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:53:50.444Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:53:50.454Z appoptics:debug using context provider: ace-context
2022-04-25T18:53:50.654Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:53:50.872Z appoptics:patching patched crypto 
2022-04-25T18:53:50.918Z appoptics:patching patched https 
2022-04-25T18:53:50.919Z appoptics:patching patched http 
2022-04-25T18:53:50.953Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:53:50.954Z appoptics:patching patched fs 
2022-04-25T18:53:50.972Z appoptics:patching patched pino 4.4.0
2022-04-25T18:53:50.976Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 939 packages in 12s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:03.831Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:03.831Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:03.832Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:03.832Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:03.896Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:04.020Z appoptics:patching patched crypto 
2022-04-25T18:54:04.039Z appoptics:patching patched https 
2022-04-25T18:54:04.040Z appoptics:patching patched http 
2022-04-25T18:54:04.068Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:04.069Z appoptics:patching patched fs 
2022-04-25T18:54:04.089Z appoptics:patching patched pino 4.5.0
2022-04-25T18:54:04.093Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 16s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:21.239Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:21.240Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:21.240Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:21.241Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:21.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:21.446Z appoptics:patching patched crypto 
2022-04-25T18:54:21.466Z appoptics:patching patched https 
2022-04-25T18:54:21.467Z appoptics:patching patched http 
2022-04-25T18:54:21.498Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:21.498Z appoptics:patching patched fs 
2022-04-25T18:54:21.521Z appoptics:patching patched pino 4.5.1
2022-04-25T18:54:21.525Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:30.110Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:30.110Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:30.110Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:30.111Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:30.183Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:30.323Z appoptics:patching patched crypto 
2022-04-25T18:54:30.343Z appoptics:patching patched https 
2022-04-25T18:54:30.344Z appoptics:patching patched http 
2022-04-25T18:54:30.375Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:30.380Z appoptics:patching patched fs 
2022-04-25T18:54:30.397Z appoptics:patching patched pino 4.5.2
2022-04-25T18:54:30.401Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:37.948Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:37.949Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:37.949Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:37.950Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:38.036Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:38.185Z appoptics:patching patched crypto 
2022-04-25T18:54:38.231Z appoptics:patching patched https 
2022-04-25T18:54:38.232Z appoptics:patching patched http 
2022-04-25T18:54:38.265Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:38.265Z appoptics:patching patched fs 
2022-04-25T18:54:38.290Z appoptics:patching patched pino 4.5.3
2022-04-25T18:54:38.296Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (226ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:45.520Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:45.521Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:45.521Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:45.521Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:45.600Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:45.740Z appoptics:patching patched crypto 
2022-04-25T18:54:45.766Z appoptics:patching patched https 
2022-04-25T18:54:45.766Z appoptics:patching patched http 
2022-04-25T18:54:45.811Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:45.811Z appoptics:patching patched fs 
2022-04-25T18:54:45.831Z appoptics:patching patched pino 4.5.4
2022-04-25T18:54:45.835Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:54:53.692Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:54:53.693Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:54:53.693Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:54:53.693Z appoptics:debug using context provider: ace-context
2022-04-25T18:54:53.757Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:54:53.883Z appoptics:patching patched crypto 
2022-04-25T18:54:53.903Z appoptics:patching patched https 
2022-04-25T18:54:53.904Z appoptics:patching patched http 
2022-04-25T18:54:53.936Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:54:53.936Z appoptics:patching patched fs 
2022-04-25T18:54:53.954Z appoptics:patching patched pino 4.6.0
2022-04-25T18:54:53.958Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:01.423Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:01.424Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:01.424Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:01.425Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:01.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:01.638Z appoptics:patching patched crypto 
2022-04-25T18:55:01.659Z appoptics:patching patched https 
2022-04-25T18:55:01.659Z appoptics:patching patched http 
2022-04-25T18:55:01.714Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:01.714Z appoptics:patching patched fs 
2022-04-25T18:55:01.740Z appoptics:patching patched pino 4.7.0
2022-04-25T18:55:01.744Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:09.726Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:09.727Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:09.727Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:09.728Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:09.795Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:09.921Z appoptics:patching patched crypto 
2022-04-25T18:55:09.941Z appoptics:patching patched https 
2022-04-25T18:55:09.942Z appoptics:patching patched http 
2022-04-25T18:55:09.974Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:09.974Z appoptics:patching patched fs 
2022-04-25T18:55:10.002Z appoptics:patching patched pino 4.7.1
2022-04-25T18:55:10.006Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:17.715Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:17.716Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:17.716Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:17.717Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:17.785Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:17.917Z appoptics:patching patched crypto 
2022-04-25T18:55:17.947Z appoptics:patching patched https 
2022-04-25T18:55:17.948Z appoptics:patching patched http 
2022-04-25T18:55:17.978Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:17.978Z appoptics:patching patched fs 
2022-04-25T18:55:18.001Z appoptics:patching patched pino 4.7.2
2022-04-25T18:55:18.005Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:25.579Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:25.580Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:25.580Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:25.580Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:25.648Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:25.775Z appoptics:patching patched crypto 
2022-04-25T18:55:25.794Z appoptics:patching patched https 
2022-04-25T18:55:25.795Z appoptics:patching patched http 
2022-04-25T18:55:25.828Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:25.832Z appoptics:patching patched fs 
2022-04-25T18:55:25.856Z appoptics:patching patched pino 4.7.3
2022-04-25T18:55:25.860Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:34.121Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:34.122Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:34.122Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:34.123Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:34.193Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:34.336Z appoptics:patching patched crypto 
2022-04-25T18:55:34.358Z appoptics:patching patched https 
2022-04-25T18:55:34.359Z appoptics:patching patched http 
2022-04-25T18:55:34.392Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:34.396Z appoptics:patching patched fs 
2022-04-25T18:55:34.421Z appoptics:patching patched pino 4.8.0
2022-04-25T18:55:34.425Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:42.876Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:42.877Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:42.877Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:42.878Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:42.946Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:43.078Z appoptics:patching patched crypto 
2022-04-25T18:55:43.103Z appoptics:patching patched https 
2022-04-25T18:55:43.104Z appoptics:patching patched http 
2022-04-25T18:55:43.158Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:43.159Z appoptics:patching patched fs 
2022-04-25T18:55:43.182Z appoptics:patching patched pino 4.8.1
2022-04-25T18:55:43.186Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:49.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:49.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:49.921Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:49.922Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:49.987Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:50.114Z appoptics:patching patched crypto 
2022-04-25T18:55:50.134Z appoptics:patching patched https 
2022-04-25T18:55:50.135Z appoptics:patching patched http 
2022-04-25T18:55:50.165Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:50.166Z appoptics:patching patched fs 
2022-04-25T18:55:50.192Z appoptics:patching patched pino 4.8.2
2022-04-25T18:55:50.196Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:55:58.025Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:55:58.026Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:55:58.026Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:55:58.027Z appoptics:debug using context provider: ace-context
2022-04-25T18:55:58.091Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:55:58.215Z appoptics:patching patched crypto 
2022-04-25T18:55:58.240Z appoptics:patching patched https 
2022-04-25T18:55:58.240Z appoptics:patching patched http 
2022-04-25T18:55:58.288Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:55:58.288Z appoptics:patching patched fs 
2022-04-25T18:55:58.319Z appoptics:patching patched pino 4.9.0
2022-04-25T18:55:58.323Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:05.031Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:05.032Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:05.032Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:05.033Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:05.104Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:05.247Z appoptics:patching patched crypto 
2022-04-25T18:56:05.291Z appoptics:patching patched https 
2022-04-25T18:56:05.292Z appoptics:patching patched http 
2022-04-25T18:56:05.323Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:05.323Z appoptics:patching patched fs 
2022-04-25T18:56:05.346Z appoptics:patching patched pino 4.10.0
2022-04-25T18:56:05.350Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:12.499Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:12.500Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:12.500Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:12.501Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:12.571Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:12.751Z appoptics:patching patched crypto 
2022-04-25T18:56:12.774Z appoptics:patching patched https 
2022-04-25T18:56:12.775Z appoptics:patching patched http 
2022-04-25T18:56:12.804Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:12.805Z appoptics:patching patched fs 
2022-04-25T18:56:12.833Z appoptics:patching patched pino 4.10.1
2022-04-25T18:56:12.837Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:20.321Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:20.322Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:20.322Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:20.323Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:20.390Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:20.517Z appoptics:patching patched crypto 
2022-04-25T18:56:20.536Z appoptics:patching patched https 
2022-04-25T18:56:20.537Z appoptics:patching patched http 
2022-04-25T18:56:20.567Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:20.571Z appoptics:patching patched fs 
2022-04-25T18:56:20.594Z appoptics:patching patched pino 4.10.2
2022-04-25T18:56:20.598Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 2 packages, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:27.518Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:27.521Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:27.521Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:27.522Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:27.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:27.737Z appoptics:patching patched crypto 
2022-04-25T18:56:27.756Z appoptics:patching patched https 
2022-04-25T18:56:27.757Z appoptics:patching patched http 
2022-04-25T18:56:27.787Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:27.788Z appoptics:patching patched fs 
2022-04-25T18:56:27.814Z appoptics:patching patched pino 4.10.3
2022-04-25T18:56:27.818Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:35.766Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:35.767Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:35.767Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:35.768Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:35.836Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:35.987Z appoptics:patching patched crypto 
2022-04-25T18:56:36.007Z appoptics:patching patched https 
2022-04-25T18:56:36.008Z appoptics:patching patched http 
2022-04-25T18:56:36.041Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:36.045Z appoptics:patching patched fs 
2022-04-25T18:56:36.068Z appoptics:patching patched pino 4.10.4
2022-04-25T18:56:36.072Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:44.027Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:44.027Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:44.028Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:44.028Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:44.097Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:44.245Z appoptics:patching patched crypto 
2022-04-25T18:56:44.276Z appoptics:patching patched https 
2022-04-25T18:56:44.277Z appoptics:patching patched http 
2022-04-25T18:56:44.324Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:44.324Z appoptics:patching patched fs 
2022-04-25T18:56:44.347Z appoptics:patching patched pino 4.11.0
2022-04-25T18:56:44.351Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


added 1 package, changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:56:51.763Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:56:51.764Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:56:51.764Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:56:51.765Z appoptics:debug using context provider: ace-context
2022-04-25T18:56:51.834Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:56:51.964Z appoptics:patching patched crypto 
2022-04-25T18:56:51.984Z appoptics:patching patched https 
2022-04-25T18:56:51.985Z appoptics:patching patched http 
2022-04-25T18:56:52.017Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:56:52.017Z appoptics:patching patched fs 
2022-04-25T18:56:52.045Z appoptics:patching patched pino 4.12.0
2022-04-25T18:56:52.049Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:00.433Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:00.433Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:00.433Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:00.434Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:00.503Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:00.634Z appoptics:patching patched crypto 
2022-04-25T18:57:00.654Z appoptics:patching patched https 
2022-04-25T18:57:00.655Z appoptics:patching patched http 
2022-04-25T18:57:00.689Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:00.689Z appoptics:patching patched fs 
2022-04-25T18:57:00.718Z appoptics:patching patched pino 4.13.0
2022-04-25T18:57:00.722Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 2 packages, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:07.830Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:07.831Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:07.831Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:07.832Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:07.913Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:08.119Z appoptics:patching patched crypto 
2022-04-25T18:57:08.199Z appoptics:patching patched https 
2022-04-25T18:57:08.200Z appoptics:patching patched http 
2022-04-25T18:57:08.256Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:08.257Z appoptics:patching patched fs 
2022-04-25T18:57:08.293Z appoptics:patching patched pino 4.14.0
2022-04-25T18:57:08.299Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (194ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:15.227Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:15.228Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:15.228Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:15.228Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:15.293Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:15.412Z appoptics:patching patched crypto 
2022-04-25T18:57:15.432Z appoptics:patching patched https 
2022-04-25T18:57:15.432Z appoptics:patching patched http 
2022-04-25T18:57:15.464Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:15.464Z appoptics:patching patched fs 
2022-04-25T18:57:15.491Z appoptics:patching patched pino 4.15.0
2022-04-25T18:57:15.494Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:23.257Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:23.258Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:23.258Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:23.259Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:23.324Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:23.452Z appoptics:patching patched crypto 
2022-04-25T18:57:23.471Z appoptics:patching patched https 
2022-04-25T18:57:23.472Z appoptics:patching patched http 
2022-04-25T18:57:23.512Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:23.512Z appoptics:patching patched fs 
2022-04-25T18:57:23.535Z appoptics:patching patched pino 4.15.1
2022-04-25T18:57:23.539Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:30.238Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:30.238Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:30.238Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:30.239Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:30.299Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:30.415Z appoptics:patching patched crypto 
2022-04-25T18:57:30.433Z appoptics:patching patched https 
2022-04-25T18:57:30.434Z appoptics:patching patched http 
2022-04-25T18:57:30.467Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:30.468Z appoptics:patching patched fs 
2022-04-25T18:57:30.504Z appoptics:patching patched pino 4.15.2
2022-04-25T18:57:30.509Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 2 packages, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:37.863Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:37.863Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:37.863Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:37.864Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:37.927Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:38.045Z appoptics:patching patched crypto 
2022-04-25T18:57:38.073Z appoptics:patching patched https 
2022-04-25T18:57:38.074Z appoptics:patching patched http 
2022-04-25T18:57:38.105Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:38.105Z appoptics:patching patched fs 
2022-04-25T18:57:38.128Z appoptics:patching patched pino 4.15.3
2022-04-25T18:57:38.131Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:45.683Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:45.684Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:45.684Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:45.684Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:45.745Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:45.867Z appoptics:patching patched crypto 
2022-04-25T18:57:45.887Z appoptics:patching patched https 
2022-04-25T18:57:45.887Z appoptics:patching patched http 
2022-04-25T18:57:45.919Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:45.919Z appoptics:patching patched fs 
2022-04-25T18:57:45.942Z appoptics:patching patched pino 4.15.4
2022-04-25T18:57:45.946Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:57:52.443Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:57:52.444Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:57:52.444Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:57:52.444Z appoptics:debug using context provider: ace-context
2022-04-25T18:57:52.510Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:57:52.641Z appoptics:patching patched crypto 
2022-04-25T18:57:52.660Z appoptics:patching patched https 
2022-04-25T18:57:52.661Z appoptics:patching patched http 
2022-04-25T18:57:52.692Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:57:52.693Z appoptics:patching patched fs 
2022-04-25T18:57:52.719Z appoptics:patching patched pino 4.16.0
2022-04-25T18:57:52.722Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:00.438Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:00.439Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:00.439Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:00.439Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:00.506Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:00.634Z appoptics:patching patched crypto 
2022-04-25T18:58:00.653Z appoptics:patching patched https 
2022-04-25T18:58:00.655Z appoptics:patching patched http 
2022-04-25T18:58:00.691Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:00.691Z appoptics:patching patched fs 
2022-04-25T18:58:00.714Z appoptics:patching patched pino 4.16.1
2022-04-25T18:58:00.718Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:08.314Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:08.315Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:08.315Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:08.316Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:08.409Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:08.549Z appoptics:patching patched crypto 
2022-04-25T18:58:08.594Z appoptics:patching patched https 
2022-04-25T18:58:08.595Z appoptics:patching patched http 
2022-04-25T18:58:08.634Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:08.635Z appoptics:patching patched fs 
2022-04-25T18:58:08.673Z appoptics:patching patched pino 4.17.0
2022-04-25T18:58:08.677Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (228ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:16.234Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:16.235Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:16.235Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:16.235Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:16.327Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:16.474Z appoptics:patching patched crypto 
2022-04-25T18:58:16.519Z appoptics:patching patched https 
2022-04-25T18:58:16.520Z appoptics:patching patched http 
2022-04-25T18:58:16.556Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:16.556Z appoptics:patching patched fs 
2022-04-25T18:58:16.580Z appoptics:patching patched pino 4.17.1
2022-04-25T18:58:16.584Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:23.812Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:23.813Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:23.813Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:23.814Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:23.877Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:24.014Z appoptics:patching patched crypto 
2022-04-25T18:58:24.034Z appoptics:patching patched https 
2022-04-25T18:58:24.035Z appoptics:patching patched http 
2022-04-25T18:58:24.067Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:24.068Z appoptics:patching patched fs 
2022-04-25T18:58:24.091Z appoptics:patching patched pino 4.17.2
2022-04-25T18:58:24.095Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:31.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:31.409Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:31.409Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:31.410Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:31.484Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:31.620Z appoptics:patching patched crypto 
2022-04-25T18:58:31.640Z appoptics:patching patched https 
2022-04-25T18:58:31.640Z appoptics:patching patched http 
2022-04-25T18:58:31.676Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:31.676Z appoptics:patching patched fs 
2022-04-25T18:58:31.699Z appoptics:patching patched pino 4.17.3
2022-04-25T18:58:31.704Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:39.467Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:39.468Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:39.468Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:39.469Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:39.531Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:39.650Z appoptics:patching patched crypto 
2022-04-25T18:58:39.673Z appoptics:patching patched https 
2022-04-25T18:58:39.674Z appoptics:patching patched http 
2022-04-25T18:58:39.737Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:39.737Z appoptics:patching patched fs 
2022-04-25T18:58:39.760Z appoptics:patching patched pino 4.17.5
2022-04-25T18:58:39.764Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:47.031Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:47.032Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:47.032Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:47.033Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:47.099Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:47.223Z appoptics:patching patched crypto 
2022-04-25T18:58:47.242Z appoptics:patching patched https 
2022-04-25T18:58:47.243Z appoptics:patching patched http 
2022-04-25T18:58:47.277Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:47.277Z appoptics:patching patched fs 
2022-04-25T18:58:47.299Z appoptics:patching patched pino 4.17.6
2022-04-25T18:58:47.303Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:58:54.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:58:54.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:58:54.266Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:58:54.267Z appoptics:debug using context provider: ace-context
2022-04-25T18:58:54.331Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:58:54.462Z appoptics:patching patched crypto 
2022-04-25T18:58:54.483Z appoptics:patching patched https 
2022-04-25T18:58:54.484Z appoptics:patching patched http 
2022-04-25T18:58:54.514Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:58:54.515Z appoptics:patching patched fs 
2022-04-25T18:58:54.523Z appoptics:patching patched pino 5.0.0
2022-04-25T18:58:54.527Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 2 packages, and audited 929 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:04.888Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:04.889Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:04.889Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:04.890Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:04.956Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:05.091Z appoptics:patching patched crypto 
2022-04-25T18:59:05.111Z appoptics:patching patched https 
2022-04-25T18:59:05.111Z appoptics:patching patched http 
2022-04-25T18:59:05.143Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:05.144Z appoptics:patching patched fs 
2022-04-25T18:59:05.158Z appoptics:patching patched pino 5.0.1
2022-04-25T18:59:05.162Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:19.162Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:19.163Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:19.163Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:19.164Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:19.229Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:19.355Z appoptics:patching patched crypto 
2022-04-25T18:59:19.383Z appoptics:patching patched https 
2022-04-25T18:59:19.383Z appoptics:patching patched http 
2022-04-25T18:59:19.410Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:19.410Z appoptics:patching patched fs 
2022-04-25T18:59:19.419Z appoptics:patching patched pino 5.0.2
2022-04-25T18:59:19.423Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:29.716Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:29.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:29.717Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:29.718Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:29.785Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:29.917Z appoptics:patching patched crypto 
2022-04-25T18:59:29.936Z appoptics:patching patched https 
2022-04-25T18:59:29.937Z appoptics:patching patched http 
2022-04-25T18:59:29.979Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:29.979Z appoptics:patching patched fs 
2022-04-25T18:59:29.988Z appoptics:patching patched pino 5.0.3
2022-04-25T18:59:29.992Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:38.359Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:38.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:38.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:38.361Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:38.426Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:38.553Z appoptics:patching patched crypto 
2022-04-25T18:59:38.572Z appoptics:patching patched https 
2022-04-25T18:59:38.573Z appoptics:patching patched http 
2022-04-25T18:59:38.604Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:38.605Z appoptics:patching patched fs 
2022-04-25T18:59:38.618Z appoptics:patching patched pino 5.0.4
2022-04-25T18:59:38.622Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:45.324Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:45.325Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:45.325Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:45.326Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:45.393Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:45.506Z appoptics:patching patched crypto 
2022-04-25T18:59:45.524Z appoptics:patching patched https 
2022-04-25T18:59:45.524Z appoptics:patching patched http 
2022-04-25T18:59:45.553Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:45.554Z appoptics:patching patched fs 
2022-04-25T18:59:45.561Z appoptics:patching patched pino 5.0.5
2022-04-25T18:59:45.565Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T18:59:52.773Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T18:59:52.773Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T18:59:52.773Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T18:59:52.774Z appoptics:debug using context provider: ace-context
2022-04-25T18:59:52.840Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T18:59:52.961Z appoptics:patching patched crypto 
2022-04-25T18:59:52.980Z appoptics:patching patched https 
2022-04-25T18:59:52.981Z appoptics:patching patched http 
2022-04-25T18:59:53.012Z appoptics:patching fs.realpath - adding native method
2022-04-25T18:59:53.017Z appoptics:patching patched fs 
2022-04-25T18:59:53.026Z appoptics:patching patched pino 5.1.0
2022-04-25T18:59:53.030Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:00.781Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:00.782Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:00.782Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:00.783Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:00.846Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:00.970Z appoptics:patching patched crypto 
2022-04-25T19:00:00.988Z appoptics:patching patched https 
2022-04-25T19:00:00.990Z appoptics:patching patched http 
2022-04-25T19:00:01.021Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:01.025Z appoptics:patching patched fs 
2022-04-25T19:00:01.034Z appoptics:patching patched pino 5.1.1
2022-04-25T19:00:01.037Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:08.003Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:08.004Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:08.004Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:08.005Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:08.071Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:08.218Z appoptics:patching patched crypto 
2022-04-25T19:00:08.237Z appoptics:patching patched https 
2022-04-25T19:00:08.246Z appoptics:patching patched http 
2022-04-25T19:00:08.279Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:08.279Z appoptics:patching patched fs 
2022-04-25T19:00:08.288Z appoptics:patching patched pino 5.2.0
2022-04-25T19:00:08.292Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:15.573Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:15.574Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:15.574Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:15.575Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:15.638Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:15.760Z appoptics:patching patched crypto 
2022-04-25T19:00:15.778Z appoptics:patching patched https 
2022-04-25T19:00:15.778Z appoptics:patching patched http 
2022-04-25T19:00:15.809Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:15.809Z appoptics:patching patched fs 
2022-04-25T19:00:15.822Z appoptics:patching patched pino 5.3.0
2022-04-25T19:00:15.826Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:23.001Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:23.010Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:23.010Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:23.011Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:23.168Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:23.303Z appoptics:patching patched crypto 
2022-04-25T19:00:23.349Z appoptics:patching patched https 
2022-04-25T19:00:23.349Z appoptics:patching patched http 
2022-04-25T19:00:23.386Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:23.386Z appoptics:patching patched fs 
2022-04-25T19:00:23.395Z appoptics:patching patched pino 5.3.1
2022-04-25T19:00:23.399Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:30.925Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:30.926Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:30.926Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:30.927Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:30.993Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:31.122Z appoptics:patching patched crypto 
2022-04-25T19:00:31.142Z appoptics:patching patched https 
2022-04-25T19:00:31.142Z appoptics:patching patched http 
2022-04-25T19:00:31.176Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:31.176Z appoptics:patching patched fs 
2022-04-25T19:00:31.185Z appoptics:patching patched pino 5.4.0
2022-04-25T19:00:31.190Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:38.642Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:38.642Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:38.642Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:38.643Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:38.706Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:38.827Z appoptics:patching patched crypto 
2022-04-25T19:00:38.845Z appoptics:patching patched https 
2022-04-25T19:00:38.846Z appoptics:patching patched http 
2022-04-25T19:00:38.875Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:38.876Z appoptics:patching patched fs 
2022-04-25T19:00:38.884Z appoptics:patching patched pino 5.4.1
2022-04-25T19:00:38.888Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:45.770Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:45.771Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:45.771Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:45.772Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:45.840Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:45.968Z appoptics:patching patched crypto 
2022-04-25T19:00:45.988Z appoptics:patching patched https 
2022-04-25T19:00:45.988Z appoptics:patching patched http 
2022-04-25T19:00:46.029Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:46.030Z appoptics:patching patched fs 
2022-04-25T19:00:46.039Z appoptics:patching patched pino 5.5.0
2022-04-25T19:00:46.043Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:00:54.240Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:00:54.241Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:00:54.241Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:00:54.242Z appoptics:debug using context provider: ace-context
2022-04-25T19:00:54.307Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:00:54.430Z appoptics:patching patched crypto 
2022-04-25T19:00:54.450Z appoptics:patching patched https 
2022-04-25T19:00:54.451Z appoptics:patching patched http 
2022-04-25T19:00:54.491Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:00:54.491Z appoptics:patching patched fs 
2022-04-25T19:00:54.500Z appoptics:patching patched pino 5.6.0
2022-04-25T19:00:54.505Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:02.041Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:02.042Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:02.042Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:02.043Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:02.223Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:02.414Z appoptics:patching patched crypto 
2022-04-25T19:01:02.445Z appoptics:patching patched https 
2022-04-25T19:01:02.445Z appoptics:patching patched http 
2022-04-25T19:01:02.502Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:02.502Z appoptics:patching patched fs 
2022-04-25T19:01:02.517Z appoptics:patching patched pino 5.6.1
2022-04-25T19:01:02.523Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:09.549Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:09.550Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:09.550Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:09.550Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:09.625Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:09.762Z appoptics:patching patched crypto 
2022-04-25T19:01:09.783Z appoptics:patching patched https 
2022-04-25T19:01:09.784Z appoptics:patching patched http 
2022-04-25T19:01:09.821Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:09.821Z appoptics:patching patched fs 
2022-04-25T19:01:09.831Z appoptics:patching patched pino 5.6.2
2022-04-25T19:01:09.835Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:18.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:18.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:18.687Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:18.687Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:18.757Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:18.918Z appoptics:patching patched crypto 
2022-04-25T19:01:18.940Z appoptics:patching patched https 
2022-04-25T19:01:18.956Z appoptics:patching patched http 
2022-04-25T19:01:18.985Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:18.985Z appoptics:patching patched fs 
2022-04-25T19:01:18.994Z appoptics:patching patched pino 5.6.3
2022-04-25T19:01:18.999Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:27.044Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:27.045Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:27.045Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:27.046Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:27.137Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:27.289Z appoptics:patching patched crypto 
2022-04-25T19:01:27.337Z appoptics:patching patched https 
2022-04-25T19:01:27.337Z appoptics:patching patched http 
2022-04-25T19:01:27.375Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:27.375Z appoptics:patching patched fs 
2022-04-25T19:01:27.385Z appoptics:patching patched pino 5.6.4
2022-04-25T19:01:27.389Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:34.841Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:34.841Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:34.841Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:34.842Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:34.911Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:35.055Z appoptics:patching patched crypto 
2022-04-25T19:01:35.076Z appoptics:patching patched https 
2022-04-25T19:01:35.077Z appoptics:patching patched http 
2022-04-25T19:01:35.115Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:35.115Z appoptics:patching patched fs 
2022-04-25T19:01:35.124Z appoptics:patching patched pino 5.7.0
2022-04-25T19:01:35.129Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:43.489Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:43.490Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:43.490Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:43.491Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:43.560Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:43.693Z appoptics:patching patched crypto 
2022-04-25T19:01:43.714Z appoptics:patching patched https 
2022-04-25T19:01:43.714Z appoptics:patching patched http 
2022-04-25T19:01:43.749Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:43.750Z appoptics:patching patched fs 
2022-04-25T19:01:43.759Z appoptics:patching patched pino 5.8.0
2022-04-25T19:01:43.763Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:50.981Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:50.982Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:50.982Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:50.983Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:51.067Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:51.251Z appoptics:patching patched crypto 
2022-04-25T19:01:51.318Z appoptics:patching patched https 
2022-04-25T19:01:51.319Z appoptics:patching patched http 
2022-04-25T19:01:51.372Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:51.372Z appoptics:patching patched fs 
2022-04-25T19:01:51.386Z appoptics:patching patched pino 5.8.1
2022-04-25T19:01:51.390Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:01:58.852Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:01:58.853Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:01:58.853Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:01:58.854Z appoptics:debug using context provider: ace-context
2022-04-25T19:01:58.925Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:01:59.077Z appoptics:patching patched crypto 
2022-04-25T19:01:59.165Z appoptics:patching patched https 
2022-04-25T19:01:59.167Z appoptics:patching patched http 
2022-04-25T19:01:59.200Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:01:59.200Z appoptics:patching patched fs 
2022-04-25T19:01:59.206Z appoptics:patching patched pino 5.9.0
2022-04-25T19:01:59.210Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


added 1 package, changed 2 packages, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:07.272Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:07.273Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:07.273Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:07.274Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:07.342Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:07.477Z appoptics:patching patched crypto 
2022-04-25T19:02:07.497Z appoptics:patching patched https 
2022-04-25T19:02:07.497Z appoptics:patching patched http 
2022-04-25T19:02:07.534Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:07.534Z appoptics:patching patched fs 
2022-04-25T19:02:07.540Z appoptics:patching patched pino 5.10.1
2022-04-25T19:02:07.544Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:14.847Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:14.848Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:14.848Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:14.849Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:14.916Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:15.044Z appoptics:patching patched crypto 
2022-04-25T19:02:15.065Z appoptics:patching patched https 
2022-04-25T19:02:15.065Z appoptics:patching patched http 
2022-04-25T19:02:15.118Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:15.118Z appoptics:patching patched fs 
2022-04-25T19:02:15.124Z appoptics:patching patched pino 5.10.2
2022-04-25T19:02:15.128Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:23.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:23.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:23.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:23.448Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:23.520Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:23.653Z appoptics:patching patched crypto 
2022-04-25T19:02:23.682Z appoptics:patching patched https 
2022-04-25T19:02:23.683Z appoptics:patching patched http 
2022-04-25T19:02:23.722Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:23.723Z appoptics:patching patched fs 
2022-04-25T19:02:23.729Z appoptics:patching patched pino 5.10.3
2022-04-25T19:02:23.733Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:32.009Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:32.010Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:32.010Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:32.011Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:32.080Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:32.209Z appoptics:patching patched crypto 
2022-04-25T19:02:32.233Z appoptics:patching patched https 
2022-04-25T19:02:32.234Z appoptics:patching patched http 
2022-04-25T19:02:32.294Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:32.295Z appoptics:patching patched fs 
2022-04-25T19:02:32.301Z appoptics:patching patched pino 5.10.4
2022-04-25T19:02:32.305Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


removed 3 packages, changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:39.391Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:39.392Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:39.392Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:39.393Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:39.461Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:39.589Z appoptics:patching patched crypto 
2022-04-25T19:02:39.611Z appoptics:patching patched https 
2022-04-25T19:02:39.619Z appoptics:patching patched http 
2022-04-25T19:02:39.657Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:39.657Z appoptics:patching patched fs 
2022-04-25T19:02:39.663Z appoptics:patching patched pino 5.10.5
2022-04-25T19:02:39.667Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:48.011Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:48.012Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:48.012Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:48.013Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:48.080Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:48.206Z appoptics:patching patched crypto 
2022-04-25T19:02:48.226Z appoptics:patching patched https 
2022-04-25T19:02:48.227Z appoptics:patching patched http 
2022-04-25T19:02:48.267Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:48.267Z appoptics:patching patched fs 
2022-04-25T19:02:48.273Z appoptics:patching patched pino 5.10.6
2022-04-25T19:02:48.277Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:02:56.588Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:02:56.588Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:02:56.589Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:02:56.589Z appoptics:debug using context provider: ace-context
2022-04-25T19:02:56.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:02:56.797Z appoptics:patching patched crypto 
2022-04-25T19:02:56.817Z appoptics:patching patched https 
2022-04-25T19:02:56.818Z appoptics:patching patched http 
2022-04-25T19:02:56.863Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:02:56.863Z appoptics:patching patched fs 
2022-04-25T19:02:56.869Z appoptics:patching patched pino 5.10.7
2022-04-25T19:02:56.873Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:03.706Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:03.707Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:03.707Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:03.708Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:03.773Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:03.899Z appoptics:patching patched crypto 
2022-04-25T19:03:03.930Z appoptics:patching patched https 
2022-04-25T19:03:03.931Z appoptics:patching patched http 
2022-04-25T19:03:03.959Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:03.960Z appoptics:patching patched fs 
2022-04-25T19:03:03.965Z appoptics:patching patched pino 5.10.8
2022-04-25T19:03:03.969Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:11.604Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:11.605Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:11.605Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:11.606Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:11.672Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:11.798Z appoptics:patching patched crypto 
2022-04-25T19:03:11.817Z appoptics:patching patched https 
2022-04-25T19:03:11.818Z appoptics:patching patched http 
2022-04-25T19:03:11.856Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:11.857Z appoptics:patching patched fs 
2022-04-25T19:03:11.862Z appoptics:patching patched pino 5.10.9
2022-04-25T19:03:11.866Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:19.264Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:19.264Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:19.264Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:19.265Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:19.356Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:19.501Z appoptics:patching patched crypto 
2022-04-25T19:03:19.549Z appoptics:patching patched https 
2022-04-25T19:03:19.549Z appoptics:patching patched http 
2022-04-25T19:03:19.589Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:19.589Z appoptics:patching patched fs 
2022-04-25T19:03:19.595Z appoptics:patching patched pino 5.10.10
2022-04-25T19:03:19.599Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:26.866Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:26.867Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:26.867Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:26.868Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:26.969Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:27.116Z appoptics:patching patched crypto 
2022-04-25T19:03:27.137Z appoptics:patching patched https 
2022-04-25T19:03:27.142Z appoptics:patching patched http 
2022-04-25T19:03:27.180Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:27.180Z appoptics:patching patched fs 
2022-04-25T19:03:27.186Z appoptics:patching patched pino 5.11.0
2022-04-25T19:03:27.190Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:34.901Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:34.902Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:34.902Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:34.903Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:34.971Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:35.098Z appoptics:patching patched crypto 
2022-04-25T19:03:35.117Z appoptics:patching patched https 
2022-04-25T19:03:35.117Z appoptics:patching patched http 
2022-04-25T19:03:35.159Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:35.159Z appoptics:patching patched fs 
2022-04-25T19:03:35.165Z appoptics:patching patched pino 5.11.1
2022-04-25T19:03:35.169Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:42.736Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:42.737Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:42.737Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:42.738Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:42.814Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:42.980Z appoptics:patching patched crypto 
2022-04-25T19:03:43.044Z appoptics:patching patched https 
2022-04-25T19:03:43.045Z appoptics:patching patched http 
2022-04-25T19:03:43.087Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:43.087Z appoptics:patching patched fs 
2022-04-25T19:03:43.094Z appoptics:patching patched pino 5.11.2
2022-04-25T19:03:43.099Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (197ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:51.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:51.154Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:51.154Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:51.155Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:51.235Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:51.384Z appoptics:patching patched crypto 
2022-04-25T19:03:51.431Z appoptics:patching patched https 
2022-04-25T19:03:51.432Z appoptics:patching patched http 
2022-04-25T19:03:51.467Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:51.467Z appoptics:patching patched fs 
2022-04-25T19:03:51.473Z appoptics:patching patched pino 5.11.3
2022-04-25T19:03:51.477Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:03:59.164Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:03:59.165Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:03:59.165Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:03:59.166Z appoptics:debug using context provider: ace-context
2022-04-25T19:03:59.254Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:03:59.406Z appoptics:patching patched crypto 
2022-04-25T19:03:59.452Z appoptics:patching patched https 
2022-04-25T19:03:59.453Z appoptics:patching patched http 
2022-04-25T19:03:59.494Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:03:59.495Z appoptics:patching patched fs 
2022-04-25T19:03:59.501Z appoptics:patching patched pino 5.12.0
2022-04-25T19:03:59.505Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 23s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:23.513Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:23.514Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:23.514Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:23.515Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:23.584Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:23.716Z appoptics:patching patched crypto 
2022-04-25T19:04:23.735Z appoptics:patching patched https 
2022-04-25T19:04:23.736Z appoptics:patching patched http 
2022-04-25T19:04:23.783Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:23.784Z appoptics:patching patched fs 
2022-04-25T19:04:23.789Z appoptics:patching patched pino 5.12.1
2022-04-25T19:04:23.793Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:34.703Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:34.703Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:34.703Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:34.704Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:34.773Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:34.899Z appoptics:patching patched crypto 
2022-04-25T19:04:34.919Z appoptics:patching patched https 
2022-04-25T19:04:34.919Z appoptics:patching patched http 
2022-04-25T19:04:34.956Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:34.956Z appoptics:patching patched fs 
2022-04-25T19:04:34.966Z appoptics:patching patched pino 5.12.2
2022-04-25T19:04:34.970Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:42.020Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:42.021Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:42.021Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:42.022Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:42.087Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:42.234Z appoptics:patching patched crypto 
2022-04-25T19:04:42.255Z appoptics:patching patched https 
2022-04-25T19:04:42.256Z appoptics:patching patched http 
2022-04-25T19:04:42.296Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:42.297Z appoptics:patching patched fs 
2022-04-25T19:04:42.302Z appoptics:patching patched pino 5.12.3
2022-04-25T19:04:42.306Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:50.614Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:50.614Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:50.614Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:50.615Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:50.684Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:50.818Z appoptics:patching patched crypto 
2022-04-25T19:04:50.839Z appoptics:patching patched https 
2022-04-25T19:04:50.840Z appoptics:patching patched http 
2022-04-25T19:04:50.878Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:50.879Z appoptics:patching patched fs 
2022-04-25T19:04:50.885Z appoptics:patching patched pino 5.12.4
2022-04-25T19:04:50.889Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:04:59.157Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:04:59.157Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:04:59.157Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:04:59.158Z appoptics:debug using context provider: ace-context
2022-04-25T19:04:59.232Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:04:59.378Z appoptics:patching patched crypto 
2022-04-25T19:04:59.405Z appoptics:patching patched https 
2022-04-25T19:04:59.406Z appoptics:patching patched http 
2022-04-25T19:04:59.441Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:04:59.442Z appoptics:patching patched fs 
2022-04-25T19:04:59.447Z appoptics:patching patched pino 5.12.5
2022-04-25T19:04:59.451Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:06.769Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:06.770Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:06.770Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:06.771Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:06.837Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:06.961Z appoptics:patching patched crypto 
2022-04-25T19:05:06.980Z appoptics:patching patched https 
2022-04-25T19:05:06.981Z appoptics:patching patched http 
2022-04-25T19:05:07.016Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:07.017Z appoptics:patching patched fs 
2022-04-25T19:05:07.022Z appoptics:patching patched pino 5.12.6
2022-04-25T19:05:07.026Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:14.620Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:14.621Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:14.621Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:14.622Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:14.702Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:14.835Z appoptics:patching patched crypto 
2022-04-25T19:05:14.854Z appoptics:patching patched https 
2022-04-25T19:05:14.855Z appoptics:patching patched http 
2022-04-25T19:05:14.889Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:14.889Z appoptics:patching patched fs 
2022-04-25T19:05:14.895Z appoptics:patching patched pino 5.13.0
2022-04-25T19:05:14.900Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:22.294Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:22.295Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:22.295Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:22.296Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:22.385Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:22.609Z appoptics:patching patched crypto 
2022-04-25T19:05:22.660Z appoptics:patching patched https 
2022-04-25T19:05:22.661Z appoptics:patching patched http 
2022-04-25T19:05:22.727Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:22.728Z appoptics:patching patched fs 
2022-04-25T19:05:22.744Z appoptics:patching patched pino 5.13.1
2022-04-25T19:05:22.752Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (240ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:29.799Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:29.800Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:29.800Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:29.801Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:29.867Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:29.995Z appoptics:patching patched crypto 
2022-04-25T19:05:30.016Z appoptics:patching patched https 
2022-04-25T19:05:30.016Z appoptics:patching patched http 
2022-04-25T19:05:30.064Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:30.064Z appoptics:patching patched fs 
2022-04-25T19:05:30.070Z appoptics:patching patched pino 5.13.2
2022-04-25T19:05:30.074Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:37.784Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:37.785Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:37.785Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:37.786Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:37.871Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:38.007Z appoptics:patching patched crypto 
2022-04-25T19:05:38.028Z appoptics:patching patched https 
2022-04-25T19:05:38.029Z appoptics:patching patched http 
2022-04-25T19:05:38.084Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:38.084Z appoptics:patching patched fs 
2022-04-25T19:05:38.090Z appoptics:patching patched pino 5.13.3
2022-04-25T19:05:38.095Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:45.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:45.118Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:45.118Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:45.119Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:45.187Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:45.319Z appoptics:patching patched crypto 
2022-04-25T19:05:45.339Z appoptics:patching patched https 
2022-04-25T19:05:45.340Z appoptics:patching patched http 
2022-04-25T19:05:45.382Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:45.382Z appoptics:patching patched fs 
2022-04-25T19:05:45.388Z appoptics:patching patched pino 5.13.4
2022-04-25T19:05:45.392Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (196ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:05:52.837Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:05:52.838Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:05:52.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:05:52.839Z appoptics:debug using context provider: ace-context
2022-04-25T19:05:52.926Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:05:53.066Z appoptics:patching patched crypto 
2022-04-25T19:05:53.085Z appoptics:patching patched https 
2022-04-25T19:05:53.086Z appoptics:patching patched http 
2022-04-25T19:05:53.121Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:05:53.121Z appoptics:patching patched fs 
2022-04-25T19:05:53.127Z appoptics:patching patched pino 5.13.5
2022-04-25T19:05:53.131Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:01.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:01.024Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:01.024Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:01.025Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:01.090Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:01.220Z appoptics:patching patched crypto 
2022-04-25T19:06:01.241Z appoptics:patching patched https 
2022-04-25T19:06:01.242Z appoptics:patching patched http 
2022-04-25T19:06:01.286Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:01.286Z appoptics:patching patched fs 
2022-04-25T19:06:01.293Z appoptics:patching patched pino 5.13.6
2022-04-25T19:06:01.297Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:08.073Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:08.074Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:08.074Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:08.075Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:08.137Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:08.258Z appoptics:patching patched crypto 
2022-04-25T19:06:08.277Z appoptics:patching patched https 
2022-04-25T19:06:08.277Z appoptics:patching patched http 
2022-04-25T19:06:08.317Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:08.317Z appoptics:patching patched fs 
2022-04-25T19:06:08.323Z appoptics:patching patched pino 5.14.0
2022-04-25T19:06:08.327Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:16.433Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:16.433Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:16.434Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:16.434Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:16.497Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:16.615Z appoptics:patching patched crypto 
2022-04-25T19:06:16.633Z appoptics:patching patched https 
2022-04-25T19:06:16.635Z appoptics:patching patched http 
2022-04-25T19:06:16.673Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:16.673Z appoptics:patching patched fs 
2022-04-25T19:06:16.679Z appoptics:patching patched pino 5.15.0
2022-04-25T19:06:16.683Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:23.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:23.608Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:23.608Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:23.613Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:23.803Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:23.956Z appoptics:patching patched crypto 
2022-04-25T19:06:24.005Z appoptics:patching patched https 
2022-04-25T19:06:24.006Z appoptics:patching patched http 
2022-04-25T19:06:24.045Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:24.045Z appoptics:patching patched fs 
2022-04-25T19:06:24.051Z appoptics:patching patched pino 5.16.0
2022-04-25T19:06:24.055Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:31.036Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:31.037Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:31.037Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:31.038Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:31.100Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:31.226Z appoptics:patching patched crypto 
2022-04-25T19:06:31.246Z appoptics:patching patched https 
2022-04-25T19:06:31.247Z appoptics:patching patched http 
2022-04-25T19:06:31.285Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:31.286Z appoptics:patching patched fs 
2022-04-25T19:06:31.291Z appoptics:patching patched pino 5.17.0
2022-04-25T19:06:31.295Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 3 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:39.129Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:39.130Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:39.130Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:39.131Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:39.200Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:39.323Z appoptics:patching patched crypto 
2022-04-25T19:06:39.342Z appoptics:patching patched https 
2022-04-25T19:06:39.343Z appoptics:patching patched http 
2022-04-25T19:06:39.382Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:39.382Z appoptics:patching patched fs 
2022-04-25T19:06:39.388Z appoptics:patching patched pino 6.0.0
2022-04-25T19:06:39.393Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (197ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4231
         "time": 1650913599439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4231
         "time": 1650913599450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4231
         "time": 1650913599454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4231
         "time": 1650913599456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4231
         "time": 1650913599459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4231
         "time": 1650913599462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4231
         "time": 1650913599464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4231
         "time": 1650913599465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4231
         "time": 1650913599467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4231
         "time": 1650913599468
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4231
         "time": 1650913599469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4231
         "time": 1650913599471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4231
         "time": 1650913599576
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B53E36D21CBD5EB30F6ECE54514A79A1D3DB3196-1"
         "pid": 4231
         "time": 1650913599604
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:46.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:46.422Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:46.422Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:46.423Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:46.488Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:46.612Z appoptics:patching patched crypto 
2022-04-25T19:06:46.630Z appoptics:patching patched https 
2022-04-25T19:06:46.631Z appoptics:patching patched http 
2022-04-25T19:06:46.669Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:46.669Z appoptics:patching patched fs 
2022-04-25T19:06:46.675Z appoptics:patching patched pino 6.1.0
2022-04-25T19:06:46.679Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4253
         "time": 1650913606705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4253
         "time": 1650913606713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4253
         "time": 1650913606717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4253
         "time": 1650913606720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4253
         "time": 1650913606722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4253
         "time": 1650913606725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4253
         "time": 1650913606727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4253
         "time": 1650913606728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4253
         "time": 1650913606729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4253
         "time": 1650913606731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4253
         "time": 1650913606732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4253
         "time": 1650913606734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4253
         "time": 1650913606837
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 40BDFBA224B5B75C2641324CE5DBAE2A8767D395-1"
         "pid": 4253
         "time": 1650913606866
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:06:53.738Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:06:53.739Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:06:53.739Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:06:53.740Z appoptics:debug using context provider: ace-context
2022-04-25T19:06:53.801Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:06:53.937Z appoptics:patching patched crypto 
2022-04-25T19:06:53.955Z appoptics:patching patched https 
2022-04-25T19:06:53.955Z appoptics:patching patched http 
2022-04-25T19:06:53.992Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:06:53.993Z appoptics:patching patched fs 
2022-04-25T19:06:53.998Z appoptics:patching patched pino 6.1.1
2022-04-25T19:06:54.002Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4275
         "time": 1650913614029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4275
         "time": 1650913614037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4275
         "time": 1650913614041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4275
         "time": 1650913614044
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4275
         "time": 1650913614046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4275
         "time": 1650913614049
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4275
         "time": 1650913614052
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4275
         "time": 1650913614053
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4275
         "time": 1650913614055
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4275
         "time": 1650913614056
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4275
         "time": 1650913614057
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4275
         "time": 1650913614059
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4275
         "time": 1650913614164
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A887E79CF200858978945A0C02097C6BB91EB9AD-1"
         "pid": 4275
         "time": 1650913614193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:00.922Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:00.923Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:00.923Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:00.924Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:01.012Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:01.161Z appoptics:patching patched crypto 
2022-04-25T19:07:01.206Z appoptics:patching patched https 
2022-04-25T19:07:01.206Z appoptics:patching patched http 
2022-04-25T19:07:01.246Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:01.247Z appoptics:patching patched fs 
2022-04-25T19:07:01.253Z appoptics:patching patched pino 6.2.0
2022-04-25T19:07:01.257Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4297
         "time": 1650913621286
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4297
         "time": 1650913621295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4297
         "time": 1650913621299
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4297
         "time": 1650913621302
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4297
         "time": 1650913621305
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4297
         "time": 1650913621308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4297
         "time": 1650913621310
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4297
         "time": 1650913621312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4297
         "time": 1650913621313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4297
         "time": 1650913621315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4297
         "time": 1650913621316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4297
         "time": 1650913621318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4297
         "time": 1650913621423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 49616B8A640CBC1577616BB152A8B10B69AFEB13-1"
         "pid": 4297
         "time": 1650913621451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:08.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:08.653Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:08.653Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:08.654Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:08.719Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:08.842Z appoptics:patching patched crypto 
2022-04-25T19:07:08.862Z appoptics:patching patched https 
2022-04-25T19:07:08.863Z appoptics:patching patched http 
2022-04-25T19:07:08.896Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:08.897Z appoptics:patching patched fs 
2022-04-25T19:07:08.903Z appoptics:patching patched pino 6.2.1
2022-04-25T19:07:08.907Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4319
         "time": 1650913628935
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4319
         "time": 1650913628943
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4319
         "time": 1650913628946
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4319
         "time": 1650913628949
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4319
         "time": 1650913628952
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4319
         "time": 1650913628955
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4319
         "time": 1650913628957
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4319
         "time": 1650913628958
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4319
         "time": 1650913628960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4319
         "time": 1650913628961
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4319
         "time": 1650913628962
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4319
         "time": 1650913628964
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4319
         "time": 1650913629069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0035938E29864EC1612ED1840223FB7E774C9E63-1"
         "pid": 4319
         "time": 1650913629099
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:17.325Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:17.326Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:17.326Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:17.327Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:17.392Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:17.517Z appoptics:patching patched crypto 
2022-04-25T19:07:17.536Z appoptics:patching patched https 
2022-04-25T19:07:17.537Z appoptics:patching patched http 
2022-04-25T19:07:17.577Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:17.577Z appoptics:patching patched fs 
2022-04-25T19:07:17.583Z appoptics:patching patched pino 6.3.0
2022-04-25T19:07:17.587Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4341
         "time": 1650913637614
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4341
         "time": 1650913637623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4341
         "time": 1650913637627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4341
         "time": 1650913637629
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4341
         "time": 1650913637632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4341
         "time": 1650913637635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4341
         "time": 1650913637637
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4341
         "time": 1650913637638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4341
         "time": 1650913637640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4341
         "time": 1650913637641
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4341
         "time": 1650913637643
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4341
         "time": 1650913637645
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4341
         "time": 1650913637749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9BDA42278FBE9479838BAA52373FB0ECFCF20B4A-1"
         "pid": 4341
         "time": 1650913637776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:24.897Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:24.898Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:24.898Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:24.899Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:24.991Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:25.191Z appoptics:patching patched crypto 
2022-04-25T19:07:25.248Z appoptics:patching patched https 
2022-04-25T19:07:25.249Z appoptics:patching patched http 
2022-04-25T19:07:25.291Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:25.292Z appoptics:patching patched fs 
2022-04-25T19:07:25.299Z appoptics:patching patched pino 6.3.1
2022-04-25T19:07:25.303Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4363
         "time": 1650913645336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4363
         "time": 1650913645345
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4363
         "time": 1650913645349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4363
         "time": 1650913645352
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4363
         "time": 1650913645355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4363
         "time": 1650913645358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4363
         "time": 1650913645360
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4363
         "time": 1650913645362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4363
         "time": 1650913645364
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4363
         "time": 1650913645365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4363
         "time": 1650913645367
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4363
         "time": 1650913645369
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4363
         "time": 1650913645473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F4260413B08EDA6C489B5B5ADC26FDB8009A5A5C-1"
         "pid": 4363
         "time": 1650913645501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:32.949Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:32.952Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:32.952Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:32.955Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:33.029Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:33.160Z appoptics:patching patched crypto 
2022-04-25T19:07:33.182Z appoptics:patching patched https 
2022-04-25T19:07:33.183Z appoptics:patching patched http 
2022-04-25T19:07:33.222Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:33.222Z appoptics:patching patched fs 
2022-04-25T19:07:33.229Z appoptics:patching patched pino 6.3.2
2022-04-25T19:07:33.233Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4385
         "time": 1650913653261
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4385
         "time": 1650913653270
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4385
         "time": 1650913653276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4385
         "time": 1650913653279
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4385
         "time": 1650913653281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4385
         "time": 1650913653285
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4385
         "time": 1650913653287
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4385
         "time": 1650913653288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4385
         "time": 1650913653290
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4385
         "time": 1650913653291
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4385
         "time": 1650913653293
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4385
         "time": 1650913653295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4385
         "time": 1650913653399
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8D5D3FB824A6398251FF69572188D1CD5F255892-1"
         "pid": 4385
         "time": 1650913653428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:41.522Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:41.523Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:41.523Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:41.524Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:41.592Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:41.720Z appoptics:patching patched crypto 
2022-04-25T19:07:41.749Z appoptics:patching patched https 
2022-04-25T19:07:41.751Z appoptics:patching patched http 
2022-04-25T19:07:41.784Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:41.784Z appoptics:patching patched fs 
2022-04-25T19:07:41.790Z appoptics:patching patched pino 6.4.0
2022-04-25T19:07:41.795Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4407
         "time": 1650913661823
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C62F580DAAF5E59DA9FBEF46769BDEA2349DC42-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4407
         "time": 1650913661831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F4E7D90CB95664C73F7E0C36BC8ACEE1BF1C49D1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4407
         "time": 1650913661835
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C34FC4F678C1D623D40FDE5EE3AB901F5E96A5EC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4407
         "time": 1650913661838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A303304B5CDAC224FC91BCC1BE486A373E522768-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4407
         "time": 1650913661840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4407
         "time": 1650913661843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A2F0FBC13115E8A59202A5388739EC89FD2C5BE7-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4407
         "time": 1650913661845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EE2BFA909126E89C884DD74131FE71B47DF05243-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4407
         "time": 1650913661847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4407
         "time": 1650913661848
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E2D0D497FF82F1160CC5FDB398F3C976DE72A4A-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4407
         "time": 1650913661850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4407
         "time": 1650913661851
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "417A5C5401514487D9AB1CEE42AA69BBE21BE4F7-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4407
         "time": 1650913661853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "994A7305C12EE0CCA8EC8B5CCDA54198DD9906CE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4407
         "time": 1650913661958
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 95EC85D146F30904F07955FA4958F1FFC0C9220D-1"
         "pid": 4407
         "time": 1650913661987
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:48.472Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:48.473Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:48.473Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:48.474Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:48.537Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:48.658Z appoptics:patching patched crypto 
2022-04-25T19:07:48.677Z appoptics:patching patched https 
2022-04-25T19:07:48.678Z appoptics:patching patched http 
2022-04-25T19:07:48.710Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:48.710Z appoptics:patching patched fs 
2022-04-25T19:07:48.716Z appoptics:patching patched pino 6.4.1
2022-04-25T19:07:48.720Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4429
         "time": 1650913668746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D1192C74595357F071FB04A40A625F93B27D20A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4429
         "time": 1650913668754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E78A3D06FC44B7E8853F5BEFEA7EAA6A2BF1ACD-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4429
         "time": 1650913668757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59669D3F31A1148DD33DDAA4A6A33602C2F8D49E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4429
         "time": 1650913668760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D5E90AC1A11CD6782E125FB56967B05C7D6D1C8A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4429
         "time": 1650913668762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4429
         "time": 1650913668765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "351C6724F67BA661A12B6390258605ED1A6A0B82-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4429
         "time": 1650913668767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "47A79AB8A50B62CE6A5885D3F7E488464DDCAC00-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4429
         "time": 1650913668768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4429
         "time": 1650913668769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D39966283FF1D0D5526A00D8ABCA0998E19D3A1A-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4429
         "time": 1650913668771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4429
         "time": 1650913668772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF61C368517E3E9CBF98AFF709F3AD3C4DF09053-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4429
         "time": 1650913668774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76ED7725CBF0CB30A425489A5C5B869C6FB2DF46-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4429
         "time": 1650913668878
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 037985F3FAD59810B539496A514293A1D162CC1B-1"
         "pid": 4429
         "time": 1650913668907
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:07:56.669Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:07:56.669Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:07:56.669Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:07:56.670Z appoptics:debug using context provider: ace-context
2022-04-25T19:07:56.735Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:07:56.871Z appoptics:patching patched crypto 
2022-04-25T19:07:56.890Z appoptics:patching patched https 
2022-04-25T19:07:56.891Z appoptics:patching patched http 
2022-04-25T19:07:56.924Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:07:56.924Z appoptics:patching patched fs 
2022-04-25T19:07:56.929Z appoptics:patching patched pino 6.5.0
2022-04-25T19:07:56.933Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4451
         "time": 1650913676958
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AC9AC7A9C0C2C29AD773F690220F194E6B82EBC5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4451
         "time": 1650913676965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4E21564C0427671237BAE48F541A6E7305BB76F2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4451
         "time": 1650913676969
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E593480C12CA12751A92EEECA35CFB04057CD373-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4451
         "time": 1650913676972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9D6A250FF300AD4DDC151B111986FB2C6F0B731-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4451
         "time": 1650913676974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4451
         "time": 1650913676976
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B37AB870A85A8FBB1B369595230A81233AF2F3D4-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4451
         "time": 1650913676978
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6059C400E31D84F4F5B856CFD70F949CFC1FC924-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4451
         "time": 1650913676979
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4451
         "time": 1650913676981
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A6E316FE75F6D66A5CEB4343A6ECEEA0CB97E0E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4451
         "time": 1650913676982
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4451
         "time": 1650913676984
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DCAB99978CE1BC6EB0DEE2AFD693C9738F75F173-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4451
         "time": 1650913676985
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "91D4444D9533FB20E1F28716D7689BC7324C8ED5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4451
         "time": 1650913677090
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 97CC06D31755FC9DBB2EF3393F12B9701F4A3EE7-1"
         "pid": 4451
         "time": 1650913677118
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:04.268Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:04.268Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:04.268Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:04.269Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:04.356Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:04.511Z appoptics:patching patched crypto 
2022-04-25T19:08:04.568Z appoptics:patching patched https 
2022-04-25T19:08:04.569Z appoptics:patching patched http 
2022-04-25T19:08:04.616Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:04.617Z appoptics:patching patched fs 
2022-04-25T19:08:04.624Z appoptics:patching patched pino 6.5.1
2022-04-25T19:08:04.629Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (203ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4473
         "time": 1650913684664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF9A0C15859B4D8D61475EE2E332271EB6AE3D3A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4473
         "time": 1650913684677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F4340BADC267DECA7F5833AECBD1F9D33F03D83-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4473
         "time": 1650913684682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A45201E26C833DC85FA754B48808B58EE8B0E778-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4473
         "time": 1650913684686
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7FF756B31E2419C458E2788D312B332751953990-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4473
         "time": 1650913684689
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4473
         "time": 1650913684694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "23C0F9EC3D52B302FA6A283DF364E5A59958D4B9-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4473
         "time": 1650913684696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B06A382742739660FB53A802F11AAB7EEEFC1CE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4473
         "time": 1650913684698
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4473
         "time": 1650913684700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4927920363CAC2ED590731B0F6AB5C851940C0E1-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4473
         "time": 1650913684701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4473
         "time": 1650913684703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C86DE1632CAB9FCCCDDFD5159E0581D35EB112E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4473
         "time": 1650913684706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07B3A43EB77B5E8ABD3B3A73D2C43C384C282360-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4473
         "time": 1650913684810
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B404095A1D82F72795F10E6B15CDCC2B5B9D65C6-1"
         "pid": 4473
         "time": 1650913684840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:10.861Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:10.862Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:10.862Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:10.863Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:10.945Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:11.095Z appoptics:patching patched crypto 
2022-04-25T19:08:11.115Z appoptics:patching patched https 
2022-04-25T19:08:11.116Z appoptics:patching patched http 
2022-04-25T19:08:11.150Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:11.150Z appoptics:patching patched fs 
2022-04-25T19:08:11.156Z appoptics:patching patched pino 6.6.0
2022-04-25T19:08:11.160Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4495
         "time": 1650913691185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EECADCEB51D445A07AD90763127849DB5B49A06B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4495
         "time": 1650913691193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07121E10C1D5E6B58F763869560E262525C80FCE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4495
         "time": 1650913691197
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3FFE2740A3457136C60249F6CC605E1C5374972-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4495
         "time": 1650913691200
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E21234EA84C909F140F222CE758779346EBD8F73-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4495
         "time": 1650913691202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4495
         "time": 1650913691205
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E8949612B9822D0386FAF3FD3D9B5AC3F903A0BD-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4495
         "time": 1650913691206
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF2FAB7F563E66EEC6F574055743CAB52B1FC420-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4495
         "time": 1650913691208
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4495
         "time": 1650913691209
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64359F5550690E26BB552C4F1C0292F978DCB8A4-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4495
         "time": 1650913691210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4495
         "time": 1650913691212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F25D75F92E00B5681AEDA09C09739EFD7AB6AE2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4495
         "time": 1650913691213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "90AC62963D89CA0F8A33EB564F5E7F9F4B884A3C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4495
         "time": 1650913691318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3ADD9F2F2F577487066A4E79B94C6794FA25BA46-1"
         "pid": 4495
         "time": 1650913691345
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:18.595Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:18.595Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:18.595Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:18.596Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:18.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:18.794Z appoptics:patching patched crypto 
2022-04-25T19:08:18.814Z appoptics:patching patched https 
2022-04-25T19:08:18.822Z appoptics:patching patched http 
2022-04-25T19:08:18.859Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:18.859Z appoptics:patching patched fs 
2022-04-25T19:08:18.865Z appoptics:patching patched pino 6.6.1
2022-04-25T19:08:18.869Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4517
         "time": 1650913698895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DF6F0DA4FB2722C89AB5A7AA83CB73E47DE53F5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4517
         "time": 1650913698903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "617D80C1567AA10B3E3F315AC0E99325E23BBDAC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4517
         "time": 1650913698907
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15BE19EDF0EFF0D28E3D9C40A03B790696CCF851-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4517
         "time": 1650913698909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E791167A7D1CDBFC64911E7139B50BFF16D3920-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4517
         "time": 1650913698912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4517
         "time": 1650913698914
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F4305FAF1473AC4BD1656456DADB43FB6EB2BF7C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4517
         "time": 1650913698916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4A506AE07488D4F51D62250D883C583777DA1E46-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4517
         "time": 1650913698918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4517
         "time": 1650913698919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "56D015B9D62CBACF4C0F901C12403650979C0EE4-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4517
         "time": 1650913698921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4517
         "time": 1650913698922
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AA6D4C9DA07D230B3AF5E363976713BDC709E396-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4517
         "time": 1650913698924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD4312CC8019A6A7D2E0CF48D46195B344B19E86-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4517
         "time": 1650913699028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FC25C764CE6E18C0A7B92825AC46058F6A6840EE-1"
         "pid": 4517
         "time": 1650913699056
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:25.857Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:25.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:25.857Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:25.858Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:25.922Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:26.041Z appoptics:patching patched crypto 
2022-04-25T19:08:26.060Z appoptics:patching patched https 
2022-04-25T19:08:26.061Z appoptics:patching patched http 
2022-04-25T19:08:26.098Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:26.098Z appoptics:patching patched fs 
2022-04-25T19:08:26.104Z appoptics:patching patched pino 6.7.0
2022-04-25T19:08:26.107Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4539
         "time": 1650913706133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D3ED93E01C39DA22D1CAA31CA4043DFC5D86C27-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4539
         "time": 1650913706141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "700CDC47B742AB9CEA7A3D3B0D6F9069724585D6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4539
         "time": 1650913706145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CADB507F2235CEFE6D85F00F467DACBDDA6FF564-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4539
         "time": 1650913706148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "86BE8DACA4A9C6CA56BB8E4621A325D78F7D3430-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4539
         "time": 1650913706150
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4539
         "time": 1650913706153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6200E3655F5F5E3EF4185F7DB6A4E89FE2DDDEDC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4539
         "time": 1650913706155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1947CDA6D7033611B6F7EC81921959AA599B155F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4539
         "time": 1650913706156
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4539
         "time": 1650913706158
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9960A2229E0AC06C37F42B64578CBE922EFEC34F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4539
         "time": 1650913706159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4539
         "time": 1650913706162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A23DBA6D8B81E8D8B57B96C09565F09374C66886-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4539
         "time": 1650913706165
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "978275F98702A4518F6DBFA0E88202EAAAD7708F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4539
         "time": 1650913706269
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B37A270A1334D281967C0146EF673D2D1CA861C4-1"
         "pid": 4539
         "time": 1650913706296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:33.208Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:33.209Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:33.209Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:33.210Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:33.268Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:33.383Z appoptics:patching patched crypto 
2022-04-25T19:08:33.401Z appoptics:patching patched https 
2022-04-25T19:08:33.402Z appoptics:patching patched http 
2022-04-25T19:08:33.438Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:33.438Z appoptics:patching patched fs 
2022-04-25T19:08:33.443Z appoptics:patching patched pino 6.8.0
2022-04-25T19:08:33.447Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4561
         "time": 1650913713471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A55175E3E5B3592483EF8D193AF37B054D3AA0C6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4561
         "time": 1650913713479
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A1B7A5C41024C8FBBDD5515ABBF83332B69E5E9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4561
         "time": 1650913713482
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EA34CDD16B6F28554B4E6D040D8E89D58286C2F9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4561
         "time": 1650913713485
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "92B8F85C076835E399AD26598294C0F8E1A03B90-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4561
         "time": 1650913713487
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4561
         "time": 1650913713490
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B1CE199168104F856F37D8B06F6694FC51486D71-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4561
         "time": 1650913713492
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D9C8E0CB894DCE1A615F75D9DE10028A19F312C1-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4561
         "time": 1650913713493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4561
         "time": 1650913713494
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61978E230DDCD11ADEF9E16E726B720680A20E76-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4561
         "time": 1650913713496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4561
         "time": 1650913713497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A67BBD8D665C9038C24D63FD2B358C9B9B8E5707-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4561
         "time": 1650913713499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CAD982AC8F103120AA1A124B758766484C729FD6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4561
         "time": 1650913713603
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9577ED02079E23B04A9F931CD9BCF0DAFE7FB5AF-1"
         "pid": 4561
         "time": 1650913713630
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:40.193Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:40.194Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:40.195Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:40.195Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:40.274Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:40.410Z appoptics:patching patched crypto 
2022-04-25T19:08:40.454Z appoptics:patching patched https 
2022-04-25T19:08:40.455Z appoptics:patching patched http 
2022-04-25T19:08:40.492Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:40.493Z appoptics:patching patched fs 
2022-04-25T19:08:40.499Z appoptics:patching patched pino 6.9.0
2022-04-25T19:08:40.503Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4583
         "time": 1650913720530
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09C3A5669EB26DC34CBE6AA68AAB6F7FDCCD3982-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4583
         "time": 1650913720538
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "92752D98DF6E45D4651D73048E6D4EE8FAA8B963-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4583
         "time": 1650913720541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D5677E586DF2DEF801E36045343369E0968A84E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4583
         "time": 1650913720544
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E9658238472913641D2C4894248F4BD9F0298E1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4583
         "time": 1650913720547
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4583
         "time": 1650913720550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04E248A9ACFB809B299EBBF5CB2C475596A06D25-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4583
         "time": 1650913720552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED6B24586A4C502DEFBDB7ADDF9CB7D1A9F3B02E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4583
         "time": 1650913720553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4583
         "time": 1650913720554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9025A65E1EC9C34EACD89BA2C7FE688AC2E98C5-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4583
         "time": 1650913720556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4583
         "time": 1650913720557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A53A37DBEA00A0FB4F97D7346C1D8E8F81F62F59-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4583
         "time": 1650913720559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1A42D48B6810041848F008033E1EA5FA46F0B5CE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4583
         "time": 1650913720662
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C07DB78A056E16D92185BFD2775C012ACCD29399-1"
         "pid": 4583
         "time": 1650913720691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:47.702Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:47.702Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:47.702Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:47.703Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:47.766Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:47.888Z appoptics:patching patched crypto 
2022-04-25T19:08:47.906Z appoptics:patching patched https 
2022-04-25T19:08:47.907Z appoptics:patching patched http 
2022-04-25T19:08:47.944Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:47.945Z appoptics:patching patched fs 
2022-04-25T19:08:47.950Z appoptics:patching patched pino 6.10.0
2022-04-25T19:08:47.954Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4605
         "time": 1650913727980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "474C2E82D6E4CC6C04B24C167EC0454858CCCB74-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4605
         "time": 1650913727988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "332C133EEF93CED2D1A8F2323BA22BFAFB181E68-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4605
         "time": 1650913727992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E33B1025DBCA60A1827BF251C7F28CA70773EE6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4605
         "time": 1650913727995
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB31A0921FBDBB6C5FA03D724BD870BC6CE2E72D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4605
         "time": 1650913727997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4605
         "time": 1650913728001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3FBF65A0D7FAE873D1DE60B0A3EB0739414F400B-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4605
         "time": 1650913728002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E918FBBC02DFF7F488BE22075CA5E379F43D7C5-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4605
         "time": 1650913728004
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4605
         "time": 1650913728005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC98B332AE4E6F787A3B3DE8636920F0733CC6F0-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4605
         "time": 1650913728007
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4605
         "time": 1650913728008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "935F90D33FAF4A6D7DAFC5C7A5BF92124EF0361B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4605
         "time": 1650913728010
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1B6EE9B02A574DA5A811E92064CF8D4A3DE9C4D6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4605
         "time": 1650913728114
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 2006A43904140A17E3DDEFCFAF30686E80ECFF5E-1"
         "pid": 4605
         "time": 1650913728142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:08:54.923Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:08:54.923Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:08:54.923Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:08:54.924Z appoptics:debug using context provider: ace-context
2022-04-25T19:08:54.982Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:08:55.097Z appoptics:patching patched crypto 
2022-04-25T19:08:55.115Z appoptics:patching patched https 
2022-04-25T19:08:55.116Z appoptics:patching patched http 
2022-04-25T19:08:55.156Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:08:55.156Z appoptics:patching patched fs 
2022-04-25T19:08:55.162Z appoptics:patching patched pino 6.11.0
2022-04-25T19:08:55.166Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4627
         "time": 1650913735191
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "58C377EA7F0EDF1DA0D6C79B8ED746CECC4E2661-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4627
         "time": 1650913735198
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C927CD95DC258213357E32B4506A40AC023FAD6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4627
         "time": 1650913735202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D44809F9088050F5520195727BFE46E0B5F928D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4627
         "time": 1650913735204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A7B3E5F8B10E79EAD533BAACDB43D9FA21DE7774-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4627
         "time": 1650913735207
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4627
         "time": 1650913735210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7CB58118F0C76DEFDF3283E468AE04DFEE5E2DCC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4627
         "time": 1650913735211
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4BD35027EB3E47D0A56D0CA796FE3D51B9251F1-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4627
         "time": 1650913735213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4627
         "time": 1650913735214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6616EC7A261A69A4E3893A0969DEA0910D28E3FE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4627
         "time": 1650913735215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4627
         "time": 1650913735217
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2572F033F6AB66FF1CB7F04FE564740EB54A13D5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4627
         "time": 1650913735219
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DB69F24B49DEB72CB988CC9B46B480A6B55CD61E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4627
         "time": 1650913735323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FB5D9841FC80943659F13EF9A8B059E685A74113-1"
         "pid": 4627
         "time": 1650913735351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:09:02.212Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:09:02.213Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:09:02.213Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:09:02.213Z appoptics:debug using context provider: ace-context
2022-04-25T19:09:02.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:09:02.385Z appoptics:patching patched crypto 
2022-04-25T19:09:02.402Z appoptics:patching patched https 
2022-04-25T19:09:02.403Z appoptics:patching patched http 
2022-04-25T19:09:02.440Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:09:02.440Z appoptics:patching patched fs 
2022-04-25T19:09:02.445Z appoptics:patching patched pino 6.11.1
2022-04-25T19:09:02.449Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (198ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4649
         "time": 1650913742481
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "86105C2FEB46145E7AB59E63033BFB95DB0DED6A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4649
         "time": 1650913742495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "129A12FEC833FC2338B45DAB99E808E311BC567B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4649
         "time": 1650913742500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D2989629F34EB29E47B0BB18D99F2EA151A2E8C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4649
         "time": 1650913742505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2673F90F977CBA127381D25F45DA01461D94F165-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4649
         "time": 1650913742507
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4649
         "time": 1650913742510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B71F1E36A284DBDDE53573648489AB3791DD8F29-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4649
         "time": 1650913742512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07BD7CB5C6A861D76AC95BA1F8E052DF4E8FB5D5-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4649
         "time": 1650913742513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4649
         "time": 1650913742514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7ED08593DFB91E73A7C830EE3B2D48FA514DD219-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4649
         "time": 1650913742515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4649
         "time": 1650913742517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "71BC38E2C87E9C0D3156BB27A03AFAAB9FB1B922-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4649
         "time": 1650913742519
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0B7FC3D8DF896F532C0682BC4C7D98635D93B3C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4649
         "time": 1650913742622
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9C4A86F734C522D881C9334B1DCB3C921E2D6948-1"
         "pid": 4649
         "time": 1650913742651
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 10s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:09:13.261Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:09:13.262Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:09:13.262Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:09:13.263Z appoptics:debug using context provider: ace-context
2022-04-25T19:09:13.325Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:09:13.447Z appoptics:patching patched crypto 
2022-04-25T19:09:13.465Z appoptics:patching patched https 
2022-04-25T19:09:13.466Z appoptics:patching patched http 
2022-04-25T19:09:13.505Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:09:13.505Z appoptics:patching patched fs 
2022-04-25T19:09:13.511Z appoptics:patching patched pino 6.11.2
2022-04-25T19:09:13.515Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4671
         "time": 1650913753542
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A6B37D19AF3B5B53D27206FE9542274531A8F928-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4671
         "time": 1650913753550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "261993E83DA6B6DB9AAE8B1E949277BFA4F50235-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4671
         "time": 1650913753554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5902ECD9F3300BA4B82FDE8B6A33864DCFDBE7AC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4671
         "time": 1650913753557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CDD9B40AB156CE6DDD041D7E48D99219D22F5C9C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4671
         "time": 1650913753559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4671
         "time": 1650913753562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "962296F0B42E552ED3710CD9F009CCC41B1F9C01-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4671
         "time": 1650913753563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4AABC89E262CC31D1A987801A4F409008DF94FD5-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4671
         "time": 1650913753565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4671
         "time": 1650913753566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7D0009DDAF7288010E37AA895A3674199B33930-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4671
         "time": 1650913753568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4671
         "time": 1650913753569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1B722FC9E19422D01B1A265D7DB193A0D05AF647-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4671
         "time": 1650913753571
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D46C8B83FE247BF9EAB2220811899098C5D99059-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4671
         "time": 1650913753676
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D1E4AB733E37EB42D6801722055D51396B269639-1"
         "pid": 4671
         "time": 1650913753704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 32s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:09:45.921Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:09:45.922Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:09:45.922Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:09:45.923Z appoptics:debug using context provider: ace-context
2022-04-25T19:09:45.990Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:09:46.122Z appoptics:patching patched crypto 
2022-04-25T19:09:46.166Z appoptics:patching patched https 
2022-04-25T19:09:46.167Z appoptics:patching patched http 
2022-04-25T19:09:46.210Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:09:46.210Z appoptics:patching patched fs 
2022-04-25T19:09:46.217Z appoptics:patching patched pino 6.11.3
2022-04-25T19:09:46.221Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4693
         "time": 1650913786255
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26F0E204A0A8C4D7D7A71BDD0E323D3D355D06E9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4693
         "time": 1650913786263
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6063E70515B21742ED52EAD010D301650748427B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4693
         "time": 1650913786267
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61AB6237DA9A5F8CD9D3ACD25C2D85237235E02A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4693
         "time": 1650913786269
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "36ED88BAE46894A9C8DE638A1FA143ED57F872D3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4693
         "time": 1650913786272
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4693
         "time": 1650913786275
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8081A1892EF1187F735AED540193A895D4C6AD0E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4693
         "time": 1650913786277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09086A933ADC10AC50F3A34E61BDD664EF3E0FDE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4693
         "time": 1650913786278
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4693
         "time": 1650913786279
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4D59D26E2A2EDDF0603453D0034CEF00CD0958CF-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4693
         "time": 1650913786281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4693
         "time": 1650913786282
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB9EBFB7B81079C8B23B1DA152B7F8D1FF9EAEC1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4693
         "time": 1650913786284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E035C40EA9DAADA27FE3460BF6954F2F275D8D95-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4693
         "time": 1650913786388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0D21769753BD745003AC7BEEC50D9489F9246588-1"
         "pid": 4693
         "time": 1650913786416
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:09:54.200Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:09:54.201Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:09:54.201Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:09:54.202Z appoptics:debug using context provider: ace-context
2022-04-25T19:09:54.265Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:09:54.386Z appoptics:patching patched crypto 
2022-04-25T19:09:54.404Z appoptics:patching patched https 
2022-04-25T19:09:54.405Z appoptics:patching patched http 
2022-04-25T19:09:54.441Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:09:54.441Z appoptics:patching patched fs 
2022-04-25T19:09:54.447Z appoptics:patching patched pino 6.12.0
2022-04-25T19:09:54.451Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4715
         "time": 1650913794476
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E1057F3B22FC52DE1F7F7D502E52AA29771190A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4715
         "time": 1650913794483
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E6DC43FED7BA3985A74D576F0FA4F8F72E3D618-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4715
         "time": 1650913794486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F34E0A8B275ED012F10C55411D0360005CA12230-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4715
         "time": 1650913794489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6168A4C8AA1BE4CB6687B84AE354DC07878F438-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4715
         "time": 1650913794491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4715
         "time": 1650913794494
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CECB831C8824E483D5EB6C16ACF4C5021E2FE4BC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4715
         "time": 1650913794496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4A24464193652B8805FE3AB4E3E79E9C111C8605-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4715
         "time": 1650913794497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4715
         "time": 1650913794498
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "382DEFB9B1917AEB86295A23C22302736650B83C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4715
         "time": 1650913794499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4715
         "time": 1650913794501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9304C53152AAD0465D580CE54DA4413D58F18872-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4715
         "time": 1650913794503
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5E05F2EA0D359ECFA1A1193DC7D9E6F0E16DF244-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4715
         "time": 1650913794605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 412C50E8514D2738F16712F9729FE22B28AE6B53-1"
         "pid": 4715
         "time": 1650913794634
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:00.821Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:00.821Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:00.821Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:00.822Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:00.886Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:01.015Z appoptics:patching patched crypto 
2022-04-25T19:10:01.035Z appoptics:patching patched https 
2022-04-25T19:10:01.035Z appoptics:patching patched http 
2022-04-25T19:10:01.077Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:01.078Z appoptics:patching patched fs 
2022-04-25T19:10:01.084Z appoptics:patching patched pino 6.13.0
2022-04-25T19:10:01.088Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4737
         "time": 1650913801116
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C79845593341455CF8A4A9B85932B05AC93B863-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4737
         "time": 1650913801125
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85716AA8E34F024025E90C82063729A68A09F0DA-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4737
         "time": 1650913801128
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "81558BB48BEC84F7BE3D3330E1E5520B1FCD5481-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4737
         "time": 1650913801131
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C0C6BA69CB5AF501DB1D5B4AD5527D5AC4BFC808-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4737
         "time": 1650913801134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4737
         "time": 1650913801137
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9B9488DBB8D330B9C47DB04DF5AC79D4141D2877-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4737
         "time": 1650913801139
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D661793BB89AD4DA0C46D7097861FD7B26FE64FE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4737
         "time": 1650913801140
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4737
         "time": 1650913801141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55D6D34A8F2AF6AA586E4ACC13991D213A16EABE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4737
         "time": 1650913801143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4737
         "time": 1650913801144
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "53DC363ABFA0C2C0EE81EEDF08C032254CFE9055-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4737
         "time": 1650913801146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F1391CF53119BD58BD5C2E8CCE2EA052BBA9D9B7-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4737
         "time": 1650913801249
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6AFE4635C815FE8C493C41F3E1CE750623F79EFF-1"
         "pid": 4737
         "time": 1650913801278
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:09.040Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:09.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:09.041Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:09.041Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:09.111Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:09.236Z appoptics:patching patched crypto 
2022-04-25T19:10:09.255Z appoptics:patching patched https 
2022-04-25T19:10:09.255Z appoptics:patching patched http 
2022-04-25T19:10:09.289Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:09.290Z appoptics:patching patched fs 
2022-04-25T19:10:09.296Z appoptics:patching patched pino 6.13.1
2022-04-25T19:10:09.300Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4759
         "time": 1650913809327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8154D75D80C4EC9131321219A90E21442A5BEAFB-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4759
         "time": 1650913809335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EDE29D0FD8864432F8F20474F4176D80FCC59CE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4759
         "time": 1650913809339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "482BD98B7D45E224F87B8BAF89619F0044900DB1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4759
         "time": 1650913809342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87BE2CE0BFC1AE50A249950BD5610832AB116FCA-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4759
         "time": 1650913809344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4759
         "time": 1650913809347
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8020EEF915DE46DF72940889BBD1BFA0C1EC35B8-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4759
         "time": 1650913809349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D9A8CE11D106255F36EBCC72C0010879D1D6DBC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4759
         "time": 1650913809350
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4759
         "time": 1650913809352
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A3665B4DAFBBE1910DEA488D96D918FDEF9051B-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4759
         "time": 1650913809353
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4759
         "time": 1650913809354
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CD57FE19A7B33A892F4CC82F052541696642ACBC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4759
         "time": 1650913809356
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48F24A18514CBB0A29A82979AC02C004B1D17C18-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4759
         "time": 1650913809461
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5D6BDAC815180880FA5471ADFF3E1D66C04340D6-1"
         "pid": 4759
         "time": 1650913809490
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:16.283Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:16.284Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:16.284Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:16.285Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:16.369Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:16.515Z appoptics:patching patched crypto 
2022-04-25T19:10:16.593Z appoptics:patching patched https 
2022-04-25T19:10:16.596Z appoptics:patching patched http 
2022-04-25T19:10:16.659Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:16.659Z appoptics:patching patched fs 
2022-04-25T19:10:16.676Z appoptics:patching patched pino 6.13.2
2022-04-25T19:10:16.684Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (222ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4781
         "time": 1650913816734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "25A9130E58749190CEBB32793DE89E6E6AFFCDC8-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4781
         "time": 1650913816746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4FE556B104354E40440A4688878C117251FBD87F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4781
         "time": 1650913816750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DDC9663F95C43F439C43B949D54E77FCF704D9EE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4781
         "time": 1650913816755
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "744902F65EF526BD58349D40F89E24B45A723905-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4781
         "time": 1650913816761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4781
         "time": 1650913816766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B6E58C568F26FC13C6A272B07F7B6ED8B3A1BFEF-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4781
         "time": 1650913816768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64BD5605B1E9C2733A7FA13F235C9E555D232F40-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4781
         "time": 1650913816772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4781
         "time": 1650913816774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCC528D0F4DC85B8B9C9BF75601374F23AF2BB3C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4781
         "time": 1650913816778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4781
         "time": 1650913816780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88DF9CA6D639AB1066C837647A1E59557F6FBC48-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4781
         "time": 1650913816783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F19F426525CB73FCBA41A327EA6E52AA9F8C0E94-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4781
         "time": 1650913816886
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6751146EC18947A747DE3A06320BE6CB0BFCF6AF-1"
         "pid": 4781
         "time": 1650913816917
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:23.583Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:23.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:23.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:23.585Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:23.651Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:23.790Z appoptics:patching patched crypto 
2022-04-25T19:10:23.811Z appoptics:patching patched https 
2022-04-25T19:10:23.812Z appoptics:patching patched http 
2022-04-25T19:10:23.865Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:23.866Z appoptics:patching patched fs 
2022-04-25T19:10:23.873Z appoptics:patching patched pino 6.13.3
2022-04-25T19:10:23.879Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4803
         "time": 1650913823908
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F8EEBEF01EF68669B898DEC7FE2E37755779ABC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4803
         "time": 1650913823916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "536B0F966B4EB2B052F9FCE5E9EB1C50DF85C246-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4803
         "time": 1650913823919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18B1D68E2F783EE42A6C22BE0DF410743FB93BD1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4803
         "time": 1650913823922
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "34E4448C9F7041BA02F5CEE198791EA7C0C26815-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4803
         "time": 1650913823925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4803
         "time": 1650913823928
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F885B3C8F5D4A9743C02FFBBE84365945F5A7F4-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4803
         "time": 1650913823929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE6F143E7683FE7A78E4629F901FD086B0048AF2-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4803
         "time": 1650913823931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4803
         "time": 1650913823932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BAB3FB6DA683A8978B4F3E3E5F1650B3AED6A751-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4803
         "time": 1650913823933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4803
         "time": 1650913823935
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C4D1F6509930013C84857279EF07D0674B215FC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4803
         "time": 1650913823937
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1EABA573B0CC00B29030CCA822D57C44942E50E0-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4803
         "time": 1650913824042
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5A308AFCBB34196C3D8A6D20DD7A2DD54129F896-1"
         "pid": 4803
         "time": 1650913824070
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:31.505Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:31.505Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:31.505Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:31.506Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:31.567Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:31.683Z appoptics:patching patched crypto 
2022-04-25T19:10:31.702Z appoptics:patching patched https 
2022-04-25T19:10:31.703Z appoptics:patching patched http 
2022-04-25T19:10:31.740Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:31.740Z appoptics:patching patched fs 
2022-04-25T19:10:31.747Z appoptics:patching patched pino 6.13.4
2022-04-25T19:10:31.751Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4825
         "time": 1650913831778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04542C4BF1A6323B72E35AA6B8103EFD2AF977ED-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4825
         "time": 1650913831786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C26F6CEFC783C8258AB3AD11624C9D5CA8AC2C6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4825
         "time": 1650913831789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A2286DFF5821E433E341F9D4A47B4D38DD69CE8-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4825
         "time": 1650913831792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "881644D4C2F81A551C5BB39006DF83854AA4821A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4825
         "time": 1650913831794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4825
         "time": 1650913831797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4AAC65C4571855E0621303D52AC25A4E1D2A98E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4825
         "time": 1650913831799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE589BB50F2A1B8ED6F165C94D4A639401C346D9-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4825
         "time": 1650913831800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4825
         "time": 1650913831801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45F5B858A8BFD1EF6F94D10305F2EDF11F44CE33-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4825
         "time": 1650913831803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4825
         "time": 1650913831804
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61F105B02E6BA7668E72EE981A2A81F15E4100DE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4825
         "time": 1650913831806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6103F8A2F84FA59486A4A2F44C99DACF7C15663F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4825
         "time": 1650913831909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0898639C57AE9A5E2CE949BBFF5B4C164A7349B9-1"
         "pid": 4825
         "time": 1650913831939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:38.611Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:38.611Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:38.611Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:38.612Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:38.675Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:38.795Z appoptics:patching patched crypto 
2022-04-25T19:10:38.814Z appoptics:patching patched https 
2022-04-25T19:10:38.814Z appoptics:patching patched http 
2022-04-25T19:10:38.854Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:38.855Z appoptics:patching patched fs 
2022-04-25T19:10:38.861Z appoptics:patching patched pino 6.14.0
2022-04-25T19:10:38.865Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4847
         "time": 1650913838890
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2258E8C60151786EB284D01414DDAB53796AB7D0-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4847
         "time": 1650913838898
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AFEF14B627DA5065056E752CB1D598695D8D7BEC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4847
         "time": 1650913838901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C4B2212ED4C977D12680E85ABB2C958F62E35D0-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4847
         "time": 1650913838904
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "28FCCAA8C146723EAA61792B4D3C4A584DDC5486-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4847
         "time": 1650913838906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4847
         "time": 1650913838909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "675581B02A0EECFE09BC56DCDC6D44F938CD78C2-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4847
         "time": 1650913838911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AB5E8B1ACCFF3CFAC984E42FF29CD78F887B08F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4847
         "time": 1650913838912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4847
         "time": 1650913838914
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7E35BA9A6B5E4D14AEB429A3CE31F8995810FB9-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4847
         "time": 1650913838915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4847
         "time": 1650913838916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "136D521170C5AF9365FF193F471D02A6E0EB713F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4847
         "time": 1650913838918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC7EE8C391D6234B11FE01C154AF11776A381F45-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4847
         "time": 1650913839023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8585300079654E6E424541474BE9629EE08BF01A-1"
         "pid": 4847
         "time": 1650913839051
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:46.083Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:46.084Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:46.084Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:46.085Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:46.152Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:46.274Z appoptics:patching patched crypto 
2022-04-25T19:10:46.294Z appoptics:patching patched https 
2022-04-25T19:10:46.295Z appoptics:patching patched http 
2022-04-25T19:10:46.335Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:46.336Z appoptics:patching patched fs 
2022-04-25T19:10:46.343Z appoptics:patching patched pino 7.0.0
2022-04-25T19:10:46.346Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4869
         "time": 1650913846372
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "677C702531F3CA3BAA8FA06666D8E9157CD9EA3A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4869
         "time": 1650913846379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6209E42C9290E0F44D1E112B783EF098383DCF2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4869
         "time": 1650913846383
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62F71230EF6B705296F319B9AC5C295760D482C1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4869
         "time": 1650913846385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3457129929CD1184D874EAA51011202D64F1D58E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4869
         "time": 1650913846388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4869
         "time": 1650913846390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "919769B252E0E5E2BAE4E1D42E8E318E47CE8E76-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4869
         "time": 1650913846392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D32941B1BD9F1047747ECCFF7670877C4FD4BFAC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4869
         "time": 1650913846393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4869
         "time": 1650913846394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B6D438CFDDB193C06FC87E8DBC39E48AFE35E13F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4869
         "time": 1650913846395
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4869
         "time": 1650913846397
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DD02EB2245AA26C22FD91F824A8D0E81F2397FF-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4869
         "time": 1650913846398
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CD0D9A42B16F7A04E14D53163891B9A54B17DA8-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4869
         "time": 1650913846502
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 56511ACDEFA9543147CF93B6610E0981C714B30D-1"
         "pid": 4869
         "time": 1650913846531
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:10:53.225Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:10:53.226Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:10:53.226Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:10:53.228Z appoptics:debug using context provider: ace-context
2022-04-25T19:10:53.310Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:10:53.475Z appoptics:patching patched crypto 
2022-04-25T19:10:53.519Z appoptics:patching patched https 
2022-04-25T19:10:53.520Z appoptics:patching patched http 
2022-04-25T19:10:53.578Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:10:53.578Z appoptics:patching patched fs 
2022-04-25T19:10:53.592Z appoptics:patching patched pino 7.0.1
2022-04-25T19:10:53.601Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (196ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4891
         "time": 1650913853646
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6279F908956224B99874F7FAA4AA3CA22B80666-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4891
         "time": 1650913853654
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF61A35BDE3E84D7B3006F1E31C1ABC4326CAEDE-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4891
         "time": 1650913853659
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7CE5E6E560CFA384CE0C072429A876EEA52873EB-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4891
         "time": 1650913853661
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "862A757E4F659881587FC022DF969547081A2D5F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4891
         "time": 1650913853664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4891
         "time": 1650913853667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "34C1EB942E6CFBBA8115CC4DF18613CA644F249D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4891
         "time": 1650913853669
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2811C4BA125AA92C0F5213F5220FECCDF3F15BA8-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4891
         "time": 1650913853671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4891
         "time": 1650913853672
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D6331735835B41A2C7C99D40B499E38A6C9A3C7-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4891
         "time": 1650913853674
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4891
         "time": 1650913853675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F2DFD3E00C30E4AC2A44115538557C3849FE7E3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4891
         "time": 1650913853677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FFA07E3CE133CBDDCAA47E3A91CA010192710C3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4891
         "time": 1650913853780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FB9E47C8EE85153AA9787AE8F46C4CCB8F18912C-1"
         "pid": 4891
         "time": 1650913853808
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:00.458Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:00.459Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:00.459Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:00.460Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:00.521Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:00.638Z appoptics:patching patched crypto 
2022-04-25T19:11:00.656Z appoptics:patching patched https 
2022-04-25T19:11:00.656Z appoptics:patching patched http 
2022-04-25T19:11:00.689Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:00.689Z appoptics:patching patched fs 
2022-04-25T19:11:00.696Z appoptics:patching patched pino 7.0.2
2022-04-25T19:11:00.700Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4913
         "time": 1650913860726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "709C2565CF1F71B2214460F6A67245C55CC439EF-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4913
         "time": 1650913860733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC25A01E5984AC4644FDA4A37FBA7808CF1D1A03-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4913
         "time": 1650913860737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1806340BD3CED7613AF9E662B01DA3D2B0B3E614-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4913
         "time": 1650913860739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9ED8A4C1A0F0013B8C133295D4E2B8523A6C9610-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4913
         "time": 1650913860741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4913
         "time": 1650913860744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC718CAB9D5E5851E0668BD78C30798D20B2C8B4-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4913
         "time": 1650913860746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18269D6D02F99518DDAA982A6A6C1B7F2D150D99-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4913
         "time": 1650913860747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4913
         "time": 1650913860748
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3113C697B278E6B9FBB919DDF501C593B0AED67-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4913
         "time": 1650913860749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4913
         "time": 1650913860751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07EC1EC59D31F820148260281619D31475C89CAB-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4913
         "time": 1650913860752
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "025DF2E3AD0C3145260D0A569A3DF4122E94A840-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4913
         "time": 1650913860857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E3FBD126E8E0833C9B0EF613FB3E09862F6828D6-1"
         "pid": 4913
         "time": 1650913860885
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:07.872Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:07.873Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:07.873Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:07.873Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:07.934Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:08.047Z appoptics:patching patched crypto 
2022-04-25T19:11:08.069Z appoptics:patching patched https 
2022-04-25T19:11:08.070Z appoptics:patching patched http 
2022-04-25T19:11:08.147Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:08.147Z appoptics:patching patched fs 
2022-04-25T19:11:08.155Z appoptics:patching patched pino 7.0.3
2022-04-25T19:11:08.160Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4935
         "time": 1650913868193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C272E0B642D9C1C2BF7A8E650DD520AE9303DF0A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4935
         "time": 1650913868201
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B6C06E7F2DCBF92873717E478AE5A2F2A8D830B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4935
         "time": 1650913868204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3F7AC548AA1BE7F57794FD37ABDC5B9AF140212-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4935
         "time": 1650913868210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "43C1FE22DA240295C58E997EEAE09C3FFED86B40-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4935
         "time": 1650913868214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4935
         "time": 1650913868217
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "96BEAA2DFDD972C920D1B47DEE213C29C7F105DA-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4935
         "time": 1650913868218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0CE651801C8B139AC5B939EB6228C9DC4128CBD9-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4935
         "time": 1650913868220
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4935
         "time": 1650913868221
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "74742E117275064B02B3415867924B96DE56BA10-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4935
         "time": 1650913868223
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4935
         "time": 1650913868224
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B7F285499FFF0269523D4EB788D52FCC237B9092-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4935
         "time": 1650913868225
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "52E3F48F065996B7C6DCB343137680843F1D3EB0-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4935
         "time": 1650913868330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6F2166BEFBE16CB13BC1F6D4ED49E5618EAFAEF8-1"
         "pid": 4935
         "time": 1650913868358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:14.574Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:14.575Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:14.575Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:14.576Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:14.652Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:14.784Z appoptics:patching patched crypto 
2022-04-25T19:11:14.802Z appoptics:patching patched https 
2022-04-25T19:11:14.803Z appoptics:patching patched http 
2022-04-25T19:11:14.841Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:14.842Z appoptics:patching patched fs 
2022-04-25T19:11:14.849Z appoptics:patching patched pino 7.0.4
2022-04-25T19:11:14.853Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4957
         "time": 1650913874879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "060848974085D0CAAB49F4909B6D7E640E9FC773-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4957
         "time": 1650913874886
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B8D37DCC20007EB8745A7E07DABAAE97BDE157B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4957
         "time": 1650913874889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E4F072B6AF29F22D92DA48FF95851AD0FF88E22-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4957
         "time": 1650913874892
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EE61C595AC966BE70C8C30E87C5F720EA97F67A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4957
         "time": 1650913874894
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4957
         "time": 1650913874897
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "712CB63D1BC5BEE1E3F74D061CEEAA93135736CC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4957
         "time": 1650913874899
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9417EBECD6EF622BCE0C3C9B9DBCA96AAAEA1B0F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4957
         "time": 1650913874900
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4957
         "time": 1650913874901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5EB13467E418BCA92E3DE4E2C4E1C575BB8DF84F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4957
         "time": 1650913874903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4957
         "time": 1650913874904
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "70F2B446944951970D1267B753C248695D6CE4A3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4957
         "time": 1650913874906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "32465108D1CD6AB0B7149957B3320D869132FF5F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4957
         "time": 1650913875008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 668C1C5F089E271BEBDA84EA62BB5138643305AC-1"
         "pid": 4957
         "time": 1650913875037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:22.507Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:22.508Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:22.508Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:22.509Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:22.588Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:22.731Z appoptics:patching patched crypto 
2022-04-25T19:11:22.750Z appoptics:patching patched https 
2022-04-25T19:11:22.751Z appoptics:patching patched http 
2022-04-25T19:11:22.793Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:22.793Z appoptics:patching patched fs 
2022-04-25T19:11:22.801Z appoptics:patching patched pino 7.0.5
2022-04-25T19:11:22.805Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4979
         "time": 1650913882836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0CD077B19DCE1F3A95CA73A73894649E69198AA9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4979
         "time": 1650913882844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF441EC70CA7A5E4695D23AFBBFE2B9561AA1D32-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4979
         "time": 1650913882847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A29F917C0422A1F76E8A7E34FA03CC1F642BFB92-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4979
         "time": 1650913882850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64C116187754AB498E44756A60C5CF9C57D78C38-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4979
         "time": 1650913882853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4979
         "time": 1650913882856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D2218C4C8329A8C6FB01BC3F721ABEE0B3866DA-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4979
         "time": 1650913882858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF4DB4905ABFD3AEEBCE07E4317A05F0575F6AA2-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4979
         "time": 1650913882859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4979
         "time": 1650913882861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3E870FFD914D600914593A7FDE3FAAE89B2836C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4979
         "time": 1650913882862
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 4979
         "time": 1650913882863
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B44706C482EE097246FA2E4C5E9786B551DDA674-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4979
         "time": 1650913882865
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3FFF339701A2824F9B0EBCCEB2009E177A1E5F76-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4979
         "time": 1650913882970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9094E80EEAD87B6193D94BC6A444093012C6F3BB-1"
         "pid": 4979
         "time": 1650913882999
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:30.009Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:30.010Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:30.010Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:30.011Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:30.100Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:30.298Z appoptics:patching patched crypto 
2022-04-25T19:11:30.367Z appoptics:patching patched https 
2022-04-25T19:11:30.367Z appoptics:patching patched http 
2022-04-25T19:11:30.428Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:30.428Z appoptics:patching patched fs 
2022-04-25T19:11:30.437Z appoptics:patching patched pino 7.1.0
2022-04-25T19:11:30.441Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (197ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5001
         "time": 1650913890473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D37123E7A8B1B1E79DFB85864463789AD5E202D5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5001
         "time": 1650913890482
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1101A8CC9C518CD0CE8C96CB4E17C50B65A61D68-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5001
         "time": 1650913890486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6EADD5FAA7C66E7B2427FBDCE0DCC36B8C98C95-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5001
         "time": 1650913890491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "769F12BDA8E454DE59720C96AC9DD9909939BAE7-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5001
         "time": 1650913890493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5001
         "time": 1650913890497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DF2E4BF70D0F34D860409943F2F6271B7F66B3E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5001
         "time": 1650913890498
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D35CCCA6B5757309397B3FB1505270316B804CCC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5001
         "time": 1650913890500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5001
         "time": 1650913890501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "91E84D9CB9955F63C1CF49DEEE762C4BC7F708F2-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5001
         "time": 1650913890507
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5001
         "time": 1650913890508
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DE097F2AD1323F02777566A15ED77CD1A164234D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5001
         "time": 1650913890510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF85FDFF9068DA316BFBEA798558D2C5DAA801BC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5001
         "time": 1650913890615
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0670297EF35F664BFBC5504F20C8D34925F9035F-1"
         "pid": 5001
         "time": 1650913890643
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:38.101Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:38.102Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:38.102Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:38.104Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:38.201Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:38.332Z appoptics:patching patched crypto 
2022-04-25T19:11:38.353Z appoptics:patching patched https 
2022-04-25T19:11:38.354Z appoptics:patching patched http 
2022-04-25T19:11:38.396Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:38.396Z appoptics:patching patched fs 
2022-04-25T19:11:38.406Z appoptics:patching patched pino 7.2.0
2022-04-25T19:11:38.410Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5023
         "time": 1650913898439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB77CE0433ED87457BF827EFCD2BC1D11090DE27-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5023
         "time": 1650913898448
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "42A4EBD6A2F1B3EEB7BBA8A41EAA26919C78F16F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5023
         "time": 1650913898451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4AEA4D95D5E7B81B965FDAA78EF92A89372E185-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5023
         "time": 1650913898454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7A4E397619ECFF1B33B925B3B72C100639C3108C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5023
         "time": 1650913898457
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5023
         "time": 1650913898460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0E0C4D7D11F9B6627410A53D9B2DEF745ABCE5C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5023
         "time": 1650913898462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BF17470DA276CED9A51A73772797DB50C4FD035F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5023
         "time": 1650913898463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5023
         "time": 1650913898465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A7EF8F75D4770E29CA0179A3CBF5C3D468A7AD7F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5023
         "time": 1650913898466
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5023
         "time": 1650913898467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8978A1D55374FE84EBDFBF60D4B305CE1CAFA987-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5023
         "time": 1650913898469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1FB48D21BE11B62C5983EBE1BD5EF1D31A5676F6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5023
         "time": 1650913898573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C5AF05C4F7E49A981F53ECD993F7E822A5BA96A8-1"
         "pid": 5023
         "time": 1650913898602
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:46.676Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:46.677Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:46.677Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:46.678Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:46.747Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:46.879Z appoptics:patching patched crypto 
2022-04-25T19:11:46.899Z appoptics:patching patched https 
2022-04-25T19:11:46.900Z appoptics:patching patched http 
2022-04-25T19:11:46.951Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:46.951Z appoptics:patching patched fs 
2022-04-25T19:11:46.961Z appoptics:patching patched pino 7.3.0
2022-04-25T19:11:46.965Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5045
         "time": 1650913906993
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7120FD57606BED3A904AB5F491588A9B06C971D2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5045
         "time": 1650913907002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC17B21426280DE800488A97A114407362384332-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5045
         "time": 1650913907006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "535FCCE71B65A730772630BF4B72DCFE558CA8BF-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5045
         "time": 1650913907009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15EBFDF0CDA7A7D02CF0ED7D4DA55A593F680626-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5045
         "time": 1650913907012
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5045
         "time": 1650913907015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38D36FC1F49BD6606CF9706E4B0413C52BBFA3B1-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5045
         "time": 1650913907017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B5C432DCF0CA7BE404D120FF510789CD68EF151-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5045
         "time": 1650913907018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5045
         "time": 1650913907020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "97B3FA18015903073F61A84A4973802C7C2D1736-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5045
         "time": 1650913907021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5045
         "time": 1650913907023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A2908FC370A28388C9A7278B4B1D983E85AB7D81-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5045
         "time": 1650913907024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD9B72FFF83ED7D93F80C9FEF4FB484D011691A6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5045
         "time": 1650913907129
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BEEDE6BAAC295EB42813A3995257FBE96A15CE96-1"
         "pid": 5045
         "time": 1650913907159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:11:53.888Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:11:53.888Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:11:53.888Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:11:53.889Z appoptics:debug using context provider: ace-context
2022-04-25T19:11:53.973Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:11:54.116Z appoptics:patching patched crypto 
2022-04-25T19:11:54.137Z appoptics:patching patched https 
2022-04-25T19:11:54.137Z appoptics:patching patched http 
2022-04-25T19:11:54.205Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:11:54.206Z appoptics:patching patched fs 
2022-04-25T19:11:54.215Z appoptics:patching patched pino 7.4.0
2022-04-25T19:11:54.219Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (213ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5067
         "time": 1650913914249
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40BB355214FA3213578FA05E77D3A5DA8C268227-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5067
         "time": 1650913914264
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AC848DEC6C08D571B9A56886B3AFD2DB17590D97-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5067
         "time": 1650913914274
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2D9DE35737AF8800D99DB97B33EA9606F166256D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5067
         "time": 1650913914277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C56F4D25E799061955E358F31F2AB135D0274126-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5067
         "time": 1650913914282
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5067
         "time": 1650913914290
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D59B13B9A0BC320857EC546CD015E2CED23DF8D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5067
         "time": 1650913914293
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "75B17C7E6B9D4F3E023AC9357815E61286C77BDA-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5067
         "time": 1650913914295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5067
         "time": 1650913914296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7AD81A0D1642CDE526DF62A8571697DCF59C10FA-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5067
         "time": 1650913914298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5067
         "time": 1650913914299
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "254C9B74E75AE93BE94049BFA0381C68E5A235DA-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5067
         "time": 1650913914301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C70FD2F0F66597870EB475F17DA73AFBFBB61C58-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5067
         "time": 1650913914411
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CEAAB583EDC1F816E9CF9D9CC3F0FDAB97195CB8-1"
         "pid": 5067
         "time": 1650913914439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:01.639Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:01.640Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:01.640Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:01.641Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:01.700Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:01.824Z appoptics:patching patched crypto 
2022-04-25T19:12:01.841Z appoptics:patching patched https 
2022-04-25T19:12:01.842Z appoptics:patching patched http 
2022-04-25T19:12:01.881Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:01.881Z appoptics:patching patched fs 
2022-04-25T19:12:01.890Z appoptics:patching patched pino 7.4.1
2022-04-25T19:12:01.894Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5089
         "time": 1650913921918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2946E400B2195A1EF4F09DE842DB10B6FC25D934-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5089
         "time": 1650913921925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "943A1AAFC6202CC8A193F40F07C5EA8DC7BF435C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5089
         "time": 1650913921929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B2811E5AE824448ABA0BB62C9E6C39410BFD185B-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5089
         "time": 1650913921931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F2DB375E5DFC0FF29552D699F2F65F0B07E946BA-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5089
         "time": 1650913921933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5089
         "time": 1650913921936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "807F4E11886AB84390F7697BC7378A8596934929-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5089
         "time": 1650913921938
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45A43E052F51DF287640A345F83C17D6250B323F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5089
         "time": 1650913921939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5089
         "time": 1650913921940
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C103A1BA7212685CCA55AB92A43FFC54CC1F57D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5089
         "time": 1650913921942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5089
         "time": 1650913921943
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9131EACB29E928134AC881D992C00780E22D7118-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5089
         "time": 1650913921945
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "75BA18C469FEA24021ED46999952A1AE68F94775-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5089
         "time": 1650913922048
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DC6218D51FA3299A92124782EA3461CFF21F4787-1"
         "pid": 5089
         "time": 1650913922077
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:09.603Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:09.604Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:09.604Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:09.604Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:09.668Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:09.794Z appoptics:patching patched crypto 
2022-04-25T19:12:09.813Z appoptics:patching patched https 
2022-04-25T19:12:09.813Z appoptics:patching patched http 
2022-04-25T19:12:09.849Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:09.849Z appoptics:patching patched fs 
2022-04-25T19:12:09.858Z appoptics:patching patched pino 7.5.0
2022-04-25T19:12:09.862Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5111
         "time": 1650913929891
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE2AF60884F0F335921C4DD697CC972DC6638511-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5111
         "time": 1650913929899
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1338049E4D69421669693B5A181F83C737FFAB95-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5111
         "time": 1650913929902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2796634C46094E5D2BD6C08EC6C29CC8DEDA8241-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5111
         "time": 1650913929905
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EBD94C4DF3830AA10A108246E8C713FB37721BD5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5111
         "time": 1650913929908
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5111
         "time": 1650913929910
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DEC876C1A35C557BEB9F9F2E3158566622CAA596-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5111
         "time": 1650913929912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD26931ACA831B0686988593D7541AA83C494D87-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5111
         "time": 1650913929913
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5111
         "time": 1650913929915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E78C2DB0A559F12FDD1491E5724DB4794C37FD8A-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5111
         "time": 1650913929916
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5111
         "time": 1650913929917
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EC93F8D59C54C80D5E95B4926AABB18B5C5C3D25-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5111
         "time": 1650913929919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A3E829DA4614E3062D86020E1909AFE573D08000-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5111
         "time": 1650913930022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EED7B691CAC0BB9DEAF0214480F2E6D43D342464-1"
         "pid": 5111
         "time": 1650913930050
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:16.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:16.283Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:16.283Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:16.283Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:16.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:16.569Z appoptics:patching patched crypto 
2022-04-25T19:12:16.632Z appoptics:patching patched https 
2022-04-25T19:12:16.633Z appoptics:patching patched http 
2022-04-25T19:12:16.687Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:16.688Z appoptics:patching patched fs 
2022-04-25T19:12:16.700Z appoptics:patching patched pino 7.5.1
2022-04-25T19:12:16.705Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5133
         "time": 1650913936734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5B8062FD1A6603901AF870E6DA2E9CC2C7DA686-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5133
         "time": 1650913936742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C08D92A37EF6AAD5CE8525F1152A23A21F925CB4-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5133
         "time": 1650913936745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F37EE005D682097E1F7A56D2EC0BD7E29E92C921-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5133
         "time": 1650913936748
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FA9C30A87B8D550C8ABC391694126E93A9069E7D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5133
         "time": 1650913936751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5133
         "time": 1650913936754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35E94859D7B54F486A1695EED6B8E0ED85ECFA19-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5133
         "time": 1650913936755
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC5A475CEEA8163E988591398C2E80B3CB83861D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5133
         "time": 1650913936757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5133
         "time": 1650913936758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BE45908CC6CE71989560CD8BAAE31A824C85111-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5133
         "time": 1650913936760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5133
         "time": 1650913936761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "048E1F1CD461A7789C86E4431A3FACD5F06B94A3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5133
         "time": 1650913936763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "94012D5474DA01662D9E446A8FFD624F481A1345-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5133
         "time": 1650913936867
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B495FFC41BCC4EC2EA91DA3FEF7412873EBCE857-1"
         "pid": 5133
         "time": 1650913936895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:24.031Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:24.032Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:24.032Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:24.033Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:24.096Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:24.214Z appoptics:patching patched crypto 
2022-04-25T19:12:24.232Z appoptics:patching patched https 
2022-04-25T19:12:24.233Z appoptics:patching patched http 
2022-04-25T19:12:24.267Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:24.268Z appoptics:patching patched fs 
2022-04-25T19:12:24.276Z appoptics:patching patched pino 7.6.0
2022-04-25T19:12:24.280Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5155
         "time": 1650913944305
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EAC2900EB94F5FD02453FCCAEC52F742F37AA2D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5155
         "time": 1650913944313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6BBE64E920CECDE52C384B6BE9C61AADE500DCDB-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5155
         "time": 1650913944316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C92462D7F5C1D87DFAE4C745E0BF2BC58777111-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5155
         "time": 1650913944319
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0503975B296BBF8E0BA9152ABF1678043EFDA03D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5155
         "time": 1650913944321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5155
         "time": 1650913944324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6BCDE1C5274C8435449C49EA0229DDFE8DC5B7F-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5155
         "time": 1650913944325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FBBBD1E0820A898E481FE1CC49CE84CA53CAC9E2-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5155
         "time": 1650913944327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5155
         "time": 1650913944328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62DB82658104BCABA99F01F758BB05BD02B32321-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5155
         "time": 1650913944330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5155
         "time": 1650913944331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED303AEBCC95A70850960B126CF12A17A1A4FACC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5155
         "time": 1650913944333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C980ABA82066A0A5588707114F619CB804F26887-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5155
         "time": 1650913944438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 54542DBDF583ACF30FC18A0EA0D3EC78781400A8-1"
         "pid": 5155
         "time": 1650913944467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:31.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:31.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:31.458Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:31.459Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:31.564Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:31.706Z appoptics:patching patched crypto 
2022-04-25T19:12:31.750Z appoptics:patching patched https 
2022-04-25T19:12:31.751Z appoptics:patching patched http 
2022-04-25T19:12:31.784Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:31.784Z appoptics:patching patched fs 
2022-04-25T19:12:31.799Z appoptics:patching patched pino 7.6.1
2022-04-25T19:12:31.803Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5177
         "time": 1650913951830
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E55890BD908D4B6F6CDDE7B461C2FF6110D6062-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5177
         "time": 1650913951839
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F760A85112835BE78A2ED8B4023BD8F705B2204F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5177
         "time": 1650913951843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "101A6254224200065A5CDCD24861593A4FE08818-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5177
         "time": 1650913951845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B30DBD7999D9B52119656DBA9C783E04E0C30B7F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5177
         "time": 1650913951849
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5177
         "time": 1650913951851
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "514E4AB8075EC8D6B362D27D5E0B6E2369745890-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5177
         "time": 1650913951853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05852A947D1477E9CB0B76F2D269509804799F57-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5177
         "time": 1650913951855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5177
         "time": 1650913951856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B30F3C173015C0F291E722027034245F6C4B82EE-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5177
         "time": 1650913951858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5177
         "time": 1650913951859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E8BE716CB031F7317B834D3EDF6C13C7460E652-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5177
         "time": 1650913951861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "938D365292D3CE302A6026A2A212263C2E1F2DDD-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5177
         "time": 1650913951964
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 87361FE861C24D21B2D49D7B33FD8E4F014DB815-1"
         "pid": 5177
         "time": 1650913951992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:39.205Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:39.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:39.206Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:39.206Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:39.269Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:39.392Z appoptics:patching patched crypto 
2022-04-25T19:12:39.410Z appoptics:patching patched https 
2022-04-25T19:12:39.412Z appoptics:patching patched http 
2022-04-25T19:12:39.441Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:39.445Z appoptics:patching patched fs 
2022-04-25T19:12:39.459Z appoptics:patching patched pino 7.6.2
2022-04-25T19:12:39.463Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5199
         "time": 1650913959489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B276DCDE126373CDAEC3A8C8322F79FAE6FC1FE3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5199
         "time": 1650913959496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16BC3894669223ECB591C6CF9C382CED71BC9DD9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5199
         "time": 1650913959500
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CACEA6FC7B391297A8F54E1205EDF7C40076B643-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5199
         "time": 1650913959504
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7774177F79661A1D87B9242C2250F11AEE1E517F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5199
         "time": 1650913959507
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5199
         "time": 1650913959511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D98152055B3988E1357B08EA677E6AE84E08764-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5199
         "time": 1650913959513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07736C85BEA17C582FA276F7A76995A35CCE3426-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5199
         "time": 1650913959514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5199
         "time": 1650913959515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC9509584FF2E291BE026E5BBC5EEC7A4DBE3537-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5199
         "time": 1650913959517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5199
         "time": 1650913959518
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9AEE18FC0A8C7B2754349C748B0B7F95A1D8FB3E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5199
         "time": 1650913959520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BB9294D3F9E265F6295A298DA42AB04A9202597-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5199
         "time": 1650913959623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A15754097698107869E1D6638C6EF25961683D82-1"
         "pid": 5199
         "time": 1650913959650
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:46.710Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:46.711Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:46.711Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:46.712Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:46.791Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:46.918Z appoptics:patching patched crypto 
2022-04-25T19:12:46.937Z appoptics:patching patched https 
2022-04-25T19:12:46.938Z appoptics:patching patched http 
2022-04-25T19:12:46.972Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:46.972Z appoptics:patching patched fs 
2022-04-25T19:12:46.986Z appoptics:patching patched pino 7.6.3
2022-04-25T19:12:46.990Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5221
         "time": 1650913967015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "083683E3D207A8542D9DD3B4C565480AB0077DC6-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5221
         "time": 1650913967023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C5197F50D730CF02C343D69034D5BBD902F0259A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5221
         "time": 1650913967027
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "269278F8C55CC76A7204072B8262CB847B1A0D1C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5221
         "time": 1650913967030
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D7C6AE07619F9A20C90D9131C10A199A577AF085-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5221
         "time": 1650913967032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5221
         "time": 1650913967035
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "309A38483DDAD706942B1725358381BDEF4C10F1-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5221
         "time": 1650913967037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE62C969B22A1B10D6B19315082528F2E70A4CE6-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5221
         "time": 1650913967038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5221
         "time": 1650913967039
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "14FFDE06520DA1A903B9985E9D9CDA33980B4F89-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5221
         "time": 1650913967041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5221
         "time": 1650913967042
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B88B41394D0F16ECC5D4B5C7688E2DB15641E2E9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5221
         "time": 1650913967044
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7591F0CF5BF3151B4877E5F1E3110293D6BEAF2F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5221
         "time": 1650913967147
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 87E546EA8E5F6BC104AE9E7F8B92724044B02829-1"
         "pid": 5221
         "time": 1650913967175
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:12:53.846Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:12:53.847Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:12:53.847Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:12:53.848Z appoptics:debug using context provider: ace-context
2022-04-25T19:12:53.915Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:12:54.044Z appoptics:patching patched crypto 
2022-04-25T19:12:54.064Z appoptics:patching patched https 
2022-04-25T19:12:54.064Z appoptics:patching patched http 
2022-04-25T19:12:54.105Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:12:54.106Z appoptics:patching patched fs 
2022-04-25T19:12:54.114Z appoptics:patching patched pino 7.6.4
2022-04-25T19:12:54.118Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5243
         "time": 1650913974145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "73A3A7A0244C8B850BD6DC3A43C2D63E9179E863-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5243
         "time": 1650913974153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD8634441A182F164C918BBD0D554E7E54158ACF-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5243
         "time": 1650913974156
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "248A4DEFD03294ACBAFA9A179DD9652A39BF1EA1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5243
         "time": 1650913974159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ACE6DFB798E467E1D056AFC9863F45F6EFDE60D3-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5243
         "time": 1650913974161
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5243
         "time": 1650913974164
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EBF844B8893185DE3228753A187BDC991F0A28FF-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5243
         "time": 1650913974166
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA42F085E6F6E45309A645D556B02A5CEC6C7852-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5243
         "time": 1650913974167
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5243
         "time": 1650913974168
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A0021C84DAE61654F02238741AC9062BFA520A66-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5243
         "time": 1650913974170
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5243
         "time": 1650913974171
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6F70649933D569A3A6A3278834C6264083EA429-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5243
         "time": 1650913974173
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB0A1C64E4A443243DBC4526541FBA585689CF5C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5243
         "time": 1650913974276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D8FC7D8658C0D7387BF4518608BDF6049C90DE04-1"
         "pid": 5243
         "time": 1650913974305
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:01.817Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:01.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:01.817Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:01.818Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:01.897Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:02.027Z appoptics:patching patched crypto 
2022-04-25T19:13:02.046Z appoptics:patching patched https 
2022-04-25T19:13:02.046Z appoptics:patching patched http 
2022-04-25T19:13:02.085Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:02.086Z appoptics:patching patched fs 
2022-04-25T19:13:02.094Z appoptics:patching patched pino 7.6.5
2022-04-25T19:13:02.098Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5265
         "time": 1650913982126
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BCCFA5C536FDE83E748AB7F5C6C89336D21E9E9C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5265
         "time": 1650913982134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCEE05C15EE4774E6098566A083D8CA71CF50E9E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5265
         "time": 1650913982138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA1036F28D937A0EA77D68FAB8E7F9909CE00616-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5265
         "time": 1650913982140
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "95A1846DE06195A0894350ED31B2D9C1F73CCA3A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5265
         "time": 1650913982143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5265
         "time": 1650913982146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9B827BCFFF7830F1ED560429207C6FFBB3FF85DD-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5265
         "time": 1650913982148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F87C65DC7F24A3D2328F96881DF1F57A0747D5B-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5265
         "time": 1650913982149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5265
         "time": 1650913982150
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6154DF61521FF11EE0F6189AB28408966F594891-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5265
         "time": 1650913982152
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5265
         "time": 1650913982153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A62DE3C17C0B5C5031CE92DCCCF2178FC6F9C50-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5265
         "time": 1650913982155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A9A93117067DC0FBBDCF2667C60FEB2A492306D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5265
         "time": 1650913982259
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EC0DE55456D095CB47896136AE88758250D3AF09-1"
         "pid": 5265
         "time": 1650913982288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:08.987Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:08.988Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:08.988Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:08.989Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:09.070Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:09.244Z appoptics:patching patched crypto 
2022-04-25T19:13:09.291Z appoptics:patching patched https 
2022-04-25T19:13:09.291Z appoptics:patching patched http 
2022-04-25T19:13:09.381Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:09.381Z appoptics:patching patched fs 
2022-04-25T19:13:09.390Z appoptics:patching patched pino 7.7.0
2022-04-25T19:13:09.399Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (220ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5287
         "time": 1650913989448
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DFB68F94FCC0E5B113CA4AD10B0E2FC7989E4B5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5287
         "time": 1650913989459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "619B4AE77C25866B1FC5D3D036F2E8AE689E6BA9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5287
         "time": 1650913989468
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D610071736DCCF1F0C6C69AE90D952B5871EEB1-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5287
         "time": 1650913989478
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31C2DCE4816F7AC88013D7982EE3E1BE829E192C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5287
         "time": 1650913989481
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5287
         "time": 1650913989484
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3BF4996A15CF26030DE8F4FD5156FF4CFB3109D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5287
         "time": 1650913989486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2726BC77884DA2D71716EDB01DBD5E3FFAEEB743-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5287
         "time": 1650913989488
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5287
         "time": 1650913989489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DD0354CC67FF279E2A12E8335372AAA302C7410B-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5287
         "time": 1650913989491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5287
         "time": 1650913989492
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2ACA8B55DF058A77D9A22844CCE56A797F7A51E2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5287
         "time": 1650913989495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D1C2B04EBAC6C74B812C86D7AEA363B28377BDF-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5287
         "time": 1650913989598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5771171B50E08EAE51DB1C7F898F20BEBC959A4E-1"
         "pid": 5287
         "time": 1650913989628
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:16.276Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:16.277Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:16.277Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:16.278Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:16.341Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:16.469Z appoptics:patching patched crypto 
2022-04-25T19:13:16.488Z appoptics:patching patched https 
2022-04-25T19:13:16.489Z appoptics:patching patched http 
2022-04-25T19:13:16.528Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:16.528Z appoptics:patching patched fs 
2022-04-25T19:13:16.536Z appoptics:patching patched pino 7.8.0
2022-04-25T19:13:16.540Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5309
         "time": 1650913996565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6262EA3B0E2B4C37AAD326FD22180AB5B8FAC77F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5309
         "time": 1650913996573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF190C6C7AC24B88C081E54D4A26361F46A4BC18-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5309
         "time": 1650913996576
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "52E1F136814098F24AADB8699AD38919223F0352-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5309
         "time": 1650913996579
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "902AF1751387CD77C7A87414568B1B28F557D35D-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5309
         "time": 1650913996581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5309
         "time": 1650913996584
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B7CCC88805B9C33B95D1616F7BE06EDC9EBE186C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5309
         "time": 1650913996585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "478074562C68A52A474825661E353968E0DE6055-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5309
         "time": 1650913996587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5309
         "time": 1650913996588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61761FC8233992E4DC8693081572A9C35875AD77-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5309
         "time": 1650913996589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5309
         "time": 1650913996590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A7FEF3D957AF5BAB3B307D5B5A7EC6CBB3E83E31-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5309
         "time": 1650913996592
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DB4158E04AACE8273DFE81CD09FDA7708AAD8640-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5309
         "time": 1650913996695
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5AFAC656B39F839E5009AF96E3785916810D49A2-1"
         "pid": 5309
         "time": 1650913996724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:24.228Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:24.229Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:24.229Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:24.229Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:24.298Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:24.431Z appoptics:patching patched crypto 
2022-04-25T19:13:24.451Z appoptics:patching patched https 
2022-04-25T19:13:24.452Z appoptics:patching patched http 
2022-04-25T19:13:24.489Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:24.490Z appoptics:patching patched fs 
2022-04-25T19:13:24.499Z appoptics:patching patched pino 7.8.1
2022-04-25T19:13:24.503Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5331
         "time": 1650914004531
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38C2399E27236BF2C5BD3B7745B71FC256398F6C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5331
         "time": 1650914004540
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51C7FC2F06551123340B7F337E60242F2B4D868F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5331
         "time": 1650914004544
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F983B73C2B83B451F4BBFB578A62092D29DAA182-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5331
         "time": 1650914004546
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B04863640229A322A02EF359C3B32031D0E5EB4E-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5331
         "time": 1650914004549
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5331
         "time": 1650914004554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D02403A0670A8797E9FB3170728C556A778E3F02-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5331
         "time": 1650914004558
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D4441A738261028EE1861E02DDF7E6B1723F65EC-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5331
         "time": 1650914004560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5331
         "time": 1650914004562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A40A6B34AD23ACCD1786AD9EB61B12CC925329E0-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5331
         "time": 1650914004563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5331
         "time": 1650914004565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "775707AE3F43BF5667CF8847E48992A468393564-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5331
         "time": 1650914004567
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DDA9AEB9FB8045742626CADB0604E8568C06C51-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5331
         "time": 1650914004671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 82E5D9BB7A7632CC9CA714F33A2242B341C3BBDC-1"
         "pid": 5331
         "time": 1650914004699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:31.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:31.423Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:31.423Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:31.424Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:31.487Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:31.610Z appoptics:patching patched crypto 
2022-04-25T19:13:31.631Z appoptics:patching patched https 
2022-04-25T19:13:31.632Z appoptics:patching patched http 
2022-04-25T19:13:31.671Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:31.671Z appoptics:patching patched fs 
2022-04-25T19:13:31.680Z appoptics:patching patched pino 7.9.0
2022-04-25T19:13:31.684Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5353
         "time": 1650914011711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AE10C493BA6B1247C52A6A33C50F59A9A0CF9A36-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5353
         "time": 1650914011719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C05747BBE6F5018605D27C19809514B61D0E3E7F-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5353
         "time": 1650914011723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1472E22D05E0AABAAE2EE680A3363AFA74B0789-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5353
         "time": 1650914011725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCC98BC5096F0B6AA7EAC859D90002FCB5DACB36-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5353
         "time": 1650914011728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5353
         "time": 1650914011731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44A6EE4C61FB5DC3502E62714D73F9F4191B59FA-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5353
         "time": 1650914011733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "015FA39BDF8370DCD92978C4B9C2C35CCBB65887-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5353
         "time": 1650914011734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5353
         "time": 1650914011735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA7072281666D9EC07C0FBACEE81D6648E820335-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5353
         "time": 1650914011736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5353
         "time": 1650914011738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B420CF52E57F0444F548B4E220DA5C31CCF31360-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5353
         "time": 1650914011740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C8677DDEF71BD7B4260199BE1ADB9DFBFEFF4564-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5353
         "time": 1650914011844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3BD59A2587964E1155D7A4BA0D96133764C1E5DD-1"
         "pid": 5353
         "time": 1650914011873
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:40.218Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:40.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:40.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:40.219Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:40.287Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:40.429Z appoptics:patching patched crypto 
2022-04-25T19:13:40.471Z appoptics:patching patched https 
2022-04-25T19:13:40.474Z appoptics:patching patched http 
2022-04-25T19:13:40.515Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:40.515Z appoptics:patching patched fs 
2022-04-25T19:13:40.525Z appoptics:patching patched pino 7.9.1
2022-04-25T19:13:40.530Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5375
         "time": 1650914020564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EAD1C464A8D8AB540F979822EC8642EC731F0DA2-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5375
         "time": 1650914020573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "21D8FF550129C749977EC2C08983121CCBA3FFE9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5375
         "time": 1650914020577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5C63B9A113D9700890C01B5E725ABFD022E37C36-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5375
         "time": 1650914020580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "189970CDF9E8EE62413BCDEECDA03A8BBF7E6E57-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5375
         "time": 1650914020583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5375
         "time": 1650914020586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5435CE85A159E45DB71EC4042530E2BB01E3226-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5375
         "time": 1650914020587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE088A5B9375FEA417F9B964E232EC2BC3C0DB9C-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5375
         "time": 1650914020589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5375
         "time": 1650914020590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02D7F945C822A78D42F28A186B83DAE6FBBE0A5D-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5375
         "time": 1650914020592
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5375
         "time": 1650914020593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DEEDAECDF615740319CE6A320388E4FEDB31B202-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5375
         "time": 1650914020595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5EBCA3B8236CCFC724FDBADF9960E9978723FEC-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5375
         "time": 1650914020699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A24DCB91E220CE91D232E05B6379B8434DBB0F8B-1"
         "pid": 5375
         "time": 1650914020727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:48.651Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:48.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:48.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:48.652Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:48.721Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:48.863Z appoptics:patching patched crypto 
2022-04-25T19:13:48.884Z appoptics:patching patched https 
2022-04-25T19:13:48.885Z appoptics:patching patched http 
2022-04-25T19:13:48.930Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:48.930Z appoptics:patching patched fs 
2022-04-25T19:13:48.939Z appoptics:patching patched pino 7.9.2
2022-04-25T19:13:48.944Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5397
         "time": 1650914028974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2301786EB7279C3C7CD82251F6EC8FABFEDD4E19-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5397
         "time": 1650914028982
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5701C16334A238EFDABBFA6AAFFDBDC400411CE8-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5397
         "time": 1650914028986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "050CE1F2DF9EF72490FDD57DB2B155F1876462B4-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5397
         "time": 1650914028992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "708C3F94FFBECE7A365A5CB0E3024714A9F9D39C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5397
         "time": 1650914028994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5397
         "time": 1650914028997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C2A0A0646AA6222A03A29AA3CBE75FA772ECDD5-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5397
         "time": 1650914028999
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B5136FE27C9F5E823F25D13EB602B9A61D23D653-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5397
         "time": 1650914029001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5397
         "time": 1650914029002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D097EFCECFCE89E9B9437D97F1BD1058D2510A6-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5397
         "time": 1650914029004
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5397
         "time": 1650914029005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6ED0AA6135559D8AF675EF3E9D219D24ABBD68D7-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5397
         "time": 1650914029007
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B14661AB0FBB8B53A2BDFF5BB057751E00E16335-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5397
         "time": 1650914029112
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 2AFD6E810A8944431474184C5F4C4DF55DE04B76-1"
         "pid": 5397
         "time": 1650914029142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-25T19:13:55.824Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-25T19:13:55.825Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-25T19:13:55.825Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-25T19:13:55.826Z appoptics:debug using context provider: ace-context
2022-04-25T19:13:55.912Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-25T19:13:56.052Z appoptics:patching patched crypto 
2022-04-25T19:13:56.076Z appoptics:patching patched https 
2022-04-25T19:13:56.077Z appoptics:patching patched http 
2022-04-25T19:13:56.139Z appoptics:patching fs.realpath - adding native method
2022-04-25T19:13:56.140Z appoptics:patching patched fs 
2022-04-25T19:13:56.152Z appoptics:patching patched pino 7.10.0
2022-04-25T19:13:56.158Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (202ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5419
         "time": 1650914036197
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A9540330327213BF59F07B5A93983AB553081A4-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5419
         "time": 1650914036208
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF5E795BD9BBF27CA883231486BB3D231340F66A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5419
         "time": 1650914036214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BFA99B04653C65DAA6812B10030EBF39C222DA5-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5419
         "time": 1650914036218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8913A26AAA54473240520AEC6AC812E08EF4211C-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5419
         "time": 1650914036222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5419
         "time": 1650914036226
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3976616B58CFC3726396D32DE79008E6FDD0B09E-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5419
         "time": 1650914036228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38E71898EA3D3F389564B7EDE3EBF2836E4B6B12-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5419
         "time": 1650914036230
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5419
         "time": 1650914036232
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E642C98B456EA12A4C99B856D96CF77EE6AAA2A-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5419
         "time": 1650914036233
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "always insert"
         "pid": 5419
         "time": 1650914036235
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A2B8976B4037E490327F210939CF0470D1F348A-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5419
         "time": 1650914036237
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "056BA40F850E0066FFF8248F3CEA8E844D63D4E9-1"
      +  }
         "hostname": "5814ebde71e5"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5419
         "time": 1650914036342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 362892B336FFDA4D683FCAE162B0FFFE83074F34-1"
         "pid": 5419
         "time": 1650914036370
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
