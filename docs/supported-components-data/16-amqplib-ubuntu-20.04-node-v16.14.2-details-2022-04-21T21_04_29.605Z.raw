npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:37.269Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:37.269Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:37.269Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:37.270Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:37.338Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:37.490Z appoptics:patching patched crypto 
2022-04-21T21:04:37.538Z appoptics:patching patched https 
2022-04-21T21:04:37.539Z appoptics:patching patched http 
2022-04-21T21:04:37.589Z appoptics:patching patched amqplib 0.2.0
2022-04-21T21:04:37.592Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:37.594Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:49.239Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:49.240Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:49.240Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:49.241Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:49.306Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:49.434Z appoptics:patching patched crypto 
2022-04-21T21:04:49.453Z appoptics:patching patched https 
2022-04-21T21:04:49.454Z appoptics:patching patched http 
2022-04-21T21:04:49.510Z appoptics:patching patched amqplib 0.2.1
2022-04-21T21:04:49.512Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:49.515Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:465) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (182ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:55.776Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:55.777Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:55.777Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:55.778Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:55.869Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:56.015Z appoptics:patching patched crypto 
2022-04-21T21:04:56.037Z appoptics:patching patched https 
2022-04-21T21:04:56.037Z appoptics:patching patched http 
2022-04-21T21:04:56.095Z appoptics:patching patched amqplib 0.3.0
2022-04-21T21:04:56.097Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:56.099Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:487) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (56ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (293ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:03.872Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:03.873Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:03.873Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:03.874Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:03.940Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:04.066Z appoptics:patching patched crypto 
2022-04-21T21:05:04.087Z appoptics:patching patched https 
2022-04-21T21:05:04.087Z appoptics:patching patched http 
2022-04-21T21:05:04.146Z appoptics:patching patched amqplib 0.3.1
2022-04-21T21:05:04.148Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:04.150Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:509) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (235ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:11.436Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:11.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:11.436Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:11.437Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:11.503Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:11.631Z appoptics:patching patched crypto 
2022-04-21T21:05:11.652Z appoptics:patching patched https 
2022-04-21T21:05:11.652Z appoptics:patching patched http 
2022-04-21T21:05:11.707Z appoptics:patching patched amqplib 0.3.2
2022-04-21T21:05:11.709Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:11.711Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:531) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (52ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (194ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:17.988Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:17.988Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:17.989Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:17.989Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:18.055Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:18.182Z appoptics:patching patched crypto 
2022-04-21T21:05:18.202Z appoptics:patching patched https 
2022-04-21T21:05:18.203Z appoptics:patching patched http 
2022-04-21T21:05:18.258Z appoptics:patching patched amqplib 0.4.0
2022-04-21T21:05:18.261Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:18.264Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:553) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (56ms)
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (270ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:25.514Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:25.515Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:25.515Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:25.516Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:25.583Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:25.710Z appoptics:patching patched crypto 
2022-04-21T21:05:25.730Z appoptics:patching patched https 
2022-04-21T21:05:25.730Z appoptics:patching patched http 
2022-04-21T21:05:25.786Z appoptics:patching patched amqplib 0.4.1
2022-04-21T21:05:25.788Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:25.790Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:575) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (58ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (242ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:32.232Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:32.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:32.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:32.233Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:32.298Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:32.422Z appoptics:patching patched crypto 
2022-04-21T21:05:32.441Z appoptics:patching patched https 
2022-04-21T21:05:32.442Z appoptics:patching patched http 
2022-04-21T21:05:32.497Z appoptics:patching patched amqplib 0.4.2
2022-04-21T21:05:32.499Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:32.501Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:597) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (44ms)


  7 passing (201ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 923 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:39.305Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:39.305Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:39.305Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:39.306Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:39.373Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:39.510Z appoptics:patching patched crypto 
2022-04-21T21:05:39.531Z appoptics:patching patched https 
2022-04-21T21:05:39.531Z appoptics:patching patched http 
2022-04-21T21:05:39.598Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:39.600Z appoptics:patching patched amqplib 0.5.1
2022-04-21T21:05:39.602Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:39.604Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:619) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (61ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (62ms)


  7 passing (250ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:46.413Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:46.414Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:46.414Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:46.414Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:46.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:46.738Z appoptics:patching patched crypto 
2022-04-21T21:05:46.779Z appoptics:patching patched https 
2022-04-21T21:05:46.791Z appoptics:patching patched http 
2022-04-21T21:05:46.847Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:46.849Z appoptics:patching patched amqplib 0.5.2
2022-04-21T21:05:46.851Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:46.854Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:641) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (249ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:53.576Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:53.577Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:53.577Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:53.578Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:53.644Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:53.771Z appoptics:patching patched crypto 
2022-04-21T21:05:53.791Z appoptics:patching patched https 
2022-04-21T21:05:53.791Z appoptics:patching patched http 
2022-04-21T21:05:53.859Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:53.861Z appoptics:patching patched amqplib 0.5.3
2022-04-21T21:05:53.863Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:53.865Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:663) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (53ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (200ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:01.345Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:01.346Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:01.346Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:01.347Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:01.433Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:01.579Z appoptics:patching patched crypto 
2022-04-21T21:06:01.600Z appoptics:patching patched https 
2022-04-21T21:06:01.600Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:07.767Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:07.767Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:07.767Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:07.768Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:07.835Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:07.985Z appoptics:patching patched crypto 
2022-04-21T21:06:08.028Z appoptics:patching patched https 
2022-04-21T21:06:08.028Z appoptics:patching patched http 
2022-04-21T21:06:08.106Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:08.109Z appoptics:patching patched amqplib 0.5.5
2022-04-21T21:06:08.111Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:08.113Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:703) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (151ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:15.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:15.183Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:15.183Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:15.183Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:15.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:15.380Z appoptics:patching patched crypto 
2022-04-21T21:06:15.424Z appoptics:patching patched https 
2022-04-21T21:06:15.431Z appoptics:patching patched http 
2022-04-21T21:06:15.489Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:15.491Z appoptics:patching patched amqplib 0.5.6
2022-04-21T21:06:15.493Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:15.495Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:725) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (145ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:21.762Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:21.763Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:21.763Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:21.764Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:21.846Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:21.993Z appoptics:patching patched crypto 
2022-04-21T21:06:22.024Z appoptics:patching patched https 
2022-04-21T21:06:22.025Z appoptics:patching patched http 
2022-04-21T21:06:22.089Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:22.091Z appoptics:patching patched amqplib 0.6.0
2022-04-21T21:06:22.093Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:22.096Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:747) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (247ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:29.190Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:29.190Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:29.191Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:29.191Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:29.257Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:29.386Z appoptics:patching patched crypto 
2022-04-21T21:06:29.406Z appoptics:patching patched https 
2022-04-21T21:06:29.406Z appoptics:patching patched http 
2022-04-21T21:06:29.474Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:29.477Z appoptics:patching patched amqplib 0.7.0
2022-04-21T21:06:29.479Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:29.481Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:769) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (192ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:36.385Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:36.387Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:36.387Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:36.388Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:36.503Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:36.746Z appoptics:patching patched crypto 
2022-04-21T21:06:36.815Z appoptics:patching patched https 
2022-04-21T21:06:36.816Z appoptics:patching patched http 
2022-04-21T21:06:36.936Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:36.941Z appoptics:patching patched amqplib 0.7.1
2022-04-21T21:06:36.946Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:36.951Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:791) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (323ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:43.271Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:43.271Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:43.271Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:43.272Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:43.339Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:43.488Z appoptics:patching patched crypto 
2022-04-21T21:06:43.518Z appoptics:patching patched https 
2022-04-21T21:06:43.519Z appoptics:patching patched http 
2022-04-21T21:06:43.585Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:43.587Z appoptics:patching patched amqplib 0.8.0
2022-04-21T21:06:43.589Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:43.592Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:813) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (241ms)


up to date, audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
