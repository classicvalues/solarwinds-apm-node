npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 910 packages in 7s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:11.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:11.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:11.706Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:11.706Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:11.771Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:11.995Z appoptics:patching patched crypto 
2022-02-23T04:38:12.032Z appoptics:patching patched https 
2022-02-23T04:38:12.032Z appoptics:patching patched http 
2022-02-23T04:38:12.077Z appoptics:patching patched amqplib 0.2.0
2022-02-23T04:38:12.080Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:12.082Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 2 packages, and audited 910 packages in 9s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:25.089Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:25.090Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:25.090Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:25.090Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:25.154Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:25.279Z appoptics:patching patched crypto 
2022-02-23T04:38:25.309Z appoptics:patching patched https 
2022-02-23T04:38:25.309Z appoptics:patching patched http 
2022-02-23T04:38:25.358Z appoptics:patching patched amqplib 0.2.1
2022-02-23T04:38:25.360Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:25.362Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:466) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (62ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (233ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 910 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:32.711Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:32.716Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:32.716Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:32.717Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:32.888Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:33.196Z appoptics:patching patched crypto 
2022-02-23T04:38:33.283Z appoptics:patching patched https 
2022-02-23T04:38:33.284Z appoptics:patching patched http 
2022-02-23T04:38:33.352Z appoptics:patching patched amqplib 0.3.0
2022-02-23T04:38:33.354Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:33.356Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:489) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (193ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 2 packages, and audited 910 packages in 5s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:39.364Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:39.364Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:39.364Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:39.365Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:39.426Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:39.551Z appoptics:patching patched crypto 
2022-02-23T04:38:39.570Z appoptics:patching patched https 
2022-02-23T04:38:39.570Z appoptics:patching patched http 
2022-02-23T04:38:39.631Z appoptics:patching patched amqplib 0.3.1
2022-02-23T04:38:39.633Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:39.635Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:512) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (58ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (237ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 910 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:46.766Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:46.766Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:46.766Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:46.767Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:46.827Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:46.954Z appoptics:patching patched crypto 
2022-02-23T04:38:46.972Z appoptics:patching patched https 
2022-02-23T04:38:46.972Z appoptics:patching patched http 
2022-02-23T04:38:47.030Z appoptics:patching patched amqplib 0.3.2
2022-02-23T04:38:47.032Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:47.034Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:535) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (229ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 910 packages in 5s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:38:53.108Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:38:53.109Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:38:53.109Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:38:53.109Z appoptics:debug using context provider: ace-context
2022-02-23T04:38:53.171Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:38:53.303Z appoptics:patching patched crypto 
2022-02-23T04:38:53.325Z appoptics:patching patched https 
2022-02-23T04:38:53.349Z appoptics:patching patched http 
2022-02-23T04:38:53.406Z appoptics:patching patched amqplib 0.4.0
2022-02-23T04:38:53.408Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:38:53.411Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:558) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (53ms)
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (277ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:520:28)
      at Connection.emit (node:events:520:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:520:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:520:28)
      at Connection.emit (node:events:520:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:520:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 910 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:00.234Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:00.235Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:00.235Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:00.236Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:00.294Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:00.421Z appoptics:patching patched crypto 
2022-02-23T04:39:00.438Z appoptics:patching patched https 
2022-02-23T04:39:00.439Z appoptics:patching patched http 
2022-02-23T04:39:00.495Z appoptics:patching patched amqplib 0.4.1
2022-02-23T04:39:00.497Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:00.499Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:581) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (176ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 910 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:06.728Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:06.729Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:06.729Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:06.729Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:06.788Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:06.911Z appoptics:patching patched crypto 
2022-02-23T04:39:06.930Z appoptics:patching patched https 
2022-02-23T04:39:06.930Z appoptics:patching patched http 
2022-02-23T04:39:06.985Z appoptics:patching patched amqplib 0.4.2
2022-02-23T04:39:06.987Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:06.989Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:604) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (55ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (178ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 909 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:13.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:13.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:13.562Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:13.563Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:13.621Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:13.741Z appoptics:patching patched crypto 
2022-02-23T04:39:13.759Z appoptics:patching patched https 
2022-02-23T04:39:13.759Z appoptics:patching patched http 
2022-02-23T04:39:13.823Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:13.825Z appoptics:patching patched amqplib 0.5.1
2022-02-23T04:39:13.827Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:13.829Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:627) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (62ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (230ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 909 packages in 5s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:19.818Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:19.819Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:19.819Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:19.820Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:19.878Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:20.008Z appoptics:patching patched crypto 
2022-02-23T04:39:20.048Z appoptics:patching patched https 
2022-02-23T04:39:20.048Z appoptics:patching patched http 
2022-02-23T04:39:20.160Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:20.163Z appoptics:patching patched amqplib 0.5.2
2022-02-23T04:39:20.165Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:20.167Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:650) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (237ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:26.632Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:26.632Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:26.632Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:26.633Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:26.693Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:26.815Z appoptics:patching patched crypto 
2022-02-23T04:39:26.832Z appoptics:patching patched https 
2022-02-23T04:39:26.833Z appoptics:patching patched http 
2022-02-23T04:39:26.898Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:26.900Z appoptics:patching patched amqplib 0.5.3
2022-02-23T04:39:26.902Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:26.905Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:673) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (184ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:33.411Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:33.412Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:33.412Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:33.413Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:33.491Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:33.640Z appoptics:patching patched crypto 
2022-02-23T04:39:33.680Z appoptics:patching patched https 
2022-02-23T04:39:33.693Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1155:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1155:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1155:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:39.717Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:39.718Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:39.718Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:39.718Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:39.778Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:39.899Z appoptics:patching patched crypto 
2022-02-23T04:39:39.918Z appoptics:patching patched https 
2022-02-23T04:39:39.918Z appoptics:patching patched http 
2022-02-23T04:39:39.982Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:39.984Z appoptics:patching patched amqplib 0.5.5
2022-02-23T04:39:39.986Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:39.989Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:715) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (183ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:46.550Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:46.551Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:46.551Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:46.552Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:46.609Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:46.734Z appoptics:patching patched crypto 
2022-02-23T04:39:46.752Z appoptics:patching patched https 
2022-02-23T04:39:46.752Z appoptics:patching patched http 
2022-02-23T04:39:46.816Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:46.818Z appoptics:patching patched amqplib 0.5.6
2022-02-23T04:39:46.820Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:46.822Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:738) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (185ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:52.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:52.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:52.970Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:52.971Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:53.031Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:53.155Z appoptics:patching patched crypto 
2022-02-23T04:39:53.175Z appoptics:patching patched https 
2022-02-23T04:39:53.176Z appoptics:patching patched http 
2022-02-23T04:39:53.255Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:39:53.258Z appoptics:patching patched amqplib 0.6.0
2022-02-23T04:39:53.262Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:39:53.265Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:761) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (230ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

changed 1 package, and audited 915 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (10 moderate, 4 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:39:59.720Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:39:59.721Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:39:59.721Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:39:59.722Z appoptics:debug using context provider: ace-context
2022-02-23T04:39:59.785Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:39:59.943Z appoptics:patching patched crypto 
2022-02-23T04:39:59.961Z appoptics:patching patched https 
2022-02-23T04:39:59.962Z appoptics:patching patched http 
2022-02-23T04:40:00.035Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:40:00.037Z appoptics:patching patched amqplib 0.7.0
2022-02-23T04:40:00.039Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:40:00.041Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:784) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (190ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.0', npm: '8.3.1' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 913 packages in 5s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:40:06.041Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:40:06.042Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:40:06.042Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:40:06.043Z appoptics:debug using context provider: ace-context
2022-02-23T04:40:06.102Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:40:06.224Z appoptics:patching patched crypto 
2022-02-23T04:40:06.242Z appoptics:patching patched https 
2022-02-23T04:40:06.243Z appoptics:patching patched http 
2022-02-23T04:40:06.309Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:40:06.311Z appoptics:patching patched amqplib 0.7.1
2022-02-23T04:40:06.313Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:40:06.315Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:807) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (64ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (233ms)


changed 1 package, and audited 913 packages in 6s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-02-23T04:40:13.319Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-02-23T04:40:13.319Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-02-23T04:40:13.320Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2022-02-23T04:40:13.320Z appoptics:debug using context provider: ace-context
2022-02-23T04:40:13.387Z appoptics:debug apm 10.2.1, bindings 11.2.0, oboe 10.2.0
2022-02-23T04:40:13.530Z appoptics:patching patched crypto 
2022-02-23T04:40:13.548Z appoptics:patching patched https 
2022-02-23T04:40:13.548Z appoptics:patching patched http 
2022-02-23T04:40:13.616Z appoptics:patching patched bluebird 3.7.2
2022-02-23T04:40:13.618Z appoptics:patching patched amqplib 0.8.0
2022-02-23T04:40:13.620Z appoptics:patching patched amqplib/callback_api 
2022-02-23T04:40:13.622Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:830) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (59ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (273ms)


up to date, audited 913 packages in 5s

83 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (9 moderate, 3 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
