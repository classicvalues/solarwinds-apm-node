
added 15 packages, removed 5 packages, changed 2 packages, and audited 1088 packages in 10s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:41:59.797Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:41:59.798Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:41:59.798Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:41:59.799Z appoptics:debug using context provider: ace-context
2021-11-23T06:41:59.878Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:00.067Z appoptics:patching patched crypto 
2021-11-23T06:42:00.099Z appoptics:patching patched https 
2021-11-23T06:42:00.099Z appoptics:patching patched http 
2021-11-23T06:42:00.159Z appoptics:patching patched pino 2.3.0
2021-11-23T06:42:00.165Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:09.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:09.050Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:09.050Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:09.051Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:09.183Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:09.447Z appoptics:patching patched crypto 
2021-11-23T06:42:09.482Z appoptics:patching patched https 
2021-11-23T06:42:09.484Z appoptics:patching patched http 
2021-11-23T06:42:09.568Z appoptics:patching patched pino 2.4.0
2021-11-23T06:42:09.596Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message (40ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (110ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (320ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:18.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:18.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:18.458Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:18.459Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:18.534Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:18.809Z appoptics:patching patched crypto 
2021-11-23T06:42:18.837Z appoptics:patching patched https 
2021-11-23T06:42:18.838Z appoptics:patching patched http 
2021-11-23T06:42:18.887Z appoptics:patching patched pino 2.4.1
2021-11-23T06:42:18.892Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:28.694Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:28.695Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:28.695Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:28.696Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:28.769Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:28.994Z appoptics:patching patched crypto 
2021-11-23T06:42:29.021Z appoptics:patching patched https 
2021-11-23T06:42:29.022Z appoptics:patching patched http 
2021-11-23T06:42:29.082Z appoptics:patching patched pino 2.4.2
2021-11-23T06:42:29.088Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:38.465Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:38.466Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:38.466Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:38.467Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:38.541Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:38.720Z appoptics:patching patched crypto 
2021-11-23T06:42:38.743Z appoptics:patching patched https 
2021-11-23T06:42:38.744Z appoptics:patching patched http 
2021-11-23T06:42:38.794Z appoptics:patching patched pino 2.4.3
2021-11-23T06:42:38.799Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:47.735Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:47.736Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:47.736Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:47.737Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:47.838Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:48.113Z appoptics:patching patched crypto 
2021-11-23T06:42:48.150Z appoptics:patching patched https 
2021-11-23T06:42:48.152Z appoptics:patching patched http 
2021-11-23T06:42:48.242Z appoptics:patching patched pino 2.4.4
2021-11-23T06:42:48.259Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (237ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:42:56.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:42:56.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:42:56.646Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:42:56.647Z appoptics:debug using context provider: ace-context
2021-11-23T06:42:56.730Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:42:56.922Z appoptics:patching patched crypto 
2021-11-23T06:42:56.945Z appoptics:patching patched https 
2021-11-23T06:42:56.946Z appoptics:patching patched http 
2021-11-23T06:42:56.998Z appoptics:patching patched pino 2.5.0
2021-11-23T06:42:57.004Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (220ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:06.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:06.062Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:06.062Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:06.073Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:06.168Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:06.358Z appoptics:patching patched crypto 
2021-11-23T06:43:06.381Z appoptics:patching patched https 
2021-11-23T06:43:06.382Z appoptics:patching patched http 
2021-11-23T06:43:06.437Z appoptics:patching patched pino 2.6.0
2021-11-23T06:43:06.446Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (116ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:15.692Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:15.693Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:15.694Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:15.694Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:15.774Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:15.985Z appoptics:patching patched crypto 
2021-11-23T06:43:16.027Z appoptics:patching patched https 
2021-11-23T06:43:16.028Z appoptics:patching patched http 
2021-11-23T06:43:16.112Z appoptics:patching patched pino 2.6.1
2021-11-23T06:43:16.117Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:24.153Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:24.154Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:24.154Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:24.155Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:24.246Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:24.450Z appoptics:patching patched crypto 
2021-11-23T06:43:24.474Z appoptics:patching patched https 
2021-11-23T06:43:24.474Z appoptics:patching patched http 
2021-11-23T06:43:24.528Z appoptics:patching patched pino 2.7.0
2021-11-23T06:43:24.536Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:33.130Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:33.131Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:33.131Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:33.132Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:33.213Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:33.413Z appoptics:patching patched crypto 
2021-11-23T06:43:33.434Z appoptics:patching patched https 
2021-11-23T06:43:33.435Z appoptics:patching patched http 
2021-11-23T06:43:33.504Z appoptics:patching patched pino 2.7.1
2021-11-23T06:43:33.510Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (237ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:42.273Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:42.274Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:42.274Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:42.275Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:42.349Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:42.513Z appoptics:patching patched crypto 
2021-11-23T06:43:42.536Z appoptics:patching patched https 
2021-11-23T06:43:42.536Z appoptics:patching patched http 
2021-11-23T06:43:42.584Z appoptics:patching patched pino 2.7.2
2021-11-23T06:43:42.590Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (241ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:51.010Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:51.011Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:51.011Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:51.012Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:51.149Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:51.497Z appoptics:patching patched crypto 
2021-11-23T06:43:51.522Z appoptics:patching patched https 
2021-11-23T06:43:51.523Z appoptics:patching patched http 
2021-11-23T06:43:51.576Z appoptics:patching patched pino 2.7.3
2021-11-23T06:43:51.591Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:43:59.633Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:43:59.634Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:43:59.634Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:43:59.634Z appoptics:debug using context provider: ace-context
2021-11-23T06:43:59.717Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:43:59.909Z appoptics:patching patched crypto 
2021-11-23T06:43:59.935Z appoptics:patching patched https 
2021-11-23T06:43:59.936Z appoptics:patching patched http 
2021-11-23T06:43:59.992Z appoptics:patching patched pino 2.7.4
2021-11-23T06:43:59.997Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:09.153Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:09.154Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:09.154Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:09.154Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:09.233Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:09.411Z appoptics:patching patched crypto 
2021-11-23T06:44:09.434Z appoptics:patching patched https 
2021-11-23T06:44:09.435Z appoptics:patching patched http 
2021-11-23T06:44:09.490Z appoptics:patching patched pino 2.7.5
2021-11-23T06:44:09.496Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:18.616Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:18.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:18.617Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:18.618Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:18.690Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:18.858Z appoptics:patching patched crypto 
2021-11-23T06:44:18.880Z appoptics:patching patched https 
2021-11-23T06:44:18.881Z appoptics:patching patched http 
2021-11-23T06:44:18.931Z appoptics:patching patched pino 2.8.0
2021-11-23T06:44:18.936Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:27.168Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:27.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:27.169Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:27.170Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:27.243Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:27.423Z appoptics:patching patched crypto 
2021-11-23T06:44:27.447Z appoptics:patching patched https 
2021-11-23T06:44:27.448Z appoptics:patching patched http 
2021-11-23T06:44:27.509Z appoptics:patching patched pino 2.8.1
2021-11-23T06:44:27.514Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (203ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:36.247Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:36.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:36.248Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:36.249Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:36.323Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:36.496Z appoptics:patching patched crypto 
2021-11-23T06:44:36.527Z appoptics:patching patched https 
2021-11-23T06:44:36.528Z appoptics:patching patched http 
2021-11-23T06:44:36.590Z appoptics:patching patched pino 2.8.2
2021-11-23T06:44:36.595Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:44.972Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:44.973Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:44.973Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:44.974Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:45.081Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:45.256Z appoptics:patching patched crypto 
2021-11-23T06:44:45.279Z appoptics:patching patched https 
2021-11-23T06:44:45.280Z appoptics:patching patched http 
2021-11-23T06:44:45.346Z appoptics:patching patched pino 2.8.3
2021-11-23T06:44:45.352Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1088 packages in 10s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:44:56.286Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:44:56.288Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:44:56.288Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:44:56.288Z appoptics:debug using context provider: ace-context
2021-11-23T06:44:56.365Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:44:56.536Z appoptics:patching patched crypto 
2021-11-23T06:44:56.558Z appoptics:patching patched https 
2021-11-23T06:44:56.558Z appoptics:patching patched http 
2021-11-23T06:44:56.619Z appoptics:patching patched pino 2.9.0
2021-11-23T06:44:56.625Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (204ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:45:04.644Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:45:04.645Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:45:04.645Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:45:04.646Z appoptics:debug using context provider: ace-context
2021-11-23T06:45:04.724Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:45:04.913Z appoptics:patching patched crypto 
2021-11-23T06:45:04.936Z appoptics:patching patched https 
2021-11-23T06:45:04.936Z appoptics:patching patched http 
2021-11-23T06:45:04.997Z appoptics:patching patched pino 2.10.0
2021-11-23T06:45:05.002Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:45:14.256Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:45:14.257Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:45:14.258Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:45:14.259Z appoptics:debug using context provider: ace-context
2021-11-23T06:45:14.362Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:45:14.552Z appoptics:patching patched crypto 
2021-11-23T06:45:14.577Z appoptics:patching patched https 
2021-11-23T06:45:14.577Z appoptics:patching patched http 
2021-11-23T06:45:14.650Z appoptics:patching patched pino 2.10.1
2021-11-23T06:45:14.657Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (220ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:45:23.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:45:23.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:45:23.688Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:45:23.689Z appoptics:debug using context provider: ace-context
2021-11-23T06:45:23.763Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:45:23.961Z appoptics:patching patched crypto 
2021-11-23T06:45:23.988Z appoptics:patching patched https 
2021-11-23T06:45:23.988Z appoptics:patching patched http 
2021-11-23T06:45:24.057Z appoptics:patching patched pino 2.11.0
2021-11-23T06:45:24.063Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:45:31.882Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:45:31.883Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:45:31.883Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:45:31.884Z appoptics:debug using context provider: ace-context
2021-11-23T06:45:31.979Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:45:32.165Z appoptics:patching patched crypto 
2021-11-23T06:45:32.188Z appoptics:patching patched https 
2021-11-23T06:45:32.189Z appoptics:patching patched http 
2021-11-23T06:45:32.266Z appoptics:patching patched pino 2.12.0
2021-11-23T06:45:32.272Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1088 packages in 33s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:05.856Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:05.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:05.857Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:05.858Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:05.934Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:06.108Z appoptics:patching patched crypto 
2021-11-23T06:46:06.130Z appoptics:patching patched https 
2021-11-23T06:46:06.131Z appoptics:patching patched http 
2021-11-23T06:46:06.193Z appoptics:patching patched pino 2.12.1
2021-11-23T06:46:06.198Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:15.495Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:15.496Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:15.496Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:15.497Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:15.573Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:15.736Z appoptics:patching patched crypto 
2021-11-23T06:46:15.757Z appoptics:patching patched https 
2021-11-23T06:46:15.758Z appoptics:patching patched http 
2021-11-23T06:46:15.817Z appoptics:patching patched pino 2.12.2
2021-11-23T06:46:15.822Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (222ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:24.401Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:24.405Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:24.405Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:24.407Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:24.520Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:24.788Z appoptics:patching patched crypto 
2021-11-23T06:46:24.813Z appoptics:patching patched https 
2021-11-23T06:46:24.814Z appoptics:patching patched http 
2021-11-23T06:46:24.874Z appoptics:patching patched pino 2.12.3
2021-11-23T06:46:24.880Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:32.997Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:32.998Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:32.998Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:32.999Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:33.091Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:33.285Z appoptics:patching patched crypto 
2021-11-23T06:46:33.307Z appoptics:patching patched https 
2021-11-23T06:46:33.308Z appoptics:patching patched http 
2021-11-23T06:46:33.371Z appoptics:patching patched pino 2.12.4
2021-11-23T06:46:33.377Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:42.429Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:42.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:42.430Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:42.431Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:42.510Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:42.675Z appoptics:patching patched crypto 
2021-11-23T06:46:42.695Z appoptics:patching patched https 
2021-11-23T06:46:42.696Z appoptics:patching patched http 
2021-11-23T06:46:42.756Z appoptics:patching patched pino 2.13.0
2021-11-23T06:46:42.762Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:46:52.215Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:46:52.216Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:46:52.217Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:46:52.218Z appoptics:debug using context provider: ace-context
2021-11-23T06:46:52.295Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:46:52.461Z appoptics:patching patched crypto 
2021-11-23T06:46:52.481Z appoptics:patching patched https 
2021-11-23T06:46:52.482Z appoptics:patching patched http 
2021-11-23T06:46:52.538Z appoptics:patching patched pino 2.13.2
2021-11-23T06:46:52.544Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (206ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:01.027Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:01.028Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:01.028Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:01.029Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:01.131Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:01.340Z appoptics:patching patched crypto 
2021-11-23T06:47:01.364Z appoptics:patching patched https 
2021-11-23T06:47:01.365Z appoptics:patching patched http 
2021-11-23T06:47:01.435Z appoptics:patching patched pino 2.14.0
2021-11-23T06:47:01.441Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:10.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:10.276Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:10.276Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:10.277Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:10.356Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:10.538Z appoptics:patching patched crypto 
2021-11-23T06:47:10.562Z appoptics:patching patched https 
2021-11-23T06:47:10.563Z appoptics:patching patched http 
2021-11-23T06:47:10.627Z appoptics:patching patched pino 2.15.0
2021-11-23T06:47:10.633Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (252ms)


added 1 package, removed 1 package, changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:19.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:19.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:19.585Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:19.586Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:19.689Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:19.869Z appoptics:patching patched crypto 
2021-11-23T06:47:19.892Z appoptics:patching patched https 
2021-11-23T06:47:19.893Z appoptics:patching patched http 
2021-11-23T06:47:19.922Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:47:19.923Z appoptics:patching patched fs 
2021-11-23T06:47:19.964Z appoptics:patching patched pino 2.16.0
2021-11-23T06:47:19.970Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


added 1 package, removed 1 package, changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:28.213Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:28.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:28.214Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:28.214Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:28.329Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:28.544Z appoptics:patching patched crypto 
2021-11-23T06:47:28.574Z appoptics:patching patched https 
2021-11-23T06:47:28.575Z appoptics:patching patched http 
2021-11-23T06:47:28.613Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:47:28.614Z appoptics:patching patched fs 
2021-11-23T06:47:28.685Z appoptics:patching patched pino 3.0.0
2021-11-23T06:47:28.695Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message (56ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (107ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (379ms)


added 1 package, removed 1 package, changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:37.205Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:37.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:37.206Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:37.207Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:37.278Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:37.446Z appoptics:patching patched crypto 
2021-11-23T06:47:37.468Z appoptics:patching patched https 
2021-11-23T06:47:37.469Z appoptics:patching patched http 
2021-11-23T06:47:37.499Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:47:37.500Z appoptics:patching patched fs 
2021-11-23T06:47:37.527Z appoptics:patching patched pino 3.0.1
2021-11-23T06:47:37.533Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (220ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:47.174Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:47.175Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:47.175Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:47.176Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:47.252Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:47.437Z appoptics:patching patched crypto 
2021-11-23T06:47:47.459Z appoptics:patching patched https 
2021-11-23T06:47:47.460Z appoptics:patching patched http 
2021-11-23T06:47:47.486Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:47:47.487Z appoptics:patching patched fs 
2021-11-23T06:47:47.516Z appoptics:patching patched pino 3.0.2
2021-11-23T06:47:47.522Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:47:56.940Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:47:56.941Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:47:56.941Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:47:56.941Z appoptics:debug using context provider: ace-context
2021-11-23T06:47:57.020Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:47:57.224Z appoptics:patching patched crypto 
2021-11-23T06:47:57.246Z appoptics:patching patched https 
2021-11-23T06:47:57.246Z appoptics:patching patched http 
2021-11-23T06:47:57.271Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:47:57.272Z appoptics:patching patched fs 
2021-11-23T06:47:57.300Z appoptics:patching patched pino 3.0.3
2021-11-23T06:47:57.306Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:06.434Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:06.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:06.436Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:06.437Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:06.585Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:06.915Z appoptics:patching patched crypto 
2021-11-23T06:48:06.959Z appoptics:patching patched https 
2021-11-23T06:48:06.960Z appoptics:patching patched http 
2021-11-23T06:48:07.004Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:07.004Z appoptics:patching patched fs 
2021-11-23T06:48:07.065Z appoptics:patching patched pino 3.0.4
2021-11-23T06:48:07.075Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (112ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (317ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:15.289Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:15.290Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:15.290Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:15.290Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:15.364Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:15.528Z appoptics:patching patched crypto 
2021-11-23T06:48:15.550Z appoptics:patching patched https 
2021-11-23T06:48:15.551Z appoptics:patching patched http 
2021-11-23T06:48:15.577Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:15.577Z appoptics:patching patched fs 
2021-11-23T06:48:15.603Z appoptics:patching patched pino 3.0.5
2021-11-23T06:48:15.609Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:24.720Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:24.721Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:24.721Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:24.722Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:24.795Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:24.974Z appoptics:patching patched crypto 
2021-11-23T06:48:24.996Z appoptics:patching patched https 
2021-11-23T06:48:24.997Z appoptics:patching patched http 
2021-11-23T06:48:25.022Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:25.022Z appoptics:patching patched fs 
2021-11-23T06:48:25.049Z appoptics:patching patched pino 3.0.6
2021-11-23T06:48:25.056Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (202ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:33.827Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:33.828Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:33.828Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:33.829Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:33.909Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:34.102Z appoptics:patching patched crypto 
2021-11-23T06:48:34.126Z appoptics:patching patched https 
2021-11-23T06:48:34.127Z appoptics:patching patched http 
2021-11-23T06:48:34.155Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:34.156Z appoptics:patching patched fs 
2021-11-23T06:48:34.184Z appoptics:patching patched pino 3.0.7
2021-11-23T06:48:34.189Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:42.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:42.410Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:42.410Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:42.411Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:42.494Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:42.670Z appoptics:patching patched crypto 
2021-11-23T06:48:42.694Z appoptics:patching patched https 
2021-11-23T06:48:42.695Z appoptics:patching patched http 
2021-11-23T06:48:42.727Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:42.727Z appoptics:patching patched fs 
2021-11-23T06:48:42.755Z appoptics:patching patched pino 3.1.0
2021-11-23T06:48:42.762Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:48:51.234Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:48:51.235Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:48:51.235Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:48:51.236Z appoptics:debug using context provider: ace-context
2021-11-23T06:48:51.309Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:48:51.519Z appoptics:patching patched crypto 
2021-11-23T06:48:51.542Z appoptics:patching patched https 
2021-11-23T06:48:51.543Z appoptics:patching patched http 
2021-11-23T06:48:51.571Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:48:51.571Z appoptics:patching patched fs 
2021-11-23T06:48:51.604Z appoptics:patching patched pino 3.1.1
2021-11-23T06:48:51.610Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:00.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:00.050Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:00.050Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:00.051Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:00.135Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:00.337Z appoptics:patching patched crypto 
2021-11-23T06:49:00.364Z appoptics:patching patched https 
2021-11-23T06:49:00.365Z appoptics:patching patched http 
2021-11-23T06:49:00.393Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:00.393Z appoptics:patching patched fs 
2021-11-23T06:49:00.420Z appoptics:patching patched pino 3.1.2
2021-11-23T06:49:00.425Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:08.392Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:08.393Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:08.393Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:08.394Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:08.529Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:08.714Z appoptics:patching patched crypto 
2021-11-23T06:49:08.737Z appoptics:patching patched https 
2021-11-23T06:49:08.738Z appoptics:patching patched http 
2021-11-23T06:49:08.766Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:08.767Z appoptics:patching patched fs 
2021-11-23T06:49:08.798Z appoptics:patching patched pino 3.1.3
2021-11-23T06:49:08.804Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:17.654Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:17.655Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:17.655Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:17.656Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:17.733Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:17.899Z appoptics:patching patched crypto 
2021-11-23T06:49:17.922Z appoptics:patching patched https 
2021-11-23T06:49:17.923Z appoptics:patching patched http 
2021-11-23T06:49:17.949Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:17.950Z appoptics:patching patched fs 
2021-11-23T06:49:17.987Z appoptics:patching patched pino 3.2.0
2021-11-23T06:49:17.993Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:26.735Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:26.736Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:26.736Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:26.737Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:26.808Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:26.975Z appoptics:patching patched crypto 
2021-11-23T06:49:26.996Z appoptics:patching patched https 
2021-11-23T06:49:26.997Z appoptics:patching patched http 
2021-11-23T06:49:27.021Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:27.021Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:999:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1097:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1149:10)
    at Module.load (node:internal/modules/cjs/loader:975:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:999:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1097:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1149:10)
    at Module.load (node:internal/modules/cjs/loader:975:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:999:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at Object.exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:34.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:34.411Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:34.411Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:34.411Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:34.523Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:34.728Z appoptics:patching patched crypto 
2021-11-23T06:49:34.753Z appoptics:patching patched https 
2021-11-23T06:49:34.754Z appoptics:patching patched http 
2021-11-23T06:49:34.781Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:34.782Z appoptics:patching patched fs 
2021-11-23T06:49:34.821Z appoptics:patching patched pino 3.3.1
2021-11-23T06:49:34.827Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:43.479Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:43.480Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:43.480Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:43.481Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:43.560Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:43.725Z appoptics:patching patched crypto 
2021-11-23T06:49:43.748Z appoptics:patching patched https 
2021-11-23T06:49:43.749Z appoptics:patching patched http 
2021-11-23T06:49:43.773Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:43.773Z appoptics:patching patched fs 
2021-11-23T06:49:43.804Z appoptics:patching patched pino 3.3.2
2021-11-23T06:49:43.809Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


added 2 packages, changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:49:52.558Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:49:52.559Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:49:52.559Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:49:52.559Z appoptics:debug using context provider: ace-context
2021-11-23T06:49:52.641Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:49:52.827Z appoptics:patching patched crypto 
2021-11-23T06:49:52.849Z appoptics:patching patched https 
2021-11-23T06:49:52.849Z appoptics:patching patched http 
2021-11-23T06:49:52.874Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:49:52.874Z appoptics:patching patched fs 
2021-11-23T06:49:52.907Z appoptics:patching patched pino 3.4.0
2021-11-23T06:49:52.913Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (204ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:50:01.135Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:50:01.136Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:50:01.136Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:50:01.137Z appoptics:debug using context provider: ace-context
2021-11-23T06:50:01.231Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:50:01.446Z appoptics:patching patched crypto 
2021-11-23T06:50:01.480Z appoptics:patching patched https 
2021-11-23T06:50:01.481Z appoptics:patching patched http 
2021-11-23T06:50:01.509Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:50:01.510Z appoptics:patching patched fs 
2021-11-23T06:50:01.544Z appoptics:patching patched pino 4.0.0
2021-11-23T06:50:01.549Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:50:10.414Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:50:10.414Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:50:10.415Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:50:10.415Z appoptics:debug using context provider: ace-context
2021-11-23T06:50:10.498Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:50:10.665Z appoptics:patching patched crypto 
2021-11-23T06:50:10.688Z appoptics:patching patched https 
2021-11-23T06:50:10.688Z appoptics:patching patched http 
2021-11-23T06:50:10.722Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:50:10.723Z appoptics:patching patched fs 
2021-11-23T06:50:10.758Z appoptics:patching patched pino 4.0.1
2021-11-23T06:50:10.764Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:50:19.305Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:50:19.306Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:50:19.306Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:50:19.307Z appoptics:debug using context provider: ace-context
2021-11-23T06:50:19.381Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:50:19.552Z appoptics:patching patched crypto 
2021-11-23T06:50:19.574Z appoptics:patching patched https 
2021-11-23T06:50:19.575Z appoptics:patching patched http 
2021-11-23T06:50:19.604Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:50:19.605Z appoptics:patching patched fs 
2021-11-23T06:50:19.641Z appoptics:patching patched pino 4.0.2
2021-11-23T06:50:19.647Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:50:28.342Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:50:28.342Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:50:28.342Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:50:28.343Z appoptics:debug using context provider: ace-context
2021-11-23T06:50:28.441Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:50:28.637Z appoptics:patching patched crypto 
2021-11-23T06:50:28.661Z appoptics:patching patched https 
2021-11-23T06:50:28.661Z appoptics:patching patched http 
2021-11-23T06:50:28.686Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:50:28.686Z appoptics:patching patched fs 
2021-11-23T06:50:28.721Z appoptics:patching patched pino 4.0.3
2021-11-23T06:50:28.725Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (206ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:50:36.503Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:50:36.504Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:50:36.504Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:50:36.505Z appoptics:debug using context provider: ace-context
2021-11-23T06:50:36.580Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:50:36.745Z appoptics:patching patched crypto 
2021-11-23T06:50:36.768Z appoptics:patching patched https 
2021-11-23T06:50:36.769Z appoptics:patching patched http 
2021-11-23T06:50:36.793Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:50:36.794Z appoptics:patching patched fs 
2021-11-23T06:50:36.826Z appoptics:patching patched pino 4.1.0
2021-11-23T06:50:36.831Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1090 packages in 28s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:06.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:06.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:06.043Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:06.044Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:06.136Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:06.348Z appoptics:patching patched crypto 
2021-11-23T06:51:06.372Z appoptics:patching patched https 
2021-11-23T06:51:06.373Z appoptics:patching patched http 
2021-11-23T06:51:06.405Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:06.406Z appoptics:patching patched fs 
2021-11-23T06:51:06.436Z appoptics:patching patched pino 4.1.1
2021-11-23T06:51:06.441Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:15.014Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:15.017Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:15.017Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:15.018Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:15.180Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:15.488Z appoptics:patching patched crypto 
2021-11-23T06:51:15.534Z appoptics:patching patched https 
2021-11-23T06:51:15.534Z appoptics:patching patched http 
2021-11-23T06:51:15.573Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:15.574Z appoptics:patching patched fs 
2021-11-23T06:51:15.630Z appoptics:patching patched pino 4.1.2
2021-11-23T06:51:15.638Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (307ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:24.100Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:24.101Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:24.101Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:24.102Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:24.179Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:24.413Z appoptics:patching patched crypto 
2021-11-23T06:51:24.449Z appoptics:patching patched https 
2021-11-23T06:51:24.449Z appoptics:patching patched http 
2021-11-23T06:51:24.487Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:24.488Z appoptics:patching patched fs 
2021-11-23T06:51:24.523Z appoptics:patching patched pino 4.2.0
2021-11-23T06:51:24.529Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:33.215Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:33.216Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:33.216Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:33.217Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:33.321Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:33.517Z appoptics:patching patched crypto 
2021-11-23T06:51:33.541Z appoptics:patching patched https 
2021-11-23T06:51:33.542Z appoptics:patching patched http 
2021-11-23T06:51:33.568Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:33.568Z appoptics:patching patched fs 
2021-11-23T06:51:33.599Z appoptics:patching patched pino 4.2.1
2021-11-23T06:51:33.605Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:42.221Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:42.222Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:42.222Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:42.223Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:42.309Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:42.476Z appoptics:patching patched crypto 
2021-11-23T06:51:42.501Z appoptics:patching patched https 
2021-11-23T06:51:42.502Z appoptics:patching patched http 
2021-11-23T06:51:42.532Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:42.533Z appoptics:patching patched fs 
2021-11-23T06:51:42.565Z appoptics:patching patched pino 4.2.2
2021-11-23T06:51:42.571Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:50.544Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:50.545Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:50.545Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:50.545Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:50.626Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:50.795Z appoptics:patching patched crypto 
2021-11-23T06:51:50.816Z appoptics:patching patched https 
2021-11-23T06:51:50.817Z appoptics:patching patched http 
2021-11-23T06:51:50.840Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:50.841Z appoptics:patching patched fs 
2021-11-23T06:51:50.873Z appoptics:patching patched pino 4.2.3
2021-11-23T06:51:50.878Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (206ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:51:59.574Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:51:59.575Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:51:59.575Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:51:59.576Z appoptics:debug using context provider: ace-context
2021-11-23T06:51:59.665Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:51:59.907Z appoptics:patching patched crypto 
2021-11-23T06:51:59.932Z appoptics:patching patched https 
2021-11-23T06:51:59.932Z appoptics:patching patched http 
2021-11-23T06:51:59.961Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:51:59.962Z appoptics:patching patched fs 
2021-11-23T06:52:00.016Z appoptics:patching patched pino 4.2.4
2021-11-23T06:52:00.023Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (244ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:09.009Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:09.010Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:09.010Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:09.011Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:09.107Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:09.323Z appoptics:patching patched crypto 
2021-11-23T06:52:09.348Z appoptics:patching patched https 
2021-11-23T06:52:09.348Z appoptics:patching patched http 
2021-11-23T06:52:09.378Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:09.379Z appoptics:patching patched fs 
2021-11-23T06:52:09.419Z appoptics:patching patched pino 4.3.0
2021-11-23T06:52:09.425Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:17.865Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:17.866Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:17.866Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:17.867Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:17.957Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:18.153Z appoptics:patching patched crypto 
2021-11-23T06:52:18.175Z appoptics:patching patched https 
2021-11-23T06:52:18.179Z appoptics:patching patched http 
2021-11-23T06:52:18.204Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:18.205Z appoptics:patching patched fs 
2021-11-23T06:52:18.241Z appoptics:patching patched pino 4.4.0
2021-11-23T06:52:18.247Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:26.796Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:26.797Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:26.797Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:26.797Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:26.878Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:27.055Z appoptics:patching patched crypto 
2021-11-23T06:52:27.079Z appoptics:patching patched https 
2021-11-23T06:52:27.080Z appoptics:patching patched http 
2021-11-23T06:52:27.108Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:27.109Z appoptics:patching patched fs 
2021-11-23T06:52:27.141Z appoptics:patching patched pino 4.5.0
2021-11-23T06:52:27.148Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (227ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:35.816Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:35.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:35.817Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:35.818Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:35.904Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:36.191Z appoptics:patching patched crypto 
2021-11-23T06:52:36.214Z appoptics:patching patched https 
2021-11-23T06:52:36.215Z appoptics:patching patched http 
2021-11-23T06:52:36.246Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:36.247Z appoptics:patching patched fs 
2021-11-23T06:52:36.278Z appoptics:patching patched pino 4.5.1
2021-11-23T06:52:36.284Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:44.469Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:44.470Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:44.470Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:44.472Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:44.652Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:45.033Z appoptics:patching patched crypto 
2021-11-23T06:52:45.067Z appoptics:patching patched https 
2021-11-23T06:52:45.075Z appoptics:patching patched http 
2021-11-23T06:52:45.121Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:45.125Z appoptics:patching patched fs 
2021-11-23T06:52:45.186Z appoptics:patching patched pino 4.5.2
2021-11-23T06:52:45.190Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (276ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:52:53.244Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:52:53.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:52:53.245Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:52:53.245Z appoptics:debug using context provider: ace-context
2021-11-23T06:52:53.320Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:52:53.489Z appoptics:patching patched crypto 
2021-11-23T06:52:53.513Z appoptics:patching patched https 
2021-11-23T06:52:53.514Z appoptics:patching patched http 
2021-11-23T06:52:53.541Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:52:53.541Z appoptics:patching patched fs 
2021-11-23T06:52:53.573Z appoptics:patching patched pino 4.5.3
2021-11-23T06:52:53.578Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:02.499Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:02.500Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:02.500Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:02.501Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:02.577Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:02.749Z appoptics:patching patched crypto 
2021-11-23T06:53:02.773Z appoptics:patching patched https 
2021-11-23T06:53:02.774Z appoptics:patching patched http 
2021-11-23T06:53:02.800Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:02.801Z appoptics:patching patched fs 
2021-11-23T06:53:02.832Z appoptics:patching patched pino 4.5.4
2021-11-23T06:53:02.837Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1090 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:12.134Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:12.135Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:12.135Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:12.136Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:12.217Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:12.416Z appoptics:patching patched crypto 
2021-11-23T06:53:12.440Z appoptics:patching patched https 
2021-11-23T06:53:12.441Z appoptics:patching patched http 
2021-11-23T06:53:12.477Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:12.477Z appoptics:patching patched fs 
2021-11-23T06:53:12.512Z appoptics:patching patched pino 4.6.0
2021-11-23T06:53:12.518Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:21.027Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:21.027Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:21.027Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:21.029Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:21.102Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:21.279Z appoptics:patching patched crypto 
2021-11-23T06:53:21.304Z appoptics:patching patched https 
2021-11-23T06:53:21.305Z appoptics:patching patched http 
2021-11-23T06:53:21.330Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:21.330Z appoptics:patching patched fs 
2021-11-23T06:53:21.365Z appoptics:patching patched pino 4.7.0
2021-11-23T06:53:21.372Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:29.736Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:29.737Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:29.737Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:29.738Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:29.822Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:29.995Z appoptics:patching patched crypto 
2021-11-23T06:53:30.022Z appoptics:patching patched https 
2021-11-23T06:53:30.023Z appoptics:patching patched http 
2021-11-23T06:53:30.051Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:30.052Z appoptics:patching patched fs 
2021-11-23T06:53:30.096Z appoptics:patching patched pino 4.7.1
2021-11-23T06:53:30.101Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1089 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:38.253Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:38.254Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:38.254Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:38.255Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:38.343Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:38.527Z appoptics:patching patched crypto 
2021-11-23T06:53:38.550Z appoptics:patching patched https 
2021-11-23T06:53:38.551Z appoptics:patching patched http 
2021-11-23T06:53:38.578Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:38.579Z appoptics:patching patched fs 
2021-11-23T06:53:38.623Z appoptics:patching patched pino 4.7.2
2021-11-23T06:53:38.629Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1089 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:46.474Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:46.474Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:46.474Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:46.475Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:46.546Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:46.719Z appoptics:patching patched crypto 
2021-11-23T06:53:46.742Z appoptics:patching patched https 
2021-11-23T06:53:46.743Z appoptics:patching patched http 
2021-11-23T06:53:46.770Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:46.771Z appoptics:patching patched fs 
2021-11-23T06:53:46.819Z appoptics:patching patched pino 4.7.3
2021-11-23T06:53:46.825Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:53:55.815Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:53:55.816Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:53:55.816Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:53:55.817Z appoptics:debug using context provider: ace-context
2021-11-23T06:53:55.902Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:53:56.082Z appoptics:patching patched crypto 
2021-11-23T06:53:56.104Z appoptics:patching patched https 
2021-11-23T06:53:56.105Z appoptics:patching patched http 
2021-11-23T06:53:56.131Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:53:56.132Z appoptics:patching patched fs 
2021-11-23T06:53:56.175Z appoptics:patching patched pino 4.8.0
2021-11-23T06:53:56.180Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:04.834Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:04.835Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:04.835Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:04.836Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:04.919Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:05.107Z appoptics:patching patched crypto 
2021-11-23T06:54:05.130Z appoptics:patching patched https 
2021-11-23T06:54:05.131Z appoptics:patching patched http 
2021-11-23T06:54:05.155Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:05.156Z appoptics:patching patched fs 
2021-11-23T06:54:05.197Z appoptics:patching patched pino 4.8.1
2021-11-23T06:54:05.202Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:14.221Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:14.221Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:14.222Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:14.222Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:14.435Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:14.768Z appoptics:patching patched crypto 
2021-11-23T06:54:14.803Z appoptics:patching patched https 
2021-11-23T06:54:14.805Z appoptics:patching patched http 
2021-11-23T06:54:14.841Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:14.842Z appoptics:patching patched fs 
2021-11-23T06:54:14.899Z appoptics:patching patched pino 4.8.2
2021-11-23T06:54:14.906Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1089 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:22.551Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:22.552Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:22.552Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:22.553Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:22.659Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:22.847Z appoptics:patching patched crypto 
2021-11-23T06:54:22.871Z appoptics:patching patched https 
2021-11-23T06:54:22.872Z appoptics:patching patched http 
2021-11-23T06:54:22.900Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:22.900Z appoptics:patching patched fs 
2021-11-23T06:54:22.940Z appoptics:patching patched pino 4.9.0
2021-11-23T06:54:22.944Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:32.105Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:32.106Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:32.106Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:32.107Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:32.180Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:32.365Z appoptics:patching patched crypto 
2021-11-23T06:54:32.392Z appoptics:patching patched https 
2021-11-23T06:54:32.397Z appoptics:patching patched http 
2021-11-23T06:54:32.423Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:32.424Z appoptics:patching patched fs 
2021-11-23T06:54:32.469Z appoptics:patching patched pino 4.10.0
2021-11-23T06:54:32.474Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:41.183Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:41.184Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:41.184Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:41.185Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:41.255Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:41.421Z appoptics:patching patched crypto 
2021-11-23T06:54:41.445Z appoptics:patching patched https 
2021-11-23T06:54:41.446Z appoptics:patching patched http 
2021-11-23T06:54:41.471Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:41.472Z appoptics:patching patched fs 
2021-11-23T06:54:41.513Z appoptics:patching patched pino 4.10.1
2021-11-23T06:54:41.518Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1089 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:49.395Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:49.396Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:49.396Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:49.398Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:49.471Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:49.632Z appoptics:patching patched crypto 
2021-11-23T06:54:49.653Z appoptics:patching patched https 
2021-11-23T06:54:49.654Z appoptics:patching patched http 
2021-11-23T06:54:49.687Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:49.687Z appoptics:patching patched fs 
2021-11-23T06:54:49.726Z appoptics:patching patched pino 4.10.2
2021-11-23T06:54:49.733Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 2 packages, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:54:58.228Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:54:58.229Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:54:58.229Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:54:58.230Z appoptics:debug using context provider: ace-context
2021-11-23T06:54:58.350Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:54:58.555Z appoptics:patching patched crypto 
2021-11-23T06:54:58.582Z appoptics:patching patched https 
2021-11-23T06:54:58.582Z appoptics:patching patched http 
2021-11-23T06:54:58.608Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:54:58.608Z appoptics:patching patched fs 
2021-11-23T06:54:58.651Z appoptics:patching patched pino 4.10.3
2021-11-23T06:54:58.657Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:55:07.459Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:55:07.461Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:55:07.461Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:55:07.462Z appoptics:debug using context provider: ace-context
2021-11-23T06:55:07.541Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:55:07.722Z appoptics:patching patched crypto 
2021-11-23T06:55:07.747Z appoptics:patching patched https 
2021-11-23T06:55:07.747Z appoptics:patching patched http 
2021-11-23T06:55:07.773Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:55:07.774Z appoptics:patching patched fs 
2021-11-23T06:55:07.812Z appoptics:patching patched pino 4.10.4
2021-11-23T06:55:07.818Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1089 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:55:16.101Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:55:16.102Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:55:16.102Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:55:16.103Z appoptics:debug using context provider: ace-context
2021-11-23T06:55:16.181Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:55:16.352Z appoptics:patching patched crypto 
2021-11-23T06:55:16.376Z appoptics:patching patched https 
2021-11-23T06:55:16.377Z appoptics:patching patched http 
2021-11-23T06:55:16.406Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:55:16.407Z appoptics:patching patched fs 
2021-11-23T06:55:16.455Z appoptics:patching patched pino 4.11.0
2021-11-23T06:55:16.463Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (229ms)


added 1 package, changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:55:25.518Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:55:25.519Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:55:25.519Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:55:25.519Z appoptics:debug using context provider: ace-context
2021-11-23T06:55:25.600Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:55:25.784Z appoptics:patching patched crypto 
2021-11-23T06:55:25.809Z appoptics:patching patched https 
2021-11-23T06:55:25.810Z appoptics:patching patched http 
2021-11-23T06:55:25.839Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:55:25.839Z appoptics:patching patched fs 
2021-11-23T06:55:25.878Z appoptics:patching patched pino 4.12.0
2021-11-23T06:55:25.884Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:55:34.649Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:55:34.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:55:34.650Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:55:34.651Z appoptics:debug using context provider: ace-context
2021-11-23T06:55:34.725Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:55:34.939Z appoptics:patching patched crypto 
2021-11-23T06:55:34.962Z appoptics:patching patched https 
2021-11-23T06:55:34.963Z appoptics:patching patched http 
2021-11-23T06:55:34.989Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:55:34.990Z appoptics:patching patched fs 
2021-11-23T06:55:35.028Z appoptics:patching patched pino 4.13.0
2021-11-23T06:55:35.034Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 2 packages, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:55:43.603Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:55:43.604Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:55:43.604Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:55:43.605Z appoptics:debug using context provider: ace-context
2021-11-23T06:55:43.724Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:55:44.170Z appoptics:patching patched crypto 
2021-11-23T06:55:44.197Z appoptics:patching patched https 
2021-11-23T06:55:44.197Z appoptics:patching patched http 
2021-11-23T06:55:44.237Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:55:44.238Z appoptics:patching patched fs 
2021-11-23T06:55:44.286Z appoptics:patching patched pino 4.14.0
2021-11-23T06:55:44.299Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message (53ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (356ms)


changed 1 package, and audited 1090 packages in 26s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:10.961Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:10.962Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:10.962Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:10.962Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:11.041Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:11.224Z appoptics:patching patched crypto 
2021-11-23T06:56:11.247Z appoptics:patching patched https 
2021-11-23T06:56:11.248Z appoptics:patching patched http 
2021-11-23T06:56:11.275Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:11.276Z appoptics:patching patched fs 
2021-11-23T06:56:11.316Z appoptics:patching patched pino 4.15.0
2021-11-23T06:56:11.321Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:20.458Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:20.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:20.458Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:20.459Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:20.555Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:20.840Z appoptics:patching patched crypto 
2021-11-23T06:56:20.884Z appoptics:patching patched https 
2021-11-23T06:56:20.884Z appoptics:patching patched http 
2021-11-23T06:56:20.935Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:20.937Z appoptics:patching patched fs 
2021-11-23T06:56:21.030Z appoptics:patching patched pino 4.15.1
2021-11-23T06:56:21.044Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message (41ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (304ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:29.683Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:29.684Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:29.684Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:29.685Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:29.760Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:29.931Z appoptics:patching patched crypto 
2021-11-23T06:56:29.955Z appoptics:patching patched https 
2021-11-23T06:56:29.956Z appoptics:patching patched http 
2021-11-23T06:56:29.983Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:29.984Z appoptics:patching patched fs 
2021-11-23T06:56:30.021Z appoptics:patching patched pino 4.15.2
2021-11-23T06:56:30.026Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 2 packages, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:38.654Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:38.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:38.654Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:38.655Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:38.734Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:38.932Z appoptics:patching patched crypto 
2021-11-23T06:56:38.957Z appoptics:patching patched https 
2021-11-23T06:56:38.958Z appoptics:patching patched http 
2021-11-23T06:56:38.987Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:38.988Z appoptics:patching patched fs 
2021-11-23T06:56:39.036Z appoptics:patching patched pino 4.15.3
2021-11-23T06:56:39.041Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (224ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:47.601Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:47.601Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:47.602Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:47.602Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:47.682Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:47.861Z appoptics:patching patched crypto 
2021-11-23T06:56:47.884Z appoptics:patching patched https 
2021-11-23T06:56:47.884Z appoptics:patching patched http 
2021-11-23T06:56:47.912Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:47.912Z appoptics:patching patched fs 
2021-11-23T06:56:47.951Z appoptics:patching patched pino 4.15.4
2021-11-23T06:56:47.957Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:56:55.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:56:55.910Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:56:55.910Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:56:55.911Z appoptics:debug using context provider: ace-context
2021-11-23T06:56:55.996Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:56:56.219Z appoptics:patching patched crypto 
2021-11-23T06:56:56.241Z appoptics:patching patched https 
2021-11-23T06:56:56.242Z appoptics:patching patched http 
2021-11-23T06:56:56.270Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:56:56.270Z appoptics:patching patched fs 
2021-11-23T06:56:56.308Z appoptics:patching patched pino 4.16.0
2021-11-23T06:56:56.313Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:05.262Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:05.262Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:05.263Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:05.263Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:05.362Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:05.552Z appoptics:patching patched crypto 
2021-11-23T06:57:05.583Z appoptics:patching patched https 
2021-11-23T06:57:05.583Z appoptics:patching patched http 
2021-11-23T06:57:05.611Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:05.611Z appoptics:patching patched fs 
2021-11-23T06:57:05.649Z appoptics:patching patched pino 4.16.1
2021-11-23T06:57:05.654Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1090 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:15.518Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:15.519Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:15.519Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:15.519Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:15.603Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:15.777Z appoptics:patching patched crypto 
2021-11-23T06:57:15.805Z appoptics:patching patched https 
2021-11-23T06:57:15.808Z appoptics:patching patched http 
2021-11-23T06:57:15.838Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:15.839Z appoptics:patching patched fs 
2021-11-23T06:57:15.880Z appoptics:patching patched pino 4.17.0
2021-11-23T06:57:15.886Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:24.451Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:24.451Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:24.452Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:24.457Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:24.620Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:24.823Z appoptics:patching patched crypto 
2021-11-23T06:57:24.845Z appoptics:patching patched https 
2021-11-23T06:57:24.845Z appoptics:patching patched http 
2021-11-23T06:57:24.873Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:24.874Z appoptics:patching patched fs 
2021-11-23T06:57:24.919Z appoptics:patching patched pino 4.17.1
2021-11-23T06:57:24.926Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (266ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:33.277Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:33.278Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:33.278Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:33.279Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:33.354Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:33.525Z appoptics:patching patched crypto 
2021-11-23T06:57:33.548Z appoptics:patching patched https 
2021-11-23T06:57:33.549Z appoptics:patching patched http 
2021-11-23T06:57:33.580Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:33.581Z appoptics:patching patched fs 
2021-11-23T06:57:33.621Z appoptics:patching patched pino 4.17.2
2021-11-23T06:57:33.626Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:42.694Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:42.695Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:42.695Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:42.696Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:42.779Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:42.954Z appoptics:patching patched crypto 
2021-11-23T06:57:42.976Z appoptics:patching patched https 
2021-11-23T06:57:42.976Z appoptics:patching patched http 
2021-11-23T06:57:43.012Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:43.014Z appoptics:patching patched fs 
2021-11-23T06:57:43.057Z appoptics:patching patched pino 4.17.3
2021-11-23T06:57:43.063Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1090 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:57:51.857Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:57:51.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:57:51.857Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:57:51.858Z appoptics:debug using context provider: ace-context
2021-11-23T06:57:51.936Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:57:52.115Z appoptics:patching patched crypto 
2021-11-23T06:57:52.138Z appoptics:patching patched https 
2021-11-23T06:57:52.139Z appoptics:patching patched http 
2021-11-23T06:57:52.165Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:57:52.166Z appoptics:patching patched fs 
2021-11-23T06:57:52.201Z appoptics:patching patched pino 4.17.5
2021-11-23T06:57:52.206Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (230ms)


changed 1 package, and audited 1090 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:00.298Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:00.300Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:00.300Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:00.300Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:00.373Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:00.547Z appoptics:patching patched crypto 
2021-11-23T06:58:00.571Z appoptics:patching patched https 
2021-11-23T06:58:00.571Z appoptics:patching patched http 
2021-11-23T06:58:00.599Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:00.600Z appoptics:patching patched fs 
2021-11-23T06:58:00.639Z appoptics:patching patched pino 4.17.6
2021-11-23T06:58:00.645Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:09.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:09.687Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:09.687Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:09.688Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:09.765Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:09.952Z appoptics:patching patched crypto 
2021-11-23T06:58:09.975Z appoptics:patching patched https 
2021-11-23T06:58:09.975Z appoptics:patching patched http 
2021-11-23T06:58:10.002Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:10.003Z appoptics:patching patched fs 
2021-11-23T06:58:10.016Z appoptics:patching patched pino 5.0.0
2021-11-23T06:58:10.022Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 2 packages, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:18.649Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:18.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:18.650Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:18.651Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:18.758Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:18.934Z appoptics:patching patched crypto 
2021-11-23T06:58:18.958Z appoptics:patching patched https 
2021-11-23T06:58:18.959Z appoptics:patching patched http 
2021-11-23T06:58:18.985Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:18.986Z appoptics:patching patched fs 
2021-11-23T06:58:18.998Z appoptics:patching patched pino 5.0.1
2021-11-23T06:58:19.005Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (246ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:27.447Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:27.448Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:27.448Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:27.449Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:27.574Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:27.799Z appoptics:patching patched crypto 
2021-11-23T06:58:27.849Z appoptics:patching patched https 
2021-11-23T06:58:27.850Z appoptics:patching patched http 
2021-11-23T06:58:27.885Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:27.885Z appoptics:patching patched fs 
2021-11-23T06:58:27.899Z appoptics:patching patched pino 5.0.2
2021-11-23T06:58:27.905Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (232ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:36.518Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:36.519Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:36.519Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:36.520Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:36.598Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:36.773Z appoptics:patching patched crypto 
2021-11-23T06:58:36.794Z appoptics:patching patched https 
2021-11-23T06:58:36.795Z appoptics:patching patched http 
2021-11-23T06:58:36.821Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:36.822Z appoptics:patching patched fs 
2021-11-23T06:58:36.834Z appoptics:patching patched pino 5.0.3
2021-11-23T06:58:36.846Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (108ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (235ms)


changed 1 package, and audited 1080 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:46.563Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:46.564Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:46.564Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:46.565Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:46.634Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:46.798Z appoptics:patching patched crypto 
2021-11-23T06:58:46.820Z appoptics:patching patched https 
2021-11-23T06:58:46.820Z appoptics:patching patched http 
2021-11-23T06:58:46.845Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:46.845Z appoptics:patching patched fs 
2021-11-23T06:58:46.857Z appoptics:patching patched pino 5.0.4
2021-11-23T06:58:46.869Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (217ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:58:55.397Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:58:55.398Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:58:55.398Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:58:55.399Z appoptics:debug using context provider: ace-context
2021-11-23T06:58:55.494Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:58:55.739Z appoptics:patching patched crypto 
2021-11-23T06:58:55.768Z appoptics:patching patched https 
2021-11-23T06:58:55.769Z appoptics:patching patched http 
2021-11-23T06:58:55.804Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:58:55.805Z appoptics:patching patched fs 
2021-11-23T06:58:55.819Z appoptics:patching patched pino 5.0.5
2021-11-23T06:58:55.826Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:04.398Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:04.399Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:04.399Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:04.399Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:04.485Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:04.680Z appoptics:patching patched crypto 
2021-11-23T06:59:04.706Z appoptics:patching patched https 
2021-11-23T06:59:04.706Z appoptics:patching patched http 
2021-11-23T06:59:04.736Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:04.737Z appoptics:patching patched fs 
2021-11-23T06:59:04.750Z appoptics:patching patched pino 5.1.0
2021-11-23T06:59:04.755Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:13.535Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:13.536Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:13.536Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:13.537Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:13.610Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:13.782Z appoptics:patching patched crypto 
2021-11-23T06:59:13.805Z appoptics:patching patched https 
2021-11-23T06:59:13.805Z appoptics:patching patched http 
2021-11-23T06:59:13.832Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:13.832Z appoptics:patching patched fs 
2021-11-23T06:59:13.845Z appoptics:patching patched pino 5.1.1
2021-11-23T06:59:13.857Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1080 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:23.131Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:23.132Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:23.132Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:23.133Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:23.212Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:23.398Z appoptics:patching patched crypto 
2021-11-23T06:59:23.421Z appoptics:patching patched https 
2021-11-23T06:59:23.422Z appoptics:patching patched http 
2021-11-23T06:59:23.453Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:23.454Z appoptics:patching patched fs 
2021-11-23T06:59:23.467Z appoptics:patching patched pino 5.2.0
2021-11-23T06:59:23.480Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (223ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:31.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:31.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:31.921Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:31.921Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:32.012Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:32.212Z appoptics:patching patched crypto 
2021-11-23T06:59:32.236Z appoptics:patching patched https 
2021-11-23T06:59:32.237Z appoptics:patching patched http 
2021-11-23T06:59:32.266Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:32.267Z appoptics:patching patched fs 
2021-11-23T06:59:32.279Z appoptics:patching patched pino 5.3.0
2021-11-23T06:59:32.284Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (221ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:41.154Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:41.155Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:41.155Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:41.156Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:41.229Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:41.388Z appoptics:patching patched crypto 
2021-11-23T06:59:41.410Z appoptics:patching patched https 
2021-11-23T06:59:41.411Z appoptics:patching patched http 
2021-11-23T06:59:41.437Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:41.438Z appoptics:patching patched fs 
2021-11-23T06:59:41.451Z appoptics:patching patched pino 5.3.1
2021-11-23T06:59:41.456Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (222ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:50.265Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:50.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:50.266Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:50.267Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:50.345Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:59:50.541Z appoptics:patching patched crypto 
2021-11-23T06:59:50.564Z appoptics:patching patched https 
2021-11-23T06:59:50.565Z appoptics:patching patched http 
2021-11-23T06:59:50.591Z appoptics:patching fs.realpath - adding native method
2021-11-23T06:59:50.591Z appoptics:patching patched fs 
2021-11-23T06:59:50.603Z appoptics:patching patched pino 5.4.0
2021-11-23T06:59:50.617Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:59:59.835Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:59:59.836Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:59:59.836Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:59:59.837Z appoptics:debug using context provider: ace-context
2021-11-23T06:59:59.942Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:00.143Z appoptics:patching patched crypto 
2021-11-23T07:00:00.175Z appoptics:patching patched https 
2021-11-23T07:00:00.176Z appoptics:patching patched http 
2021-11-23T07:00:00.203Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:00.204Z appoptics:patching patched fs 
2021-11-23T07:00:00.217Z appoptics:patching patched pino 5.4.1
2021-11-23T07:00:00.222Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1080 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:00:08.297Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:00:08.297Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:00:08.298Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:00:08.299Z appoptics:debug using context provider: ace-context
2021-11-23T07:00:08.391Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:08.595Z appoptics:patching patched crypto 
2021-11-23T07:00:08.622Z appoptics:patching patched https 
2021-11-23T07:00:08.622Z appoptics:patching patched http 
2021-11-23T07:00:08.654Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:08.655Z appoptics:patching patched fs 
2021-11-23T07:00:08.678Z appoptics:patching patched pino 5.5.0
2021-11-23T07:00:08.684Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (226ms)


changed 1 package, and audited 1080 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:00:18.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:00:18.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:00:18.081Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:00:18.082Z appoptics:debug using context provider: ace-context
2021-11-23T07:00:18.156Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:18.329Z appoptics:patching patched crypto 
2021-11-23T07:00:18.352Z appoptics:patching patched https 
2021-11-23T07:00:18.352Z appoptics:patching patched http 
2021-11-23T07:00:18.379Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:18.380Z appoptics:patching patched fs 
2021-11-23T07:00:18.391Z appoptics:patching patched pino 5.6.0
2021-11-23T07:00:18.403Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:00:27.443Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:00:27.444Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:00:27.444Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:00:27.445Z appoptics:debug using context provider: ace-context
2021-11-23T07:00:27.526Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:27.732Z appoptics:patching patched crypto 
2021-11-23T07:00:27.759Z appoptics:patching patched https 
2021-11-23T07:00:27.760Z appoptics:patching patched http 
2021-11-23T07:00:27.788Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:27.789Z appoptics:patching patched fs 
2021-11-23T07:00:27.801Z appoptics:patching patched pino 5.6.1
2021-11-23T07:00:27.807Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (107ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1080 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:00:36.192Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:00:36.193Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:00:36.193Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:00:36.194Z appoptics:debug using context provider: ace-context
2021-11-23T07:00:36.286Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:36.486Z appoptics:patching patched crypto 
2021-11-23T07:00:36.510Z appoptics:patching patched https 
2021-11-23T07:00:36.510Z appoptics:patching patched http 
2021-11-23T07:00:36.538Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:36.538Z appoptics:patching patched fs 
2021-11-23T07:00:36.552Z appoptics:patching patched pino 5.6.2
2021-11-23T07:00:36.557Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (252ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:00:45.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:00:45.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:00:45.081Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:00:45.082Z appoptics:debug using context provider: ace-context
2021-11-23T07:00:45.161Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:00:45.346Z appoptics:patching patched crypto 
2021-11-23T07:00:45.369Z appoptics:patching patched https 
2021-11-23T07:00:45.370Z appoptics:patching patched http 
2021-11-23T07:00:45.402Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:00:45.403Z appoptics:patching patched fs 
2021-11-23T07:00:45.416Z appoptics:patching patched pino 5.6.3
2021-11-23T07:00:45.431Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (218ms)


changed 1 package, and audited 1080 packages in 28s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:14.376Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:14.376Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:14.376Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:14.377Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:14.452Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:14.661Z appoptics:patching patched crypto 
2021-11-23T07:01:14.683Z appoptics:patching patched https 
2021-11-23T07:01:14.683Z appoptics:patching patched http 
2021-11-23T07:01:14.713Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:14.714Z appoptics:patching patched fs 
2021-11-23T07:01:14.728Z appoptics:patching patched pino 5.6.4
2021-11-23T07:01:14.740Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:23.557Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:23.558Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:23.558Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:23.559Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:23.631Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:23.807Z appoptics:patching patched crypto 
2021-11-23T07:01:23.830Z appoptics:patching patched https 
2021-11-23T07:01:23.831Z appoptics:patching patched http 
2021-11-23T07:01:23.857Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:23.858Z appoptics:patching patched fs 
2021-11-23T07:01:23.869Z appoptics:patching patched pino 5.7.0
2021-11-23T07:01:23.885Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (215ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:32.272Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:32.273Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:32.273Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:32.273Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:32.342Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:32.579Z appoptics:patching patched crypto 
2021-11-23T07:01:32.602Z appoptics:patching patched https 
2021-11-23T07:01:32.602Z appoptics:patching patched http 
2021-11-23T07:01:32.631Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:32.632Z appoptics:patching patched fs 
2021-11-23T07:01:32.644Z appoptics:patching patched pino 5.8.0
2021-11-23T07:01:32.656Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1080 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:41.689Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:41.690Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:41.690Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:41.691Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:41.771Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:41.954Z appoptics:patching patched crypto 
2021-11-23T07:01:41.975Z appoptics:patching patched https 
2021-11-23T07:01:41.976Z appoptics:patching patched http 
2021-11-23T07:01:42.008Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:42.009Z appoptics:patching patched fs 
2021-11-23T07:01:42.016Z appoptics:patching patched pino 5.8.1
2021-11-23T07:01:42.031Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1080 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:49.743Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:49.744Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:49.744Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:49.747Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:49.857Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:50.075Z appoptics:patching patched crypto 
2021-11-23T07:01:50.098Z appoptics:patching patched https 
2021-11-23T07:01:50.099Z appoptics:patching patched http 
2021-11-23T07:01:50.152Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:50.152Z appoptics:patching patched fs 
2021-11-23T07:01:50.171Z appoptics:patching patched pino 5.9.0
2021-11-23T07:01:50.181Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (328ms)


added 1 package, changed 2 packages, and audited 1081 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:01:59.347Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:01:59.348Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:01:59.348Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:01:59.349Z appoptics:debug using context provider: ace-context
2021-11-23T07:01:59.433Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:01:59.624Z appoptics:patching patched crypto 
2021-11-23T07:01:59.647Z appoptics:patching patched https 
2021-11-23T07:01:59.648Z appoptics:patching patched http 
2021-11-23T07:01:59.679Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:01:59.679Z appoptics:patching patched fs 
2021-11-23T07:01:59.687Z appoptics:patching patched pino 5.10.1
2021-11-23T07:01:59.692Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1081 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:08.428Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:08.429Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:08.429Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:08.429Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:08.509Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:08.687Z appoptics:patching patched crypto 
2021-11-23T07:02:08.708Z appoptics:patching patched https 
2021-11-23T07:02:08.709Z appoptics:patching patched http 
2021-11-23T07:02:08.738Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:08.739Z appoptics:patching patched fs 
2021-11-23T07:02:08.746Z appoptics:patching patched pino 5.10.2
2021-11-23T07:02:08.753Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1081 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:17.085Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:17.086Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:17.086Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:17.087Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:17.179Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:17.478Z appoptics:patching patched crypto 
2021-11-23T07:02:17.501Z appoptics:patching patched https 
2021-11-23T07:02:17.502Z appoptics:patching patched http 
2021-11-23T07:02:17.535Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:17.536Z appoptics:patching patched fs 
2021-11-23T07:02:17.546Z appoptics:patching patched pino 5.10.3
2021-11-23T07:02:17.551Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (246ms)


changed 1 package, and audited 1081 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:25.220Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:25.221Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:25.221Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:25.222Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:25.289Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:25.452Z appoptics:patching patched crypto 
2021-11-23T07:02:25.478Z appoptics:patching patched https 
2021-11-23T07:02:25.479Z appoptics:patching patched http 
2021-11-23T07:02:25.513Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:25.513Z appoptics:patching patched fs 
2021-11-23T07:02:25.521Z appoptics:patching patched pino 5.10.4
2021-11-23T07:02:25.532Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


removed 3 packages, changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:34.064Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:34.065Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:34.065Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:34.065Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:34.133Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:34.292Z appoptics:patching patched crypto 
2021-11-23T07:02:34.315Z appoptics:patching patched https 
2021-11-23T07:02:34.316Z appoptics:patching patched http 
2021-11-23T07:02:34.345Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:34.346Z appoptics:patching patched fs 
2021-11-23T07:02:34.353Z appoptics:patching patched pino 5.10.5
2021-11-23T07:02:34.365Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:43.202Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:43.203Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:43.203Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:43.204Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:43.275Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:43.504Z appoptics:patching patched crypto 
2021-11-23T07:02:43.526Z appoptics:patching patched https 
2021-11-23T07:02:43.527Z appoptics:patching patched http 
2021-11-23T07:02:43.559Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:43.560Z appoptics:patching patched fs 
2021-11-23T07:02:43.567Z appoptics:patching patched pino 5.10.6
2021-11-23T07:02:43.577Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:02:51.794Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:02:51.795Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:02:51.795Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:02:51.796Z appoptics:debug using context provider: ace-context
2021-11-23T07:02:51.902Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:02:52.106Z appoptics:patching patched crypto 
2021-11-23T07:02:52.131Z appoptics:patching patched https 
2021-11-23T07:02:52.132Z appoptics:patching patched http 
2021-11-23T07:02:52.168Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:02:52.169Z appoptics:patching patched fs 
2021-11-23T07:02:52.177Z appoptics:patching patched pino 5.10.7
2021-11-23T07:02:52.195Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (220ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:01.179Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:01.180Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:01.180Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:01.180Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:01.255Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:01.448Z appoptics:patching patched crypto 
2021-11-23T07:03:01.477Z appoptics:patching patched https 
2021-11-23T07:03:01.477Z appoptics:patching patched http 
2021-11-23T07:03:01.510Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:01.511Z appoptics:patching patched fs 
2021-11-23T07:03:01.519Z appoptics:patching patched pino 5.10.8
2021-11-23T07:03:01.524Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1078 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:10.929Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:10.930Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:10.930Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:10.931Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:11.010Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:11.179Z appoptics:patching patched crypto 
2021-11-23T07:03:11.202Z appoptics:patching patched https 
2021-11-23T07:03:11.202Z appoptics:patching patched http 
2021-11-23T07:03:11.236Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:11.237Z appoptics:patching patched fs 
2021-11-23T07:03:11.245Z appoptics:patching patched pino 5.10.9
2021-11-23T07:03:11.250Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (203ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:19.791Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:19.802Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:19.802Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:19.803Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:19.977Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:20.322Z appoptics:patching patched crypto 
2021-11-23T07:03:20.361Z appoptics:patching patched https 
2021-11-23T07:03:20.362Z appoptics:patching patched http 
2021-11-23T07:03:20.406Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:20.407Z appoptics:patching patched fs 
2021-11-23T07:03:20.417Z appoptics:patching patched pino 5.10.10
2021-11-23T07:03:20.433Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (274ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:28.638Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:28.639Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:28.639Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:28.640Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:28.734Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:28.937Z appoptics:patching patched crypto 
2021-11-23T07:03:28.958Z appoptics:patching patched https 
2021-11-23T07:03:28.959Z appoptics:patching patched http 
2021-11-23T07:03:28.989Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:28.989Z appoptics:patching patched fs 
2021-11-23T07:03:28.997Z appoptics:patching patched pino 5.11.0
2021-11-23T07:03:29.003Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:37.988Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:37.988Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:37.989Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:37.989Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:38.068Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:38.239Z appoptics:patching patched crypto 
2021-11-23T07:03:38.262Z appoptics:patching patched https 
2021-11-23T07:03:38.263Z appoptics:patching patched http 
2021-11-23T07:03:38.294Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:38.294Z appoptics:patching patched fs 
2021-11-23T07:03:38.302Z appoptics:patching patched pino 5.11.1
2021-11-23T07:03:38.307Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (212ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:46.949Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:46.949Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:46.950Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:46.950Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:47.068Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:47.335Z appoptics:patching patched crypto 
2021-11-23T07:03:47.382Z appoptics:patching patched https 
2021-11-23T07:03:47.383Z appoptics:patching patched http 
2021-11-23T07:03:47.424Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:47.425Z appoptics:patching patched fs 
2021-11-23T07:03:47.434Z appoptics:patching patched pino 5.11.2
2021-11-23T07:03:47.441Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:03:56.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:03:56.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:03:56.103Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:03:56.104Z appoptics:debug using context provider: ace-context
2021-11-23T07:03:56.176Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:03:56.343Z appoptics:patching patched crypto 
2021-11-23T07:03:56.367Z appoptics:patching patched https 
2021-11-23T07:03:56.368Z appoptics:patching patched http 
2021-11-23T07:03:56.402Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:03:56.403Z appoptics:patching patched fs 
2021-11-23T07:03:56.411Z appoptics:patching patched pino 5.11.3
2021-11-23T07:03:56.426Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (206ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:05.225Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:05.226Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:05.226Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:05.227Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:05.326Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:05.552Z appoptics:patching patched crypto 
2021-11-23T07:04:05.576Z appoptics:patching patched https 
2021-11-23T07:04:05.576Z appoptics:patching patched http 
2021-11-23T07:04:05.611Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:05.611Z appoptics:patching patched fs 
2021-11-23T07:04:05.620Z appoptics:patching patched pino 5.12.0
2021-11-23T07:04:05.626Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:14.682Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:14.683Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:14.683Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:14.684Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:14.783Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:14.992Z appoptics:patching patched crypto 
2021-11-23T07:04:15.016Z appoptics:patching patched https 
2021-11-23T07:04:15.016Z appoptics:patching patched http 
2021-11-23T07:04:15.048Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:15.049Z appoptics:patching patched fs 
2021-11-23T07:04:15.056Z appoptics:patching patched pino 5.12.1
2021-11-23T07:04:15.061Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:23.426Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:23.427Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:23.427Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:23.428Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:23.544Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:23.757Z appoptics:patching patched crypto 
2021-11-23T07:04:23.780Z appoptics:patching patched https 
2021-11-23T07:04:23.780Z appoptics:patching patched http 
2021-11-23T07:04:23.815Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:23.816Z appoptics:patching patched fs 
2021-11-23T07:04:23.824Z appoptics:patching patched pino 5.12.2
2021-11-23T07:04:23.830Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (210ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:32.164Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:32.164Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:32.164Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:32.165Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:32.243Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:32.410Z appoptics:patching patched crypto 
2021-11-23T07:04:32.433Z appoptics:patching patched https 
2021-11-23T07:04:32.433Z appoptics:patching patched http 
2021-11-23T07:04:32.468Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:32.469Z appoptics:patching patched fs 
2021-11-23T07:04:32.477Z appoptics:patching patched pino 5.12.3
2021-11-23T07:04:32.491Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:41.249Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:41.250Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:41.250Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:41.250Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:41.332Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:41.503Z appoptics:patching patched crypto 
2021-11-23T07:04:41.524Z appoptics:patching patched https 
2021-11-23T07:04:41.524Z appoptics:patching patched http 
2021-11-23T07:04:41.554Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:41.554Z appoptics:patching patched fs 
2021-11-23T07:04:41.561Z appoptics:patching patched pino 5.12.4
2021-11-23T07:04:41.576Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:49.823Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:49.823Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:49.823Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:49.824Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:50.065Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:50.347Z appoptics:patching patched crypto 
2021-11-23T07:04:50.369Z appoptics:patching patched https 
2021-11-23T07:04:50.369Z appoptics:patching patched http 
2021-11-23T07:04:50.403Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:50.404Z appoptics:patching patched fs 
2021-11-23T07:04:50.411Z appoptics:patching patched pino 5.12.5
2021-11-23T07:04:50.416Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (222ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:04:58.509Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:04:58.510Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:04:58.510Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:04:58.511Z appoptics:debug using context provider: ace-context
2021-11-23T07:04:58.587Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:04:58.760Z appoptics:patching patched crypto 
2021-11-23T07:04:58.782Z appoptics:patching patched https 
2021-11-23T07:04:58.783Z appoptics:patching patched http 
2021-11-23T07:04:58.816Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:04:58.817Z appoptics:patching patched fs 
2021-11-23T07:04:58.824Z appoptics:patching patched pino 5.12.6
2021-11-23T07:04:58.839Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:07.893Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:07.894Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:07.894Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:07.894Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:07.979Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:08.175Z appoptics:patching patched crypto 
2021-11-23T07:05:08.201Z appoptics:patching patched https 
2021-11-23T07:05:08.202Z appoptics:patching patched http 
2021-11-23T07:05:08.237Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:08.238Z appoptics:patching patched fs 
2021-11-23T07:05:08.246Z appoptics:patching patched pino 5.13.0
2021-11-23T07:05:08.260Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:17.133Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:17.134Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:17.134Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:17.135Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:17.225Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:17.395Z appoptics:patching patched crypto 
2021-11-23T07:05:17.418Z appoptics:patching patched https 
2021-11-23T07:05:17.418Z appoptics:patching patched http 
2021-11-23T07:05:17.452Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:17.453Z appoptics:patching patched fs 
2021-11-23T07:05:17.468Z appoptics:patching patched pino 5.13.1
2021-11-23T07:05:17.485Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:25.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:25.773Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:25.773Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:25.777Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:25.896Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:26.076Z appoptics:patching patched crypto 
2021-11-23T07:05:26.101Z appoptics:patching patched https 
2021-11-23T07:05:26.101Z appoptics:patching patched http 
2021-11-23T07:05:26.133Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:26.133Z appoptics:patching patched fs 
2021-11-23T07:05:26.142Z appoptics:patching patched pino 5.13.2
2021-11-23T07:05:26.155Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:34.726Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:34.727Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:34.727Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:34.728Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:34.798Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:34.960Z appoptics:patching patched crypto 
2021-11-23T07:05:34.982Z appoptics:patching patched https 
2021-11-23T07:05:34.982Z appoptics:patching patched http 
2021-11-23T07:05:35.012Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:35.012Z appoptics:patching patched fs 
2021-11-23T07:05:35.020Z appoptics:patching patched pino 5.13.3
2021-11-23T07:05:35.032Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 2 packages, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:43.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:43.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:43.267Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:43.269Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:43.352Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:43.531Z appoptics:patching patched crypto 
2021-11-23T07:05:43.554Z appoptics:patching patched https 
2021-11-23T07:05:43.554Z appoptics:patching patched http 
2021-11-23T07:05:43.589Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:43.589Z appoptics:patching patched fs 
2021-11-23T07:05:43.596Z appoptics:patching patched pino 5.13.4
2021-11-23T07:05:43.607Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (208ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:05:51.502Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:05:51.503Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:05:51.503Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:05:51.504Z appoptics:debug using context provider: ace-context
2021-11-23T07:05:51.604Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:05:51.850Z appoptics:patching patched crypto 
2021-11-23T07:05:51.872Z appoptics:patching patched https 
2021-11-23T07:05:51.873Z appoptics:patching patched http 
2021-11-23T07:05:51.905Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:05:51.906Z appoptics:patching patched fs 
2021-11-23T07:05:51.915Z appoptics:patching patched pino 5.13.5
2021-11-23T07:05:51.933Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (214ms)


changed 1 package, and audited 1078 packages in 22s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:06:14.971Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:06:14.972Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:06:14.972Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:06:14.973Z appoptics:debug using context provider: ace-context
2021-11-23T07:06:15.052Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:06:15.239Z appoptics:patching patched crypto 
2021-11-23T07:06:15.275Z appoptics:patching patched https 
2021-11-23T07:06:15.276Z appoptics:patching patched http 
2021-11-23T07:06:15.318Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:06:15.319Z appoptics:patching patched fs 
2021-11-23T07:06:15.328Z appoptics:patching patched pino 5.13.6
2021-11-23T07:06:15.333Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1078 packages in 10s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:06:25.852Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:06:25.853Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:06:25.853Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:06:25.854Z appoptics:debug using context provider: ace-context
2021-11-23T07:06:25.932Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:06:26.137Z appoptics:patching patched crypto 
2021-11-23T07:06:26.161Z appoptics:patching patched https 
2021-11-23T07:06:26.161Z appoptics:patching patched http 
2021-11-23T07:06:26.195Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:06:26.195Z appoptics:patching patched fs 
2021-11-23T07:06:26.213Z appoptics:patching patched pino 5.14.0
2021-11-23T07:06:26.220Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (216ms)


changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:06:35.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:06:35.183Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:06:35.184Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:06:35.184Z appoptics:debug using context provider: ace-context
2021-11-23T07:06:35.267Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:06:35.455Z appoptics:patching patched crypto 
2021-11-23T07:06:35.476Z appoptics:patching patched https 
2021-11-23T07:06:35.476Z appoptics:patching patched http 
2021-11-23T07:06:35.507Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:06:35.507Z appoptics:patching patched fs 
2021-11-23T07:06:35.514Z appoptics:patching patched pino 5.15.0
2021-11-23T07:06:35.532Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (221ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:06:43.604Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:06:43.605Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:06:43.605Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:06:43.606Z appoptics:debug using context provider: ace-context
2021-11-23T07:06:43.699Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:06:43.979Z appoptics:patching patched crypto 
2021-11-23T07:06:44.001Z appoptics:patching patched https 
2021-11-23T07:06:44.002Z appoptics:patching patched http 
2021-11-23T07:06:44.036Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:06:44.037Z appoptics:patching patched fs 
2021-11-23T07:06:44.050Z appoptics:patching patched pino 5.16.0
2021-11-23T07:06:44.090Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (219ms)


changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:06:51.948Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:06:51.949Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:06:51.949Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:06:51.950Z appoptics:debug using context provider: ace-context
2021-11-23T07:06:52.047Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:06:52.259Z appoptics:patching patched crypto 
2021-11-23T07:06:52.281Z appoptics:patching patched https 
2021-11-23T07:06:52.282Z appoptics:patching patched http 
2021-11-23T07:06:52.313Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:06:52.314Z appoptics:patching patched fs 
2021-11-23T07:06:52.323Z appoptics:patching patched pino 5.17.0
2021-11-23T07:06:52.328Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (202ms)


changed 3 packages, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:01.190Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:01.191Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:01.191Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:01.192Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:01.269Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:01.449Z appoptics:patching patched crypto 
2021-11-23T07:07:01.471Z appoptics:patching patched https 
2021-11-23T07:07:01.471Z appoptics:patching patched http 
2021-11-23T07:07:01.508Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:01.508Z appoptics:patching patched fs 
2021-11-23T07:07:01.524Z appoptics:patching patched pino 6.0.0
2021-11-23T07:07:01.529Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (229ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4390
         "time": 1637651221576
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4390
         "time": 1637651221588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4390
         "time": 1637651221595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4390
         "time": 1637651221600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4390
         "time": 1637651221605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4390
         "time": 1637651221610
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4390
         "time": 1637651221612
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4390
         "time": 1637651221615
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4390
         "time": 1637651221617
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4390
         "time": 1637651221630
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4390
         "time": 1637651221632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4390
         "time": 1637651221635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4390
         "time": 1637651221740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8C143E93BED00DF9E0D872B53127BFFECE3D6DD4-1"
         "pid": 4390
         "time": 1637651221769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:10.162Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:10.163Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:10.163Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:10.164Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:10.276Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:10.488Z appoptics:patching patched crypto 
2021-11-23T07:07:10.517Z appoptics:patching patched https 
2021-11-23T07:07:10.518Z appoptics:patching patched http 
2021-11-23T07:07:10.560Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:10.562Z appoptics:patching patched fs 
2021-11-23T07:07:10.575Z appoptics:patching patched pino 6.1.0
2021-11-23T07:07:10.581Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (327ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4413
         "time": 1637651230671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4413
         "time": 1637651230709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4413
         "time": 1637651230723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4413
         "time": 1637651230734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4413
         "time": 1637651230765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4413
         "time": 1637651230773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4413
         "time": 1637651230786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4413
         "time": 1637651230788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4413
         "time": 1637651230792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4413
         "time": 1637651230795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4413
         "time": 1637651230799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4413
         "time": 1637651230803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4413
         "time": 1637651230907
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 52ACEBF4C0ACE330F7C25B94F604979E3C06C9DF-1"
         "pid": 4413
         "time": 1637651230936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:19.065Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:19.066Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:19.066Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:19.067Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:19.154Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:19.346Z appoptics:patching patched crypto 
2021-11-23T07:07:19.370Z appoptics:patching patched https 
2021-11-23T07:07:19.371Z appoptics:patching patched http 
2021-11-23T07:07:19.407Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:19.408Z appoptics:patching patched fs 
2021-11-23T07:07:19.416Z appoptics:patching patched pino 6.1.1
2021-11-23T07:07:19.423Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (230ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4436
         "time": 1637651239478
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4436
         "time": 1637651239491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4436
         "time": 1637651239498
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4436
         "time": 1637651239503
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4436
         "time": 1637651239508
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4436
         "time": 1637651239513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4436
         "time": 1637651239517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4436
         "time": 1637651239524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4436
         "time": 1637651239528
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4436
         "time": 1637651239532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4436
         "time": 1637651239533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4436
         "time": 1637651239536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4436
         "time": 1637651239642
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3DF545CA71E4EB9BED0197CE8DC494611FA3976F-1"
         "pid": 4436
         "time": 1637651239671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:28.055Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:28.056Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:28.056Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:28.057Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:28.132Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:28.302Z appoptics:patching patched crypto 
2021-11-23T07:07:28.325Z appoptics:patching patched https 
2021-11-23T07:07:28.326Z appoptics:patching patched http 
2021-11-23T07:07:28.362Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:28.362Z appoptics:patching patched fs 
2021-11-23T07:07:28.370Z appoptics:patching patched pino 6.2.0
2021-11-23T07:07:28.382Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (236ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4459
         "time": 1637651248427
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4459
         "time": 1637651248439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4459
         "time": 1637651248462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4459
         "time": 1637651248474
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4459
         "time": 1637651248478
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4459
         "time": 1637651248481
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4459
         "time": 1637651248483
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4459
         "time": 1637651248487
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4459
         "time": 1637651248488
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4459
         "time": 1637651248491
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4459
         "time": 1637651248493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4459
         "time": 1637651248496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4459
         "time": 1637651248599
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3DBBCC6E44832023B4252933C69F1B03D7A7D98D-1"
         "pid": 4459
         "time": 1637651248627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:37.363Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:37.364Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:37.364Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:37.365Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:37.439Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:37.607Z appoptics:patching patched crypto 
2021-11-23T07:07:37.628Z appoptics:patching patched https 
2021-11-23T07:07:37.629Z appoptics:patching patched http 
2021-11-23T07:07:37.662Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:37.662Z appoptics:patching patched fs 
2021-11-23T07:07:37.671Z appoptics:patching patched pino 6.2.1
2021-11-23T07:07:37.682Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (219ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4482
         "time": 1637651257723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4482
         "time": 1637651257734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4482
         "time": 1637651257740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4482
         "time": 1637651257745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4482
         "time": 1637651257749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4482
         "time": 1637651257754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4482
         "time": 1637651257757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4482
         "time": 1637651257759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4482
         "time": 1637651257762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4482
         "time": 1637651257770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4482
         "time": 1637651257774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4482
         "time": 1637651257776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4482
         "time": 1637651257881
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7DD2CED7D24660E28A2EB77E531340643C4CE231-1"
         "pid": 4482
         "time": 1637651257910
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:45.419Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:45.420Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:45.420Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:45.421Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:45.494Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:45.665Z appoptics:patching patched crypto 
2021-11-23T07:07:45.689Z appoptics:patching patched https 
2021-11-23T07:07:45.690Z appoptics:patching patched http 
2021-11-23T07:07:45.723Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:45.724Z appoptics:patching patched fs 
2021-11-23T07:07:45.733Z appoptics:patching patched pino 6.3.0
2021-11-23T07:07:45.744Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (218ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4505
         "time": 1637651265782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4505
         "time": 1637651265793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4505
         "time": 1637651265799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4505
         "time": 1637651265803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4505
         "time": 1637651265807
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4505
         "time": 1637651265812
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4505
         "time": 1637651265817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4505
         "time": 1637651265819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4505
         "time": 1637651265822
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4505
         "time": 1637651265833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4505
         "time": 1637651265834
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4505
         "time": 1637651265837
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4505
         "time": 1637651265942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 95654912A1D4A488453B6924BEE8D93911A334DC-1"
         "pid": 4505
         "time": 1637651265970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:07:54.778Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:07:54.779Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:07:54.779Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:07:54.780Z appoptics:debug using context provider: ace-context
2021-11-23T07:07:54.858Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:07:55.019Z appoptics:patching patched crypto 
2021-11-23T07:07:55.056Z appoptics:patching patched https 
2021-11-23T07:07:55.057Z appoptics:patching patched http 
2021-11-23T07:07:55.096Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:07:55.097Z appoptics:patching patched fs 
2021-11-23T07:07:55.105Z appoptics:patching patched pino 6.3.1
2021-11-23T07:07:55.117Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (231ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4528
         "time": 1637651275165
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4528
         "time": 1637651275177
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4528
         "time": 1637651275184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4528
         "time": 1637651275188
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4528
         "time": 1637651275194
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4528
         "time": 1637651275199
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4528
         "time": 1637651275202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4528
         "time": 1637651275205
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4528
         "time": 1637651275216
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4528
         "time": 1637651275218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4528
         "time": 1637651275219
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4528
         "time": 1637651275222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4528
         "time": 1637651275327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 28C77DF5EF50E60DFAEC3E9ECAA010D68B3904AD-1"
         "pid": 4528
         "time": 1637651275356
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:04.059Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:04.059Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:04.059Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:04.060Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:04.133Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:04.301Z appoptics:patching patched crypto 
2021-11-23T07:08:04.329Z appoptics:patching patched https 
2021-11-23T07:08:04.330Z appoptics:patching patched http 
2021-11-23T07:08:04.364Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:04.364Z appoptics:patching patched fs 
2021-11-23T07:08:04.377Z appoptics:patching patched pino 6.3.2
2021-11-23T07:08:04.384Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (224ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4551
         "time": 1637651284426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4551
         "time": 1637651284438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4551
         "time": 1637651284445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4551
         "time": 1637651284450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4551
         "time": 1637651284456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4551
         "time": 1637651284461
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4551
         "time": 1637651284464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4551
         "time": 1637651284466
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4551
         "time": 1637651284469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4551
         "time": 1637651284479
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4551
         "time": 1637651284480
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4551
         "time": 1637651284483
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4551
         "time": 1637651284588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D27931F80A46C0EB0E29337C937EC48D4087ED3A-1"
         "pid": 4551
         "time": 1637651284617
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:12.517Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:12.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:12.517Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:12.518Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:12.596Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:12.799Z appoptics:patching patched crypto 
2021-11-23T07:08:12.822Z appoptics:patching patched https 
2021-11-23T07:08:12.823Z appoptics:patching patched http 
2021-11-23T07:08:12.858Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:12.858Z appoptics:patching patched fs 
2021-11-23T07:08:12.866Z appoptics:patching patched pino 6.4.0
2021-11-23T07:08:12.871Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (230ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4574
         "time": 1637651292929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FCED35BD34326813AB396B95F0583AB935ED47A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4574
         "time": 1637651292939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "811286E0B30BFF0CD5E37646E3A216892FA19050-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4574
         "time": 1637651292945
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C6D4E4B267532D297A8ACBA5DACCF8BB0379DB2-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4574
         "time": 1637651292949
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "245D01B086EB33F38263E09637C15932D08D19A6-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4574
         "time": 1637651292954
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4574
         "time": 1637651292959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6507D7063A659FFE88216590DCA6324D9B05124F-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4574
         "time": 1637651292962
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1977696A3133D61AB5C181418D622C367B8C9858-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4574
         "time": 1637651292965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4574
         "time": 1637651292968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "811F1BFCC7EFE9E4FF327C451DFB020937EBB79D-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4574
         "time": 1637651292984
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4574
         "time": 1637651292988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D8B3DFA0F699D24F90B92B25C40D8CB0C0968159-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4574
         "time": 1637651292990
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5360F6C0E5BD10A8CB817A943FE17E4A7C43D519-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4574
         "time": 1637651293094
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 19340E2044FDB4BE88E7849FC5EF05CDABB650E8-1"
         "pid": 4574
         "time": 1637651293123
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:21.456Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:21.457Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:21.457Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:21.457Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:21.543Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:21.730Z appoptics:patching patched crypto 
2021-11-23T07:08:21.752Z appoptics:patching patched https 
2021-11-23T07:08:21.753Z appoptics:patching patched http 
2021-11-23T07:08:21.785Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:21.786Z appoptics:patching patched fs 
2021-11-23T07:08:21.793Z appoptics:patching patched pino 6.4.1
2021-11-23T07:08:21.798Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (222ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4597
         "time": 1637651301868
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "21EB5C864CCAD15E2FEDC1808220291CCEE83925-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4597
         "time": 1637651301877
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C78AB6D4CA813D44328A6B0CD4E11CC78E67E0EB-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4597
         "time": 1637651301882
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45ABAE4A45B72D213FCE370A1AB6A9CDCFA33251-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4597
         "time": 1637651301885
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93DD8B1FD41B7D3C08540893412D06173E42CFE5-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4597
         "time": 1637651301888
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4597
         "time": 1637651301892
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0428FEC9631C97B6BE36614A455EB4FCB4538EB2-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4597
         "time": 1637651301893
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AA60AC0208B015FB8C434E7479337553458DEB0D-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4597
         "time": 1637651301895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4597
         "time": 1637651301897
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9AB3F10658D8AE5E4CDC9081C405BE82E54CB27-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4597
         "time": 1637651301899
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4597
         "time": 1637651301900
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "569AFA9A890A59757331FD7986855DD9B909DAC4-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4597
         "time": 1637651301903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "131021394653C4EB9BFAAE9D3854AB4F519BF693-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4597
         "time": 1637651302009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous ECFF8AC68443E8EB8779D74D4548D4FD3FBC3C32-1"
         "pid": 4597
         "time": 1637651302039
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:30.284Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:30.286Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:30.286Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:30.286Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:30.367Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:30.549Z appoptics:patching patched crypto 
2021-11-23T07:08:30.573Z appoptics:patching patched https 
2021-11-23T07:08:30.575Z appoptics:patching patched http 
2021-11-23T07:08:30.609Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:30.610Z appoptics:patching patched fs 
2021-11-23T07:08:30.619Z appoptics:patching patched pino 6.5.0
2021-11-23T07:08:30.625Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (220ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4620
         "time": 1637651310674
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C752D5731A2C831376B3064FF8CD44F7480AA513-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4620
         "time": 1637651310685
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FA500590E986D853E3E27F744821D48977EE7262-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4620
         "time": 1637651310692
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ECF98CCFED87079951158575FE19789FBC87716A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4620
         "time": 1637651310697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6BAF26190F41D7BD28DE863AC2D199C78B31839-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4620
         "time": 1637651310702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4620
         "time": 1637651310706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "84344600DE47C27349A2830338FE2A6BD4CEB48E-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4620
         "time": 1637651310710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "03572F6652E2A095F3F06AE5D38554DBF565D5BE-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4620
         "time": 1637651310719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4620
         "time": 1637651310721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18130DCA0D4D222FCF9868FC11ECA25FFC50A040-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4620
         "time": 1637651310724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4620
         "time": 1637651310725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D002DA9CE2D6D2483AA22BCB3A2052A883140D6D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4620
         "time": 1637651310728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E578873975E9BC89D1C4EEF9DE0B632F3BDCF0C8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4620
         "time": 1637651310833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E77272A05114666C121319F2027E31EDAA8C7E18-1"
         "pid": 4620
         "time": 1637651310861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:38.558Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:38.558Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:38.558Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:38.559Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:38.652Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:38.852Z appoptics:patching patched crypto 
2021-11-23T07:08:38.876Z appoptics:patching patched https 
2021-11-23T07:08:38.876Z appoptics:patching patched http 
2021-11-23T07:08:38.910Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:38.910Z appoptics:patching patched fs 
2021-11-23T07:08:38.918Z appoptics:patching patched pino 6.5.1
2021-11-23T07:08:38.924Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (220ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4643
         "time": 1637651318989
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "70F3185A3A5AFE49674EED86D5E634FA9B4ED7E6-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4643
         "time": 1637651318999
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DE66F60D3FA45B73AFFE40D958CF6550051790F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4643
         "time": 1637651319005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05381953BF1AA08BB073D408DC4308D84CC432AF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4643
         "time": 1637651319008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "942310F495A6541FA31D7BCF37CA89BDBCE7E2E4-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4643
         "time": 1637651319011
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4643
         "time": 1637651319015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB76E917CE41E1DA58567B78947C59CE1E555C05-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4643
         "time": 1637651319017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B2A594880826ECC1A3E5C2F0A23C7F4D09E77F7-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4643
         "time": 1637651319019
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4643
         "time": 1637651319021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "94CD8165B709E9454A47041148812C05C8876E12-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4643
         "time": 1637651319023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4643
         "time": 1637651319025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B768441FC2E51D964A1E4636D57CF7651E77F0C-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4643
         "time": 1637651319028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7AA15A2119CAF93691455C898317CDE9A81BEBD1-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4643
         "time": 1637651319133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5DCA7CEA5451BCA95C4F8F9482EA2C0EC7D01710-1"
         "pid": 4643
         "time": 1637651319162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:47.303Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:47.304Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:47.304Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:47.305Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:47.375Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:47.555Z appoptics:patching patched crypto 
2021-11-23T07:08:47.577Z appoptics:patching patched https 
2021-11-23T07:08:47.578Z appoptics:patching patched http 
2021-11-23T07:08:47.613Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:47.614Z appoptics:patching patched fs 
2021-11-23T07:08:47.623Z appoptics:patching patched pino 6.6.0
2021-11-23T07:08:47.637Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (229ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4666
         "time": 1637651327680
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "57F174B9BB278463D57AB33985241AB9EABE1F41-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4666
         "time": 1637651327692
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D5F2CCB20454C45C277F2ACC8120E367210A083-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4666
         "time": 1637651327699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "805950076EE4F789D9F764DFBD57D10DA09A0F7F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4666
         "time": 1637651327706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DEEA130915448C634AA6B8A35F94AA734332399-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4666
         "time": 1637651327711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4666
         "time": 1637651327717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C3AC67546B51492E6C2FF0D69152ED5DE95C015-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4666
         "time": 1637651327719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51FA9BD250BB86FEC7AD325204138E01483A5845-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4666
         "time": 1637651327723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4666
         "time": 1637651327731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5ADDF5D53918116B4822D9D476F2CF977984A9C5-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4666
         "time": 1637651327735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4666
         "time": 1637651327737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4CBF8F601F87A0A216E1C54DC7EF83C534DBC25-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4666
         "time": 1637651327740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "004E72BCB59E8A59FD4AEE696ED0F05DFAF8CD2B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4666
         "time": 1637651327847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D207A2CCCB5DCC5A8D94D4547D73B77DBDFE6301-1"
         "pid": 4666
         "time": 1637651327875
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:08:56.414Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:08:56.415Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:08:56.415Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:08:56.416Z appoptics:debug using context provider: ace-context
2021-11-23T07:08:56.498Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:08:56.675Z appoptics:patching patched crypto 
2021-11-23T07:08:56.699Z appoptics:patching patched https 
2021-11-23T07:08:56.700Z appoptics:patching patched http 
2021-11-23T07:08:56.740Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:08:56.740Z appoptics:patching patched fs 
2021-11-23T07:08:56.750Z appoptics:patching patched pino 6.6.1
2021-11-23T07:08:56.765Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (223ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4689
         "time": 1637651336809
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DCCA3566D9B76CC6404709AF87547FFD8C280EC7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4689
         "time": 1637651336820
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FD09043D72A334CBC5FE1F1A699B4E7F8C703EEF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4689
         "time": 1637651336826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "56309AC0F63A1134691B4AAE3589299B281BBBE2-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4689
         "time": 1637651336831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B49176C9E9BF00CB5873C3C2C9D8F2F150E1993C-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4689
         "time": 1637651336836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4689
         "time": 1637651336841
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DB7D3398B34E740AA0FE0147DD6CD0BC881C81FF-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4689
         "time": 1637651336844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9231A2840AB730DF10354C6AE7430371AF1B956C-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4689
         "time": 1637651336847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4689
         "time": 1637651336857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E37A080AFFB488E8A1A781B2961618B478ABA99C-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4689
         "time": 1637651336859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4689
         "time": 1637651336860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "06781DC9A388240B79420267D840EB091F1E9D10-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4689
         "time": 1637651336863
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5FCD795859C6180010845DCF9B572091311DF92-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4689
         "time": 1637651336967
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D0532CB5BE2CBBB560C149AA7CDDF57CA904ECD7-1"
         "pid": 4689
         "time": 1637651336997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:05.579Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:05.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:05.585Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:05.586Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:05.784Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:06.366Z appoptics:patching patched crypto 
2021-11-23T07:09:06.421Z appoptics:patching patched https 
2021-11-23T07:09:06.422Z appoptics:patching patched http 
2021-11-23T07:09:06.457Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:06.458Z appoptics:patching patched fs 
2021-11-23T07:09:06.467Z appoptics:patching patched pino 6.7.0
2021-11-23T07:09:06.473Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (232ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4712
         "time": 1637651346530
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05DC2567E4BCCE48A8050AE6A0DFD3811AC695C4-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4712
         "time": 1637651346541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "21A809610A5340C8BE0FF60F7BA94B7191ECA35F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4712
         "time": 1637651346548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A5B5D2C4B3DEE739F62FC1AE9B86D8230CB5A9F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4712
         "time": 1637651346552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1985F7AE7440056D7275ED419F75E5EFBE8EC97-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4712
         "time": 1637651346556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4712
         "time": 1637651346563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8AF0DD0DFE99EDDA07CACBE6CA93CFD91F6E5E08-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4712
         "time": 1637651346566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "42264AFC6CAA0E77EF2FF3C983CDDC7AA77F8A83-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4712
         "time": 1637651346583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4712
         "time": 1637651346585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C81C8B1EE67B3A54D27D556858065CAA1AC2EFF8-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4712
         "time": 1637651346587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4712
         "time": 1637651346589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1510B1905781229A24B522D8DDB48265AF27B47A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4712
         "time": 1637651346592
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D77209D4E3123CFDED2D16D468362A2E1B7D7759-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4712
         "time": 1637651346697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C84741079337E7D6D8D3378C1E020E65EE70ED4F-1"
         "pid": 4712
         "time": 1637651346726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:14.482Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:14.483Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:14.484Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:14.484Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:14.565Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:14.734Z appoptics:patching patched crypto 
2021-11-23T07:09:14.757Z appoptics:patching patched https 
2021-11-23T07:09:14.758Z appoptics:patching patched http 
2021-11-23T07:09:14.790Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:14.790Z appoptics:patching patched fs 
2021-11-23T07:09:14.799Z appoptics:patching patched pino 6.8.0
2021-11-23T07:09:14.811Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (218ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4735
         "time": 1637651354853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D4C44496FDFB5B8AA939CEAFDC6148A1E59A7049-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4735
         "time": 1637651354864
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82BA0E964531518DB10482A3E2121CE0CBC26C0E-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4735
         "time": 1637651354871
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F824B492EBABE04854DFE8543DC267DB41DD3431-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4735
         "time": 1637651354875
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6103EA738E81765545EA64562224106B0FC882A8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4735
         "time": 1637651354879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4735
         "time": 1637651354884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAA58C3FB009246CA79164CD3AD05D1D46D2302F-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4735
         "time": 1637651354887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A3D234EBE384BC93BB7C478C6CBDC57575C8943-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4735
         "time": 1637651354890
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4735
         "time": 1637651354897
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BBF25A156D3C50C25C4CC49404375EA026B6E13B-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4735
         "time": 1637651354901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4735
         "time": 1637651354903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1533BD83C74A9601D0507AF93E4ACC0E472BE768-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4735
         "time": 1637651354905
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "105D435A5156EB23869EC16261F12A26A593D173-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4735
         "time": 1637651355009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 704ADDD7502649A0E0673EB33D88FAD96BE123D0-1"
         "pid": 4735
         "time": 1637651355037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:24.265Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:24.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:24.266Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:24.267Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:24.349Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:24.535Z appoptics:patching patched crypto 
2021-11-23T07:09:24.558Z appoptics:patching patched https 
2021-11-23T07:09:24.558Z appoptics:patching patched http 
2021-11-23T07:09:24.589Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:24.590Z appoptics:patching patched fs 
2021-11-23T07:09:24.606Z appoptics:patching patched pino 6.9.0
2021-11-23T07:09:24.613Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (224ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4758
         "time": 1637651364656
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0157745C31C7D007DA67EFE3D68A93B98832183C-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4758
         "time": 1637651364667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F8CCBBDFC39D1447A39E4E00CF5AC2EFFF98634A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4758
         "time": 1637651364675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B20E724E794D301690C157C773E0F3B0406D6528-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4758
         "time": 1637651364681
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "987C68B6387A0B97FA34B153DF182CA7D725B035-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4758
         "time": 1637651364686
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4758
         "time": 1637651364691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BEAF85932052A4710737529B9B8E77ADA7FC58C-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4758
         "time": 1637651364694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "53133BCC4C18CE352FF35CC82AF35FD424352782-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4758
         "time": 1637651364696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4758
         "time": 1637651364699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "920EFC4A4DA20F4EC6DB2E57C2D28DB1FF26FFC3-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4758
         "time": 1637651364707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4758
         "time": 1637651364710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "95DB2367213E80C32FA2D710F0D479B83C919792-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4758
         "time": 1637651364713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "479DD28D1C6AAFE95F430E9F5391BA662EEDAD01-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4758
         "time": 1637651364819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 55DA225B1111BB3CA99EC659BAA432FEC106D46B-1"
         "pid": 4758
         "time": 1637651364847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 1078 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:34.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:34.024Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:34.024Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:34.025Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:34.097Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:34.276Z appoptics:patching patched crypto 
2021-11-23T07:09:34.309Z appoptics:patching patched https 
2021-11-23T07:09:34.310Z appoptics:patching patched http 
2021-11-23T07:09:34.344Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:34.345Z appoptics:patching patched fs 
2021-11-23T07:09:34.354Z appoptics:patching patched pino 6.10.0
2021-11-23T07:09:34.366Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (222ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4781
         "time": 1637651374405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00E58B98146E4B4317B72E90D0BACBDEE7C85472-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4781
         "time": 1637651374418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2909BAE93B4B9141B9C54D08D6BE25A2AE24362A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4781
         "time": 1637651374424
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CD2510D56FA1CB43B76F13BDD0ED6F0C8972BB0-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4781
         "time": 1637651374429
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CA1C58AF6FFD561569938AE47FFECD0F1A3DDF7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4781
         "time": 1637651374434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4781
         "time": 1637651374439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B1D8B93945E75338926664B74B12EE0D579B2D2-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4781
         "time": 1637651374442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A504310DB6760FD30D0C6844242B8A54A3D80097-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4781
         "time": 1637651374445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4781
         "time": 1637651374448
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41AB8E34EE8C5EE016128398DC52467864AC6433-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4781
         "time": 1637651374456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4781
         "time": 1637651374460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B8B4D860D1729DF6A9DA9FE3EEA140636852F45-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4781
         "time": 1637651374463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "16330DC7B015327EBCB617E8B674E1F6235A1AFC-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4781
         "time": 1637651374568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 446D3F19F1C49971956F066E5CB49E3E1FA38B97-1"
         "pid": 4781
         "time": 1637651374596
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:42.520Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:42.521Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:42.521Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:42.522Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:42.620Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:42.832Z appoptics:patching patched crypto 
2021-11-23T07:09:42.857Z appoptics:patching patched https 
2021-11-23T07:09:42.858Z appoptics:patching patched http 
2021-11-23T07:09:42.891Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:42.891Z appoptics:patching patched fs 
2021-11-23T07:09:42.909Z appoptics:patching patched pino 6.11.0
2021-11-23T07:09:42.915Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (243ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4804
         "time": 1637651382974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB5880C2D0B6C020724E19686F76C6F5B937213F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4804
         "time": 1637651382987
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "43C581CD6D470E986A273206487BB8866FCA55F5-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4804
         "time": 1637651382997
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B87343A7EDF49B7E8CBBE561AD2790D741AC682B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4804
         "time": 1637651383003
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "003D80A8AE7013A65980EDCA1F1837E9212AF489-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4804
         "time": 1637651383008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4804
         "time": 1637651383014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1404580245F4336C878DC5339DE76274BE8AE2C9-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4804
         "time": 1637651383018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D3E031D27C018939C4EEA18B703756124DEA020D-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4804
         "time": 1637651383033
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4804
         "time": 1637651383036
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "579E47D769117E4E3C6A531E7869134374B12A30-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4804
         "time": 1637651383038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4804
         "time": 1637651383040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E217911FA8163A3123EA0DFD3A812E66626EE8B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4804
         "time": 1637651383043
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4441B404F42031A131CAA286438791C5750D75BF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4804
         "time": 1637651383148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 557219030384BC82197BBCC15663997729AA2B93-1"
         "pid": 4804
         "time": 1637651383177
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:09:51.327Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:09:51.328Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:09:51.328Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:09:51.329Z appoptics:debug using context provider: ace-context
2021-11-23T07:09:51.425Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:09:51.595Z appoptics:patching patched crypto 
2021-11-23T07:09:51.616Z appoptics:patching patched https 
2021-11-23T07:09:51.617Z appoptics:patching patched http 
2021-11-23T07:09:51.648Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:09:51.648Z appoptics:patching patched fs 
2021-11-23T07:09:51.656Z appoptics:patching patched pino 6.11.1
2021-11-23T07:09:51.661Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (218ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4827
         "time": 1637651391705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8814757269F49BADEBD4DE6487ED6A539D9B223C-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4827
         "time": 1637651391718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0470D64861E20A675083885A5D755D94C84C6194-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4827
         "time": 1637651391724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DA3B2A83B99ED413D8F2E07C38BA65799AEDCC1-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4827
         "time": 1637651391728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7921820A299B6856D7210E0D3A302FAEA95C7F6-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4827
         "time": 1637651391733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4827
         "time": 1637651391737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "132B0C2143D3EF894F868331E558A0526FB6545C-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4827
         "time": 1637651391740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E8D223394C3B78EE3C6E14E634C80A7609D356F2-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4827
         "time": 1637651391743
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4827
         "time": 1637651391745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E587232B7D5FAA95B2BAC9EF69088CA14E26A78-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4827
         "time": 1637651391753
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4827
         "time": 1637651391757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FA542D3C15DDFBC6F93F00675C4F9D9D223B7089-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4827
         "time": 1637651391759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C8E610D7EBA9314803AE75F39FE75A593D6B054D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4827
         "time": 1637651391864
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F6D1FAFD46779E2D494EA47186A99F851DF0BDAD-1"
         "pid": 4827
         "time": 1637651391893
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:00.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:00.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:00.150Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:00.151Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:00.227Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:00.416Z appoptics:patching patched crypto 
2021-11-23T07:10:00.438Z appoptics:patching patched https 
2021-11-23T07:10:00.439Z appoptics:patching patched http 
2021-11-23T07:10:00.472Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:00.473Z appoptics:patching patched fs 
2021-11-23T07:10:00.482Z appoptics:patching patched pino 6.11.2
2021-11-23T07:10:00.487Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (222ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4850
         "time": 1637651400535
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62C490E936ACC8387638C27F8846072C466E3E54-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4850
         "time": 1637651400547
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99ECF488C8147FA92D1BA020A7C9763851F3B78D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4850
         "time": 1637651400553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76B137A757F1A96F814AB10A2577770392AE41AD-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4850
         "time": 1637651400559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "447D4331F046A7D19E206B879583022B3D075D3B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4850
         "time": 1637651400563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4850
         "time": 1637651400568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2498FCEC0E244A2D5CA08B116E67F0E0038D68C8-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4850
         "time": 1637651400571
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "36C0EC63B707146633A2BA266637622A8A5A7220-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4850
         "time": 1637651400574
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4850
         "time": 1637651400581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F8C65D7AD41ADA9C7BFC9E9825D7415A3499BC7-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4850
         "time": 1637651400585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4850
         "time": 1637651400586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AA3FE23DABEB1B6D43D57EF184D375204CB99BB9-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4850
         "time": 1637651400591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4DD85F3D479B54E779419A90EBEACDEB03D18D1-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4850
         "time": 1637651400695
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BB089348534DCFBA08F88A1298C4177ABC71F37D-1"
         "pid": 4850
         "time": 1637651400725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:09.039Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:09.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:09.040Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:09.041Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:09.183Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:09.443Z appoptics:patching patched crypto 
2021-11-23T07:10:09.502Z appoptics:patching patched https 
2021-11-23T07:10:09.503Z appoptics:patching patched http 
2021-11-23T07:10:09.587Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:09.588Z appoptics:patching patched fs 
2021-11-23T07:10:09.601Z appoptics:patching patched pino 6.11.3
2021-11-23T07:10:09.607Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (265ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4873
         "time": 1637651409718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "573AABCED1EFAB7ED64F1AEF0A895F411393924A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4873
         "time": 1637651409735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "753E3F4BF5B85E57A9554781B5C0FA7C76EE9A69-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4873
         "time": 1637651409746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "06106E66A4B8F50E6DBEF3951189B5AFA11AF840-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4873
         "time": 1637651409749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CAD528651A3C5AC3586CF9B60211DA479498C35F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4873
         "time": 1637651409752
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4873
         "time": 1637651409757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DE38DEE436EC64C96D116C7BAC7D59296FE72E55-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4873
         "time": 1637651409760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "639E1E77C418F586E462D9373C4CE2914653C183-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4873
         "time": 1637651409762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4873
         "time": 1637651409765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BF50ABE7E60434D97EFF2F86D822D1C86A905E5A-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4873
         "time": 1637651409767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4873
         "time": 1637651409769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50B129726B82E4D38E469711ED84903A9EE08337-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4873
         "time": 1637651409771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A5E8740BCB1FDBB92E26A688AFE58E2C91B05931-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4873
         "time": 1637651409878
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 105250A791EC187C8DF1946FA38A344EAE9D577E-1"
         "pid": 4873
         "time": 1637651409907
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:18.094Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:18.095Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:18.095Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:18.096Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:18.179Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:18.364Z appoptics:patching patched crypto 
2021-11-23T07:10:18.396Z appoptics:patching patched https 
2021-11-23T07:10:18.397Z appoptics:patching patched http 
2021-11-23T07:10:18.430Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:18.431Z appoptics:patching patched fs 
2021-11-23T07:10:18.439Z appoptics:patching patched pino 6.12.0
2021-11-23T07:10:18.444Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (241ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4896
         "time": 1637651418506
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "66643200C972D19B59F0E2891508755E7E39AEBB-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4896
         "time": 1637651418523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9969C1CB9348B44F8EB16B13D9165DFFF01F6545-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4896
         "time": 1637651418529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E3112857B6677C2E1331F9EA267C107D0A9B352B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4896
         "time": 1637651418533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A56DFA76EB1644530C8575237F9BFB10F833A584-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4896
         "time": 1637651418537
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4896
         "time": 1637651418543
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4601DF2CFF9F631AE329CF2FE2480E2744438259-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4896
         "time": 1637651418556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A45AE8D4226FEE2BD03A41F01ED8A330A709ADDA-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4896
         "time": 1637651418558
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4896
         "time": 1637651418560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F49EB9BCB0F2B68D1314B9F5144643CF248D8B1F-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4896
         "time": 1637651418562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4896
         "time": 1637651418563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "06F1BF7FB24935398604AF91E85C55DF705F9097-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4896
         "time": 1637651418565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88085F2DE4847980809DE242317EC155F64F5830-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4896
         "time": 1637651418671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7AC323013752747688BB726BEC9D628C7D7BB0E6-1"
         "pid": 4896
         "time": 1637651418701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:27.321Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:27.322Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:27.322Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:27.323Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:27.404Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:27.602Z appoptics:patching patched crypto 
2021-11-23T07:10:27.624Z appoptics:patching patched https 
2021-11-23T07:10:27.625Z appoptics:patching patched http 
2021-11-23T07:10:27.659Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:27.660Z appoptics:patching patched fs 
2021-11-23T07:10:27.676Z appoptics:patching patched pino 6.13.0
2021-11-23T07:10:27.684Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (238ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4919
         "time": 1637651427732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1A785A8F0EF56E4718057C9A6D61BAC0F191E310-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4919
         "time": 1637651427744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6A848C285C818879D5DB582B3BF0EAA08EB9A45-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4919
         "time": 1637651427754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4BA262C3673D91AE682D739591F5D06762A0EE79-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4919
         "time": 1637651427759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F42AC16948343CBF47A633C0140B4E13346B5ED8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4919
         "time": 1637651427766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4919
         "time": 1637651427771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2060BDB07DC13C6AA3B1A732E1A0621F3A422C17-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4919
         "time": 1637651427774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9AB48406B4A5C0A078018E64CDDF91EE1A979715-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4919
         "time": 1637651427777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4919
         "time": 1637651427782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E49D79BCF254F1821D3638CCB90457AD5E326EA-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4919
         "time": 1637651427792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4919
         "time": 1637651427796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F4A5580BCF27A8265DC90F4A18EB5E8794FA75F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4919
         "time": 1637651427798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F36DB7C3E6ACA52BD51646344C38AFF334BFE164-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4919
         "time": 1637651427903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 47B72360EEB9D4AFFA66EFD1B5B9F061F981A50D-1"
         "pid": 4919
         "time": 1637651427932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 1079 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:36.576Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:36.577Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:36.577Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:36.578Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:36.655Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:36.822Z appoptics:patching patched crypto 
2021-11-23T07:10:36.843Z appoptics:patching patched https 
2021-11-23T07:10:36.844Z appoptics:patching patched http 
2021-11-23T07:10:36.874Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:36.875Z appoptics:patching patched fs 
2021-11-23T07:10:36.891Z appoptics:patching patched pino 6.13.1
2021-11-23T07:10:36.896Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (224ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4942
         "time": 1637651436934
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "556E89E63E95D811BC46948513A82506A95F67B7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4942
         "time": 1637651436945
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9891871A80BBB0917A55FFC8DE092E198621995-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4942
         "time": 1637651436952
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F24BB8199C0CF3898A906530679A1166E55237BA-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4942
         "time": 1637651436956
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C2F00E8BDDA8BA71C7165A0441A455B2AAC8BBF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4942
         "time": 1637651436961
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4942
         "time": 1637651436967
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9976233D1974E153A6F5E9067B647B7C678C3A7D-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4942
         "time": 1637651436970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "51EAB0BF6A3396377EADDC774C754E356A2689FF-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4942
         "time": 1637651436973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4942
         "time": 1637651436976
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D552D8F8A48CA9192204315BE7D02A370E93107-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4942
         "time": 1637651436979
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4942
         "time": 1637651436991
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2AEB8C43AF3AB2E755F5D4997917028FF6FB0812-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4942
         "time": 1637651436994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD94295A3E7E444FD950F3D45461B4B62658C5F8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4942
         "time": 1637651437099
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1483ACDECE45310F70605A64B17473EE87148548-1"
         "pid": 4942
         "time": 1637651437128
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1079 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:44.952Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:44.953Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:44.953Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:44.954Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:45.040Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:45.215Z appoptics:patching patched crypto 
2021-11-23T07:10:45.240Z appoptics:patching patched https 
2021-11-23T07:10:45.241Z appoptics:patching patched http 
2021-11-23T07:10:45.276Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:45.277Z appoptics:patching patched fs 
2021-11-23T07:10:45.295Z appoptics:patching patched pino 6.13.2
2021-11-23T07:10:45.300Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (224ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4965
         "time": 1637651445344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "65EABA77B9D21879AE2EB427D558D98F838E09BE-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4965
         "time": 1637651445355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB16B4D93D3F0BA04F5A646EA1EA6324BC18F1CF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4965
         "time": 1637651445362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B7FF4D4ED27D31CE25EF50AF35CC0EF52B962DD-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4965
         "time": 1637651445367
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AA41906A430D5DB55EC0ABF9EEA7640744AA1FCA-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4965
         "time": 1637651445371
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4965
         "time": 1637651445376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3EC2E3A6B21802BA86147F456AC361F5394EBCA4-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4965
         "time": 1637651445380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F860E4A855F26E9DEE0D9E3DDC1D219AC5D9E5B7-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4965
         "time": 1637651445389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4965
         "time": 1637651445392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48BD6035E3FEE19EBAE89D7D6DEE1E285CF1E294-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4965
         "time": 1637651445394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4965
         "time": 1637651445396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "071719516878B5DBD676B6E4AEDE63BFB31D4752-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4965
         "time": 1637651445399
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "49BC9208DFDC23E0299C92F7C222CC552B2CDD3D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4965
         "time": 1637651445505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E82B6B40AC66F6D7DB2D7BE550F373A84140B38C-1"
         "pid": 4965
         "time": 1637651445533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1079 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:10:54.121Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:10:54.122Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:10:54.122Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:10:54.123Z appoptics:debug using context provider: ace-context
2021-11-23T07:10:54.196Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:10:54.378Z appoptics:patching patched crypto 
2021-11-23T07:10:54.399Z appoptics:patching patched https 
2021-11-23T07:10:54.400Z appoptics:patching patched http 
2021-11-23T07:10:54.433Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:10:54.434Z appoptics:patching patched fs 
2021-11-23T07:10:54.443Z appoptics:patching patched pino 6.13.3
2021-11-23T07:10:54.459Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (212ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4988
         "time": 1637651454496
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F6BB2CD0E5013915A70F49B3ACA7D1DF89D9C28-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4988
         "time": 1637651454507
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C3B597A014110CFF5B862AA8F31F703E4FEFC8E-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4988
         "time": 1637651454513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B9AA540175828C5E27860FC769BBE16B9485A0F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4988
         "time": 1637651454517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E5BE3297F954536D790483D4ED6B8D3894B383A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4988
         "time": 1637651454522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4988
         "time": 1637651454526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1365DF63DBB6EC815A9AA3239E9C7766BAE5549F-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4988
         "time": 1637651454529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "741BBCFB83DBC889D05239BB2E32EC43273B24EB-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4988
         "time": 1637651454532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4988
         "time": 1637651454539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E8B347440B775F3ECE936548694EE0C1AD835F2-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4988
         "time": 1637651454542
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 4988
         "time": 1637651454543
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "365A748EBDE7C00DED5E0F0F673BE29623747012-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4988
         "time": 1637651454545
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FF04BF8F093D77F41D0F11DDE92FAAC30A8E0B7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4988
         "time": 1637651454651
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F423FDE1E6D0D0C427FCD4C37EAD685D9C6D0AD1-1"
         "pid": 4988
         "time": 1637651454680
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 8 packages, removed 2 packages, changed 3 packages, and audited 1085 packages in 35s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:11:30.158Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:11:30.159Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:11:30.159Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:11:30.160Z appoptics:debug using context provider: ace-context
2021-11-23T07:11:30.349Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:11:30.588Z appoptics:patching patched crypto 
2021-11-23T07:11:30.613Z appoptics:patching patched https 
2021-11-23T07:11:30.613Z appoptics:patching patched http 
2021-11-23T07:11:30.650Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:11:30.650Z appoptics:patching patched fs 
2021-11-23T07:11:30.662Z appoptics:patching patched pino 7.0.0
2021-11-23T07:11:30.674Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (224ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5011
         "time": 1637651490721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "352D217B0B756B1F1F97127E8943636CFBC29AB7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5011
         "time": 1637651490733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "32BE2F30D5443F3181D1EAA91AF087E1C644EF5D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5011
         "time": 1637651490740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F4617BAE0AB1A738430336A44F1955BCEC91882-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5011
         "time": 1637651490745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEA086D3814BF1C301B13F003812F73A275DA151-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5011
         "time": 1637651490749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5011
         "time": 1637651490754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33334D89E2CD8E629824683114EF1FEEDB597D8B-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5011
         "time": 1637651490757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F841FCA7D7DC770E6AA4CCF84112491310825F1B-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5011
         "time": 1637651490769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5011
         "time": 1637651490771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DBE035B83784D26328BD636CD4BA90E95FCE582-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5011
         "time": 1637651490773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5011
         "time": 1637651490775
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA56CB7D961FB0019D970CCB1EB476774C18A33D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5011
         "time": 1637651490777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "840BFF238ED0D60A7FE49B3A2544B6494E205C5A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5011
         "time": 1637651490881
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E59DC9247F7D87CBA8F8C9848314D2B23A3E1BF5-1"
         "pid": 5011
         "time": 1637651490910
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1085 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:11:40.001Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:11:40.002Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:11:40.002Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:11:40.003Z appoptics:debug using context provider: ace-context
2021-11-23T07:11:40.078Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:11:40.255Z appoptics:patching patched crypto 
2021-11-23T07:11:40.278Z appoptics:patching patched https 
2021-11-23T07:11:40.279Z appoptics:patching patched http 
2021-11-23T07:11:40.319Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:11:40.320Z appoptics:patching patched fs 
2021-11-23T07:11:40.341Z appoptics:patching patched pino 7.0.1
2021-11-23T07:11:40.347Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (253ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5034
         "time": 1637651500397
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "98AE40959625F9ADE45A62EE9177B49E738365BD-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5034
         "time": 1637651500411
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A812594F82FF4CD8F12BEC4153A1EBCA43195D4-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5034
         "time": 1637651500417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3725B2EFF09FBA14E201B9B895901697B7E59C5-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5034
         "time": 1637651500421
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88576B525012AA3A03CA213608705DC49E5F079B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5034
         "time": 1637651500426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5034
         "time": 1637651500431
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E93AC588E29B81EC6C63D1915D3D4E872CD332F4-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5034
         "time": 1637651500456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D8387A93192E7FF8CE64F475E75ED39222E39D6-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5034
         "time": 1637651500458
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5034
         "time": 1637651500467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A5BBF522CA75F7FDCB2637BD7FD7B27A69321EE-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5034
         "time": 1637651500469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5034
         "time": 1637651500470
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00721377BE263CBCDC952EC70429005D8537A6CB-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5034
         "time": 1637651500472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAEBBB440B30DA97DEC6440EF7F133C67C74FD87-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5034
         "time": 1637651500579
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C94F5496669647A49E5B37519CEDA8EE77198E88-1"
         "pid": 5034
         "time": 1637651500609
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1085 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:11:48.621Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:11:48.621Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:11:48.622Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:11:48.622Z appoptics:debug using context provider: ace-context
2021-11-23T07:11:48.717Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:11:48.927Z appoptics:patching patched crypto 
2021-11-23T07:11:48.952Z appoptics:patching patched https 
2021-11-23T07:11:48.953Z appoptics:patching patched http 
2021-11-23T07:11:48.994Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:11:48.995Z appoptics:patching patched fs 
2021-11-23T07:11:49.025Z appoptics:patching patched pino 7.0.2
2021-11-23T07:11:49.051Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (276ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5057
         "time": 1637651509117
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3BB4831F25C4D0C6ED1FC0AD081EC71A7E2AD940-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5057
         "time": 1637651509133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "874D2E205763DBE1F58D34A391AD2A25F5FC6553-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5057
         "time": 1637651509141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1EC483D35324EA3B0820972DFF1D3850D667209E-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5057
         "time": 1637651509149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2E66A53BDF4445504CF357B22CB9946FF025A242-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5057
         "time": 1637651509170
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5057
         "time": 1637651509176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "821C66A95684F9838966A296B3BFEBE0CC1F8402-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5057
         "time": 1637651509178
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46483058BA67012A895E7E83EB903C3241637AF6-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5057
         "time": 1637651509182
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5057
         "time": 1637651509185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "203454856188059DF918B26B53A061D8032B2674-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5057
         "time": 1637651509190
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5057
         "time": 1637651509194
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C958521A0D16A4999F172A9A772E8579A4DCF8AE-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5057
         "time": 1637651509202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44D57ED439D67C74A7E9A9CCDCE8E851F37F0A2F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5057
         "time": 1637651509308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3639C1A2331BF205D48E22E4D3F1998FC8CA9CB4-1"
         "pid": 5057
         "time": 1637651509339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1085 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:11:57.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:11:57.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:11:57.327Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:11:57.328Z appoptics:debug using context provider: ace-context
2021-11-23T07:11:57.408Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:11:57.616Z appoptics:patching patched crypto 
2021-11-23T07:11:57.641Z appoptics:patching patched https 
2021-11-23T07:11:57.642Z appoptics:patching patched http 
2021-11-23T07:11:57.679Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:11:57.680Z appoptics:patching patched fs 
2021-11-23T07:11:57.699Z appoptics:patching patched pino 7.0.3
2021-11-23T07:11:57.705Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (225ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5080
         "time": 1637651517749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76C814D84822777E8171218162C926C028436DFD-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5080
         "time": 1637651517762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "209F7411B2446381504C49DA2431A6B802B42C44-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5080
         "time": 1637651517768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2EB7B5531C1CEE13FBBC9977BE6E8EF8F42C16E1-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5080
         "time": 1637651517773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "010E8BA12A7C1410EEF12CC56D09062CF988910B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5080
         "time": 1637651517778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5080
         "time": 1637651517782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5B1DC91905ABF8BC80540C3A7238CC55AE650A0-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5080
         "time": 1637651517786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02444FDAD48309057E1AB3E840CE8B2AF7726F25-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5080
         "time": 1637651517798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5080
         "time": 1637651517800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D3FE799BF924A9734CB51F337B8846788607A11-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5080
         "time": 1637651517801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5080
         "time": 1637651517803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFDB37A63536A95CA0CB5BC7EE98A8514822D5DB-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5080
         "time": 1637651517806
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F4F19FEAF97B36F666987353EB55A77BAEC76C52-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5080
         "time": 1637651517911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9A9F2E80D9F9790CA07C0B60CC4D4A66AACF2894-1"
         "pid": 5080
         "time": 1637651517941
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1085 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:07.973Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:07.974Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:07.974Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:07.975Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:08.076Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:08.268Z appoptics:patching patched crypto 
2021-11-23T07:12:08.293Z appoptics:patching patched https 
2021-11-23T07:12:08.294Z appoptics:patching patched http 
2021-11-23T07:12:08.330Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:08.331Z appoptics:patching patched fs 
2021-11-23T07:12:08.349Z appoptics:patching patched pino 7.0.4
2021-11-23T07:12:08.354Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (223ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5103
         "time": 1637651528401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B56BAF0DA534EADA51E67D0C93ED4DA093A28E7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5103
         "time": 1637651528413
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C531571214E684365C3FDD4C06F751003DB0E61D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5103
         "time": 1637651528419
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8539B594897710A81075B2EB166B284947B553F7-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5103
         "time": 1637651528424
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0B885F05DA2AF28B84E422E43048BCD04CAA76A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5103
         "time": 1637651528428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5103
         "time": 1637651528433
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A67D92FD1D6A5D547DBBEF65B274DE56E8E61544-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5103
         "time": 1637651528436
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDDB11372577E992525ECB522F34B0ADC0882BF7-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5103
         "time": 1637651528444
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5103
         "time": 1637651528448
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3C25C21B01ECFDFBE5F0FEA35BF63EFF0D6CB35-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5103
         "time": 1637651528450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5103
         "time": 1637651528452
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7026609BC3386F8A264A96C7DEFEBE0D31547BF1-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5103
         "time": 1637651528455
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00E4C920474797AA0572EB06D57E02ECCD45A6F5-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5103
         "time": 1637651528561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 213EA51AFE516B18658549C1263CE50557011A90-1"
         "pid": 5103
         "time": 1637651528589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1085 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:17.947Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:17.948Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:17.948Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:17.949Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:18.030Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:18.229Z appoptics:patching patched crypto 
2021-11-23T07:12:18.252Z appoptics:patching patched https 
2021-11-23T07:12:18.253Z appoptics:patching patched http 
2021-11-23T07:12:18.288Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:18.288Z appoptics:patching patched fs 
2021-11-23T07:12:18.307Z appoptics:patching patched pino 7.0.5
2021-11-23T07:12:18.312Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (223ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5126
         "time": 1637651538355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "79A6270CA63AA7C83A6BC2A74D1D1005FD67E7FF-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5126
         "time": 1637651538369
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E48C9F9C64C0B2B9211A332ECD88EB28759F54B5-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5126
         "time": 1637651538375
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A0FE5F046C91667AA8146C92C711CAFD004EDB4-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5126
         "time": 1637651538380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9F605E1AAB9A41F959CAAE9C26C7CF0D0660B18B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5126
         "time": 1637651538385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5126
         "time": 1637651538390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D0564499E2F934F0A61900D5C9CF9052E61FB59E-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5126
         "time": 1637651538393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6048E094052E19A3B14A094F95426D28CB546E7F-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5126
         "time": 1637651538404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5126
         "time": 1637651538406
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "747DE2532E8E9A1AD62C4244FC063F30D054CB70-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5126
         "time": 1637651538408
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5126
         "time": 1637651538410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B15B32AD40DFDF68F6FFCE126797D9340A087032-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5126
         "time": 1637651538412
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB752AED5C5FAA8CD7857E0F22E8C1069D3D8C0D-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5126
         "time": 1637651538516
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F90B71F789FDD155784552B73AE6A883370D8130-1"
         "pid": 5126
         "time": 1637651538545
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, changed 4 packages, and audited 1087 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:27.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:27.034Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:27.034Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:27.035Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:27.123Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:27.327Z appoptics:patching patched crypto 
2021-11-23T07:12:27.349Z appoptics:patching patched https 
2021-11-23T07:12:27.350Z appoptics:patching patched http 
2021-11-23T07:12:27.387Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:27.388Z appoptics:patching patched fs 
2021-11-23T07:12:27.411Z appoptics:patching patched pino 7.1.0
2021-11-23T07:12:27.417Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (229ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5149
         "time": 1637651547473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E77D0E5F3B368C032F6D60BB1AE1D05BCED1DFC8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5149
         "time": 1637651547486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2D7F0FAE2D73B209055B2E40C04B22A9DFBDA01B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5149
         "time": 1637651547490
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4EE29E2845F92DE9CA4E4C832FCEF7A79602B01A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5149
         "time": 1637651547495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F65397BCA1F0EA372C5D922A89C5A948040A7D8-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5149
         "time": 1637651547499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5149
         "time": 1637651547505
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F8AD5B6C6C5931BAA24CF865509D70724B06E682-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5149
         "time": 1637651547509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BFB1B623E2D095142589780BD879F0197FBA1A82-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5149
         "time": 1637651547511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5149
         "time": 1637651547513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D22BB24C7521F743F5E9A04AE13830B3CF18AFB1-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5149
         "time": 1637651547517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5149
         "time": 1637651547518
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "25ECD7ECA8A521BBDCDD3E7BC98E481C7B2C6007-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5149
         "time": 1637651547522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FC5A888305104F342A461EA83B2D99522AAB56E-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5149
         "time": 1637651547626
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 726358D67ECF44641C139D352E45F0F6E3EC9CB5-1"
         "pid": 5149
         "time": 1637651547655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 1088 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:35.615Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:35.615Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:35.616Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:35.617Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:35.693Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:35.876Z appoptics:patching patched crypto 
2021-11-23T07:12:35.899Z appoptics:patching patched https 
2021-11-23T07:12:35.900Z appoptics:patching patched http 
2021-11-23T07:12:35.934Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:35.935Z appoptics:patching patched fs 
2021-11-23T07:12:35.955Z appoptics:patching patched pino 7.2.0
2021-11-23T07:12:35.961Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (247ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5172
         "time": 1637651556005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC37A383083131FCD3901E40A777734D3E373F19-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5172
         "time": 1637651556018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41AF06265EA2699421C7D43893D34AC7294A1E8F-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5172
         "time": 1637651556031
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3A6F1C6DDF195AFA9C2198CB8FC97A8C1320C51-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5172
         "time": 1637651556037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27AD15CC657D403D7418145254F3129C12121574-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5172
         "time": 1637651556041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5172
         "time": 1637651556069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4B55BC19593CCD837D9E7EDFF2A7C78CACE23CF-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5172
         "time": 1637651556071
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F8CC68AB98BEBC8BAC40C8E5DB5BD067C0699B87-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5172
         "time": 1637651556074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5172
         "time": 1637651556076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "94A115FBDE27DCAFAE6751E5CD9D8C191BF264B4-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5172
         "time": 1637651556078
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5172
         "time": 1637651556079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AA8BE98B8281AA1B35E8FDD67A293EECAD603EE-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5172
         "time": 1637651556083
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46F816744CCE159917AB7CAD9838F89A2D8A4D5A-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5172
         "time": 1637651556187
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5F8BE1295BE1728E219104C9F006F3DDA42D3AB4-1"
         "pid": 5172
         "time": 1637651556216
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1088 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:45.143Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:45.144Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:45.144Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:45.145Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:45.226Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:45.401Z appoptics:patching patched crypto 
2021-11-23T07:12:45.424Z appoptics:patching patched https 
2021-11-23T07:12:45.424Z appoptics:patching patched http 
2021-11-23T07:12:45.458Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:45.458Z appoptics:patching patched fs 
2021-11-23T07:12:45.479Z appoptics:patching patched pino 7.3.0
2021-11-23T07:12:45.490Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (220ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5195
         "time": 1637651565537
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C3F0089C8A912BEF19C44AA752BF3CE08FA1BAB-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5195
         "time": 1637651565548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E404A2C67B027BC30803FB514F1B8F2B047536F6-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5195
         "time": 1637651565555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "605A35DF5C369FB36358A372784B446716E1D735-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5195
         "time": 1637651565560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F524649754A81D7395DEA4907D621D44F8B37F24-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5195
         "time": 1637651565564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5195
         "time": 1637651565569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B6ADFD748144DEE11F7BBDE5A4B6A971F5B7A96-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5195
         "time": 1637651565577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9CC184394565104BA4E8A818E859B37330961A58-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5195
         "time": 1637651565581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5195
         "time": 1637651565583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99EA74C6E9737A326E2B7DA343EBA927567CACD3-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5195
         "time": 1637651565585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5195
         "time": 1637651565586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B8BFB068EE434539F487B17E9B60C102D479AD9E-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5195
         "time": 1637651565589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5C046DE266E204773A2C3C442286BE11ADAA204-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5195
         "time": 1637651565693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 52F14FFCAA0F7D6C31CA23B93630CB865210D340-1"
         "pid": 5195
         "time": 1637651565722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 1088 packages in 9s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T07:12:55.311Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T07:12:55.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T07:12:55.311Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T07:12:55.312Z appoptics:debug using context provider: ace-context
2021-11-23T07:12:55.385Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T07:12:55.556Z appoptics:patching patched crypto 
2021-11-23T07:12:55.578Z appoptics:patching patched https 
2021-11-23T07:12:55.579Z appoptics:patching patched http 
2021-11-23T07:12:55.616Z appoptics:patching fs.realpath - adding native method
2021-11-23T07:12:55.617Z appoptics:patching patched fs 
2021-11-23T07:12:55.635Z appoptics:patching patched pino 7.4.0
2021-11-23T07:12:55.641Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (230ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5218
         "time": 1637651575686
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93DDCF6D1AC7E79B29351B7F144F41684ED0BFCC-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5218
         "time": 1637651575697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DFE03E3F3AD9BFD308B2A71A01E2690B7EE2A08-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5218
         "time": 1637651575703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64E975C495251F19FEA7F0C7C565AD3C2108DD85-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5218
         "time": 1637651575713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "690F684DDBA3C907D322195AFB14BE8361F76458-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5218
         "time": 1637651575718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5218
         "time": 1637651575723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2813F245E995D928E0526B633B86578077D151BA-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5218
         "time": 1637651575726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA7D7109C71F050781EC718A2CD64B6FFE12C47B-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5218
         "time": 1637651575729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5218
         "time": 1637651575740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5402F62DB18A3C9A4833138ABFC9EA74154283A5-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5218
         "time": 1637651575742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "always insert"
         "pid": 5218
         "time": 1637651575744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9551B8136D5EB9FE4FFFE47A80BC22625B2A64B-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5218
         "time": 1637651575747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A2AD2F819951355E80716EF90D47805E0B68D370-1"
      +  }
         "hostname": "71b6a1abb46a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5218
         "time": 1637651575852
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 44810A5DF5DAD5CED0B790BEAEA74640437D7F95-1"
         "pid": 5218
         "time": 1637651575881
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:390:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:390:28)
      at UDP.onMessage [as onmessage] (node:dgram:939:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 12 packages, changed 6 packages, and audited 1078 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
