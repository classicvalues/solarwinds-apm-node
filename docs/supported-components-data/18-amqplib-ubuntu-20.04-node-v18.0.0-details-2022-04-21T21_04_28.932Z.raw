npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:36.144Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:36.145Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:36.145Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:36.146Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:36.278Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:36.621Z appoptics:patching patched crypto 
2022-04-21T21:04:36.706Z appoptics:patching patched https 
2022-04-21T21:04:36.707Z appoptics:patching patched http 
2022-04-21T21:04:36.790Z appoptics:patching patched amqplib 0.2.0
2022-04-21T21:04:36.793Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:36.796Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message (50ms)
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at process.processImmediate (node:internal/timers:471:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at process.processImmediate (node:internal/timers:471:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:47.911Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:47.912Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:47.912Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:47.913Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:48.223Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:48.669Z appoptics:patching patched crypto 
2022-04-21T21:04:48.817Z appoptics:patching patched https 
2022-04-21T21:04:48.818Z appoptics:patching patched http 
2022-04-21T21:04:48.980Z appoptics:patching patched amqplib 0.2.1
2022-04-21T21:04:48.982Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:48.991Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:842) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (70ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (304ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:04:56.237Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:56.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:56.237Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:56.238Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:56.299Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:56.416Z appoptics:patching patched crypto 
2022-04-21T21:04:56.435Z appoptics:patching patched https 
2022-04-21T21:04:56.436Z appoptics:patching patched http 
2022-04-21T21:04:56.493Z appoptics:patching patched amqplib 0.3.0
2022-04-21T21:04:56.495Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:56.497Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:864) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (53ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (234ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:04.221Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:04.221Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:04.221Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:04.222Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:04.284Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:04.403Z appoptics:patching patched crypto 
2022-04-21T21:05:04.421Z appoptics:patching patched https 
2022-04-21T21:05:04.421Z appoptics:patching patched http 
2022-04-21T21:05:04.480Z appoptics:patching patched amqplib 0.3.1
2022-04-21T21:05:04.482Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:04.484Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:886) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (50ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (230ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:11.312Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:11.313Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:11.313Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:11.313Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:11.375Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:11.495Z appoptics:patching patched crypto 
2022-04-21T21:05:11.517Z appoptics:patching patched https 
2022-04-21T21:05:11.518Z appoptics:patching patched http 
2022-04-21T21:05:11.573Z appoptics:patching patched amqplib 0.3.2
2022-04-21T21:05:11.575Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:11.577Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:908) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (64ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (52ms)


  7 passing (241ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:18.482Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:18.482Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:18.483Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:18.483Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:18.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:18.659Z appoptics:patching patched crypto 
2022-04-21T21:05:18.677Z appoptics:patching patched https 
2022-04-21T21:05:18.677Z appoptics:patching patched http 
2022-04-21T21:05:18.739Z appoptics:patching patched amqplib 0.4.0
2022-04-21T21:05:18.741Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:18.743Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:930) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (57ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (235ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:527:28)
      at Connection.emit (node:events:527:28)
      at C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:527:28)
      at emitReadable_ (node:internal/streams/readable:590:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:527:28)
      at Connection.emit (node:events:527:28)
      at C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:527:28)
      at emitReadable_ (node:internal/streams/readable:590:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:25.625Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:25.626Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:25.626Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:25.626Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:25.709Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:25.842Z appoptics:patching patched crypto 
2022-04-21T21:05:25.883Z appoptics:patching patched https 
2022-04-21T21:05:25.884Z appoptics:patching patched http 
2022-04-21T21:05:25.942Z appoptics:patching patched amqplib 0.4.1
2022-04-21T21:05:25.944Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:25.946Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:952) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (236ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:32.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:32.815Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:32.815Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:32.816Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:32.907Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:33.062Z appoptics:patching patched crypto 
2022-04-21T21:05:33.105Z appoptics:patching patched https 
2022-04-21T21:05:33.106Z appoptics:patching patched http 
2022-04-21T21:05:33.164Z appoptics:patching patched amqplib 0.4.2
2022-04-21T21:05:33.166Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:33.168Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:974) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (54ms)


  7 passing (229ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 923 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:39.918Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:39.919Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:39.919Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:39.919Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:39.980Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:40.109Z appoptics:patching patched crypto 
2022-04-21T21:05:40.134Z appoptics:patching patched https 
2022-04-21T21:05:40.145Z appoptics:patching patched http 
2022-04-21T21:05:40.207Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:40.210Z appoptics:patching patched amqplib 0.5.1
2022-04-21T21:05:40.211Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:40.214Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:996) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (56ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (229ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:46.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:46.807Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:46.807Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:46.808Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:46.870Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:46.985Z appoptics:patching patched crypto 
2022-04-21T21:05:47.004Z appoptics:patching patched https 
2022-04-21T21:05:47.005Z appoptics:patching patched http 
2022-04-21T21:05:47.070Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:47.072Z appoptics:patching patched amqplib 0.5.2
2022-04-21T21:05:47.074Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:47.076Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:1018) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (144ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:05:54.435Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:05:54.435Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:05:54.435Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:05:54.436Z appoptics:debug using context provider: ace-context
2022-04-21T21:05:54.513Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:05:54.635Z appoptics:patching patched crypto 
2022-04-21T21:05:54.677Z appoptics:patching patched https 
2022-04-21T21:05:54.678Z appoptics:patching patched http 
2022-04-21T21:05:54.746Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:05:54.749Z appoptics:patching patched amqplib 0.5.3
2022-04-21T21:05:54.750Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:05:54.753Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:1040) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (193ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:00.782Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:00.783Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:00.783Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:00.784Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:00.843Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:00.956Z appoptics:patching patched crypto 
2022-04-21T21:06:00.973Z appoptics:patching patched https 
2022-04-21T21:06:00.974Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:08.285Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:08.286Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:08.286Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:08.287Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:08.349Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:08.467Z appoptics:patching patched crypto 
2022-04-21T21:06:08.486Z appoptics:patching patched https 
2022-04-21T21:06:08.487Z appoptics:patching patched http 
2022-04-21T21:06:08.555Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:08.557Z appoptics:patching patched amqplib 0.5.5
2022-04-21T21:06:08.559Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:08.561Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:1080) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (232ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:15.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:15.410Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:15.410Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:15.410Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:15.479Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:15.618Z appoptics:patching patched crypto 
2022-04-21T21:06:15.661Z appoptics:patching patched https 
2022-04-21T21:06:15.670Z appoptics:patching patched http 
2022-04-21T21:06:15.757Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:15.760Z appoptics:patching patched amqplib 0.5.6
2022-04-21T21:06:15.762Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:15.765Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:1102) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (57ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (247ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:22.047Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:22.048Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:22.048Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:22.048Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:22.110Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:22.252Z appoptics:patching patched crypto 
2022-04-21T21:06:22.283Z appoptics:patching patched https 
2022-04-21T21:06:22.284Z appoptics:patching patched http 
2022-04-21T21:06:22.343Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:22.346Z appoptics:patching patched amqplib 0.6.0
2022-04-21T21:06:22.347Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:22.350Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:1124) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (50ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (225ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:29.744Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:29.744Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:29.745Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:29.745Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:29.806Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:29.920Z appoptics:patching patched crypto 
2022-04-21T21:06:29.938Z appoptics:patching patched https 
2022-04-21T21:06:29.939Z appoptics:patching patched http 
2022-04-21T21:06:30.005Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:30.007Z appoptics:patching patched amqplib 0.7.0
2022-04-21T21:06:30.009Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:30.011Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:1146) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (224ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:36.598Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:36.598Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:36.598Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:36.599Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:36.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:36.777Z appoptics:patching patched crypto 
2022-04-21T21:06:36.795Z appoptics:patching patched https 
2022-04-21T21:06:36.796Z appoptics:patching patched http 
2022-04-21T21:06:36.865Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:36.868Z appoptics:patching patched amqplib 0.7.1
2022-04-21T21:06:36.870Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:36.872Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:1168) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (235ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:06:44.576Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:06:44.577Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:06:44.577Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:06:44.577Z appoptics:debug using context provider: ace-context
2022-04-21T21:06:44.637Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:06:44.751Z appoptics:patching patched crypto 
2022-04-21T21:06:44.769Z appoptics:patching patched https 
2022-04-21T21:06:44.769Z appoptics:patching patched http 
2022-04-21T21:06:44.842Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:06:44.844Z appoptics:patching patched amqplib 0.8.0
2022-04-21T21:06:44.846Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:06:44.848Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:1190) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (53ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (231ms)


up to date, audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
