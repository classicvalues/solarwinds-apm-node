npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.0
added 1 package from 3 contributors, removed 6 packages, updated 3 packages and audited 929 packages in 4.289s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:13.032Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:13.033Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:13.033Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:13.033Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:13.101Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:13.237Z appoptics:patching patched crypto 
2022-04-21T21:03:13.254Z appoptics:patching patched https 
2022-04-21T21:03:13.255Z appoptics:patching patched http 
2022-04-21T21:03:13.296Z appoptics:patching patched amqplib 0.2.0
2022-04-21T21:03:13.298Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:13.300Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.1
updated 2 packages and audited 929 packages in 4.04s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:22.216Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:22.216Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:22.216Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:22.217Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:22.275Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:22.406Z appoptics:patching patched crypto 
2022-04-21T21:03:22.422Z appoptics:patching patched https 
2022-04-21T21:03:22.423Z appoptics:patching patched http 
2022-04-21T21:03:22.472Z appoptics:patching patched amqplib 0.2.1
2022-04-21T21:03:22.473Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:22.475Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:493) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (214ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.0
updated 1 package and audited 929 packages in 4.853s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:28.388Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:28.389Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:28.389Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:28.391Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:28.450Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:28.586Z appoptics:patching patched crypto 
2022-04-21T21:03:28.603Z appoptics:patching patched https 
2022-04-21T21:03:28.604Z appoptics:patching patched http 
2022-04-21T21:03:28.653Z appoptics:patching patched amqplib 0.3.0
2022-04-21T21:03:28.655Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:28.657Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:515) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (194ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.1
updated 2 packages and audited 929 packages in 3.92s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:33.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:33.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:33.654Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:33.656Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:33.715Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:33.847Z appoptics:patching patched crypto 
2022-04-21T21:03:33.864Z appoptics:patching patched https 
2022-04-21T21:03:33.864Z appoptics:patching patched http 
2022-04-21T21:03:33.911Z appoptics:patching patched amqplib 0.3.1
2022-04-21T21:03:33.913Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:33.915Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:537) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (221ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.2: wanted: {"node":">=0.8 <0.13 || ^1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.2
updated 1 package and audited 929 packages in 3.819s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:38.883Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:38.884Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:38.884Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:38.886Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:38.957Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:39.106Z appoptics:patching patched crypto 
2022-04-21T21:03:39.160Z appoptics:patching patched https 
2022-04-21T21:03:39.160Z appoptics:patching patched http 
2022-04-21T21:03:39.215Z appoptics:patching patched amqplib 0.3.2
2022-04-21T21:03:39.217Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:39.219Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:559) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (189ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.0: wanted: {"node":">=0.8 <4 || ^4"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.0
updated 1 package and audited 929 packages in 3.912s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:44.261Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:44.262Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:44.262Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:44.262Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:44.320Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:44.450Z appoptics:patching patched crypto 
2022-04-21T21:03:44.467Z appoptics:patching patched https 
2022-04-21T21:03:44.468Z appoptics:patching patched http 
2022-04-21T21:03:44.513Z appoptics:patching patched amqplib 0.4.0
2022-04-21T21:03:44.514Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:44.517Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:581) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (44ms)
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (212ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.1: wanted: {"node":">=0.8 <5 || ^5"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.1
updated 1 package and audited 929 packages in 3.58s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:49.142Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:49.142Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:49.142Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:49.143Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:49.203Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:49.342Z appoptics:patching patched crypto 
2022-04-21T21:03:49.359Z appoptics:patching patched https 
2022-04-21T21:03:49.359Z appoptics:patching patched http 
2022-04-21T21:03:49.416Z appoptics:patching patched amqplib 0.4.1
2022-04-21T21:03:49.417Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:49.420Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:603) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (52ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (228ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.2: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.2
updated 1 package and audited 929 packages in 6.031s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:03:56.728Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:03:56.729Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:03:56.729Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:03:56.730Z appoptics:debug using context provider: ace-context
2022-04-21T21:03:56.820Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:03:56.995Z appoptics:patching patched crypto 
2022-04-21T21:03:57.014Z appoptics:patching patched https 
2022-04-21T21:03:57.015Z appoptics:patching patched http 
2022-04-21T21:03:57.075Z appoptics:patching patched amqplib 0.4.2
2022-04-21T21:03:57.077Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:03:57.079Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:625) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (212ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.1: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.1
removed 1 package, updated 1 package and audited 929 packages in 3.67s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:01.880Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:01.880Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:01.880Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:01.881Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:01.947Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:02.079Z appoptics:patching patched crypto 
2022-04-21T21:04:02.096Z appoptics:patching patched https 
2022-04-21T21:04:02.097Z appoptics:patching patched http 
2022-04-21T21:04:02.153Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:02.155Z appoptics:patching patched amqplib 0.5.1
2022-04-21T21:04:02.157Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:02.159Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:647) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (44ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (185ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.2: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.2
updated 1 package and audited 929 packages in 4.921s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:08.155Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:08.155Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:08.155Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:08.156Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:08.221Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:08.371Z appoptics:patching patched crypto 
2022-04-21T21:04:08.388Z appoptics:patching patched https 
2022-04-21T21:04:08.389Z appoptics:patching patched http 
2022-04-21T21:04:08.444Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:08.446Z appoptics:patching patched amqplib 0.5.2
2022-04-21T21:04:08.448Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:08.450Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:669) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (58ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (218ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.3: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.3
added 7 packages from 5 contributors, updated 3 packages and audited 936 packages in 3.756s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:13.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:13.275Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:13.275Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:13.277Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:13.339Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:13.471Z appoptics:patching patched crypto 
2022-04-21T21:04:13.489Z appoptics:patching patched https 
2022-04-21T21:04:13.490Z appoptics:patching patched http 
2022-04-21T21:04:13.547Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:13.549Z appoptics:patching patched amqplib 0.5.3
2022-04-21T21:04:13.551Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:13.553Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:691) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (54ms)


  7 passing (180ms)

npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.4: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.4
updated 1 package and audited 936 packages in 4.437s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:19.039Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:19.039Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:19.039Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:19.040Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:19.099Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:19.229Z appoptics:patching patched crypto 
2022-04-21T21:04:19.245Z appoptics:patching patched https 
2022-04-21T21:04:19.246Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:902:15)
    at Function.Module._load (internal/modules/cjs/loader.js:746:27)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.5: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.5
updated 1 package and audited 936 packages in 3.528s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:23.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:23.618Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:23.618Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:23.618Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:23.676Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:23.807Z appoptics:patching patched crypto 
2022-04-21T21:04:23.824Z appoptics:patching patched https 
2022-04-21T21:04:23.825Z appoptics:patching patched http 
2022-04-21T21:04:23.885Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:23.887Z appoptics:patching patched amqplib 0.5.5
2022-04-21T21:04:23.889Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:23.891Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:731) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (187ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.6: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.6
updated 1 package and audited 936 packages in 4.106s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:29.111Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:29.112Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:29.112Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:29.112Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:29.183Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:29.336Z appoptics:patching patched crypto 
2022-04-21T21:04:29.381Z appoptics:patching patched https 
2022-04-21T21:04:29.381Z appoptics:patching patched http 
2022-04-21T21:04:29.439Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:29.441Z appoptics:patching patched amqplib 0.5.6
2022-04-21T21:04:29.443Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:29.445Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:753) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (59ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (239ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.6.0
updated 1 package and audited 936 packages in 3.528s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:34.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:34.050Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:34.050Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:34.050Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:34.110Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:34.266Z appoptics:patching patched crypto 
2022-04-21T21:04:34.283Z appoptics:patching patched https 
2022-04-21T21:04:34.283Z appoptics:patching patched http 
2022-04-21T21:04:34.342Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:34.344Z appoptics:patching patched amqplib 0.6.0
2022-04-21T21:04:34.346Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:34.348Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:775) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (223ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.0
updated 1 package and audited 936 packages in 3.932s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:39.342Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:39.343Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:39.343Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:39.344Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:39.402Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:39.537Z appoptics:patching patched crypto 
2022-04-21T21:04:39.554Z appoptics:patching patched https 
2022-04-21T21:04:39.554Z appoptics:patching patched http 
2022-04-21T21:04:39.614Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:39.616Z appoptics:patching patched amqplib 0.7.0
2022-04-21T21:04:39.618Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:39.620Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:797) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (52ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (236ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.1
removed 1 package, updated 2 packages and audited 935 packages in 4.17s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:44.923Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:44.924Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:44.924Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:44.924Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:44.984Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:45.118Z appoptics:patching patched crypto 
2022-04-21T21:04:45.135Z appoptics:patching patched https 
2022-04-21T21:04:45.135Z appoptics:patching patched http 
2022-04-21T21:04:45.194Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:45.196Z appoptics:patching patched amqplib 0.7.1
2022-04-21T21:04:45.198Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:45.200Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:819) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (218ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 3.816s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T21:04:50.109Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:04:50.109Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:04:50.109Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:04:50.111Z appoptics:debug using context provider: ace-context
2022-04-21T21:04:50.170Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:04:50.307Z appoptics:patching patched crypto 
2022-04-21T21:04:50.325Z appoptics:patching patched https 
2022-04-21T21:04:50.325Z appoptics:patching patched http 
2022-04-21T21:04:50.384Z appoptics:patching patched bluebird 3.7.2
2022-04-21T21:04:50.386Z appoptics:patching patched amqplib 0.8.0
2022-04-21T21:04:50.388Z appoptics:patching patched amqplib/callback_api 
2022-04-21T21:04:50.390Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:841) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (224ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 4.1s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
