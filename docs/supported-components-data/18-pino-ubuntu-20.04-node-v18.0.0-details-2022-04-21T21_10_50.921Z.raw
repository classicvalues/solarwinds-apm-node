
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:10:57.894Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:10:57.895Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:10:57.895Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:10:57.896Z appoptics:debug using context provider: ace-context
2022-04-21T21:10:57.994Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:10:58.124Z appoptics:patching patched crypto 
2022-04-21T21:10:58.200Z appoptics:patching patched https 
2022-04-21T21:10:58.201Z appoptics:patching patched http 
2022-04-21T21:10:58.350Z appoptics:patching patched pino 2.3.0
2022-04-21T21:10:58.362Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (237ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:04.573Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:04.573Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:04.573Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:04.574Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:04.628Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:04.733Z appoptics:patching patched crypto 
2022-04-21T21:11:04.749Z appoptics:patching patched https 
2022-04-21T21:11:04.750Z appoptics:patching patched http 
2022-04-21T21:11:04.790Z appoptics:patching patched pino 2.4.0
2022-04-21T21:11:04.793Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:11.790Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:11.790Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:11.790Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:11.791Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:11.846Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:11.951Z appoptics:patching patched crypto 
2022-04-21T21:11:11.967Z appoptics:patching patched https 
2022-04-21T21:11:11.968Z appoptics:patching patched http 
2022-04-21T21:11:12.009Z appoptics:patching patched pino 2.4.1
2022-04-21T21:11:12.013Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:17.844Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:17.845Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:17.845Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:17.845Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:17.898Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:18.006Z appoptics:patching patched crypto 
2022-04-21T21:11:18.024Z appoptics:patching patched https 
2022-04-21T21:11:18.024Z appoptics:patching patched http 
2022-04-21T21:11:18.082Z appoptics:patching patched pino 2.4.2
2022-04-21T21:11:18.087Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:24.958Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:24.958Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:24.958Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:24.959Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:25.011Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:25.113Z appoptics:patching patched crypto 
2022-04-21T21:11:25.129Z appoptics:patching patched https 
2022-04-21T21:11:25.130Z appoptics:patching patched http 
2022-04-21T21:11:25.165Z appoptics:patching patched pino 2.4.3
2022-04-21T21:11:25.169Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:31.035Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:31.035Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:31.035Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:31.036Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:31.095Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:31.207Z appoptics:patching patched crypto 
2022-04-21T21:11:31.225Z appoptics:patching patched https 
2022-04-21T21:11:31.226Z appoptics:patching patched http 
2022-04-21T21:11:31.268Z appoptics:patching patched pino 2.4.4
2022-04-21T21:11:31.271Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:37.770Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:37.771Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:37.771Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:37.771Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:37.832Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:37.945Z appoptics:patching patched crypto 
2022-04-21T21:11:37.962Z appoptics:patching patched https 
2022-04-21T21:11:37.962Z appoptics:patching patched http 
2022-04-21T21:11:38.004Z appoptics:patching patched pino 2.5.0
2022-04-21T21:11:38.007Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:44.072Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:44.072Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:44.072Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:44.073Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:44.126Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:44.228Z appoptics:patching patched crypto 
2022-04-21T21:11:44.243Z appoptics:patching patched https 
2022-04-21T21:11:44.243Z appoptics:patching patched http 
2022-04-21T21:11:44.281Z appoptics:patching patched pino 2.6.0
2022-04-21T21:11:44.284Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:50.421Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:50.421Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:50.421Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:50.422Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:50.474Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:50.577Z appoptics:patching patched crypto 
2022-04-21T21:11:50.593Z appoptics:patching patched https 
2022-04-21T21:11:50.594Z appoptics:patching patched http 
2022-04-21T21:11:50.635Z appoptics:patching patched pino 2.6.1
2022-04-21T21:11:50.638Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:11:56.500Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:11:56.501Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:11:56.501Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:11:56.501Z appoptics:debug using context provider: ace-context
2022-04-21T21:11:56.555Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:11:56.658Z appoptics:patching patched crypto 
2022-04-21T21:11:56.673Z appoptics:patching patched https 
2022-04-21T21:11:56.674Z appoptics:patching patched http 
2022-04-21T21:11:56.716Z appoptics:patching patched pino 2.7.0
2022-04-21T21:11:56.719Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:02.891Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:02.891Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:02.891Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:02.892Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:02.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:03.045Z appoptics:patching patched crypto 
2022-04-21T21:12:03.070Z appoptics:patching patched https 
2022-04-21T21:12:03.070Z appoptics:patching patched http 
2022-04-21T21:12:03.101Z appoptics:patching patched pino 2.7.1
2022-04-21T21:12:03.104Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:08.930Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:08.931Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:08.931Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:08.932Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:09.001Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:09.120Z appoptics:patching patched crypto 
2022-04-21T21:12:09.155Z appoptics:patching patched https 
2022-04-21T21:12:09.156Z appoptics:patching patched http 
2022-04-21T21:12:09.202Z appoptics:patching patched pino 2.7.2
2022-04-21T21:12:09.205Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:15.687Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:15.688Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:15.688Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:15.688Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:15.751Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:15.865Z appoptics:patching patched crypto 
2022-04-21T21:12:15.882Z appoptics:patching patched https 
2022-04-21T21:12:15.883Z appoptics:patching patched http 
2022-04-21T21:12:15.948Z appoptics:patching patched pino 2.7.3
2022-04-21T21:12:15.952Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:22.269Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:22.269Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:22.269Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:22.270Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:22.337Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:22.466Z appoptics:patching patched crypto 
2022-04-21T21:12:22.507Z appoptics:patching patched https 
2022-04-21T21:12:22.507Z appoptics:patching patched http 
2022-04-21T21:12:22.550Z appoptics:patching patched pino 2.7.4
2022-04-21T21:12:22.553Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:28.986Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:28.988Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:28.988Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:28.989Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:29.048Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:29.163Z appoptics:patching patched crypto 
2022-04-21T21:12:29.182Z appoptics:patching patched https 
2022-04-21T21:12:29.183Z appoptics:patching patched http 
2022-04-21T21:12:29.226Z appoptics:patching patched pino 2.7.5
2022-04-21T21:12:29.230Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:36.088Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:36.089Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:36.089Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:36.089Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:36.149Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:36.286Z appoptics:patching patched crypto 
2022-04-21T21:12:36.321Z appoptics:patching patched https 
2022-04-21T21:12:36.347Z appoptics:patching patched http 
2022-04-21T21:12:36.392Z appoptics:patching patched pino 2.8.0
2022-04-21T21:12:36.396Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:42.633Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:42.634Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:42.634Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:42.635Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:42.693Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:42.809Z appoptics:patching patched crypto 
2022-04-21T21:12:42.827Z appoptics:patching patched https 
2022-04-21T21:12:42.827Z appoptics:patching patched http 
2022-04-21T21:12:42.874Z appoptics:patching patched pino 2.8.1
2022-04-21T21:12:42.878Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:50.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:50.024Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:50.024Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:50.024Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:50.084Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:50.274Z appoptics:patching patched crypto 
2022-04-21T21:12:50.293Z appoptics:patching patched https 
2022-04-21T21:12:50.294Z appoptics:patching patched http 
2022-04-21T21:12:50.350Z appoptics:patching patched pino 2.8.2
2022-04-21T21:12:50.354Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:12:56.384Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:12:56.385Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:12:56.385Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:12:56.385Z appoptics:debug using context provider: ace-context
2022-04-21T21:12:56.441Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:12:56.551Z appoptics:patching patched crypto 
2022-04-21T21:12:56.599Z appoptics:patching patched https 
2022-04-21T21:12:56.600Z appoptics:patching patched http 
2022-04-21T21:12:56.651Z appoptics:patching patched pino 2.8.3
2022-04-21T21:12:56.654Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:03.339Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:03.339Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:03.339Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:03.340Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:03.393Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:03.496Z appoptics:patching patched crypto 
2022-04-21T21:13:03.511Z appoptics:patching patched https 
2022-04-21T21:13:03.512Z appoptics:patching patched http 
2022-04-21T21:13:03.562Z appoptics:patching patched pino 2.9.0
2022-04-21T21:13:03.565Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:09.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:09.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:09.617Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:09.618Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:09.694Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:09.822Z appoptics:patching patched crypto 
2022-04-21T21:13:09.858Z appoptics:patching patched https 
2022-04-21T21:13:09.859Z appoptics:patching patched http 
2022-04-21T21:13:09.904Z appoptics:patching patched pino 2.10.0
2022-04-21T21:13:09.907Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:16.505Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:16.505Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:16.505Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:16.506Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:16.559Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:16.659Z appoptics:patching patched crypto 
2022-04-21T21:13:16.674Z appoptics:patching patched https 
2022-04-21T21:13:16.674Z appoptics:patching patched http 
2022-04-21T21:13:16.720Z appoptics:patching patched pino 2.10.1
2022-04-21T21:13:16.723Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:23.858Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:23.859Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:23.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:23.860Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:23.925Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:24.037Z appoptics:patching patched crypto 
2022-04-21T21:13:24.054Z appoptics:patching patched https 
2022-04-21T21:13:24.055Z appoptics:patching patched http 
2022-04-21T21:13:24.105Z appoptics:patching patched pino 2.11.0
2022-04-21T21:13:24.109Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:30.277Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:30.277Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:30.277Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:30.278Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:30.337Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:30.449Z appoptics:patching patched crypto 
2022-04-21T21:13:30.466Z appoptics:patching patched https 
2022-04-21T21:13:30.466Z appoptics:patching patched http 
2022-04-21T21:13:30.511Z appoptics:patching patched pino 2.12.0
2022-04-21T21:13:30.515Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:37.308Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:37.309Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:37.309Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:37.309Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:37.363Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:37.465Z appoptics:patching patched crypto 
2022-04-21T21:13:37.481Z appoptics:patching patched https 
2022-04-21T21:13:37.482Z appoptics:patching patched http 
2022-04-21T21:13:37.528Z appoptics:patching patched pino 2.12.1
2022-04-21T21:13:37.531Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:43.730Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:43.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:43.730Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:43.731Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:43.784Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:43.886Z appoptics:patching patched crypto 
2022-04-21T21:13:43.901Z appoptics:patching patched https 
2022-04-21T21:13:43.902Z appoptics:patching patched http 
2022-04-21T21:13:43.948Z appoptics:patching patched pino 2.12.2
2022-04-21T21:13:43.951Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:50.377Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:50.378Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:50.378Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:50.378Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:50.438Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:50.554Z appoptics:patching patched crypto 
2022-04-21T21:13:50.571Z appoptics:patching patched https 
2022-04-21T21:13:50.571Z appoptics:patching patched http 
2022-04-21T21:13:50.615Z appoptics:patching patched pino 2.12.3
2022-04-21T21:13:50.619Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:13:56.752Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:13:56.753Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:13:56.753Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:13:56.754Z appoptics:debug using context provider: ace-context
2022-04-21T21:13:56.813Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:13:56.922Z appoptics:patching patched crypto 
2022-04-21T21:13:56.951Z appoptics:patching patched https 
2022-04-21T21:13:56.951Z appoptics:patching patched http 
2022-04-21T21:13:56.991Z appoptics:patching patched pino 2.12.4
2022-04-21T21:13:56.995Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:03.428Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:03.428Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:03.428Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:03.429Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:03.488Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:03.603Z appoptics:patching patched crypto 
2022-04-21T21:14:03.620Z appoptics:patching patched https 
2022-04-21T21:14:03.621Z appoptics:patching patched http 
2022-04-21T21:14:03.664Z appoptics:patching patched pino 2.13.0
2022-04-21T21:14:03.668Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:09.632Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:09.632Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:09.632Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:09.633Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:09.690Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:09.802Z appoptics:patching patched crypto 
2022-04-21T21:14:09.838Z appoptics:patching patched https 
2022-04-21T21:14:09.839Z appoptics:patching patched http 
2022-04-21T21:14:09.880Z appoptics:patching patched pino 2.13.2
2022-04-21T21:14:09.884Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:16.069Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:16.069Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:16.069Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:16.070Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:16.123Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:16.224Z appoptics:patching patched crypto 
2022-04-21T21:14:16.240Z appoptics:patching patched https 
2022-04-21T21:14:16.241Z appoptics:patching patched http 
2022-04-21T21:14:16.282Z appoptics:patching patched pino 2.14.0
2022-04-21T21:14:16.286Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:22.219Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:22.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:22.219Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:22.220Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:22.284Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:22.426Z appoptics:patching patched crypto 
2022-04-21T21:14:22.490Z appoptics:patching patched https 
2022-04-21T21:14:22.491Z appoptics:patching patched http 
2022-04-21T21:14:22.537Z appoptics:patching patched pino 2.15.0
2022-04-21T21:14:22.540Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:28.765Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:28.766Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:28.766Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:28.766Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:28.821Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:28.927Z appoptics:patching patched crypto 
2022-04-21T21:14:28.943Z appoptics:patching patched https 
2022-04-21T21:14:28.943Z appoptics:patching patched http 
2022-04-21T21:14:28.971Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:14:28.971Z appoptics:patching patched fs 
2022-04-21T21:14:28.991Z appoptics:patching patched pino 2.16.0
2022-04-21T21:14:28.995Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:35.621Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:35.622Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:35.622Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:35.623Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:35.685Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:35.790Z appoptics:patching patched crypto 
2022-04-21T21:14:35.807Z appoptics:patching patched https 
2022-04-21T21:14:35.807Z appoptics:patching patched http 
2022-04-21T21:14:35.837Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:14:35.837Z appoptics:patching patched fs 
2022-04-21T21:14:35.849Z appoptics:patching patched pino 3.0.0
2022-04-21T21:14:35.852Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:41.996Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:41.997Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:41.997Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:41.998Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:42.056Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:42.214Z appoptics:patching patched crypto 
2022-04-21T21:14:42.232Z appoptics:patching patched https 
2022-04-21T21:14:42.232Z appoptics:patching patched http 
2022-04-21T21:14:42.284Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:14:42.284Z appoptics:patching patched fs 
2022-04-21T21:14:42.297Z appoptics:patching patched pino 3.0.1
2022-04-21T21:14:42.301Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:49.168Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:49.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:49.169Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:49.170Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:49.246Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:49.356Z appoptics:patching patched crypto 
2022-04-21T21:14:49.372Z appoptics:patching patched https 
2022-04-21T21:14:49.373Z appoptics:patching patched http 
2022-04-21T21:14:49.393Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:14:49.394Z appoptics:patching patched fs 
2022-04-21T21:14:49.411Z appoptics:patching patched pino 3.0.2
2022-04-21T21:14:49.414Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:14:55.283Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:14:55.284Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:14:55.284Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:14:55.284Z appoptics:debug using context provider: ace-context
2022-04-21T21:14:55.340Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:14:55.444Z appoptics:patching patched crypto 
2022-04-21T21:14:55.460Z appoptics:patching patched https 
2022-04-21T21:14:55.461Z appoptics:patching patched http 
2022-04-21T21:14:55.491Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:14:55.491Z appoptics:patching patched fs 
2022-04-21T21:14:55.504Z appoptics:patching patched pino 3.0.3
2022-04-21T21:14:55.507Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:09.700Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:09.701Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:09.701Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:09.702Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:09.790Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:09.967Z appoptics:patching patched crypto 
2022-04-21T21:15:09.991Z appoptics:patching patched https 
2022-04-21T21:15:09.992Z appoptics:patching patched http 
2022-04-21T21:15:10.075Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:10.075Z appoptics:patching patched fs 
2022-04-21T21:15:10.092Z appoptics:patching patched pino 3.0.4
2022-04-21T21:15:10.100Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (209ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:16.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:16.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:16.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:16.556Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:16.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:16.730Z appoptics:patching patched crypto 
2022-04-21T21:15:16.747Z appoptics:patching patched https 
2022-04-21T21:15:16.748Z appoptics:patching patched http 
2022-04-21T21:15:16.781Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:16.782Z appoptics:patching patched fs 
2022-04-21T21:15:16.795Z appoptics:patching patched pino 3.0.5
2022-04-21T21:15:16.798Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:23.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:23.449Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:23.449Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:23.449Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:23.541Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:23.679Z appoptics:patching patched crypto 
2022-04-21T21:15:23.699Z appoptics:patching patched https 
2022-04-21T21:15:23.700Z appoptics:patching patched http 
2022-04-21T21:15:23.729Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:23.729Z appoptics:patching patched fs 
2022-04-21T21:15:23.741Z appoptics:patching patched pino 3.0.6
2022-04-21T21:15:23.745Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:29.491Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:29.492Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:29.492Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:29.492Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:29.547Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:29.683Z appoptics:patching patched crypto 
2022-04-21T21:15:29.699Z appoptics:patching patched https 
2022-04-21T21:15:29.700Z appoptics:patching patched http 
2022-04-21T21:15:29.727Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:29.727Z appoptics:patching patched fs 
2022-04-21T21:15:29.739Z appoptics:patching patched pino 3.0.7
2022-04-21T21:15:29.743Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:36.453Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:36.454Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:36.454Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:36.454Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:36.514Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:36.629Z appoptics:patching patched crypto 
2022-04-21T21:15:36.646Z appoptics:patching patched https 
2022-04-21T21:15:36.646Z appoptics:patching patched http 
2022-04-21T21:15:36.678Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:36.678Z appoptics:patching patched fs 
2022-04-21T21:15:36.692Z appoptics:patching patched pino 3.1.0
2022-04-21T21:15:36.695Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:42.948Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:42.949Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:42.949Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:42.950Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:43.055Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:43.323Z appoptics:patching patched crypto 
2022-04-21T21:15:43.352Z appoptics:patching patched https 
2022-04-21T21:15:43.359Z appoptics:patching patched http 
2022-04-21T21:15:43.397Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:43.398Z appoptics:patching patched fs 
2022-04-21T21:15:43.411Z appoptics:patching patched pino 3.1.1
2022-04-21T21:15:43.415Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:50.292Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:50.293Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:50.293Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:50.293Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:50.355Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:50.471Z appoptics:patching patched crypto 
2022-04-21T21:15:50.488Z appoptics:patching patched https 
2022-04-21T21:15:50.489Z appoptics:patching patched http 
2022-04-21T21:15:50.517Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:50.518Z appoptics:patching patched fs 
2022-04-21T21:15:50.535Z appoptics:patching patched pino 3.1.2
2022-04-21T21:15:50.539Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:15:57.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:15:57.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:15:57.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:15:57.044Z appoptics:debug using context provider: ace-context
2022-04-21T21:15:57.099Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:15:57.202Z appoptics:patching patched crypto 
2022-04-21T21:15:57.218Z appoptics:patching patched https 
2022-04-21T21:15:57.218Z appoptics:patching patched http 
2022-04-21T21:15:57.253Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:15:57.253Z appoptics:patching patched fs 
2022-04-21T21:15:57.267Z appoptics:patching patched pino 3.1.3
2022-04-21T21:15:57.271Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:04.085Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:04.086Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:04.086Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:04.086Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:04.147Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:04.265Z appoptics:patching patched crypto 
2022-04-21T21:16:04.283Z appoptics:patching patched https 
2022-04-21T21:16:04.283Z appoptics:patching patched http 
2022-04-21T21:16:04.314Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:04.314Z appoptics:patching patched fs 
2022-04-21T21:16:04.331Z appoptics:patching patched pino 3.2.0
2022-04-21T21:16:04.336Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:10.673Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:10.673Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:10.673Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:10.674Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:10.743Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:10.860Z appoptics:patching patched crypto 
2022-04-21T21:16:10.899Z appoptics:patching patched https 
2022-04-21T21:16:10.899Z appoptics:patching patched http 
2022-04-21T21:16:10.929Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:10.930Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:17.450Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:17.450Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:17.450Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:17.451Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:17.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:17.605Z appoptics:patching patched crypto 
2022-04-21T21:16:17.622Z appoptics:patching patched https 
2022-04-21T21:16:17.623Z appoptics:patching patched http 
2022-04-21T21:16:17.647Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:17.648Z appoptics:patching patched fs 
2022-04-21T21:16:17.665Z appoptics:patching patched pino 3.3.1
2022-04-21T21:16:17.668Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (165ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:23.977Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:23.978Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:23.978Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:23.979Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:24.147Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:24.256Z appoptics:patching patched crypto 
2022-04-21T21:16:24.272Z appoptics:patching patched https 
2022-04-21T21:16:24.285Z appoptics:patching patched http 
2022-04-21T21:16:24.310Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:24.310Z appoptics:patching patched fs 
2022-04-21T21:16:24.324Z appoptics:patching patched pino 3.3.2
2022-04-21T21:16:24.327Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


added 2 packages, changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:30.441Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:30.441Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:30.441Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:30.442Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:30.496Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:30.598Z appoptics:patching patched crypto 
2022-04-21T21:16:30.614Z appoptics:patching patched https 
2022-04-21T21:16:30.615Z appoptics:patching patched http 
2022-04-21T21:16:30.640Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:30.640Z appoptics:patching patched fs 
2022-04-21T21:16:30.655Z appoptics:patching patched pino 3.4.0
2022-04-21T21:16:30.658Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:37.251Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:37.252Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:37.252Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:37.252Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:37.330Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:37.456Z appoptics:patching patched crypto 
2022-04-21T21:16:37.495Z appoptics:patching patched https 
2022-04-21T21:16:37.496Z appoptics:patching patched http 
2022-04-21T21:16:37.526Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:37.526Z appoptics:patching patched fs 
2022-04-21T21:16:37.542Z appoptics:patching patched pino 4.0.0
2022-04-21T21:16:37.545Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:43.191Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:43.192Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:43.192Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:43.193Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:43.251Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:43.363Z appoptics:patching patched crypto 
2022-04-21T21:16:43.380Z appoptics:patching patched https 
2022-04-21T21:16:43.381Z appoptics:patching patched http 
2022-04-21T21:16:43.411Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:43.412Z appoptics:patching patched fs 
2022-04-21T21:16:43.427Z appoptics:patching patched pino 4.0.1
2022-04-21T21:16:43.430Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:50.197Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:50.197Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:50.197Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:50.198Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:50.256Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:50.372Z appoptics:patching patched crypto 
2022-04-21T21:16:50.390Z appoptics:patching patched https 
2022-04-21T21:16:50.390Z appoptics:patching patched http 
2022-04-21T21:16:50.439Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:50.439Z appoptics:patching patched fs 
2022-04-21T21:16:50.453Z appoptics:patching patched pino 4.0.2
2022-04-21T21:16:50.456Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:16:56.335Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:16:56.336Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:16:56.336Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:16:56.336Z appoptics:debug using context provider: ace-context
2022-04-21T21:16:56.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:16:56.492Z appoptics:patching patched crypto 
2022-04-21T21:16:56.508Z appoptics:patching patched https 
2022-04-21T21:16:56.508Z appoptics:patching patched http 
2022-04-21T21:16:56.533Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:16:56.533Z appoptics:patching patched fs 
2022-04-21T21:16:56.547Z appoptics:patching patched pino 4.0.3
2022-04-21T21:16:56.550Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:03.637Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:03.637Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:03.637Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:03.638Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:03.697Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:03.813Z appoptics:patching patched crypto 
2022-04-21T21:17:03.839Z appoptics:patching patched https 
2022-04-21T21:17:03.839Z appoptics:patching patched http 
2022-04-21T21:17:03.862Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:03.862Z appoptics:patching patched fs 
2022-04-21T21:17:03.878Z appoptics:patching patched pino 4.1.0
2022-04-21T21:17:03.881Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:10.034Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:10.034Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:10.034Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:10.035Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:10.094Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:10.230Z appoptics:patching patched crypto 
2022-04-21T21:17:10.269Z appoptics:patching patched https 
2022-04-21T21:17:10.270Z appoptics:patching patched http 
2022-04-21T21:17:10.297Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:10.298Z appoptics:patching patched fs 
2022-04-21T21:17:10.313Z appoptics:patching patched pino 4.1.1
2022-04-21T21:17:10.317Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:17.095Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:17.095Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:17.095Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:17.096Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:17.153Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:17.293Z appoptics:patching patched crypto 
2022-04-21T21:17:17.311Z appoptics:patching patched https 
2022-04-21T21:17:17.311Z appoptics:patching patched http 
2022-04-21T21:17:17.337Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:17.338Z appoptics:patching patched fs 
2022-04-21T21:17:17.357Z appoptics:patching patched pino 4.1.2
2022-04-21T21:17:17.360Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:23.833Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:23.834Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:23.834Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:23.835Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:23.908Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:24.034Z appoptics:patching patched crypto 
2022-04-21T21:17:24.075Z appoptics:patching patched https 
2022-04-21T21:17:24.075Z appoptics:patching patched http 
2022-04-21T21:17:24.106Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:24.106Z appoptics:patching patched fs 
2022-04-21T21:17:24.121Z appoptics:patching patched pino 4.2.0
2022-04-21T21:17:24.125Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:30.465Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:30.465Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:30.465Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:30.466Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:30.524Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:30.636Z appoptics:patching patched crypto 
2022-04-21T21:17:30.653Z appoptics:patching patched https 
2022-04-21T21:17:30.654Z appoptics:patching patched http 
2022-04-21T21:17:30.680Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:30.680Z appoptics:patching patched fs 
2022-04-21T21:17:30.699Z appoptics:patching patched pino 4.2.1
2022-04-21T21:17:30.703Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:37.549Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:37.550Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:37.550Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:37.551Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:37.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:37.726Z appoptics:patching patched crypto 
2022-04-21T21:17:37.744Z appoptics:patching patched https 
2022-04-21T21:17:37.745Z appoptics:patching patched http 
2022-04-21T21:17:37.771Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:37.771Z appoptics:patching patched fs 
2022-04-21T21:17:37.787Z appoptics:patching patched pino 4.2.2
2022-04-21T21:17:37.790Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:44.073Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:44.074Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:44.074Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:44.074Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:44.133Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:44.247Z appoptics:patching patched crypto 
2022-04-21T21:17:44.264Z appoptics:patching patched https 
2022-04-21T21:17:44.265Z appoptics:patching patched http 
2022-04-21T21:17:44.292Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:44.292Z appoptics:patching patched fs 
2022-04-21T21:17:44.307Z appoptics:patching patched pino 4.2.3
2022-04-21T21:17:44.311Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:51.168Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:51.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:51.169Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:51.169Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:51.227Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:51.341Z appoptics:patching patched crypto 
2022-04-21T21:17:51.359Z appoptics:patching patched https 
2022-04-21T21:17:51.360Z appoptics:patching patched http 
2022-04-21T21:17:51.390Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:51.390Z appoptics:patching patched fs 
2022-04-21T21:17:51.406Z appoptics:patching patched pino 4.2.4
2022-04-21T21:17:51.409Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:17:57.824Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:17:57.825Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:17:57.825Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:17:57.826Z appoptics:debug using context provider: ace-context
2022-04-21T21:17:57.884Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:17:57.997Z appoptics:patching patched crypto 
2022-04-21T21:17:58.014Z appoptics:patching patched https 
2022-04-21T21:17:58.015Z appoptics:patching patched http 
2022-04-21T21:17:58.044Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:17:58.047Z appoptics:patching patched fs 
2022-04-21T21:17:58.063Z appoptics:patching patched pino 4.3.0
2022-04-21T21:17:58.066Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:04.871Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:04.872Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:04.872Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:04.872Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:04.948Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:05.074Z appoptics:patching patched crypto 
2022-04-21T21:18:05.110Z appoptics:patching patched https 
2022-04-21T21:18:05.110Z appoptics:patching patched http 
2022-04-21T21:18:05.143Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:05.143Z appoptics:patching patched fs 
2022-04-21T21:18:05.159Z appoptics:patching patched pino 4.4.0
2022-04-21T21:18:05.163Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:11.474Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:11.476Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:11.476Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:11.477Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:11.554Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:11.685Z appoptics:patching patched crypto 
2022-04-21T21:18:11.726Z appoptics:patching patched https 
2022-04-21T21:18:11.726Z appoptics:patching patched http 
2022-04-21T21:18:11.757Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:11.757Z appoptics:patching patched fs 
2022-04-21T21:18:11.773Z appoptics:patching patched pino 4.5.0
2022-04-21T21:18:11.777Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:18.617Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:18.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:18.617Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:18.618Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:18.677Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:18.788Z appoptics:patching patched crypto 
2022-04-21T21:18:18.806Z appoptics:patching patched https 
2022-04-21T21:18:18.806Z appoptics:patching patched http 
2022-04-21T21:18:18.833Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:18.836Z appoptics:patching patched fs 
2022-04-21T21:18:18.852Z appoptics:patching patched pino 4.5.1
2022-04-21T21:18:18.855Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:25.497Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:25.497Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:25.497Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:25.498Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:25.556Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:25.668Z appoptics:patching patched crypto 
2022-04-21T21:18:25.686Z appoptics:patching patched https 
2022-04-21T21:18:25.686Z appoptics:patching patched http 
2022-04-21T21:18:25.712Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:25.713Z appoptics:patching patched fs 
2022-04-21T21:18:25.728Z appoptics:patching patched pino 4.5.2
2022-04-21T21:18:25.732Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:32.025Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:32.026Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:32.026Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:32.026Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:32.084Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:32.200Z appoptics:patching patched crypto 
2022-04-21T21:18:32.217Z appoptics:patching patched https 
2022-04-21T21:18:32.217Z appoptics:patching patched http 
2022-04-21T21:18:32.245Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:32.245Z appoptics:patching patched fs 
2022-04-21T21:18:32.261Z appoptics:patching patched pino 4.5.3
2022-04-21T21:18:32.264Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:39.396Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:39.396Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:39.396Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:39.397Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:39.456Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:39.568Z appoptics:patching patched crypto 
2022-04-21T21:18:39.585Z appoptics:patching patched https 
2022-04-21T21:18:39.586Z appoptics:patching patched http 
2022-04-21T21:18:39.613Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:39.613Z appoptics:patching patched fs 
2022-04-21T21:18:39.633Z appoptics:patching patched pino 4.5.4
2022-04-21T21:18:39.636Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:45.664Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:45.664Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:45.664Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:45.665Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:45.724Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:45.836Z appoptics:patching patched crypto 
2022-04-21T21:18:45.854Z appoptics:patching patched https 
2022-04-21T21:18:45.855Z appoptics:patching patched http 
2022-04-21T21:18:45.880Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:45.881Z appoptics:patching patched fs 
2022-04-21T21:18:45.900Z appoptics:patching patched pino 4.6.0
2022-04-21T21:18:45.904Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:53.320Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:53.320Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:53.320Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:53.321Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:53.380Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:53.492Z appoptics:patching patched crypto 
2022-04-21T21:18:53.510Z appoptics:patching patched https 
2022-04-21T21:18:53.511Z appoptics:patching patched http 
2022-04-21T21:18:53.537Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:53.538Z appoptics:patching patched fs 
2022-04-21T21:18:53.561Z appoptics:patching patched pino 4.7.0
2022-04-21T21:18:53.564Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:18:59.691Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:18:59.692Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:18:59.692Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:18:59.693Z appoptics:debug using context provider: ace-context
2022-04-21T21:18:59.770Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:18:59.896Z appoptics:patching patched crypto 
2022-04-21T21:18:59.915Z appoptics:patching patched https 
2022-04-21T21:18:59.915Z appoptics:patching patched http 
2022-04-21T21:18:59.957Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:18:59.966Z appoptics:patching patched fs 
2022-04-21T21:18:59.990Z appoptics:patching patched pino 4.7.1
2022-04-21T21:18:59.995Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:06.696Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:06.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:06.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:06.697Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:06.756Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:06.872Z appoptics:patching patched crypto 
2022-04-21T21:19:06.890Z appoptics:patching patched https 
2022-04-21T21:19:06.892Z appoptics:patching patched http 
2022-04-21T21:19:06.949Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:06.949Z appoptics:patching patched fs 
2022-04-21T21:19:06.996Z appoptics:patching patched pino 4.7.2
2022-04-21T21:19:07.000Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:13.912Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:13.912Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:13.913Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:13.913Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:14.017Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:14.164Z appoptics:patching patched crypto 
2022-04-21T21:19:14.204Z appoptics:patching patched https 
2022-04-21T21:19:14.204Z appoptics:patching patched http 
2022-04-21T21:19:14.235Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:14.235Z appoptics:patching patched fs 
2022-04-21T21:19:14.255Z appoptics:patching patched pino 4.7.3
2022-04-21T21:19:14.258Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:20.379Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:20.379Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:20.379Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:20.380Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:20.438Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:20.549Z appoptics:patching patched crypto 
2022-04-21T21:19:20.566Z appoptics:patching patched https 
2022-04-21T21:19:20.566Z appoptics:patching patched http 
2022-04-21T21:19:20.594Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:20.594Z appoptics:patching patched fs 
2022-04-21T21:19:20.617Z appoptics:patching patched pino 4.8.0
2022-04-21T21:19:20.621Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:27.614Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:27.615Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:27.615Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:27.616Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:27.675Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:27.790Z appoptics:patching patched crypto 
2022-04-21T21:19:27.807Z appoptics:patching patched https 
2022-04-21T21:19:27.808Z appoptics:patching patched http 
2022-04-21T21:19:27.834Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:27.834Z appoptics:patching patched fs 
2022-04-21T21:19:27.854Z appoptics:patching patched pino 4.8.1
2022-04-21T21:19:27.857Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:33.879Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:33.879Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:33.879Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:33.880Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:33.932Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:34.032Z appoptics:patching patched crypto 
2022-04-21T21:19:34.047Z appoptics:patching patched https 
2022-04-21T21:19:34.048Z appoptics:patching patched http 
2022-04-21T21:19:34.073Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:34.073Z appoptics:patching patched fs 
2022-04-21T21:19:34.095Z appoptics:patching patched pino 4.8.2
2022-04-21T21:19:34.098Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (164ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:40.545Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:40.545Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:40.545Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:40.546Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:40.607Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:40.717Z appoptics:patching patched crypto 
2022-04-21T21:19:40.734Z appoptics:patching patched https 
2022-04-21T21:19:40.735Z appoptics:patching patched http 
2022-04-21T21:19:40.761Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:40.761Z appoptics:patching patched fs 
2022-04-21T21:19:40.785Z appoptics:patching patched pino 4.9.0
2022-04-21T21:19:40.788Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:47.084Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:47.085Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:47.085Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:47.086Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:47.146Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:47.261Z appoptics:patching patched crypto 
2022-04-21T21:19:47.278Z appoptics:patching patched https 
2022-04-21T21:19:47.279Z appoptics:patching patched http 
2022-04-21T21:19:47.305Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:47.305Z appoptics:patching patched fs 
2022-04-21T21:19:47.329Z appoptics:patching patched pino 4.10.0
2022-04-21T21:19:47.333Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (101ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:19:54.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:19:54.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:19:54.081Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:19:54.082Z appoptics:debug using context provider: ace-context
2022-04-21T21:19:54.145Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:19:54.280Z appoptics:patching patched crypto 
2022-04-21T21:19:54.315Z appoptics:patching patched https 
2022-04-21T21:19:54.317Z appoptics:patching patched http 
2022-04-21T21:19:54.345Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:19:54.345Z appoptics:patching patched fs 
2022-04-21T21:19:54.365Z appoptics:patching patched pino 4.10.1
2022-04-21T21:19:54.369Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:00.612Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:00.614Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:00.615Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:00.615Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:00.693Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:00.828Z appoptics:patching patched crypto 
2022-04-21T21:20:00.883Z appoptics:patching patched https 
2022-04-21T21:20:00.883Z appoptics:patching patched http 
2022-04-21T21:20:00.902Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:00.902Z appoptics:patching patched fs 
2022-04-21T21:20:00.923Z appoptics:patching patched pino 4.10.2
2022-04-21T21:20:00.927Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 2 packages, and audited 938 packages in 19s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:21.049Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:21.050Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:21.050Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:21.051Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:21.112Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:21.225Z appoptics:patching patched crypto 
2022-04-21T21:20:21.243Z appoptics:patching patched https 
2022-04-21T21:20:21.244Z appoptics:patching patched http 
2022-04-21T21:20:21.270Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:21.273Z appoptics:patching patched fs 
2022-04-21T21:20:21.294Z appoptics:patching patched pino 4.10.3
2022-04-21T21:20:21.297Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:27.990Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:27.991Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:27.991Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:27.992Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:28.045Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:28.146Z appoptics:patching patched crypto 
2022-04-21T21:20:28.162Z appoptics:patching patched https 
2022-04-21T21:20:28.163Z appoptics:patching patched http 
2022-04-21T21:20:28.187Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:28.188Z appoptics:patching patched fs 
2022-04-21T21:20:28.219Z appoptics:patching patched pino 4.10.4
2022-04-21T21:20:28.222Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (206ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:34.090Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:34.091Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:34.091Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:34.092Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:34.150Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:34.262Z appoptics:patching patched crypto 
2022-04-21T21:20:34.279Z appoptics:patching patched https 
2022-04-21T21:20:34.279Z appoptics:patching patched http 
2022-04-21T21:20:34.307Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:34.311Z appoptics:patching patched fs 
2022-04-21T21:20:34.331Z appoptics:patching patched pino 4.11.0
2022-04-21T21:20:34.334Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


added 1 package, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:41.268Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:41.268Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:41.268Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:41.269Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:41.328Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:41.441Z appoptics:patching patched crypto 
2022-04-21T21:20:41.458Z appoptics:patching patched https 
2022-04-21T21:20:41.458Z appoptics:patching patched http 
2022-04-21T21:20:41.486Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:41.487Z appoptics:patching patched fs 
2022-04-21T21:20:41.511Z appoptics:patching patched pino 4.12.0
2022-04-21T21:20:41.514Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:47.434Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:47.435Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:47.435Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:47.435Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:47.493Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:47.603Z appoptics:patching patched crypto 
2022-04-21T21:20:47.620Z appoptics:patching patched https 
2022-04-21T21:20:47.620Z appoptics:patching patched http 
2022-04-21T21:20:47.651Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:47.652Z appoptics:patching patched fs 
2022-04-21T21:20:47.672Z appoptics:patching patched pino 4.13.0
2022-04-21T21:20:47.675Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 2 packages, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:20:54.912Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:20:54.913Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:20:54.913Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:20:54.914Z appoptics:debug using context provider: ace-context
2022-04-21T21:20:54.973Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:20:55.087Z appoptics:patching patched crypto 
2022-04-21T21:20:55.105Z appoptics:patching patched https 
2022-04-21T21:20:55.105Z appoptics:patching patched http 
2022-04-21T21:20:55.137Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:20:55.138Z appoptics:patching patched fs 
2022-04-21T21:20:55.158Z appoptics:patching patched pino 4.14.0
2022-04-21T21:20:55.161Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:01.774Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:01.775Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:01.775Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:01.776Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:01.849Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:01.978Z appoptics:patching patched crypto 
2022-04-21T21:21:02.028Z appoptics:patching patched https 
2022-04-21T21:21:02.029Z appoptics:patching patched http 
2022-04-21T21:21:02.060Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:02.060Z appoptics:patching patched fs 
2022-04-21T21:21:02.081Z appoptics:patching patched pino 4.15.0
2022-04-21T21:21:02.085Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:08.355Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:08.356Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:08.356Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:08.357Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:08.416Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:08.528Z appoptics:patching patched crypto 
2022-04-21T21:21:08.545Z appoptics:patching patched https 
2022-04-21T21:21:08.546Z appoptics:patching patched http 
2022-04-21T21:21:08.577Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:08.577Z appoptics:patching patched fs 
2022-04-21T21:21:08.597Z appoptics:patching patched pino 4.15.1
2022-04-21T21:21:08.601Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:15.586Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:15.586Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:15.586Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:15.587Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:15.648Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:15.767Z appoptics:patching patched crypto 
2022-04-21T21:21:15.785Z appoptics:patching patched https 
2022-04-21T21:21:15.786Z appoptics:patching patched http 
2022-04-21T21:21:15.816Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:15.817Z appoptics:patching patched fs 
2022-04-21T21:21:15.847Z appoptics:patching patched pino 4.15.2
2022-04-21T21:21:15.852Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (194ms)


changed 2 packages, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:22.320Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:22.320Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:22.320Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:22.321Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:22.380Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:22.493Z appoptics:patching patched crypto 
2022-04-21T21:21:22.510Z appoptics:patching patched https 
2022-04-21T21:21:22.511Z appoptics:patching patched http 
2022-04-21T21:21:22.542Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:22.543Z appoptics:patching patched fs 
2022-04-21T21:21:22.563Z appoptics:patching patched pino 4.15.3
2022-04-21T21:21:22.567Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:29.302Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:29.302Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:29.302Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:29.303Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:29.396Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:29.527Z appoptics:patching patched crypto 
2022-04-21T21:21:29.553Z appoptics:patching patched https 
2022-04-21T21:21:29.555Z appoptics:patching patched http 
2022-04-21T21:21:29.582Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:29.582Z appoptics:patching patched fs 
2022-04-21T21:21:29.602Z appoptics:patching patched pino 4.15.4
2022-04-21T21:21:29.605Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:36.047Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:36.048Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:36.048Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:36.049Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:36.110Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:36.257Z appoptics:patching patched crypto 
2022-04-21T21:21:36.275Z appoptics:patching patched https 
2022-04-21T21:21:36.276Z appoptics:patching patched http 
2022-04-21T21:21:36.311Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:36.311Z appoptics:patching patched fs 
2022-04-21T21:21:36.332Z appoptics:patching patched pino 4.16.0
2022-04-21T21:21:36.335Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:43.311Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:43.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:43.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:43.312Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:43.387Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:43.516Z appoptics:patching patched crypto 
2022-04-21T21:21:43.572Z appoptics:patching patched https 
2022-04-21T21:21:43.572Z appoptics:patching patched http 
2022-04-21T21:21:43.618Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:43.618Z appoptics:patching patched fs 
2022-04-21T21:21:43.650Z appoptics:patching patched pino 4.16.1
2022-04-21T21:21:43.654Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:50.186Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:50.190Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:50.190Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:50.191Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:50.265Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:50.406Z appoptics:patching patched crypto 
2022-04-21T21:21:50.447Z appoptics:patching patched https 
2022-04-21T21:21:50.448Z appoptics:patching patched http 
2022-04-21T21:21:50.488Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:50.488Z appoptics:patching patched fs 
2022-04-21T21:21:50.532Z appoptics:patching patched pino 4.17.0
2022-04-21T21:21:50.536Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (213ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:21:56.975Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:21:56.976Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:21:56.976Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:21:56.977Z appoptics:debug using context provider: ace-context
2022-04-21T21:21:57.034Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:21:57.157Z appoptics:patching patched crypto 
2022-04-21T21:21:57.175Z appoptics:patching patched https 
2022-04-21T21:21:57.176Z appoptics:patching patched http 
2022-04-21T21:21:57.216Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:21:57.216Z appoptics:patching patched fs 
2022-04-21T21:21:57.237Z appoptics:patching patched pino 4.17.1
2022-04-21T21:21:57.240Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:03.933Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:03.933Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:03.933Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:03.934Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:03.992Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:04.136Z appoptics:patching patched crypto 
2022-04-21T21:22:04.154Z appoptics:patching patched https 
2022-04-21T21:22:04.155Z appoptics:patching patched http 
2022-04-21T21:22:04.191Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:04.192Z appoptics:patching patched fs 
2022-04-21T21:22:04.211Z appoptics:patching patched pino 4.17.2
2022-04-21T21:22:04.215Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:10.556Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:10.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:10.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:10.557Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:10.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:10.728Z appoptics:patching patched crypto 
2022-04-21T21:22:10.745Z appoptics:patching patched https 
2022-04-21T21:22:10.746Z appoptics:patching patched http 
2022-04-21T21:22:10.773Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:10.773Z appoptics:patching patched fs 
2022-04-21T21:22:10.797Z appoptics:patching patched pino 4.17.3
2022-04-21T21:22:10.800Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:17.787Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:17.788Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:17.788Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:17.788Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:17.847Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:17.962Z appoptics:patching patched crypto 
2022-04-21T21:22:17.980Z appoptics:patching patched https 
2022-04-21T21:22:17.980Z appoptics:patching patched http 
2022-04-21T21:22:18.013Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:18.013Z appoptics:patching patched fs 
2022-04-21T21:22:18.033Z appoptics:patching patched pino 4.17.5
2022-04-21T21:22:18.037Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:24.152Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:24.153Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:24.153Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:24.153Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:24.212Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:24.333Z appoptics:patching patched crypto 
2022-04-21T21:22:24.354Z appoptics:patching patched https 
2022-04-21T21:22:24.375Z appoptics:patching patched http 
2022-04-21T21:22:24.418Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:24.418Z appoptics:patching patched fs 
2022-04-21T21:22:24.439Z appoptics:patching patched pino 4.17.6
2022-04-21T21:22:24.442Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:31.629Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:31.630Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:31.630Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:31.631Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:31.689Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:31.801Z appoptics:patching patched crypto 
2022-04-21T21:22:31.818Z appoptics:patching patched https 
2022-04-21T21:22:31.818Z appoptics:patching patched http 
2022-04-21T21:22:31.847Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:31.848Z appoptics:patching patched fs 
2022-04-21T21:22:31.859Z appoptics:patching patched pino 5.0.0
2022-04-21T21:22:31.863Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 2 packages, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:38.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:38.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:38.150Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:38.151Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:38.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:38.500Z appoptics:patching patched crypto 
2022-04-21T21:22:38.557Z appoptics:patching patched https 
2022-04-21T21:22:38.558Z appoptics:patching patched http 
2022-04-21T21:22:38.665Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:38.665Z appoptics:patching patched fs 
2022-04-21T21:22:38.683Z appoptics:patching patched pino 5.0.1
2022-04-21T21:22:38.687Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:45.097Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:45.097Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:45.097Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:45.098Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:45.158Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:45.269Z appoptics:patching patched crypto 
2022-04-21T21:22:45.287Z appoptics:patching patched https 
2022-04-21T21:22:45.287Z appoptics:patching patched http 
2022-04-21T21:22:45.315Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:45.319Z appoptics:patching patched fs 
2022-04-21T21:22:45.327Z appoptics:patching patched pino 5.0.2
2022-04-21T21:22:45.331Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:52.532Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:52.533Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:52.533Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:52.534Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:52.594Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:52.708Z appoptics:patching patched crypto 
2022-04-21T21:22:52.725Z appoptics:patching patched https 
2022-04-21T21:22:52.726Z appoptics:patching patched http 
2022-04-21T21:22:52.762Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:52.762Z appoptics:patching patched fs 
2022-04-21T21:22:52.770Z appoptics:patching patched pino 5.0.3
2022-04-21T21:22:52.774Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:22:59.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:22:59.061Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:22:59.061Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:22:59.062Z appoptics:debug using context provider: ace-context
2022-04-21T21:22:59.124Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:22:59.245Z appoptics:patching patched crypto 
2022-04-21T21:22:59.263Z appoptics:patching patched https 
2022-04-21T21:22:59.264Z appoptics:patching patched http 
2022-04-21T21:22:59.293Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:22:59.293Z appoptics:patching patched fs 
2022-04-21T21:22:59.301Z appoptics:patching patched pino 5.0.4
2022-04-21T21:22:59.305Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:06.479Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:06.480Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:06.480Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:06.481Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:06.541Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:06.657Z appoptics:patching patched crypto 
2022-04-21T21:23:06.674Z appoptics:patching patched https 
2022-04-21T21:23:06.675Z appoptics:patching patched http 
2022-04-21T21:23:06.703Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:06.707Z appoptics:patching patched fs 
2022-04-21T21:23:06.715Z appoptics:patching patched pino 5.0.5
2022-04-21T21:23:06.719Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:13.161Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:13.161Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:13.161Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:13.162Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:13.225Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:13.363Z appoptics:patching patched crypto 
2022-04-21T21:23:13.385Z appoptics:patching patched https 
2022-04-21T21:23:13.386Z appoptics:patching patched http 
2022-04-21T21:23:13.414Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:13.414Z appoptics:patching patched fs 
2022-04-21T21:23:13.441Z appoptics:patching patched pino 5.1.0
2022-04-21T21:23:13.445Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:20.176Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:20.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:20.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:20.177Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:20.236Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:20.350Z appoptics:patching patched crypto 
2022-04-21T21:23:20.367Z appoptics:patching patched https 
2022-04-21T21:23:20.368Z appoptics:patching patched http 
2022-04-21T21:23:20.401Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:20.401Z appoptics:patching patched fs 
2022-04-21T21:23:20.409Z appoptics:patching patched pino 5.1.1
2022-04-21T21:23:20.412Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:26.994Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:26.995Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:26.995Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:26.996Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:27.074Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:27.208Z appoptics:patching patched crypto 
2022-04-21T21:23:27.251Z appoptics:patching patched https 
2022-04-21T21:23:27.252Z appoptics:patching patched http 
2022-04-21T21:23:27.285Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:27.285Z appoptics:patching patched fs 
2022-04-21T21:23:27.294Z appoptics:patching patched pino 5.2.0
2022-04-21T21:23:27.298Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:33.935Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:33.936Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:33.936Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:33.937Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:33.996Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:34.110Z appoptics:patching patched crypto 
2022-04-21T21:23:34.126Z appoptics:patching patched https 
2022-04-21T21:23:34.127Z appoptics:patching patched http 
2022-04-21T21:23:34.155Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:34.155Z appoptics:patching patched fs 
2022-04-21T21:23:34.167Z appoptics:patching patched pino 5.3.0
2022-04-21T21:23:34.170Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:41.051Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:41.052Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:41.052Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:41.053Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:41.114Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:41.259Z appoptics:patching patched crypto 
2022-04-21T21:23:41.280Z appoptics:patching patched https 
2022-04-21T21:23:41.281Z appoptics:patching patched http 
2022-04-21T21:23:41.336Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:41.336Z appoptics:patching patched fs 
2022-04-21T21:23:41.345Z appoptics:patching patched pino 5.3.1
2022-04-21T21:23:41.349Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:47.957Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:47.958Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:47.958Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:47.958Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:48.020Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:48.142Z appoptics:patching patched crypto 
2022-04-21T21:23:48.161Z appoptics:patching patched https 
2022-04-21T21:23:48.162Z appoptics:patching patched http 
2022-04-21T21:23:48.196Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:48.196Z appoptics:patching patched fs 
2022-04-21T21:23:48.205Z appoptics:patching patched pino 5.4.0
2022-04-21T21:23:48.208Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:23:55.512Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:23:55.512Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:23:55.512Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:23:55.513Z appoptics:debug using context provider: ace-context
2022-04-21T21:23:55.599Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:23:55.728Z appoptics:patching patched crypto 
2022-04-21T21:23:55.746Z appoptics:patching patched https 
2022-04-21T21:23:55.747Z appoptics:patching patched http 
2022-04-21T21:23:55.777Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:23:55.781Z appoptics:patching patched fs 
2022-04-21T21:23:55.789Z appoptics:patching patched pino 5.4.1
2022-04-21T21:23:55.793Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:01.971Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:01.972Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:01.972Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:01.972Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:02.031Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:02.155Z appoptics:patching patched crypto 
2022-04-21T21:24:02.179Z appoptics:patching patched https 
2022-04-21T21:24:02.180Z appoptics:patching patched http 
2022-04-21T21:24:02.228Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:02.228Z appoptics:patching patched fs 
2022-04-21T21:24:02.239Z appoptics:patching patched pino 5.5.0
2022-04-21T21:24:02.242Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:09.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:09.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:09.266Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:09.267Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:09.331Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:09.444Z appoptics:patching patched crypto 
2022-04-21T21:24:09.469Z appoptics:patching patched https 
2022-04-21T21:24:09.470Z appoptics:patching patched http 
2022-04-21T21:24:09.501Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:09.501Z appoptics:patching patched fs 
2022-04-21T21:24:09.509Z appoptics:patching patched pino 5.6.0
2022-04-21T21:24:09.513Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:16.028Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:16.029Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:16.029Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:16.030Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:16.105Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:16.267Z appoptics:patching patched crypto 
2022-04-21T21:24:16.311Z appoptics:patching patched https 
2022-04-21T21:24:16.312Z appoptics:patching patched http 
2022-04-21T21:24:16.353Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:16.354Z appoptics:patching patched fs 
2022-04-21T21:24:16.364Z appoptics:patching patched pino 5.6.1
2022-04-21T21:24:16.376Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:22.810Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:22.811Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:22.811Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:22.811Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:22.871Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:22.985Z appoptics:patching patched crypto 
2022-04-21T21:24:23.004Z appoptics:patching patched https 
2022-04-21T21:24:23.005Z appoptics:patching patched http 
2022-04-21T21:24:23.056Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:23.056Z appoptics:patching patched fs 
2022-04-21T21:24:23.067Z appoptics:patching patched pino 5.6.2
2022-04-21T21:24:23.072Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:30.223Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:30.224Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:30.224Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:30.224Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:30.285Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:30.405Z appoptics:patching patched crypto 
2022-04-21T21:24:30.423Z appoptics:patching patched https 
2022-04-21T21:24:30.424Z appoptics:patching patched http 
2022-04-21T21:24:30.453Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:30.454Z appoptics:patching patched fs 
2022-04-21T21:24:30.462Z appoptics:patching patched pino 5.6.3
2022-04-21T21:24:30.465Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:36.725Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:36.725Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:36.725Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:36.726Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:36.785Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:36.898Z appoptics:patching patched crypto 
2022-04-21T21:24:36.915Z appoptics:patching patched https 
2022-04-21T21:24:36.916Z appoptics:patching patched http 
2022-04-21T21:24:36.955Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:36.956Z appoptics:patching patched fs 
2022-04-21T21:24:36.966Z appoptics:patching patched pino 5.6.4
2022-04-21T21:24:36.970Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:43.880Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:43.880Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:43.880Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:43.881Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:43.939Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:44.054Z appoptics:patching patched crypto 
2022-04-21T21:24:44.072Z appoptics:patching patched https 
2022-04-21T21:24:44.073Z appoptics:patching patched http 
2022-04-21T21:24:44.101Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:44.101Z appoptics:patching patched fs 
2022-04-21T21:24:44.109Z appoptics:patching patched pino 5.7.0
2022-04-21T21:24:44.113Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:50.264Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:50.265Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:50.265Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:50.265Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:50.339Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:50.465Z appoptics:patching patched crypto 
2022-04-21T21:24:50.507Z appoptics:patching patched https 
2022-04-21T21:24:50.508Z appoptics:patching patched http 
2022-04-21T21:24:50.538Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:50.539Z appoptics:patching patched fs 
2022-04-21T21:24:50.547Z appoptics:patching patched pino 5.8.0
2022-04-21T21:24:50.551Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:24:57.317Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:24:57.318Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:24:57.318Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:24:57.319Z appoptics:debug using context provider: ace-context
2022-04-21T21:24:57.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:24:57.487Z appoptics:patching patched crypto 
2022-04-21T21:24:57.504Z appoptics:patching patched https 
2022-04-21T21:24:57.505Z appoptics:patching patched http 
2022-04-21T21:24:57.539Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:24:57.539Z appoptics:patching patched fs 
2022-04-21T21:24:57.544Z appoptics:patching patched pino 5.8.1
2022-04-21T21:24:57.548Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:03.870Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:03.871Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:03.871Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:03.872Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:03.931Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:04.052Z appoptics:patching patched crypto 
2022-04-21T21:25:04.072Z appoptics:patching patched https 
2022-04-21T21:25:04.073Z appoptics:patching patched http 
2022-04-21T21:25:04.119Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:04.120Z appoptics:patching patched fs 
2022-04-21T21:25:04.125Z appoptics:patching patched pino 5.9.0
2022-04-21T21:25:04.128Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


added 1 package, changed 2 packages, and audited 930 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:17.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:17.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:17.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:17.563Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:17.644Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:17.801Z appoptics:patching patched crypto 
2022-04-21T21:25:17.850Z appoptics:patching patched https 
2022-04-21T21:25:17.851Z appoptics:patching patched http 
2022-04-21T21:25:17.893Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:17.894Z appoptics:patching patched fs 
2022-04-21T21:25:17.900Z appoptics:patching patched pino 5.10.1
2022-04-21T21:25:17.904Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:25.264Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:25.264Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:25.264Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:25.265Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:25.327Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:25.438Z appoptics:patching patched crypto 
2022-04-21T21:25:25.455Z appoptics:patching patched https 
2022-04-21T21:25:25.456Z appoptics:patching patched http 
2022-04-21T21:25:25.490Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:25.490Z appoptics:patching patched fs 
2022-04-21T21:25:25.495Z appoptics:patching patched pino 5.10.2
2022-04-21T21:25:25.499Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:32.073Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:32.074Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:32.074Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:32.075Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:32.134Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:32.248Z appoptics:patching patched crypto 
2022-04-21T21:25:32.272Z appoptics:patching patched https 
2022-04-21T21:25:32.273Z appoptics:patching patched http 
2022-04-21T21:25:32.317Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:32.318Z appoptics:patching patched fs 
2022-04-21T21:25:32.324Z appoptics:patching patched pino 5.10.3
2022-04-21T21:25:32.327Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:38.637Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:38.637Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:38.637Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:38.638Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:38.697Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:38.816Z appoptics:patching patched crypto 
2022-04-21T21:25:38.834Z appoptics:patching patched https 
2022-04-21T21:25:38.841Z appoptics:patching patched http 
2022-04-21T21:25:38.876Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:38.876Z appoptics:patching patched fs 
2022-04-21T21:25:38.881Z appoptics:patching patched pino 5.10.4
2022-04-21T21:25:38.885Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


removed 3 packages, changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:45.765Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:45.765Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:45.766Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:45.766Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:45.824Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:45.936Z appoptics:patching patched crypto 
2022-04-21T21:25:45.953Z appoptics:patching patched https 
2022-04-21T21:25:45.953Z appoptics:patching patched http 
2022-04-21T21:25:45.983Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:45.983Z appoptics:patching patched fs 
2022-04-21T21:25:45.991Z appoptics:patching patched pino 5.10.5
2022-04-21T21:25:45.995Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:52.252Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:52.252Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:52.252Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:52.253Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:52.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:52.463Z appoptics:patching patched crypto 
2022-04-21T21:25:52.556Z appoptics:patching patched https 
2022-04-21T21:25:52.556Z appoptics:patching patched http 
2022-04-21T21:25:52.650Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:52.653Z appoptics:patching patched fs 
2022-04-21T21:25:52.658Z appoptics:patching patched pino 5.10.6
2022-04-21T21:25:52.670Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:25:59.372Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:25:59.373Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:25:59.373Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:25:59.373Z appoptics:debug using context provider: ace-context
2022-04-21T21:25:59.433Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:25:59.545Z appoptics:patching patched crypto 
2022-04-21T21:25:59.563Z appoptics:patching patched https 
2022-04-21T21:25:59.563Z appoptics:patching patched http 
2022-04-21T21:25:59.599Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:25:59.599Z appoptics:patching patched fs 
2022-04-21T21:25:59.605Z appoptics:patching patched pino 5.10.7
2022-04-21T21:25:59.609Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (195ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:06.710Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:06.711Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:06.711Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:06.712Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:06.770Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:06.883Z appoptics:patching patched crypto 
2022-04-21T21:26:06.901Z appoptics:patching patched https 
2022-04-21T21:26:06.901Z appoptics:patching patched http 
2022-04-21T21:26:06.932Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:06.933Z appoptics:patching patched fs 
2022-04-21T21:26:06.938Z appoptics:patching patched pino 5.10.8
2022-04-21T21:26:06.941Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:12.912Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:12.912Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:12.912Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:12.913Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:12.971Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:13.084Z appoptics:patching patched crypto 
2022-04-21T21:26:13.102Z appoptics:patching patched https 
2022-04-21T21:26:13.102Z appoptics:patching patched http 
2022-04-21T21:26:13.134Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:13.134Z appoptics:patching patched fs 
2022-04-21T21:26:13.139Z appoptics:patching patched pino 5.10.9
2022-04-21T21:26:13.142Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:20.400Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:20.401Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:20.401Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:20.402Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:20.461Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:20.570Z appoptics:patching patched crypto 
2022-04-21T21:26:20.587Z appoptics:patching patched https 
2022-04-21T21:26:20.588Z appoptics:patching patched http 
2022-04-21T21:26:20.622Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:20.622Z appoptics:patching patched fs 
2022-04-21T21:26:20.627Z appoptics:patching patched pino 5.10.10
2022-04-21T21:26:20.631Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:26.681Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:26.681Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:26.681Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:26.682Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:26.740Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:26.852Z appoptics:patching patched crypto 
2022-04-21T21:26:26.870Z appoptics:patching patched https 
2022-04-21T21:26:26.870Z appoptics:patching patched http 
2022-04-21T21:26:26.904Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:26.904Z appoptics:patching patched fs 
2022-04-21T21:26:26.909Z appoptics:patching patched pino 5.11.0
2022-04-21T21:26:26.913Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:33.796Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:33.796Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:33.796Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:33.797Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:33.896Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:34.019Z appoptics:patching patched crypto 
2022-04-21T21:26:34.037Z appoptics:patching patched https 
2022-04-21T21:26:34.037Z appoptics:patching patched http 
2022-04-21T21:26:34.069Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:34.069Z appoptics:patching patched fs 
2022-04-21T21:26:34.074Z appoptics:patching patched pino 5.11.1
2022-04-21T21:26:34.078Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:40.376Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:40.377Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:40.377Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:40.378Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:40.436Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:40.546Z appoptics:patching patched crypto 
2022-04-21T21:26:40.578Z appoptics:patching patched https 
2022-04-21T21:26:40.578Z appoptics:patching patched http 
2022-04-21T21:26:40.607Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:40.607Z appoptics:patching patched fs 
2022-04-21T21:26:40.612Z appoptics:patching patched pino 5.11.2
2022-04-21T21:26:40.615Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:47.156Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:47.157Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:47.157Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:47.157Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:47.216Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:47.329Z appoptics:patching patched crypto 
2022-04-21T21:26:47.346Z appoptics:patching patched https 
2022-04-21T21:26:47.347Z appoptics:patching patched http 
2022-04-21T21:26:47.381Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:47.381Z appoptics:patching patched fs 
2022-04-21T21:26:47.386Z appoptics:patching patched pino 5.11.3
2022-04-21T21:26:47.390Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:26:54.000Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:26:54.001Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:26:54.001Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:26:54.002Z appoptics:debug using context provider: ace-context
2022-04-21T21:26:54.102Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:26:54.276Z appoptics:patching patched crypto 
2022-04-21T21:26:54.326Z appoptics:patching patched https 
2022-04-21T21:26:54.327Z appoptics:patching patched http 
2022-04-21T21:26:54.364Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:26:54.364Z appoptics:patching patched fs 
2022-04-21T21:26:54.369Z appoptics:patching patched pino 5.12.0
2022-04-21T21:26:54.373Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:00.639Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:00.639Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:00.640Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:00.640Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:00.713Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:00.854Z appoptics:patching patched crypto 
2022-04-21T21:27:00.895Z appoptics:patching patched https 
2022-04-21T21:27:00.895Z appoptics:patching patched http 
2022-04-21T21:27:00.928Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:00.928Z appoptics:patching patched fs 
2022-04-21T21:27:00.933Z appoptics:patching patched pino 5.12.1
2022-04-21T21:27:00.937Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:07.696Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:07.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:07.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:07.697Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:07.756Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:07.868Z appoptics:patching patched crypto 
2022-04-21T21:27:07.885Z appoptics:patching patched https 
2022-04-21T21:27:07.885Z appoptics:patching patched http 
2022-04-21T21:27:07.920Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:07.920Z appoptics:patching patched fs 
2022-04-21T21:27:07.925Z appoptics:patching patched pino 5.12.2
2022-04-21T21:27:07.929Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:14.318Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:14.319Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:14.319Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:14.320Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:14.378Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:14.494Z appoptics:patching patched crypto 
2022-04-21T21:27:14.511Z appoptics:patching patched https 
2022-04-21T21:27:14.512Z appoptics:patching patched http 
2022-04-21T21:27:14.568Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:14.568Z appoptics:patching patched fs 
2022-04-21T21:27:14.573Z appoptics:patching patched pino 5.12.3
2022-04-21T21:27:14.579Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:21.403Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:21.404Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:21.404Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:21.404Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:21.464Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:21.575Z appoptics:patching patched crypto 
2022-04-21T21:27:21.593Z appoptics:patching patched https 
2022-04-21T21:27:21.594Z appoptics:patching patched http 
2022-04-21T21:27:21.629Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:21.629Z appoptics:patching patched fs 
2022-04-21T21:27:21.634Z appoptics:patching patched pino 5.12.4
2022-04-21T21:27:21.637Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:27.893Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:27.893Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:27.893Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:27.894Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:27.964Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:28.077Z appoptics:patching patched crypto 
2022-04-21T21:27:28.096Z appoptics:patching patched https 
2022-04-21T21:27:28.096Z appoptics:patching patched http 
2022-04-21T21:27:28.131Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:28.132Z appoptics:patching patched fs 
2022-04-21T21:27:28.137Z appoptics:patching patched pino 5.12.5
2022-04-21T21:27:28.140Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:35.056Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:35.056Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:35.056Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:35.057Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:35.115Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:35.225Z appoptics:patching patched crypto 
2022-04-21T21:27:35.243Z appoptics:patching patched https 
2022-04-21T21:27:35.243Z appoptics:patching patched http 
2022-04-21T21:27:35.278Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:35.278Z appoptics:patching patched fs 
2022-04-21T21:27:35.283Z appoptics:patching patched pino 5.12.6
2022-04-21T21:27:35.286Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:41.503Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:41.503Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:41.503Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:41.504Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:41.565Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:41.688Z appoptics:patching patched crypto 
2022-04-21T21:27:41.705Z appoptics:patching patched https 
2022-04-21T21:27:41.706Z appoptics:patching patched http 
2022-04-21T21:27:41.764Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:41.764Z appoptics:patching patched fs 
2022-04-21T21:27:41.772Z appoptics:patching patched pino 5.13.0
2022-04-21T21:27:41.776Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:48.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:48.531Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:48.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:48.532Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:48.590Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:48.708Z appoptics:patching patched crypto 
2022-04-21T21:27:48.726Z appoptics:patching patched https 
2022-04-21T21:27:48.727Z appoptics:patching patched http 
2022-04-21T21:27:48.772Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:48.773Z appoptics:patching patched fs 
2022-04-21T21:27:48.786Z appoptics:patching patched pino 5.13.1
2022-04-21T21:27:48.790Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:27:55.903Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:27:55.904Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:27:55.904Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:27:55.905Z appoptics:debug using context provider: ace-context
2022-04-21T21:27:56.017Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:27:56.137Z appoptics:patching patched crypto 
2022-04-21T21:27:56.154Z appoptics:patching patched https 
2022-04-21T21:27:56.155Z appoptics:patching patched http 
2022-04-21T21:27:56.189Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:27:56.190Z appoptics:patching patched fs 
2022-04-21T21:27:56.195Z appoptics:patching patched pino 5.13.2
2022-04-21T21:27:56.198Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:02.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:02.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:02.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:02.219Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:02.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:02.388Z appoptics:patching patched crypto 
2022-04-21T21:28:02.405Z appoptics:patching patched https 
2022-04-21T21:28:02.405Z appoptics:patching patched http 
2022-04-21T21:28:02.439Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:02.439Z appoptics:patching patched fs 
2022-04-21T21:28:02.444Z appoptics:patching patched pino 5.13.3
2022-04-21T21:28:02.448Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:09.651Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:09.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:09.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:09.652Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:09.710Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:09.822Z appoptics:patching patched crypto 
2022-04-21T21:28:09.839Z appoptics:patching patched https 
2022-04-21T21:28:09.840Z appoptics:patching patched http 
2022-04-21T21:28:09.873Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:09.874Z appoptics:patching patched fs 
2022-04-21T21:28:09.879Z appoptics:patching patched pino 5.13.4
2022-04-21T21:28:09.882Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:15.840Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:15.841Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:15.841Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:15.841Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:15.899Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:16.011Z appoptics:patching patched crypto 
2022-04-21T21:28:16.028Z appoptics:patching patched https 
2022-04-21T21:28:16.029Z appoptics:patching patched http 
2022-04-21T21:28:16.063Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:16.064Z appoptics:patching patched fs 
2022-04-21T21:28:16.069Z appoptics:patching patched pino 5.13.5
2022-04-21T21:28:16.072Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:23.076Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:23.076Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:23.076Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:23.077Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:23.135Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:23.247Z appoptics:patching patched crypto 
2022-04-21T21:28:23.265Z appoptics:patching patched https 
2022-04-21T21:28:23.265Z appoptics:patching patched http 
2022-04-21T21:28:23.300Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:23.300Z appoptics:patching patched fs 
2022-04-21T21:28:23.305Z appoptics:patching patched pino 5.13.6
2022-04-21T21:28:23.309Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (101ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:29.639Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:29.640Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:29.640Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:29.640Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:29.698Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:29.807Z appoptics:patching patched crypto 
2022-04-21T21:28:29.824Z appoptics:patching patched https 
2022-04-21T21:28:29.825Z appoptics:patching patched http 
2022-04-21T21:28:29.859Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:29.860Z appoptics:patching patched fs 
2022-04-21T21:28:29.864Z appoptics:patching patched pino 5.14.0
2022-04-21T21:28:29.868Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:36.410Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:36.411Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:36.411Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:36.411Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:36.470Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:36.590Z appoptics:patching patched crypto 
2022-04-21T21:28:36.607Z appoptics:patching patched https 
2022-04-21T21:28:36.607Z appoptics:patching patched http 
2022-04-21T21:28:36.665Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:36.665Z appoptics:patching patched fs 
2022-04-21T21:28:36.670Z appoptics:patching patched pino 5.15.0
2022-04-21T21:28:36.674Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:43.269Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:43.270Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:43.270Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:43.271Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:43.336Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:43.479Z appoptics:patching patched crypto 
2022-04-21T21:28:43.520Z appoptics:patching patched https 
2022-04-21T21:28:43.521Z appoptics:patching patched http 
2022-04-21T21:28:43.557Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:43.557Z appoptics:patching patched fs 
2022-04-21T21:28:43.562Z appoptics:patching patched pino 5.16.0
2022-04-21T21:28:43.566Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:49.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:49.653Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:49.653Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:49.654Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:49.719Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:49.836Z appoptics:patching patched crypto 
2022-04-21T21:28:49.853Z appoptics:patching patched https 
2022-04-21T21:28:49.853Z appoptics:patching patched http 
2022-04-21T21:28:49.884Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:49.884Z appoptics:patching patched fs 
2022-04-21T21:28:49.889Z appoptics:patching patched pino 5.17.0
2022-04-21T21:28:49.893Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:28:56.627Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:28:56.627Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:28:56.628Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:28:56.628Z appoptics:debug using context provider: ace-context
2022-04-21T21:28:56.686Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:28:56.797Z appoptics:patching patched crypto 
2022-04-21T21:28:56.816Z appoptics:patching patched https 
2022-04-21T21:28:56.817Z appoptics:patching patched http 
2022-04-21T21:28:56.868Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:28:56.868Z appoptics:patching patched fs 
2022-04-21T21:28:56.873Z appoptics:patching patched pino 6.0.0
2022-04-21T21:28:56.877Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4228
         "time": 1650576536902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4228
         "time": 1650576536910
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4228
         "time": 1650576536913
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4228
         "time": 1650576536915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4228
         "time": 1650576536918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4228
         "time": 1650576536921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4228
         "time": 1650576536923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4228
         "time": 1650576536924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4228
         "time": 1650576536925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4228
         "time": 1650576536927
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4228
         "time": 1650576536928
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4228
         "time": 1650576536929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4228
         "time": 1650576537033
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B519E9D93E410BBFE301ED50E83086BDAA017054-1"
         "pid": 4228
         "time": 1650576537061
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:03.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:03.078Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:03.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:03.079Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:03.137Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:03.251Z appoptics:patching patched crypto 
2022-04-21T21:29:03.268Z appoptics:patching patched https 
2022-04-21T21:29:03.268Z appoptics:patching patched http 
2022-04-21T21:29:03.303Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:03.304Z appoptics:patching patched fs 
2022-04-21T21:29:03.309Z appoptics:patching patched pino 6.1.0
2022-04-21T21:29:03.312Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4250
         "time": 1650576543336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4250
         "time": 1650576543343
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4250
         "time": 1650576543347
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4250
         "time": 1650576543349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4250
         "time": 1650576543351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4250
         "time": 1650576543354
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4250
         "time": 1650576543355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4250
         "time": 1650576543357
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4250
         "time": 1650576543358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4250
         "time": 1650576543359
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4250
         "time": 1650576543360
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4250
         "time": 1650576543362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4250
         "time": 1650576543466
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9906A83EC4940681F793D5A307DC49EC08FC2A0D-1"
         "pid": 4250
         "time": 1650576543494
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:10.259Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:10.260Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:10.260Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:10.260Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:10.318Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:10.428Z appoptics:patching patched crypto 
2022-04-21T21:29:10.445Z appoptics:patching patched https 
2022-04-21T21:29:10.446Z appoptics:patching patched http 
2022-04-21T21:29:10.480Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:10.480Z appoptics:patching patched fs 
2022-04-21T21:29:10.486Z appoptics:patching patched pino 6.1.1
2022-04-21T21:29:10.489Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4272
         "time": 1650576550513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4272
         "time": 1650576550520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4272
         "time": 1650576550524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4272
         "time": 1650576550526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4272
         "time": 1650576550528
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4272
         "time": 1650576550531
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4272
         "time": 1650576550532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4272
         "time": 1650576550533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4272
         "time": 1650576550535
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4272
         "time": 1650576550536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4272
         "time": 1650576550537
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4272
         "time": 1650576550539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4272
         "time": 1650576550643
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D254BC15FB76B9F275108575AE5204EB79FB0004-1"
         "pid": 4272
         "time": 1650576550672
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:16.683Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:16.683Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:16.683Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:16.684Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:16.743Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:16.857Z appoptics:patching patched crypto 
2022-04-21T21:29:16.874Z appoptics:patching patched https 
2022-04-21T21:29:16.875Z appoptics:patching patched http 
2022-04-21T21:29:16.906Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:16.906Z appoptics:patching patched fs 
2022-04-21T21:29:16.912Z appoptics:patching patched pino 6.2.0
2022-04-21T21:29:16.915Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4294
         "time": 1650576556940
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4294
         "time": 1650576556948
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4294
         "time": 1650576556952
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4294
         "time": 1650576556956
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4294
         "time": 1650576556959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4294
         "time": 1650576556962
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4294
         "time": 1650576556965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4294
         "time": 1650576556967
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4294
         "time": 1650576556968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4294
         "time": 1650576556970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4294
         "time": 1650576556971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4294
         "time": 1650576556974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4294
         "time": 1650576557077
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3CCCE4870081580E23B3B52C77E66470422D16AD-1"
         "pid": 4294
         "time": 1650576557105
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:23.748Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:23.749Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:23.749Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:23.750Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:23.807Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:23.918Z appoptics:patching patched crypto 
2022-04-21T21:29:23.935Z appoptics:patching patched https 
2022-04-21T21:29:23.936Z appoptics:patching patched http 
2022-04-21T21:29:23.970Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:23.970Z appoptics:patching patched fs 
2022-04-21T21:29:23.975Z appoptics:patching patched pino 6.2.1
2022-04-21T21:29:23.979Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4316
         "time": 1650576564003
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4316
         "time": 1650576564009
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4316
         "time": 1650576564013
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4316
         "time": 1650576564015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4316
         "time": 1650576564017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4316
         "time": 1650576564020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4316
         "time": 1650576564021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4316
         "time": 1650576564023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4316
         "time": 1650576564024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4316
         "time": 1650576564025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4316
         "time": 1650576564026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4316
         "time": 1650576564028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4316
         "time": 1650576564131
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 2E9331C20A744CE26C1C92523C21E81858C94F30-1"
         "pid": 4316
         "time": 1650576564159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:30.052Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:30.053Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:30.053Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:30.054Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:30.114Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:30.236Z appoptics:patching patched crypto 
2022-04-21T21:29:30.254Z appoptics:patching patched https 
2022-04-21T21:29:30.255Z appoptics:patching patched http 
2022-04-21T21:29:30.325Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:30.326Z appoptics:patching patched fs 
2022-04-21T21:29:30.341Z appoptics:patching patched pino 6.3.0
2022-04-21T21:29:30.345Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4338
         "time": 1650576570371
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4338
         "time": 1650576570379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4338
         "time": 1650576570382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4338
         "time": 1650576570385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4338
         "time": 1650576570387
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4338
         "time": 1650576570390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4338
         "time": 1650576570392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4338
         "time": 1650576570393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4338
         "time": 1650576570394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4338
         "time": 1650576570396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4338
         "time": 1650576570397
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4338
         "time": 1650576570399
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4338
         "time": 1650576570501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7FCEF4B7F74797B9170656D298628CCAA789A3FD-1"
         "pid": 4338
         "time": 1650576570529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:37.122Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:37.123Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:37.123Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:37.124Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:37.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:37.296Z appoptics:patching patched crypto 
2022-04-21T21:29:37.313Z appoptics:patching patched https 
2022-04-21T21:29:37.313Z appoptics:patching patched http 
2022-04-21T21:29:37.348Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:37.348Z appoptics:patching patched fs 
2022-04-21T21:29:37.354Z appoptics:patching patched pino 6.3.1
2022-04-21T21:29:37.357Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4360
         "time": 1650576577382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4360
         "time": 1650576577388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4360
         "time": 1650576577392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4360
         "time": 1650576577394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4360
         "time": 1650576577396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4360
         "time": 1650576577399
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4360
         "time": 1650576577400
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4360
         "time": 1650576577402
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4360
         "time": 1650576577403
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4360
         "time": 1650576577404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4360
         "time": 1650576577405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4360
         "time": 1650576577407
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4360
         "time": 1650576577511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1D8FA4832B2603DD6DC771B5D1E10C33C823295F-1"
         "pid": 4360
         "time": 1650576577541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:43.909Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:43.910Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:43.910Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:43.911Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:44.034Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:44.230Z appoptics:patching patched crypto 
2022-04-21T21:29:44.274Z appoptics:patching patched https 
2022-04-21T21:29:44.275Z appoptics:patching patched http 
2022-04-21T21:29:44.336Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:44.337Z appoptics:patching patched fs 
2022-04-21T21:29:44.342Z appoptics:patching patched pino 6.3.2
2022-04-21T21:29:44.346Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4382
         "time": 1650576584370
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4382
         "time": 1650576584378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4382
         "time": 1650576584381
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4382
         "time": 1650576584384
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4382
         "time": 1650576584386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4382
         "time": 1650576584389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4382
         "time": 1650576584390
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4382
         "time": 1650576584392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4382
         "time": 1650576584393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4382
         "time": 1650576584394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4382
         "time": 1650576584396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4382
         "time": 1650576584398
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4382
         "time": 1650576584501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 26A645AAB72114705B3B67F69BBF50C7A3867496-1"
         "pid": 4382
         "time": 1650576584529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:50.406Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:50.407Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:50.407Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:50.408Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:50.466Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:50.606Z appoptics:patching patched crypto 
2022-04-21T21:29:50.624Z appoptics:patching patched https 
2022-04-21T21:29:50.624Z appoptics:patching patched http 
2022-04-21T21:29:50.655Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:50.656Z appoptics:patching patched fs 
2022-04-21T21:29:50.661Z appoptics:patching patched pino 6.4.0
2022-04-21T21:29:50.664Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4404
         "time": 1650576590688
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B6E66B1F815DDA8773218D23343AE5E1E8DFEE59-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4404
         "time": 1650576590695
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DD96671B0E44837AFB0ACF9A1CB94B5A7915301-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4404
         "time": 1650576590699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FBD606DC1107797D11A44E844900AD8C07B43370-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4404
         "time": 1650576590701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "71C22126A31526296265D834BCC8CC3B4023182C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4404
         "time": 1650576590704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4404
         "time": 1650576590706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F1D44736027BD8C6F87512FB853959117A70C81-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4404
         "time": 1650576590708
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04E30EC943C7592AEB73D4158723D24C359B6479-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4404
         "time": 1650576590709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4404
         "time": 1650576590710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CEBB41C9ADB4A4760B4F35CE12026753B3180F67-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4404
         "time": 1650576590711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4404
         "time": 1650576590712
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0FC7F48A59C0DB1FDE1044C4065878701EBF8AA6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4404
         "time": 1650576590714
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82D5F3B480A743A407696FC81C49E71EED48FFEC-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4404
         "time": 1650576590818
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A68C31F99D802D36A857F76D38898A3886DC6107-1"
         "pid": 4404
         "time": 1650576590846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:29:57.849Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:29:57.850Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:29:57.850Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:29:57.851Z appoptics:debug using context provider: ace-context
2022-04-21T21:29:57.924Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:29:58.042Z appoptics:patching patched crypto 
2022-04-21T21:29:58.060Z appoptics:patching patched https 
2022-04-21T21:29:58.060Z appoptics:patching patched http 
2022-04-21T21:29:58.092Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:29:58.092Z appoptics:patching patched fs 
2022-04-21T21:29:58.098Z appoptics:patching patched pino 6.4.1
2022-04-21T21:29:58.101Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4426
         "time": 1650576598125
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D2F7E470C2955A476A4C8726A6CB7A830EF89DFA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4426
         "time": 1650576598133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4132BE3EEEBD2AADC6E12D5F3053018069DE0F1C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4426
         "time": 1650576598136
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AB1E632E0692CF600112C9380A6BA996C36D0EF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4426
         "time": 1650576598139
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87D714753EF10432B2D6873FE182847CF00593DE-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4426
         "time": 1650576598141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4426
         "time": 1650576598143
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C47D6A5ACE8494EE13B00C47520BE72CECADB5A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4426
         "time": 1650576598145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01AC98B4ADBBE923224702932B61D883A4F42FC8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4426
         "time": 1650576598146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4426
         "time": 1650576598147
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0027FAC1BFB742BB9F7DC072B7A5B7E8A51A960E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4426
         "time": 1650576598148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4426
         "time": 1650576598149
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63E8FB33AFA7D899CD40149119840B85CE98BFCB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4426
         "time": 1650576598151
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6227BF6B402EB898B68749F524FE548CE501FCB9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4426
         "time": 1650576598257
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E2C6EF80DAA7778AED133205579D8B497C997FFF-1"
         "pid": 4426
         "time": 1650576598285
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:04.230Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:04.231Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:04.231Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:04.231Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:04.291Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:04.408Z appoptics:patching patched crypto 
2022-04-21T21:30:04.426Z appoptics:patching patched https 
2022-04-21T21:30:04.427Z appoptics:patching patched http 
2022-04-21T21:30:04.464Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:04.464Z appoptics:patching patched fs 
2022-04-21T21:30:04.469Z appoptics:patching patched pino 6.5.0
2022-04-21T21:30:04.473Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4448
         "time": 1650576604497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E66A16F948D69C08AFFDD5EF0256DBC6D7ECD1E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4448
         "time": 1650576604504
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D19579F541B4E212E8892F365C21B7FFA0A6C91C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4448
         "time": 1650576604508
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B2178B0E4D6845BEEBD99FD1C541E937206330F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4448
         "time": 1650576604510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D7B579D384A485AE1B5BBFC216DD298807D4F31-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4448
         "time": 1650576604512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4448
         "time": 1650576604515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FEB63818A0BEA622A814B8CB101DD693773111C2-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4448
         "time": 1650576604516
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E30AE8B65FF4BA5114BB5DB11F025FDE7D72A211-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4448
         "time": 1650576604518
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4448
         "time": 1650576604519
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CFC76B086DEBD28FDD74C543EFFBD5FF38B8208-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4448
         "time": 1650576604520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4448
         "time": 1650576604521
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76E5BFE890F9821EAC264736936B184F8FF02F19-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4448
         "time": 1650576604523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF2D53CAA5713AB6838BF7987B9AA5A5D4D1C5AD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4448
         "time": 1650576604627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BA5855C68A6BD2821C91A5168A67CD39F788BC05-1"
         "pid": 4448
         "time": 1650576604655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:11.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:11.773Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:11.773Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:11.774Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:11.834Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:11.949Z appoptics:patching patched crypto 
2022-04-21T21:30:11.967Z appoptics:patching patched https 
2022-04-21T21:30:11.967Z appoptics:patching patched http 
2022-04-21T21:30:12.002Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:12.002Z appoptics:patching patched fs 
2022-04-21T21:30:12.007Z appoptics:patching patched pino 6.5.1
2022-04-21T21:30:12.011Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4470
         "time": 1650576612035
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4CF2030850279042B1309DEEBD40DF2621CE2CD2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4470
         "time": 1650576612043
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F2666EA81D20669041F20AEAE5E3712D2A712C55-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4470
         "time": 1650576612046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0377EF84DC9CEEA04F2EBA6B494724AC44C3D077-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4470
         "time": 1650576612049
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7B3DB6BD6F162A3EEAE56E2BBC29273F03127A6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4470
         "time": 1650576612051
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4470
         "time": 1650576612054
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A3CFD82C0AF1071332287AF2951C597014807C9F-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4470
         "time": 1650576612055
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5C5C10A566CBB9CA27A9FEE755CE112709674887-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4470
         "time": 1650576612057
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4470
         "time": 1650576612058
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "72AC5BEC9F11DA319362D8D4352B3B0D225E1271-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4470
         "time": 1650576612059
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4470
         "time": 1650576612060
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C49B7F1431FB8BCFD7F7A753359A94799F67781F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4470
         "time": 1650576612062
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F422FB66845E08DF002B1F09DC7BF75D8427F9C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4470
         "time": 1650576612166
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 702A4787357CCEF42D7B72F4F24A6B2FAE90AA26-1"
         "pid": 4470
         "time": 1650576612195
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 14s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:26.666Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:26.666Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:26.667Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:26.667Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:26.728Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:26.837Z appoptics:patching patched crypto 
2022-04-21T21:30:26.853Z appoptics:patching patched https 
2022-04-21T21:30:26.853Z appoptics:patching patched http 
2022-04-21T21:30:26.882Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:26.883Z appoptics:patching patched fs 
2022-04-21T21:30:26.887Z appoptics:patching patched pino 6.6.0
2022-04-21T21:30:26.891Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4492
         "time": 1650576626912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "96A07D04F584F9396C4820980FD396018DB5717E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4492
         "time": 1650576626919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50EA695894B13AE6635E4F1834CD9F7267EA889E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4492
         "time": 1650576626922
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FABA70740779B5DA7DE5A6FAB8C23EDC553D2617-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4492
         "time": 1650576626924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1157EAAA5749DE205E5792C486B89806F5FEB038-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4492
         "time": 1650576626926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4492
         "time": 1650576626928
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B7426D1421ACBACAD3DFA81489750D87488A9F22-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4492
         "time": 1650576626930
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45B4F1820BDF53BAE8EC5EBE0DC90D9DC75652C8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4492
         "time": 1650576626931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4492
         "time": 1650576626932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C01D2389B01B44AF304C047FD0D0A141C018431-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4492
         "time": 1650576626933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4492
         "time": 1650576626934
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9D656F278EF77F02C77188E0BCC348AB81422C14-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4492
         "time": 1650576626936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76F3058C215DD82F097E5E93D8F110393BE305EB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4492
         "time": 1650576627039
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 114A5EDBD17DA163E12C00CB57140616D7769631-1"
         "pid": 4492
         "time": 1650576627068
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:33.900Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:33.901Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:33.901Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:33.902Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:33.955Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:34.058Z appoptics:patching patched crypto 
2022-04-21T21:30:34.074Z appoptics:patching patched https 
2022-04-21T21:30:34.075Z appoptics:patching patched http 
2022-04-21T21:30:34.107Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:34.107Z appoptics:patching patched fs 
2022-04-21T21:30:34.112Z appoptics:patching patched pino 6.6.1
2022-04-21T21:30:34.116Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4514
         "time": 1650576634138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FBC03F6A412E96CD66E88EC36A68DDD101E959E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4514
         "time": 1650576634145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "282424CF09E2411910A38F156625B1D485A4726B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4514
         "time": 1650576634148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F06F9ECC47F49947C45320C6D091947FC503610C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4514
         "time": 1650576634150
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59CFCE57006DDD40379AC7D23FAB1677F25EF54B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4514
         "time": 1650576634152
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4514
         "time": 1650576634155
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D58DCB5150167352C4998E6EA8DB330104EFE6B0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4514
         "time": 1650576634157
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA0907F855BF80D9782A29F91B2D54112F86853A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4514
         "time": 1650576634158
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4514
         "time": 1650576634159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C2D65580B5346DEEDA0748BA55926DE3DD13FF8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4514
         "time": 1650576634160
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4514
         "time": 1650576634161
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "136DFF14CE3EA684471C413597F15E027C54C5AC-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4514
         "time": 1650576634163
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BECF06F6E6F1590F62B4CAF646BDF8220E2FF25D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4514
         "time": 1650576634266
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CD7CD2E11EDA97F92AF2A900BE06ED4110992E6D-1"
         "pid": 4514
         "time": 1650576634295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:39.984Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:39.984Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:39.984Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:39.985Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:40.041Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:40.142Z appoptics:patching patched crypto 
2022-04-21T21:30:40.158Z appoptics:patching patched https 
2022-04-21T21:30:40.159Z appoptics:patching patched http 
2022-04-21T21:30:40.191Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:40.191Z appoptics:patching patched fs 
2022-04-21T21:30:40.196Z appoptics:patching patched pino 6.7.0
2022-04-21T21:30:40.199Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4536
         "time": 1650576640222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7656BFACC7617A1657A84A38492100D1762F03D2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4536
         "time": 1650576640229
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "98C708550BB3DE55A0C3EC4E29AAEA8BE6406305-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4536
         "time": 1650576640232
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5DBD41C26DD1B6C07080AA48594CF22A693D97B9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4536
         "time": 1650576640234
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1835E74D78DC26D6327E717A685DFD16734AB258-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4536
         "time": 1650576640236
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4536
         "time": 1650576640239
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "220D31A651002688CB9FB16CF08DFB44505225FF-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4536
         "time": 1650576640240
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "362BE08C1001009ABD76F8F7E86368F7966222C4-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4536
         "time": 1650576640241
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4536
         "time": 1650576640242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EC259A3ECDAC841BD3A59088290A680BF9474B6-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4536
         "time": 1650576640243
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4536
         "time": 1650576640245
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68AE26C42C1CF07E24AC88E37471772D15333AB8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4536
         "time": 1650576640246
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "067293C9CA4BDA08838E81E568DBF339B2E7F6F2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4536
         "time": 1650576640350
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7D25BC438D7615B86E6CBE86164B6264439064D0-1"
         "pid": 4536
         "time": 1650576640378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:46.601Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:46.601Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:46.601Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:46.602Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:46.656Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:46.763Z appoptics:patching patched crypto 
2022-04-21T21:30:46.792Z appoptics:patching patched https 
2022-04-21T21:30:46.792Z appoptics:patching patched http 
2022-04-21T21:30:46.818Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:46.818Z appoptics:patching patched fs 
2022-04-21T21:30:46.823Z appoptics:patching patched pino 6.8.0
2022-04-21T21:30:46.826Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4558
         "time": 1650576646849
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BEDE5D612DAF29D141027E1FBA0A98D1D98C190-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4558
         "time": 1650576646855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C3D04422765A9B2A74B81D13FEB96329135FA1F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4558
         "time": 1650576646858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6FC4EFF0D9C5013468D645D12CD10129442187C9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4558
         "time": 1650576646861
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "69FA9DAECAD6A148B188BC5BCF60765FCBD7C651-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4558
         "time": 1650576646863
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4558
         "time": 1650576646865
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "181C47219E9C18A64C5CC795B1A213FDF0CD9D62-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4558
         "time": 1650576646867
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C2CF40452869DF6BB20B7F4355962F764C20A4B-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4558
         "time": 1650576646868
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4558
         "time": 1650576646869
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CC3036FAE619B27FA06CED0BEEEA68587199EDBC-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4558
         "time": 1650576646870
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4558
         "time": 1650576646871
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "468DC4347AC9EB736F975842B299D0AE21CEAFDA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4558
         "time": 1650576646873
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "370CD8DA443361568E0AA559F2B0DE0F4831E4F0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4558
         "time": 1650576646977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 161B59649263EEB2FE28C7AB16DDE6B6CFFB25DA-1"
         "pid": 4558
         "time": 1650576647005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:53.002Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:53.002Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:53.002Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:53.003Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:53.062Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:30:53.173Z appoptics:patching patched crypto 
2022-04-21T21:30:53.191Z appoptics:patching patched https 
2022-04-21T21:30:53.192Z appoptics:patching patched http 
2022-04-21T21:30:53.226Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:30:53.226Z appoptics:patching patched fs 
2022-04-21T21:30:53.231Z appoptics:patching patched pino 6.9.0
2022-04-21T21:30:53.235Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4580
         "time": 1650576653259
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C81BF1393B28BC67E4965EB16CE733BC311E30E7-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4580
         "time": 1650576653265
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF9FD1CC4FB484E1D150DB8BFDCCFBBB741C8E69-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4580
         "time": 1650576653269
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31E86F6BA4C18C38CBD7AE45C9FA70BEE5B26198-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4580
         "time": 1650576653271
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "395039C4C37B20121B6C52DF9D026549E844D09C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4580
         "time": 1650576653273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4580
         "time": 1650576653276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "767B62B1B25F3E0E28775C870800D9BCB4FDD0F0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4580
         "time": 1650576653277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E309DFDC9213A1CC8980FE3D3091D2DEB314C945-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4580
         "time": 1650576653279
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4580
         "time": 1650576653280
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "80F0EA16A0E163E19B06AC3705CFDB929A31BA7C-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4580
         "time": 1650576653281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4580
         "time": 1650576653282
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "57E795EF95853287F22AA98C527D32BC1DC113CA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4580
         "time": 1650576653284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "271B7EA293901EAC89C7920E9105792B5E2D0B19-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4580
         "time": 1650576653388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 30908F8907D8D8814EDC4559894EA143EBDA36BB-1"
         "pid": 4580
         "time": 1650576653417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:30:59.917Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:30:59.918Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:30:59.918Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:30:59.918Z appoptics:debug using context provider: ace-context
2022-04-21T21:30:59.976Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:00.084Z appoptics:patching patched crypto 
2022-04-21T21:31:00.100Z appoptics:patching patched https 
2022-04-21T21:31:00.101Z appoptics:patching patched http 
2022-04-21T21:31:00.132Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:00.132Z appoptics:patching patched fs 
2022-04-21T21:31:00.137Z appoptics:patching patched pino 6.10.0
2022-04-21T21:31:00.140Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4602
         "time": 1650576660162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B5A4EB6507EE4C1101EC0259F3796D1B3A1B5C63-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4602
         "time": 1650576660168
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07C25094D5EC7BF709D416C894CC6427EBAB6A28-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4602
         "time": 1650576660171
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DECBD3171AA8761C953ADB13FC49B47A166550A2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4602
         "time": 1650576660173
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F72790F13A541D7B42BEDE2EAF495547999EDF5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4602
         "time": 1650576660175
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4602
         "time": 1650576660178
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CFC62A9969D940E3F5589E522F97B5A30C8A1890-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4602
         "time": 1650576660179
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BAED2B5FCA06016422AAE1A7B2EDF3138EB9F68-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4602
         "time": 1650576660180
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4602
         "time": 1650576660181
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B133CB9FFB68AD730F66A6E6A8C4A8916CAF13A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4602
         "time": 1650576660183
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4602
         "time": 1650576660184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D033CAEE3F651F72376E1E1695D805DC2A6F1520-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4602
         "time": 1650576660185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FAEEC5696DC17B496D13EF774572255E56ABD038-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4602
         "time": 1650576660290
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EC4138B0BE581DCF51B293167363612990DC657D-1"
         "pid": 4602
         "time": 1650576660318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:06.098Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:06.099Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:06.099Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:06.100Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:06.158Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:06.273Z appoptics:patching patched crypto 
2022-04-21T21:31:06.291Z appoptics:patching patched https 
2022-04-21T21:31:06.292Z appoptics:patching patched http 
2022-04-21T21:31:06.334Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:06.335Z appoptics:patching patched fs 
2022-04-21T21:31:06.340Z appoptics:patching patched pino 6.11.0
2022-04-21T21:31:06.343Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4624
         "time": 1650576666368
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F3BAFB404561BB72FBC4CB084AB5629E86CB09F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4624
         "time": 1650576666375
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "543AC5B084D588A998CE35658403E67F19F977D2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4624
         "time": 1650576666378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "97FEBCCCF610B1170BB4393E6834E5BAE0D41A04-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4624
         "time": 1650576666380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "65A6718AB9AE3A59E495952BBD3AACCEF31B4E05-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4624
         "time": 1650576666382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4624
         "time": 1650576666385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3563E829B21E9DD428CC3B0A169E9BD725126BC-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4624
         "time": 1650576666387
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE63903697FCCE2723F3687119F21D26D0C2CA26-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4624
         "time": 1650576666388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4624
         "time": 1650576666389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6733CC1A657E655FB4FFA08A910C7D19E3C6F8C0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4624
         "time": 1650576666391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4624
         "time": 1650576666392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A24CB577174DEBCDB80EA4BC2F595B3804ECEA4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4624
         "time": 1650576666394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D781BB078D3F5F207BEF7A95A934874786494875-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4624
         "time": 1650576666497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8F8F9ACF634AA6C05522C01658F60C19907E4836-1"
         "pid": 4624
         "time": 1650576666526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:12.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:12.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:12.650Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:12.651Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:12.704Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:12.824Z appoptics:patching patched crypto 
2022-04-21T21:31:12.839Z appoptics:patching patched https 
2022-04-21T21:31:12.840Z appoptics:patching patched http 
2022-04-21T21:31:12.872Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:12.872Z appoptics:patching patched fs 
2022-04-21T21:31:12.877Z appoptics:patching patched pino 6.11.1
2022-04-21T21:31:12.880Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (172ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4646
         "time": 1650576672902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C80686ED50E23ABEDFCB4A6BBD5F22FEED96239-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4646
         "time": 1650576672908
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5186C2C7E7F1D2C2A89FE6349540B00BCAE52C4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4646
         "time": 1650576672911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3F4087F2E4F761FE018B72A5C0557211CD1882E8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4646
         "time": 1650576672913
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04AD1CB020029CCD59AC33B596A7AC749BB4412C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4646
         "time": 1650576672915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4646
         "time": 1650576672918
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3BC6D3F60D5515A5D75D200610F6B3ED53948B71-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4646
         "time": 1650576672919
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "859BF4A5BEF3389EEF110FB8EC0D4D9A54929E2E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4646
         "time": 1650576672920
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4646
         "time": 1650576672921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E180BCA78247E5D218F51FC0D43752820DF312C-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4646
         "time": 1650576672922
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4646
         "time": 1650576672923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BAF931A0A7D02D0BC97230719066ECABEC9EAFA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4646
         "time": 1650576672925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93DE697976D806AF93037844DFA70BAE0D165650-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4646
         "time": 1650576673029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F327AB84570A511B1837C110FD9DA0D6CC7DDE8C-1"
         "pid": 4646
         "time": 1650576673057
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:18.487Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:18.488Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:18.488Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:18.489Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:18.542Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:18.643Z appoptics:patching patched crypto 
2022-04-21T21:31:18.658Z appoptics:patching patched https 
2022-04-21T21:31:18.659Z appoptics:patching patched http 
2022-04-21T21:31:18.709Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:18.709Z appoptics:patching patched fs 
2022-04-21T21:31:18.714Z appoptics:patching patched pino 6.11.2
2022-04-21T21:31:18.717Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4668
         "time": 1650576678750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C821F8237540977AF0B5B38E6445493ED6F0C7D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4668
         "time": 1650576678758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D8E062CA463EBE51FBDCDC96EC0EE6820D7BFC6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4668
         "time": 1650576678762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "706467A4DA2FFB49716987FD47BB705AD4216325-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4668
         "time": 1650576678764
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA71D28C2CEDDF12AB91F1C343770642964068F5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4668
         "time": 1650576678766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4668
         "time": 1650576678769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D2E49C042EFB3C53AC4BB5AB4D2303C4FAC6C48A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4668
         "time": 1650576678773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "22C53662C3B638B643555CC7C25619ABEB2E6E08-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4668
         "time": 1650576678774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4668
         "time": 1650576678775
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4818ACFA75180584FD9723F58665D06DBC47B0A6-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4668
         "time": 1650576678776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4668
         "time": 1650576678777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FF28C51D491834C5CA134DB5C4021EB603BBA95-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4668
         "time": 1650576678779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8F06B267BE9EE14EC4CD0A78DE4304D4B20A4DCF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4668
         "time": 1650576678883
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B9FC543FA4B7BF6F55332608F130512C96392FD1-1"
         "pid": 4668
         "time": 1650576678911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:25.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:25.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:25.327Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:25.328Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:25.381Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:25.482Z appoptics:patching patched crypto 
2022-04-21T21:31:25.498Z appoptics:patching patched https 
2022-04-21T21:31:25.499Z appoptics:patching patched http 
2022-04-21T21:31:25.536Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:25.536Z appoptics:patching patched fs 
2022-04-21T21:31:25.542Z appoptics:patching patched pino 6.11.3
2022-04-21T21:31:25.545Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4690
         "time": 1650576685570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4FEC43955BCED9CB43019959FAEB8DC6AF3C46E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4690
         "time": 1650576685577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "907D04D57108F25B05C1E51212231E80F6C7B9AD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4690
         "time": 1650576685580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C5F93A5769A1A6EEAA05FFD299B4188DDFA9013B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4690
         "time": 1650576685582
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A2B7F2C7B8A40ED53210F39B727EA714B9B3E10-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4690
         "time": 1650576685584
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4690
         "time": 1650576685587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4D365D4DE3C280BFE5E591E3B80E0BF98FF0DDE1-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4690
         "time": 1650576685588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DBC0CFB9613D29216FBECFF7153BCCD1DE59B81-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4690
         "time": 1650576685590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4690
         "time": 1650576685591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DD5C8048B0458291728246E9C022268005135BCD-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4690
         "time": 1650576685592
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4690
         "time": 1650576685593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09E0D7CDC83A4DD7211442A58097FBEF3EB34AA9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4690
         "time": 1650576685595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A68A69F28A48B10744395B6038E47AFB975E036-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4690
         "time": 1650576685699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7F6DE7343172FBDDF0AD03D216FE0C7897EEA78A-1"
         "pid": 4690
         "time": 1650576685727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:31.616Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:31.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:31.617Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:31.618Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:31.686Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:31.803Z appoptics:patching patched crypto 
2022-04-21T21:31:31.852Z appoptics:patching patched https 
2022-04-21T21:31:31.852Z appoptics:patching patched http 
2022-04-21T21:31:31.893Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:31.894Z appoptics:patching patched fs 
2022-04-21T21:31:31.899Z appoptics:patching patched pino 6.12.0
2022-04-21T21:31:31.902Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (197ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4712
         "time": 1650576691929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AF522C0EF3C5E37EC7AEADCA4F5F2EFF5956123-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4712
         "time": 1650576691944
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F35F5C75FD060497CFBE2FDC91CAC72C62EE7A24-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4712
         "time": 1650576691947
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99FC40940280898F00795F6AB673EF831468F2B0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4712
         "time": 1650576691950
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A7C82F68D9FD5966616F5A65A2F430C176473438-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4712
         "time": 1650576691957
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4712
         "time": 1650576691959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A77C02CDA81E969F61377323AAEBD5854844DC1-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4712
         "time": 1650576691961
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E83B35BDF7601EB6A9E238F1CD28A9195F1A90A0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4712
         "time": 1650576691965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4712
         "time": 1650576691966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9123142C6C48DAE9BC5B0D0000EEF26C8C2396F8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4712
         "time": 1650576691968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4712
         "time": 1650576691971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05F73DC49F09D91ED10D700836FE23259BC7FFEB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4712
         "time": 1650576691973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0723831C36DA2C96CEEA123C66C7E40582B1946F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4712
         "time": 1650576692076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D9CC62B7B118A1C4FD15ED06D3742CA74CE345A2-1"
         "pid": 4712
         "time": 1650576692104
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:38.098Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:38.098Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:38.098Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:38.099Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:38.158Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:38.281Z appoptics:patching patched crypto 
2022-04-21T21:31:38.313Z appoptics:patching patched https 
2022-04-21T21:31:38.314Z appoptics:patching patched http 
2022-04-21T21:31:38.344Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:38.345Z appoptics:patching patched fs 
2022-04-21T21:31:38.350Z appoptics:patching patched pino 6.13.0
2022-04-21T21:31:38.354Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4734
         "time": 1650576698378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63613A5D36FAB09E91DAFFBAE6988F33A74E348F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4734
         "time": 1650576698385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E3ED7032AF1AA0430FDB7C01B46DAEDC81C21F34-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4734
         "time": 1650576698388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00D05BE66BFBA079F3469F4CCBFE903213F092F8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4734
         "time": 1650576698391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1BF3D1047CBD07730FCDB19CADA1F3487F7A3310-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4734
         "time": 1650576698393
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4734
         "time": 1650576698396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "71BEB3EC5A00FC26F8AAC2700DD379823DF01E49-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4734
         "time": 1650576698397
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0B35296F15C4BFC0C708BEB5AC1B9FF4C30F396-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4734
         "time": 1650576698399
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4734
         "time": 1650576698400
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AF0245A55880C518F8EBF865F695034A3214C98-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4734
         "time": 1650576698401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4734
         "time": 1650576698402
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BFE5E47CB3BECD348A2AEECE4F8509A7A6292A64-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4734
         "time": 1650576698404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A449A05EE9C90543CEADED7F05FF0B26AA4FB146-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4734
         "time": 1650576698509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CD3012C9952645984416F90C0509B698B0C7CB5A-1"
         "pid": 4734
         "time": 1650576698537
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:45.662Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:45.662Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:45.662Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:45.663Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:45.724Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:45.843Z appoptics:patching patched crypto 
2022-04-21T21:31:45.871Z appoptics:patching patched https 
2022-04-21T21:31:45.871Z appoptics:patching patched http 
2022-04-21T21:31:45.902Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:45.902Z appoptics:patching patched fs 
2022-04-21T21:31:45.908Z appoptics:patching patched pino 6.13.1
2022-04-21T21:31:45.912Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4756
         "time": 1650576705937
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9ECFF87F0D0EDFC198462D6DEDB15787DCCB13A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4756
         "time": 1650576705944
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "445496F8D7BDA2F12ECBB67E4AF21C8AC27EE792-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4756
         "time": 1650576705948
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "744B07DD6D6F28269ACC4ED7065028AC1011C604-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4756
         "time": 1650576705950
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B1C76456E40F88AA466A30152D29A3332D9B9CBC-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4756
         "time": 1650576705953
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4756
         "time": 1650576705955
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BA0405E191D882B80862BDF06D5AFDCC73A3859-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4756
         "time": 1650576705957
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C555CDB97B98BD651811D95B240722BA0BB3801-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4756
         "time": 1650576705959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4756
         "time": 1650576705960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50523E5E1537BC7729C084214BFC424988BF747A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4756
         "time": 1650576705961
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4756
         "time": 1650576705962
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5B2AB62EF970B4E0AAA145DF04B61AEBBC6DF9E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4756
         "time": 1650576705964
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F821BD3C7E90EC7776D7A8445A1DE803F759B5B8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4756
         "time": 1650576706069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6C054E230A982367C3D169C89C854DB50A00D8F8-1"
         "pid": 4756
         "time": 1650576706097
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:52.111Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:52.112Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:52.112Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:52.113Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:52.182Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:52.320Z appoptics:patching patched crypto 
2022-04-21T21:31:52.337Z appoptics:patching patched https 
2022-04-21T21:31:52.338Z appoptics:patching patched http 
2022-04-21T21:31:52.372Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:52.372Z appoptics:patching patched fs 
2022-04-21T21:31:52.378Z appoptics:patching patched pino 6.13.2
2022-04-21T21:31:52.382Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4778
         "time": 1650576712405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F790E03D2F18F4474CAA92E9D9A1707D6308785-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4778
         "time": 1650576712412
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C8C5B7F667625A2BA7CDD4E5DA4FE17F43409E5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4778
         "time": 1650576712415
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "979E8072972D01DCE6BA1ABB4FC7B296A7AB26C9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4778
         "time": 1650576712418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "321044791E992319140E52DF4F579C8E70EED565-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4778
         "time": 1650576712420
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4778
         "time": 1650576712423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39E82321989A61D8923F26AC1D862E82451E76EF-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4778
         "time": 1650576712426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C7243A9F884B7825504A9EC799A6DEFEB855C62-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4778
         "time": 1650576712427
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4778
         "time": 1650576712428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEE64E1620499CED22CBBEAB29220CF5AAE2A28E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4778
         "time": 1650576712429
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4778
         "time": 1650576712430
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "24DF030A3C7123CD2F4AD0AA9B521E7DF5C985BD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4778
         "time": 1650576712432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "74858BBDCD61D672B121C123108AE1E6CCA25C78-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4778
         "time": 1650576712536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 99AA20E5A52150FE0C2A1D88EB98BD1874443A38-1"
         "pid": 4778
         "time": 1650576712565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:31:59.676Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:31:59.677Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:31:59.677Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:31:59.678Z appoptics:debug using context provider: ace-context
2022-04-21T21:31:59.737Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:31:59.867Z appoptics:patching patched crypto 
2022-04-21T21:31:59.885Z appoptics:patching patched https 
2022-04-21T21:31:59.896Z appoptics:patching patched http 
2022-04-21T21:31:59.936Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:31:59.936Z appoptics:patching patched fs 
2022-04-21T21:31:59.942Z appoptics:patching patched pino 6.13.3
2022-04-21T21:31:59.946Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4800
         "time": 1650576719970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F0B4D873C9B2A20D599CDAF8D656EA2BD041E715-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4800
         "time": 1650576719977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4887C8CCFC83D676D6527020A69DD8251023466A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4800
         "time": 1650576719980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5EC08A782CCEB3147406F68EDDB0FD60B4D492F9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4800
         "time": 1650576719983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CA2215CFE6391C4580CEA34D25FB8C82AEE8B4FD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4800
         "time": 1650576719985
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4800
         "time": 1650576719988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9EFAFD9CFC4BB1D30F777D6D7FC94BB850E5A775-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4800
         "time": 1650576719989
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13A70E666185C922B31638B313BED4A9D18A9114-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4800
         "time": 1650576719990
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4800
         "time": 1650576719992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "010FAC47BD9390A3BDDB4D2EB442E731EE3789F2-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4800
         "time": 1650576719993
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4800
         "time": 1650576719994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "03C64AC74DB9840CF34A96F28252CA28D30EE178-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4800
         "time": 1650576719996
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC641B34E29EE75D17F252B13F8469CB1331EAA6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4800
         "time": 1650576720100
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BFC7D568C87836A5448A9EDC4509F21E5A830EB8-1"
         "pid": 4800
         "time": 1650576720128
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:05.996Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:05.996Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:05.996Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:05.997Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:06.056Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:06.170Z appoptics:patching patched crypto 
2022-04-21T21:32:06.188Z appoptics:patching patched https 
2022-04-21T21:32:06.188Z appoptics:patching patched http 
2022-04-21T21:32:06.219Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:06.219Z appoptics:patching patched fs 
2022-04-21T21:32:06.225Z appoptics:patching patched pino 6.13.4
2022-04-21T21:32:06.229Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4822
         "time": 1650576726253
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "904E2677300B6F24D16285E17B37429CF28B6FE5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4822
         "time": 1650576726260
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "664EE69FD970D63FA785326645A54BB5955603F5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4822
         "time": 1650576726263
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0DED138BC1AE2F101322DC339AB58F97FB7C9E59-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4822
         "time": 1650576726265
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5788706D8265C4CBFE295817D1B35F9BEDC5C7B1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4822
         "time": 1650576726267
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4822
         "time": 1650576726270
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F23CAAECB38413EC3853C11099F3D5B423370D0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4822
         "time": 1650576726272
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1593A166D0EA49520D5C577161BF2BDA787EE25B-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4822
         "time": 1650576726273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4822
         "time": 1650576726274
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "343D22CD6252EBE73E884CDF23FA8E8FBAF45AF3-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4822
         "time": 1650576726275
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4822
         "time": 1650576726276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FB692238FEDCF7A1CD14C546A61A494FD6C2526-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4822
         "time": 1650576726278
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64F24315B840CB2B6A9D3069EDCF271C273A9C7E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4822
         "time": 1650576726382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D4ADA3E615B360354D058E8336A1D57A5F11A390-1"
         "pid": 4822
         "time": 1650576726411
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:13.126Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:13.126Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:13.127Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:13.127Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:13.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:13.300Z appoptics:patching patched crypto 
2022-04-21T21:32:13.321Z appoptics:patching patched https 
2022-04-21T21:32:13.322Z appoptics:patching patched http 
2022-04-21T21:32:13.376Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:13.376Z appoptics:patching patched fs 
2022-04-21T21:32:13.382Z appoptics:patching patched pino 6.14.0
2022-04-21T21:32:13.386Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4844
         "time": 1650576733410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E6A3291AA542F1132A2F1D9B0EAFB8E0AE7A77D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4844
         "time": 1650576733417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E0FCF1F3A526FCDA0211C2C4946923197AE64C1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4844
         "time": 1650576733420
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48C1B3629CA19B08421C8A0480BAC5D1E919780D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4844
         "time": 1650576733423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "876ADB1DF5400015393CD716F7DC5C13F3B16C54-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4844
         "time": 1650576733425
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4844
         "time": 1650576733428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "20A11BE349ECCAC69E04DE6E25FD2B743DFFBF95-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4844
         "time": 1650576733429
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6607FAA1CFA1C66E2D40337955C344EFE2E99166-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4844
         "time": 1650576733431
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4844
         "time": 1650576733432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F31BF4425B0D669293ADC6C8B4CABABB81FB7CBA-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4844
         "time": 1650576733433
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4844
         "time": 1650576733434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF6E8411A6FB9B59F67F893373EE9DE6A35B2476-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4844
         "time": 1650576733436
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0681B0B9AFC6ECD58CD5E8EFAABA2243A9BE52D1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4844
         "time": 1650576733539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D28361385ACF999F1C50E2439A27E0619A94EB73-1"
         "pid": 4844
         "time": 1650576733568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:20.370Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:20.371Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:20.371Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:20.372Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:20.448Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:20.593Z appoptics:patching patched crypto 
2022-04-21T21:32:20.643Z appoptics:patching patched https 
2022-04-21T21:32:20.643Z appoptics:patching patched http 
2022-04-21T21:32:20.685Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:20.686Z appoptics:patching patched fs 
2022-04-21T21:32:20.699Z appoptics:patching patched pino 7.0.0
2022-04-21T21:32:20.704Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (211ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4866
         "time": 1650576740760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9756009D7755516322C71BC7AB9F0F37D458B2C6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4866
         "time": 1650576740768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "385794159AD7DEE46C5FE7740DC35ED773C70F7B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4866
         "time": 1650576740771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9DC1489FD1D1B50AB2F43F34875C4773273F7C8E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4866
         "time": 1650576740774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8F6EBA6EF4D231FCEFE7C3DB9E998E13DBBB0D40-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4866
         "time": 1650576740777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4866
         "time": 1650576740780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5C43E1CD4A48A5B8BADBCAC2B10374842A261365-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4866
         "time": 1650576740782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEF1103C5CD163EA62088C8D298CC86492160C55-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4866
         "time": 1650576740784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4866
         "time": 1650576740785
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33EAFC163DBDA2F7BE64AFA3D50C4CF757A2DD55-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4866
         "time": 1650576740786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4866
         "time": 1650576740788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7634B7E1F862F7697C3E9E943B3DFD81448870F0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4866
         "time": 1650576740790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FD361087CDDAC70F1F92CA309C6C1B8611406CC9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4866
         "time": 1650576740894
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 36A60517C41EC2D9E683735B253B35929A0BC664-1"
         "pid": 4866
         "time": 1650576740923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:27.028Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:27.028Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:27.028Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:27.029Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:27.087Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:27.201Z appoptics:patching patched crypto 
2022-04-21T21:32:27.218Z appoptics:patching patched https 
2022-04-21T21:32:27.219Z appoptics:patching patched http 
2022-04-21T21:32:27.257Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:27.257Z appoptics:patching patched fs 
2022-04-21T21:32:27.264Z appoptics:patching patched pino 7.0.1
2022-04-21T21:32:27.268Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4888
         "time": 1650576747291
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FBF7967E5CD5B9AF0EC5B759DB80DD5CDC2CCBCA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4888
         "time": 1650576747298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99E79401BEEB9D7B1FE4A15705A734FEB7706919-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4888
         "time": 1650576747301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A608ED47D44CC31CDC9C0A6DF687F68FF6E4BDCD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4888
         "time": 1650576747304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FACF5F2877806A8D91AB4CBFB1304C1BA274815A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4888
         "time": 1650576747306
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4888
         "time": 1650576747309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8F89FBB9EA2C9A0840E97FFD62C41A362E9C6178-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4888
         "time": 1650576747310
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B309B94EDF143127C0E9D02BEEFA996D22EF77F8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4888
         "time": 1650576747312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4888
         "time": 1650576747313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "97E695383CA82EC84EA69924EAC7726DF52FBC2B-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4888
         "time": 1650576747314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4888
         "time": 1650576747315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A99ADA28D5D63CEEDEF34935B08B207A4F5A43AA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4888
         "time": 1650576747317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09714795C24BE254390DDB2C30016D0DF31F3257-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4888
         "time": 1650576747420
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AEB4DAE2574613A9C879733A30DF18DDC8783DE4-1"
         "pid": 4888
         "time": 1650576747449
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:34.199Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:34.200Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:34.200Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:34.200Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:34.258Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:34.369Z appoptics:patching patched crypto 
2022-04-21T21:32:34.386Z appoptics:patching patched https 
2022-04-21T21:32:34.387Z appoptics:patching patched http 
2022-04-21T21:32:34.423Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:34.424Z appoptics:patching patched fs 
2022-04-21T21:32:34.430Z appoptics:patching patched pino 7.0.2
2022-04-21T21:32:34.434Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4910
         "time": 1650576754458
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3725D90C38B53B05152103AF67C0A587390A0359-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4910
         "time": 1650576754465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7B387FF7E12BD38B64AC91D38218B4B71D7DB7D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4910
         "time": 1650576754469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D3B98FB299F984279D995AF6066DC5D040D095C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4910
         "time": 1650576754471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D912DC050B9797A2138533BBC07FF5BC45E6DB1D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4910
         "time": 1650576754473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4910
         "time": 1650576754476
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF83C7B88ED9870E716F30B1FEB6A830EA90DCEB-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4910
         "time": 1650576754477
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EA60B33EB6967C9C6D9018C3BA45B07E9586E269-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4910
         "time": 1650576754479
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4910
         "time": 1650576754480
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02612A8340753847776770FE5487940ED1C36E5E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4910
         "time": 1650576754481
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4910
         "time": 1650576754482
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "19AAD86BFAF780D3F31759B5CB7FEAFD13213450-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4910
         "time": 1650576754484
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "598E12E99E2FF18CC62379571A7A1CE64D1BB20B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4910
         "time": 1650576754587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CA153E5F6595EA243B8554E84B7037A384E3825F-1"
         "pid": 4910
         "time": 1650576754616
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:40.912Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:40.912Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:40.912Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:40.913Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:40.981Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:41.123Z appoptics:patching patched crypto 
2022-04-21T21:32:41.150Z appoptics:patching patched https 
2022-04-21T21:32:41.151Z appoptics:patching patched http 
2022-04-21T21:32:41.182Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:41.183Z appoptics:patching patched fs 
2022-04-21T21:32:41.189Z appoptics:patching patched pino 7.0.3
2022-04-21T21:32:41.193Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4932
         "time": 1650576761218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D002438011217A0D91041D6219CAB122A92D5E3-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4932
         "time": 1650576761225
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D6D3AE415EF107B9B174E6A3F1EBC0D25C63721-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4932
         "time": 1650576761228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE3301B10BAB75F67D7D194C4F408E8DEFEB2B02-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4932
         "time": 1650576761231
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01787414728DF924376A642505B2703CD6CA6EBD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4932
         "time": 1650576761233
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4932
         "time": 1650576761236
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DF9EFF8B836C4E3151FF8B214A934F65073692C5-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4932
         "time": 1650576761237
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F457167C1F67D225DACDE64A93E8FEB3B4C3762-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4932
         "time": 1650576761239
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4932
         "time": 1650576761240
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F75E582781B7EE6267E568DF50C777D81DA425E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4932
         "time": 1650576761241
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4932
         "time": 1650576761242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A3B13FABF10790F500F149CA94F67643194CDF1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4932
         "time": 1650576761244
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A7C9DD8CD4488288E04CDAF1B3BAC8DA466AE48-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4932
         "time": 1650576761348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 84AAEED6F48C14C9B92E15495E28666D38054516-1"
         "pid": 4932
         "time": 1650576761376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:48.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:48.062Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:48.062Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:48.063Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:48.121Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:48.233Z appoptics:patching patched crypto 
2022-04-21T21:32:48.251Z appoptics:patching patched https 
2022-04-21T21:32:48.252Z appoptics:patching patched http 
2022-04-21T21:32:48.288Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:48.289Z appoptics:patching patched fs 
2022-04-21T21:32:48.296Z appoptics:patching patched pino 7.0.4
2022-04-21T21:32:48.299Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4954
         "time": 1650576768323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A921B08214CB85A3EDE08238ACAE9C05083207F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4954
         "time": 1650576768330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93E31FFE6DB1C1DA53E118BF7477CBCAB1054FEF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4954
         "time": 1650576768333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "707AA92D736935A9AA6AE518AACB12EDC34C7189-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4954
         "time": 1650576768336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "54C70856323411F3C8D68FCD857996C9CD06157D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4954
         "time": 1650576768338
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4954
         "time": 1650576768341
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "045DA8122CB5AE68BF83FF249026BB4701C43703-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4954
         "time": 1650576768342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5EFB6318BF89116405A2CD3B0E61F4D5A618D87F-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4954
         "time": 1650576768343
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4954
         "time": 1650576768344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "820A29C0C4438007B729361C19E7035D550209AA-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4954
         "time": 1650576768346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4954
         "time": 1650576768347
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BFDAB2618E586CEB43EB30788A1C84FE9C524262-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4954
         "time": 1650576768348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46E82469929DDC0C071A3C4A4C71836EBF2BAE0C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4954
         "time": 1650576768452
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A28950921BCFA9DFA795EF039089DA9F3F17B698-1"
         "pid": 4954
         "time": 1650576768481
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:32:54.791Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:32:54.792Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:32:54.792Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:32:54.793Z appoptics:debug using context provider: ace-context
2022-04-21T21:32:54.862Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:32:54.978Z appoptics:patching patched crypto 
2022-04-21T21:32:55.005Z appoptics:patching patched https 
2022-04-21T21:32:55.005Z appoptics:patching patched http 
2022-04-21T21:32:55.036Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:32:55.037Z appoptics:patching patched fs 
2022-04-21T21:32:55.043Z appoptics:patching patched pino 7.0.5
2022-04-21T21:32:55.047Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4976
         "time": 1650576775071
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77A65F3EE740A49B403342E149C58A13C3AE5C5D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4976
         "time": 1650576775079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B8AA5ABCC6689BF08FAE79B6922E7A086510744-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4976
         "time": 1650576775082
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB48B713B8C2FC3AA79F137C72BFF36B8A7EBBA4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4976
         "time": 1650576775085
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A098F426561E8A3D2CBE297489B186CF61AB5E9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4976
         "time": 1650576775087
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4976
         "time": 1650576775090
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7557FF8FB3EEC9BDEB8E7420A6BA54DA36EF6C1-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4976
         "time": 1650576775091
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EA17A46AAA52B3EEF67D20792E797AC1D7DD7D82-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4976
         "time": 1650576775092
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4976
         "time": 1650576775094
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41C5BEEED7111CAF893D5292491D4105D8C830F7-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4976
         "time": 1650576775095
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4976
         "time": 1650576775096
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C11C16E9278C6A1A7C720E480EF8889B9D782D81-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4976
         "time": 1650576775098
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D0949FC4E4B4E4F9408659CFAB9E0D6599D4FBB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4976
         "time": 1650576775202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5D4C583FFF19FC670C9A8A9669DFE5F4C5F1230A-1"
         "pid": 4976
         "time": 1650576775234
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:01.925Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:01.926Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:01.926Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:01.927Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:01.987Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:02.101Z appoptics:patching patched crypto 
2022-04-21T21:33:02.119Z appoptics:patching patched https 
2022-04-21T21:33:02.120Z appoptics:patching patched http 
2022-04-21T21:33:02.155Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:02.156Z appoptics:patching patched fs 
2022-04-21T21:33:02.163Z appoptics:patching patched pino 7.1.0
2022-04-21T21:33:02.167Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4998
         "time": 1650576782191
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64911EEF7F0812322071B5726F15B751BAC08DC4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4998
         "time": 1650576782198
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5EB342BD14F0BF8B096520C3911C9F42A7555391-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4998
         "time": 1650576782201
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "486814AAB04E3C9E74F3964E19EBE9F44DF42BF0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4998
         "time": 1650576782204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F5C4CEEB3DC13E982EAAD225463109E90B4F6D0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4998
         "time": 1650576782206
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4998
         "time": 1650576782209
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC21AB1C691DAF0D854CC7757871A03AEB7FCB67-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4998
         "time": 1650576782210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1870F35096F3333AC1ABB7B9DCF6318051516426-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4998
         "time": 1650576782212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4998
         "time": 1650576782213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38DDC57B2DF073BE9724AC6F3035913AD69199B5-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4998
         "time": 1650576782214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 4998
         "time": 1650576782215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4D186BAEC4FDE85F25B775B6FCDF08C43BDEEF90-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4998
         "time": 1650576782217
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "537B93468685F0989833AA3FD857EF12B7493827-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4998
         "time": 1650576782320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 98AD887585061A52F364A930BC59A15B4E59E97E-1"
         "pid": 4998
         "time": 1650576782349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:08.556Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:08.557Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:08.557Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:08.558Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:08.640Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:08.775Z appoptics:patching patched crypto 
2022-04-21T21:33:08.841Z appoptics:patching patched https 
2022-04-21T21:33:08.841Z appoptics:patching patched http 
2022-04-21T21:33:08.910Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:08.910Z appoptics:patching patched fs 
2022-04-21T21:33:08.923Z appoptics:patching patched pino 7.2.0
2022-04-21T21:33:08.935Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5020
         "time": 1650576788972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1902F280892783BF6604E64C4E1A257D23D9973E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5020
         "time": 1650576788980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9F12A20AF0BCCCEA0E6AF91D134D0924859F4F0E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5020
         "time": 1650576788983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3BB838B38411669C7D4304E99D7943E6542ECA0B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5020
         "time": 1650576788986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5E759A14DC1852196C34A45DA25E40E2E3AC74B7-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5020
         "time": 1650576788988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5020
         "time": 1650576788991
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C317E601FD39222ACBB4E62C919E1245E6F3F00-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5020
         "time": 1650576788992
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7FE8F165105D2886A1982E6B52A70A132F3FE7B7-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5020
         "time": 1650576788994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5020
         "time": 1650576788995
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "68FE3515928FCF233E5A40373AD6C5A17024834E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5020
         "time": 1650576788996
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5020
         "time": 1650576788998
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "128D6D13E9FCC9C239B6795453D1AF292540288D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5020
         "time": 1650576788999
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CEA9075F3BDF9A8841FDB75D7EB1C05275C3B8E6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5020
         "time": 1650576789102
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FC4B96237E274678E6618E496E6039CC8074B8C4-1"
         "pid": 5020
         "time": 1650576789130
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:15.775Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:15.776Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:15.776Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:15.776Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:15.836Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:15.949Z appoptics:patching patched crypto 
2022-04-21T21:33:15.974Z appoptics:patching patched https 
2022-04-21T21:33:15.980Z appoptics:patching patched http 
2022-04-21T21:33:16.010Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:16.010Z appoptics:patching patched fs 
2022-04-21T21:33:16.018Z appoptics:patching patched pino 7.3.0
2022-04-21T21:33:16.022Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5042
         "time": 1650576796046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE9DE8264FB207A50E737A42882053F36D4F0992-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5042
         "time": 1650576796054
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "47D94B82CCA58926909267D1BC2191939ECF5F50-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5042
         "time": 1650576796057
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "528A5C60BFFE0B221EDDE9B073239C4150F1CA30-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5042
         "time": 1650576796059
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A1B164934F6638AD31929C36B895CD0A1ADBE37-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5042
         "time": 1650576796062
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5042
         "time": 1650576796065
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "292CF69E678F8E08AF6F99088AF0DC8B346CBE2D-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5042
         "time": 1650576796066
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F24C794460DBEDC3F07BBBCED145D354F5D1B981-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5042
         "time": 1650576796068
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5042
         "time": 1650576796069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BD5E62E27026A7AD0C83750A882498169C4D5CE-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5042
         "time": 1650576796070
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5042
         "time": 1650576796071
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C97D67934BB74ABED7CC775D6A9549476CC042B6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5042
         "time": 1650576796073
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "553073163B0842645CDA1D4FBAE78D8B7A5B3176-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5042
         "time": 1650576796177
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 462767620D40BAF8ED86ECF491EC04C2A49E8A6F-1"
         "pid": 5042
         "time": 1650576796205
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:22.991Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:22.991Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:22.991Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:22.992Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:23.069Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:23.200Z appoptics:patching patched crypto 
2022-04-21T21:33:23.241Z appoptics:patching patched https 
2022-04-21T21:33:23.241Z appoptics:patching patched http 
2022-04-21T21:33:23.277Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:23.278Z appoptics:patching patched fs 
2022-04-21T21:33:23.285Z appoptics:patching patched pino 7.4.0
2022-04-21T21:33:23.289Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5064
         "time": 1650576803325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FEB8FCA8E6871BA4C6442A475C658258A4E8B1D4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5064
         "time": 1650576803335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04923BD7D80E62F879B601C53A460FE30A60FC7D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5064
         "time": 1650576803338
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1D61395D6CB2FEBA11E573419BC0702AB479D76-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5064
         "time": 1650576803342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2254716216FC0829B89C6DF989671AC1F02E0E16-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5064
         "time": 1650576803344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5064
         "time": 1650576803347
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D2FE664A30F07C2CFB922AC184D74F7F4F61611-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5064
         "time": 1650576803348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF07A5E611C1B4F3CC1BBA1C669B97E2EA1061E7-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5064
         "time": 1650576803350
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5064
         "time": 1650576803351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9775EAE6CCD611B96478940CA4F5D836F1EA78CB-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5064
         "time": 1650576803352
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5064
         "time": 1650576803354
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2472B54F99EFEA43227A591A7EF8321D3121DB3F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5064
         "time": 1650576803355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7CF60DF430D038F1BADF00CBE776D50373DE0CEB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5064
         "time": 1650576803459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1F6CF9DBFFF46254391E453C05D1FC757EC0D836-1"
         "pid": 5064
         "time": 1650576803486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:29.353Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:29.353Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:29.353Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:29.354Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:29.413Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:29.525Z appoptics:patching patched crypto 
2022-04-21T21:33:29.543Z appoptics:patching patched https 
2022-04-21T21:33:29.544Z appoptics:patching patched http 
2022-04-21T21:33:29.579Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:29.579Z appoptics:patching patched fs 
2022-04-21T21:33:29.587Z appoptics:patching patched pino 7.4.1
2022-04-21T21:33:29.590Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5086
         "time": 1650576809614
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "18472A3B607EB3A25B142F6314126DE436DDFC73-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5086
         "time": 1650576809621
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "37EA96F31D4E158323CC0E244ADCF1AAB12F57B4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5086
         "time": 1650576809625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DC6F4B73C18503277BE378D265B500DE9A3349E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5086
         "time": 1650576809627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "632406A4E4A7E91AD1F3567EE9D3ABE56E3AB3B8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5086
         "time": 1650576809629
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5086
         "time": 1650576809632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1365A845012B54D7C2AEE11698DE1497846FFAA0-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5086
         "time": 1650576809633
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFD05EF870A35DED35BB1E49E4B97BACA8127582-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5086
         "time": 1650576809635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5086
         "time": 1650576809636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "11B8C3FE9FAE136BBB4F22C30B9D02A8CE9C54BA-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5086
         "time": 1650576809637
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5086
         "time": 1650576809638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ECCB68B9548DA4A88D7AC9132019C87EC624983D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5086
         "time": 1650576809640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1BE4A5A34DDBCD9A55D8946212EBE0BDA7FD2B7E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5086
         "time": 1650576809743
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DD1ABA379DA15777501407B33D071650160A5D43-1"
         "pid": 5086
         "time": 1650576809771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:36.817Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:36.817Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:36.818Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:36.818Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:36.878Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:36.993Z appoptics:patching patched crypto 
2022-04-21T21:33:37.011Z appoptics:patching patched https 
2022-04-21T21:33:37.012Z appoptics:patching patched http 
2022-04-21T21:33:37.049Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:37.050Z appoptics:patching patched fs 
2022-04-21T21:33:37.058Z appoptics:patching patched pino 7.5.0
2022-04-21T21:33:37.061Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5108
         "time": 1650576817086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F1130AB1452C53E6C078EB8E1E6AC3A6F429751-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5108
         "time": 1650576817093
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45A442E7A79D4BD3FF0A484A3EF9E2666415C39B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5108
         "time": 1650576817096
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AA995FB4D3F71A35824E3E007B8D5855DFFD44B9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5108
         "time": 1650576817099
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7A23F08690EB0139AD92323D073FB357F0100A2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5108
         "time": 1650576817101
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5108
         "time": 1650576817104
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EEE32D47BF9089BA64E74C4973A1E38DE4F6AD4A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5108
         "time": 1650576817105
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4DAE315D31EF01519D26BDEF2E9BC87FB617373-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5108
         "time": 1650576817107
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5108
         "time": 1650576817108
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA1FF5C9C03917FB2E3E54160811344031F6E2D9-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5108
         "time": 1650576817109
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5108
         "time": 1650576817110
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9847115D281282040D56B1BB3ECDDE2FBA56910-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5108
         "time": 1650576817112
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0DB6040AFE4CD819E21184C7F348801CC248F811-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5108
         "time": 1650576817215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C2C4CFDE636E041703858917FFA647C6E166E0B8-1"
         "pid": 5108
         "time": 1650576817242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:43.177Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:43.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:43.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:43.178Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:43.237Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:43.353Z appoptics:patching patched crypto 
2022-04-21T21:33:43.370Z appoptics:patching patched https 
2022-04-21T21:33:43.371Z appoptics:patching patched http 
2022-04-21T21:33:43.403Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:43.403Z appoptics:patching patched fs 
2022-04-21T21:33:43.411Z appoptics:patching patched pino 7.5.1
2022-04-21T21:33:43.415Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5130
         "time": 1650576823440
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7417A22D81864697E4607619D3D861815AEFE9D8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5130
         "time": 1650576823447
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9ABC4E0608263AB1E598812F39F533FC72FB4C25-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5130
         "time": 1650576823450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B3D37FB5681532796C129BEB1B69EAC075EBE48-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5130
         "time": 1650576823453
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "119E2C3D285BF7D9E256F5EAD54648BF14E98DE7-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5130
         "time": 1650576823455
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5130
         "time": 1650576823457
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F748E02ECA81B1DF5613E36E3413DD91F9CF395A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5130
         "time": 1650576823459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A51D525E812B876E3B7ECB2A66ABC5BADB1AEDD2-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5130
         "time": 1650576823460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5130
         "time": 1650576823461
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C234045BAE2EA82886B2A334FFBDB5E8E7645622-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5130
         "time": 1650576823462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5130
         "time": 1650576823464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF6A5ED3B3699D92897634CB6B7BD0CDB040476E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5130
         "time": 1650576823465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13360B905CA427F7C086A16FED54845158517034-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5130
         "time": 1650576823570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 683BB4FC29FCF5D1CBB61234224BA3EB4AF88D75-1"
         "pid": 5130
         "time": 1650576823598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:50.441Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:50.442Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:50.442Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:50.443Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:50.501Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:50.614Z appoptics:patching patched crypto 
2022-04-21T21:33:50.631Z appoptics:patching patched https 
2022-04-21T21:33:50.632Z appoptics:patching patched http 
2022-04-21T21:33:50.672Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:50.673Z appoptics:patching patched fs 
2022-04-21T21:33:50.681Z appoptics:patching patched pino 7.6.0
2022-04-21T21:33:50.684Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5152
         "time": 1650576830708
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F91055B34BC30EB2073ED89FBDAD8A940220820-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5152
         "time": 1650576830715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CB91C3433D9D1CD112DF4E2A1BE6F665DC09B8A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5152
         "time": 1650576830719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3BB28BDC2BEDC457F2AA2EA8E78FDE0CE7471C2E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5152
         "time": 1650576830721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F91B87D9668702181DED9E6E29761DC0829FAA9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5152
         "time": 1650576830724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5152
         "time": 1650576830733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "279DAAA35B49BF3B5710D708774EF3DEAD5A20F8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5152
         "time": 1650576830734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "90C7D9C98F77BD94AEB37F000E1E58696D3AA723-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5152
         "time": 1650576830736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5152
         "time": 1650576830737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A837B1AC89592AE81BE90351C48BA7F844064E4-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5152
         "time": 1650576830739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5152
         "time": 1650576830740
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B546C31CE3E5A585AAE30EC8B9370E4EA96BE3B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5152
         "time": 1650576830742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45F88B01B69C5B8A743228A4B4C752668D9A5C7A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5152
         "time": 1650576830846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F05C1D26CAA749D609A8257AFB7CA3897D4AE02E-1"
         "pid": 5152
         "time": 1650576830874
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:33:57.271Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:33:57.271Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:33:57.271Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:33:57.272Z appoptics:debug using context provider: ace-context
2022-04-21T21:33:57.348Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:33:57.509Z appoptics:patching patched crypto 
2022-04-21T21:33:57.556Z appoptics:patching patched https 
2022-04-21T21:33:57.557Z appoptics:patching patched http 
2022-04-21T21:33:57.590Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:33:57.590Z appoptics:patching patched fs 
2022-04-21T21:33:57.604Z appoptics:patching patched pino 7.6.1
2022-04-21T21:33:57.608Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5174
         "time": 1650576837634
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0EC27589FCEB5C4124021B24C2F7FAF10A96D634-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5174
         "time": 1650576837641
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EB6A99DF206C473E17B81C3987A13D1971AAA1B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5174
         "time": 1650576837644
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "118987FA1C897FB3B0CCA95A3019F7FB4D298EB4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5174
         "time": 1650576837647
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E20929AAFE8ACD248F4D8DA19635C22C6B3AFBC-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5174
         "time": 1650576837650
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5174
         "time": 1650576837652
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7A21D17F7D663B3B914E961A7BB09915ED796596-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5174
         "time": 1650576837654
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE6B8F829FC72F4D7B97995F3B3FCCF0DC8C1269-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5174
         "time": 1650576837655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5174
         "time": 1650576837657
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "74F03F75A2F40E9A9C3C64E026A092791340997C-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5174
         "time": 1650576837658
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5174
         "time": 1650576837659
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "58B817083D544B2C80E41D24336F8521511CC5D3-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5174
         "time": 1650576837661
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1AD9EF444D3C9D6E7455A3A032D9D0F20CE91AB6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5174
         "time": 1650576837765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 91ABC38CD3CD5AACDAC234E01575A21FA2E18041-1"
         "pid": 5174
         "time": 1650576837793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:04.060Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:04.060Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:04.060Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:04.061Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:04.121Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:04.236Z appoptics:patching patched crypto 
2022-04-21T21:34:04.254Z appoptics:patching patched https 
2022-04-21T21:34:04.255Z appoptics:patching patched http 
2022-04-21T21:34:04.285Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:04.285Z appoptics:patching patched fs 
2022-04-21T21:34:04.298Z appoptics:patching patched pino 7.6.2
2022-04-21T21:34:04.302Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5196
         "time": 1650576844327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B34152F33261B0AEB6539D494ECCA3557E005FCF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5196
         "time": 1650576844334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CD410F235B0A605B8568BC969780E584DED898C3-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5196
         "time": 1650576844337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2D8BD1A52ADC24AF7D7F3EEB3F27F86115664DB9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5196
         "time": 1650576844339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DA9A36A87E00D841A2C22D6EF5B3DAB7135FB5F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5196
         "time": 1650576844342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5196
         "time": 1650576844344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "94C0AB3D94538B35E99A5376B886D3E0C49EFBF1-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5196
         "time": 1650576844346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF0AD484664C5AB6A5F0B9CE32F7A08618384259-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5196
         "time": 1650576844347
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5196
         "time": 1650576844348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EE9D5A24D11E79DEB4314FF60DE67ADDED639AB8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5196
         "time": 1650576844349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5196
         "time": 1650576844351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6738E5FB9CE3EC97A0A8B738C429D932EB74B80F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5196
         "time": 1650576844352
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "36FB1524E36058A5D61B889A4A4C879940CB1B2A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5196
         "time": 1650576844456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 67445CDC35032FAA72A267AFD82DFA4D5DEBDA7D-1"
         "pid": 5196
         "time": 1650576844485
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:11.239Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:11.239Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:11.239Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:11.240Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:11.298Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:11.414Z appoptics:patching patched crypto 
2022-04-21T21:34:11.431Z appoptics:patching patched https 
2022-04-21T21:34:11.431Z appoptics:patching patched http 
2022-04-21T21:34:11.460Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:11.460Z appoptics:patching patched fs 
2022-04-21T21:34:11.473Z appoptics:patching patched pino 7.6.3
2022-04-21T21:34:11.477Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5218
         "time": 1650576851502
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9CE980488FA0A7CD0BBE267493D30E359CE1D5A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5218
         "time": 1650576851509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E3CCD6CD9E932503ED6875FD6DCF2113954E20B4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5218
         "time": 1650576851512
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59FD1AC5E99DFDEAFF6ABAAA056A48384EFBC59D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5218
         "time": 1650576851514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1A6B558F31011D9209191BC4682D5B03B836C0F4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5218
         "time": 1650576851517
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5218
         "time": 1650576851519
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "730CBC4DAB5897904136CB9C587CADCB639228F7-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5218
         "time": 1650576851521
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6377D3E78FC22464E3D6E3B914AD9098043B8AB4-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5218
         "time": 1650576851522
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5218
         "time": 1650576851523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "227437496F0733B57F2F73D0F7BE95B6DF9F4E98-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5218
         "time": 1650576851525
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5218
         "time": 1650576851526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B876055C16AB1034A45E056DF04D5ED22ED46F63-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5218
         "time": 1650576851528
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "969DA1B739BE7D5A4B3FA89248C1C2AF7623D515-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5218
         "time": 1650576851631
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DA4D29C99B947E9ECF519FE0770FA6A3E3D42A16-1"
         "pid": 5218
         "time": 1650576851659
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:17.729Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:17.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:17.730Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:17.731Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:17.800Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:17.936Z appoptics:patching patched crypto 
2022-04-21T21:34:17.968Z appoptics:patching patched https 
2022-04-21T21:34:17.970Z appoptics:patching patched http 
2022-04-21T21:34:18.023Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:18.024Z appoptics:patching patched fs 
2022-04-21T21:34:18.034Z appoptics:patching patched pino 7.6.4
2022-04-21T21:34:18.038Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5240
         "time": 1650576858069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "65317D96FE09A57DBE12584D7103983154E2722E-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5240
         "time": 1650576858076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B031023D68654178D179F7C5FDE8B33BFDFB7D7-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5240
         "time": 1650576858081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CC0ECB1E359AED887637CED4C0C6106D716EE1FF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5240
         "time": 1650576858083
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "477D8BF094E2CF63740795AD5B154471CC62F133-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5240
         "time": 1650576858086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5240
         "time": 1650576858089
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6003229F7573AD6DD2593EB4702E3A62AE94EAC-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5240
         "time": 1650576858090
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "008A1B47FAC07D21C75645E30A539C68DEA94DF2-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5240
         "time": 1650576858092
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5240
         "time": 1650576858093
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "052BFD98C4D05BCCEF4D5355FF68688CCB01B25C-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5240
         "time": 1650576858094
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5240
         "time": 1650576858095
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30C529BB399DCC679B0DEA5AC8C54E7DF29EDDA2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5240
         "time": 1650576858097
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2114D66DEF5A60B65AD25FAA537DB220A7ABECA4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5240
         "time": 1650576858201
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 38372492FC916379B7AC77BD4114CF1F0BEE14DB-1"
         "pid": 5240
         "time": 1650576858229
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:25.205Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:25.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:25.206Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:25.207Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:25.267Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:25.382Z appoptics:patching patched crypto 
2022-04-21T21:34:25.400Z appoptics:patching patched https 
2022-04-21T21:34:25.401Z appoptics:patching patched http 
2022-04-21T21:34:25.435Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:25.436Z appoptics:patching patched fs 
2022-04-21T21:34:25.443Z appoptics:patching patched pino 7.6.5
2022-04-21T21:34:25.447Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5262
         "time": 1650576865471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2BB62A71EFBEE4392C55D892F54F9AF32CE7D1FE-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5262
         "time": 1650576865478
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A5624EE477559C1F9C50C6FD34D9AA0275F3D74-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5262
         "time": 1650576865482
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F643E7E4EA625CF7DFB732123DA97016B1D2AB0-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5262
         "time": 1650576865484
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CBBE4F3FEB344F21C2B02D133A14308CB84495A-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5262
         "time": 1650576865486
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5262
         "time": 1650576865489
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D62413F3C94834C46CFA2342FCC34443A1E6F75D-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5262
         "time": 1650576865490
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E04DF185307F98BA6A6F5E8B94D584BD2FBBFB3D-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5262
         "time": 1650576865492
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5262
         "time": 1650576865493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9989BD848AE2745B3D878B50786AA4E15CA61D77-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5262
         "time": 1650576865494
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5262
         "time": 1650576865495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6661BF77517FD7B1969DA3A94CAD241DBD1D3225-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5262
         "time": 1650576865497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5ADDDCE64FACD263BF0B0C100160BBD14A172724-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5262
         "time": 1650576865601
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EC868E7A8BD1595EDA788867698D07D44DD0D973-1"
         "pid": 5262
         "time": 1650576865629
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:31.787Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:31.788Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:31.788Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:31.789Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:31.849Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:31.967Z appoptics:patching patched crypto 
2022-04-21T21:34:31.985Z appoptics:patching patched https 
2022-04-21T21:34:31.985Z appoptics:patching patched http 
2022-04-21T21:34:32.026Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:32.026Z appoptics:patching patched fs 
2022-04-21T21:34:32.034Z appoptics:patching patched pino 7.7.0
2022-04-21T21:34:32.038Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5284
         "time": 1650576872063
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5404BBF76CA8BA2542EDA72B02B0ABF650B02338-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5284
         "time": 1650576872070
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6125B795CC180FA3DA533635160ED5D9FD175B1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5284
         "time": 1650576872074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1BAF7FF10FD37A40F9DFEACC3BDABC914B07385C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5284
         "time": 1650576872076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2E4C71EFF2C139665950C7E5AE0A648AB732B0FF-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5284
         "time": 1650576872079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5284
         "time": 1650576872081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E1CEB9AC3F3EDEC69519AA367BB64654488847E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5284
         "time": 1650576872083
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D3A8DB72160C117F176E1871AC87BB1352F6D0B-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5284
         "time": 1650576872084
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5284
         "time": 1650576872085
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "95E2994BBA590D097C81D92846D929D7398F5710-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5284
         "time": 1650576872086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5284
         "time": 1650576872087
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "20329B9BA687C0C195451EAEE729E0BC48F221E5-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5284
         "time": 1650576872089
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A8425C22C04659BE1A98D9495FF93310A43E1DA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5284
         "time": 1650576872193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5ED95FA43F477FE0AB2A5F8511B433317AA2688D-1"
         "pid": 5284
         "time": 1650576872222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:38.951Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:38.951Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:38.951Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:38.952Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:39.012Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:39.129Z appoptics:patching patched crypto 
2022-04-21T21:34:39.146Z appoptics:patching patched https 
2022-04-21T21:34:39.147Z appoptics:patching patched http 
2022-04-21T21:34:39.186Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:39.186Z appoptics:patching patched fs 
2022-04-21T21:34:39.194Z appoptics:patching patched pino 7.8.0
2022-04-21T21:34:39.198Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5306
         "time": 1650576879222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD15EBF8F88D21300F394F5884FFC46FF26147A1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5306
         "time": 1650576879229
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C056A6084EAB88C796CBF98D04B0671FDC46F38-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5306
         "time": 1650576879232
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "652AD3082322F2C268E2F01C69A5A619743F0CA1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5306
         "time": 1650576879235
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "277ED338F4EC661B81F977E5533778D88375C1C1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5306
         "time": 1650576879237
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5306
         "time": 1650576879239
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E893ECC72F559EEA2169CF222D8DEBC7A67143FB-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5306
         "time": 1650576879241
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DEAD975ED2E71426463CBCDB7A4DE89923C9F170-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5306
         "time": 1650576879242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5306
         "time": 1650576879243
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "569D869C6A6C0FF3874F936C935B1DDEB1820262-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5306
         "time": 1650576879245
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5306
         "time": 1650576879246
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DB9D90B72BC17E23711441A6CDE5186DE62B1B3-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5306
         "time": 1650576879247
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3CDA91A63C50EC2AB4DC6DA0441CE96145CC24E6-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5306
         "time": 1650576879351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AE4A72196840DA4F17BB3249E97AC2360CEA6A56-1"
         "pid": 5306
         "time": 1650576879379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:45.944Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:45.944Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:45.945Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:45.945Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:46.022Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:46.154Z appoptics:patching patched crypto 
2022-04-21T21:34:46.196Z appoptics:patching patched https 
2022-04-21T21:34:46.197Z appoptics:patching patched http 
2022-04-21T21:34:46.234Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:46.234Z appoptics:patching patched fs 
2022-04-21T21:34:46.242Z appoptics:patching patched pino 7.8.1
2022-04-21T21:34:46.246Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5328
         "time": 1650576886273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCA5AC83755C1F3E3C885CF5E1D49BA1C0CA86FB-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5328
         "time": 1650576886280
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7C6AF943FF8630086E9793B53A6285A96A39917-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5328
         "time": 1650576886284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D338753495417F7DF1F402CDFBDBB89B4588B414-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5328
         "time": 1650576886286
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A0B71181927C7C680B37C556F04CD3888530E86-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5328
         "time": 1650576886289
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5328
         "time": 1650576886292
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DFFF87B588016932095B40C37D24A8B49F51D20-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5328
         "time": 1650576886293
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6474329D73B95232C478637334147202975AD6E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5328
         "time": 1650576886295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5328
         "time": 1650576886296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59624B2299F50E49A164F2E246CC41D5B63EA2DD-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5328
         "time": 1650576886297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5328
         "time": 1650576886299
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "510F0DE563DC2AE79C61DF34CE0AEF6BE6D78983-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5328
         "time": 1650576886300
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C974C7ACBF0D0B80B40DE5660E8476ACA10C736-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5328
         "time": 1650576886404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 13B97EC08C8B0C462780188E15C65E96DE910230-1"
         "pid": 5328
         "time": 1650576886431
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:34:53.021Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:34:53.022Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:34:53.022Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:34:53.022Z appoptics:debug using context provider: ace-context
2022-04-21T21:34:53.096Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:34:53.214Z appoptics:patching patched crypto 
2022-04-21T21:34:53.232Z appoptics:patching patched https 
2022-04-21T21:34:53.233Z appoptics:patching patched http 
2022-04-21T21:34:53.270Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:34:53.271Z appoptics:patching patched fs 
2022-04-21T21:34:53.279Z appoptics:patching patched pino 7.9.0
2022-04-21T21:34:53.282Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5350
         "time": 1650576893307
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C43A94DE6FC53BD295DBD7F905F3278F043BA4ED-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5350
         "time": 1650576893314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BDB2C04FDA0207533A23D6D320E3D21CBEFDBCD-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5350
         "time": 1650576893317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02C1EAA10583A9DC293FE75234E47304C18772D1-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5350
         "time": 1650576893320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "836FDCC1754666D57E7C641AB328E376D43E238B-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5350
         "time": 1650576893322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5350
         "time": 1650576893325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "544A2209E0D1A6C4E9998AA75B4D40A55EA9797A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5350
         "time": 1650576893327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33E0F62E620131E5582DB87669D987B37E8DDC70-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5350
         "time": 1650576893328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5350
         "time": 1650576893329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "933033BAF194DC7D650B28BDB6F5E2654EAB7184-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5350
         "time": 1650576893330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5350
         "time": 1650576893331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59DC1AFD9E6A0B0D55D28958507E77CDD8C0D594-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5350
         "time": 1650576893333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C597DE5F08D2CD652DFAB36991BBD500CF1636C4-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5350
         "time": 1650576893437
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 250B6CB00B0E1DF0469DB6BE46546D555E77FEBB-1"
         "pid": 5350
         "time": 1650576893465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:35:00.069Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:35:00.070Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:35:00.070Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:35:00.070Z appoptics:debug using context provider: ace-context
2022-04-21T21:35:00.130Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:35:00.245Z appoptics:patching patched crypto 
2022-04-21T21:35:00.262Z appoptics:patching patched https 
2022-04-21T21:35:00.263Z appoptics:patching patched http 
2022-04-21T21:35:00.299Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:35:00.299Z appoptics:patching patched fs 
2022-04-21T21:35:00.307Z appoptics:patching patched pino 7.9.1
2022-04-21T21:35:00.311Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5372
         "time": 1650576900335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8ACF72182D4C085FC9524045DC67DE178A9DDDA9-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5372
         "time": 1650576900342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5613F5DE4608222069AB2F5622357D037FF4E72-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5372
         "time": 1650576900346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED06573ABFE37AF5CDF587A6D140AF9C464CE635-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5372
         "time": 1650576900348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "67A42CDB4F2715DE54A46215EF2EB6F22D788F00-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5372
         "time": 1650576900351
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5372
         "time": 1650576900353
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FF626C7F4AB080857D90287227B1A275CC19F7A-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5372
         "time": 1650576900355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "159C60D8AF804FF0D6075E9268EC258FF0B119EC-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5372
         "time": 1650576900356
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5372
         "time": 1650576900357
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE64706A5C2C4686EA3E3E59AB95C3FC21DC13D8-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5372
         "time": 1650576900358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5372
         "time": 1650576900359
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FEDE4AD85C5B7F68F341B5459D15A90356D653D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5372
         "time": 1650576900361
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44A2F5CE4E41D9A2DBCEFD189DC4651678197D8D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5372
         "time": 1650576900465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D72AF1427506E1697999F5A735B12B66572FA4B6-1"
         "pid": 5372
         "time": 1650576900493
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:35:06.748Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:35:06.749Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:35:06.749Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:35:06.750Z appoptics:debug using context provider: ace-context
2022-04-21T21:35:06.843Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:35:06.967Z appoptics:patching patched crypto 
2022-04-21T21:35:06.985Z appoptics:patching patched https 
2022-04-21T21:35:06.985Z appoptics:patching patched http 
2022-04-21T21:35:07.019Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:35:07.020Z appoptics:patching patched fs 
2022-04-21T21:35:07.028Z appoptics:patching patched pino 7.9.2
2022-04-21T21:35:07.031Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5394
         "time": 1650576907056
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7DF9A6D1AEB041FAF0BEC2DF58E2066B9FBE4E88-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5394
         "time": 1650576907063
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2AE64E3009D24EB385359DF47F9834D124055D84-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5394
         "time": 1650576907066
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "925CAB73F68D4F6A7E7FAEA07D3FD54A0D4A5413-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5394
         "time": 1650576907069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F94BEAA527A43ED7ADF185F5044FBEAFF4F0E6DA-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5394
         "time": 1650576907071
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5394
         "time": 1650576907074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C47CF297E3179172C3629C5076900F36AE72DDC-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5394
         "time": 1650576907075
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "66B524506EA4F3C424B2B7B68026A9DDEF3DA6F7-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5394
         "time": 1650576907077
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5394
         "time": 1650576907078
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45481BC156002D3BFFE1F07C05DAB5542FD8B37E-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5394
         "time": 1650576907079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5394
         "time": 1650576907080
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FCD55A68503FCB8077A0E4CD6E07622E7D0A0D4C-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5394
         "time": 1650576907082
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07BF8C4B18C582F41048F650AA7B2D8DEC63CE7D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5394
         "time": 1650576907186
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3F08175C7D6ADE65D5E9CB265238EBB30D913641-1"
         "pid": 5394
         "time": 1650576907215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T21:35:14.176Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T21:35:14.177Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T21:35:14.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T21:35:14.178Z appoptics:debug using context provider: ace-context
2022-04-21T21:35:14.240Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T21:35:14.354Z appoptics:patching patched crypto 
2022-04-21T21:35:14.372Z appoptics:patching patched https 
2022-04-21T21:35:14.372Z appoptics:patching patched http 
2022-04-21T21:35:14.408Z appoptics:patching fs.realpath - adding native method
2022-04-21T21:35:14.408Z appoptics:patching patched fs 
2022-04-21T21:35:14.416Z appoptics:patching patched pino 7.10.0
2022-04-21T21:35:14.420Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5416
         "time": 1650576914444
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F446E6A7D8122066680327511E3ECCD72165832F-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5416
         "time": 1650576914451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39E58D178C34E5453E032D41055B6AABB26CE9D7-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5416
         "time": 1650576914454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B2852C5B9A459CDEBD2BE73202BEB41BFABCCE8-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5416
         "time": 1650576914457
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A73D4FB3369D120609B8E57A703B7AF84147732-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5416
         "time": 1650576914459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5416
         "time": 1650576914462
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7271D447984AD1558907919894F9E828E2B5960F-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5416
         "time": 1650576914463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD754C9EAF75C56E88D9CB1F160033CAC871C42D-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5416
         "time": 1650576914464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5416
         "time": 1650576914465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "42AC490B0667EF2012DF1CD046699129068B8394-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5416
         "time": 1650576914467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "always insert"
         "pid": 5416
         "time": 1650576914468
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5DEA919D1FAE2CD2008BD19E7E9F69F772403FC2-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5416
         "time": 1650576914469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FA16F73BAF689B725F3696FC3EFDA2B225E0E9D-1"
      +  }
         "hostname": "f2816700c88a"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5416
         "time": 1650576914573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 613719E352F2463317DA669F09B358806AEA802F-1"
         "pid": 5416
         "time": 1650576914600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 14s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
