npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

added 9 packages, removed 14 packages, changed 4 packages, and audited 1073 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:08.504Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:08.505Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:08.505Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:08.506Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:08.581Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:08.755Z appoptics:patching patched crypto 
2021-11-23T06:34:08.814Z appoptics:patching patched https 
2021-11-23T06:34:08.814Z appoptics:patching patched http 
2021-11-23T06:34:08.862Z appoptics:patching patched amqplib 0.2.0
2021-11-23T06:34:08.871Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:08.875Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:557:17)
      at processTimers (node:internal/timers:500:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (node:internal/timers:464:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:557:17)
      at processTimers (node:internal/timers:500:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (node:internal/timers:464:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 1073 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:20.859Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:20.860Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:20.860Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:20.860Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:20.942Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:21.118Z appoptics:patching patched crypto 
2021-11-23T06:34:21.140Z appoptics:patching patched https 
2021-11-23T06:34:21.140Z appoptics:patching patched http 
2021-11-23T06:34:21.206Z appoptics:patching patched amqplib 0.2.1
2021-11-23T06:34:21.209Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:21.212Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:470) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (39ms)
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (237ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1073 packages in 6s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:28.339Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:28.340Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:28.340Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:28.341Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:28.409Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:28.576Z appoptics:patching patched crypto 
2021-11-23T06:34:28.595Z appoptics:patching patched https 
2021-11-23T06:34:28.596Z appoptics:patching patched http 
2021-11-23T06:34:28.657Z appoptics:patching patched amqplib 0.3.0
2021-11-23T06:34:28.660Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:28.664Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:493) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (62ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (273ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 1073 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:36.394Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:36.395Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:36.395Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:36.396Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:36.471Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:36.637Z appoptics:patching patched crypto 
2021-11-23T06:34:36.657Z appoptics:patching patched https 
2021-11-23T06:34:36.657Z appoptics:patching patched http 
2021-11-23T06:34:36.720Z appoptics:patching patched amqplib 0.3.1
2021-11-23T06:34:36.723Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:36.726Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:516) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (57ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (242ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1073 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:44.429Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:44.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:44.430Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:44.431Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:44.498Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:44.655Z appoptics:patching patched crypto 
2021-11-23T06:34:44.681Z appoptics:patching patched https 
2021-11-23T06:34:44.682Z appoptics:patching patched http 
2021-11-23T06:34:44.749Z appoptics:patching patched amqplib 0.3.2
2021-11-23T06:34:44.752Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:44.755Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:539) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (60ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (202ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1073 packages in 6s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:34:51.871Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:34:51.872Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:34:51.872Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:34:51.873Z appoptics:debug using context provider: ace-context
2021-11-23T06:34:51.941Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:34:52.098Z appoptics:patching patched crypto 
2021-11-23T06:34:52.118Z appoptics:patching patched https 
2021-11-23T06:34:52.118Z appoptics:patching patched http 
2021-11-23T06:34:52.180Z appoptics:patching patched amqplib 0.4.0
2021-11-23T06:34:52.183Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:34:52.186Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:562) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (70ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (259ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:390:28)
      at Connection.emit (node:events:390:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:390:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:390:28)
      at Connection.emit (node:events:390:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:390:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1073 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:00.154Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:00.155Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:00.155Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:00.156Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:00.225Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:00.395Z appoptics:patching patched crypto 
2021-11-23T06:35:00.415Z appoptics:patching patched https 
2021-11-23T06:35:00.416Z appoptics:patching patched http 
2021-11-23T06:35:00.476Z appoptics:patching patched amqplib 0.4.1
2021-11-23T06:35:00.479Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:00.482Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:585) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (299ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1073 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:08.408Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:08.409Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:08.409Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:08.410Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:08.510Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:08.744Z appoptics:patching patched crypto 
2021-11-23T06:35:08.765Z appoptics:patching patched https 
2021-11-23T06:35:08.765Z appoptics:patching patched http 
2021-11-23T06:35:08.831Z appoptics:patching patched amqplib 0.4.2
2021-11-23T06:35:08.834Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:08.837Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:608) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (64ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (245ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 1072 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:16.166Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:16.167Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:16.167Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:16.167Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:16.237Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:16.396Z appoptics:patching patched crypto 
2021-11-23T06:35:16.416Z appoptics:patching patched https 
2021-11-23T06:35:16.417Z appoptics:patching patched http 
2021-11-23T06:35:16.492Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:35:16.495Z appoptics:patching patched amqplib 0.5.1
2021-11-23T06:35:16.498Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:16.500Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:631) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (249ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

added 10 packages, removed 8 packages, changed 2 packages, and audited 1074 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:24.942Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:24.942Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:24.942Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:24.943Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:25.012Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:25.185Z appoptics:patching patched crypto 
2021-11-23T06:35:25.205Z appoptics:patching patched https 
2021-11-23T06:35:25.205Z appoptics:patching patched http 
2021-11-23T06:35:25.277Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:35:25.280Z appoptics:patching patched amqplib 0.5.2
2021-11-23T06:35:25.282Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:25.285Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:654) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (258ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

added 11 packages, removed 10 packages, changed 4 packages, and audited 1075 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:33.093Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:33.095Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:33.095Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:33.096Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:33.224Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:33.454Z appoptics:patching patched crypto 
2021-11-23T06:35:33.483Z appoptics:patching patched https 
2021-11-23T06:35:33.484Z appoptics:patching patched http 
2021-11-23T06:35:33.587Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:35:33.591Z appoptics:patching patched amqplib 0.5.3
2021-11-23T06:35:33.595Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:33.599Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:677) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (265ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 1075 packages in 6s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:40.796Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:40.797Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:40.797Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:40.798Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:40.866Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:41.021Z appoptics:patching patched crypto 
2021-11-23T06:35:41.040Z appoptics:patching patched https 
2021-11-23T06:35:41.041Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1101:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1101:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1101:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1075 packages in 8s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:49.115Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:49.115Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:49.115Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:49.116Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:49.185Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:49.346Z appoptics:patching patched crypto 
2021-11-23T06:35:49.366Z appoptics:patching patched https 
2021-11-23T06:35:49.366Z appoptics:patching patched http 
2021-11-23T06:35:49.442Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:35:49.445Z appoptics:patching patched amqplib 0.5.5
2021-11-23T06:35:49.448Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:49.451Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:719) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (212ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1075 packages in 6s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:35:56.533Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:35:56.534Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:35:56.534Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:35:56.539Z appoptics:debug using context provider: ace-context
2021-11-23T06:35:56.652Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:35:56.930Z appoptics:patching patched crypto 
2021-11-23T06:35:56.970Z appoptics:patching patched https 
2021-11-23T06:35:56.972Z appoptics:patching patched http 
2021-11-23T06:35:57.139Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:35:57.148Z appoptics:patching patched amqplib 0.5.6
2021-11-23T06:35:57.156Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:35:57.164Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:742) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (75ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (397ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1075 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:36:04.785Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:36:04.786Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:36:04.786Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:36:04.787Z appoptics:debug using context provider: ace-context
2021-11-23T06:36:04.908Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:36:05.096Z appoptics:patching patched crypto 
2021-11-23T06:36:05.119Z appoptics:patching patched https 
2021-11-23T06:36:05.119Z appoptics:patching patched http 
2021-11-23T06:36:05.200Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:36:05.203Z appoptics:patching patched amqplib 0.6.0
2021-11-23T06:36:05.206Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:36:05.209Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:765) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (246ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 1075 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (21 moderate, 5 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:36:13.120Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:36:13.120Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:36:13.120Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:36:13.121Z appoptics:debug using context provider: ace-context
2021-11-23T06:36:13.189Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:36:13.356Z appoptics:patching patched crypto 
2021-11-23T06:36:13.377Z appoptics:patching patched https 
2021-11-23T06:36:13.378Z appoptics:patching patched http 
2021-11-23T06:36:13.470Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:36:13.473Z appoptics:patching patched amqplib 0.7.0
2021-11-23T06:36:13.477Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:36:13.480Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:788) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace (54ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (277ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.13.0', npm: '8.1.0' }
npm WARN EBADENGINE }

added 11 packages, removed 8 packages, changed 3 packages, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:36:20.795Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:36:20.796Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:36:20.796Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:36:20.797Z appoptics:debug using context provider: ace-context
2021-11-23T06:36:20.865Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:36:21.039Z appoptics:patching patched crypto 
2021-11-23T06:36:21.069Z appoptics:patching patched https 
2021-11-23T06:36:21.070Z appoptics:patching patched http 
2021-11-23T06:36:21.156Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:36:21.159Z appoptics:patching patched amqplib 0.7.1
2021-11-23T06:36:21.162Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:36:21.165Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:811) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (40ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (238ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 

changed 1 package, and audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2021-11-23T06:36:29.031Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2021-11-23T06:36:29.032Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2021-11-23T06:36:29.032Z appoptics:debug serviceKey dIOz...wWK0:ao-node-test
2021-11-23T06:36:29.032Z appoptics:debug using context provider: ace-context
2021-11-23T06:36:29.108Z appoptics:debug apm 10.1.1-prerelease.0, bindings 11.1.0, oboe 10.1.1
2021-11-23T06:36:29.277Z appoptics:patching patched crypto 
2021-11-23T06:36:29.297Z appoptics:patching patched https 
2021-11-23T06:36:29.298Z appoptics:patching patched http 
2021-11-23T06:36:29.372Z appoptics:patching patched bluebird 3.7.2
2021-11-23T06:36:29.374Z appoptics:patching patched amqplib 0.8.0
2021-11-23T06:36:29.377Z appoptics:patching patched amqplib/callback_api 
2021-11-23T06:36:29.380Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:834) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (277ms)

npm WARN old lockfile 
npm WARN old lockfile The package-lock.json file was created with an old version of npm,
npm WARN old lockfile so supplemental metadata must be fetched from the registry.
npm WARN old lockfile 
npm WARN old lockfile This is a one-time fix-up, please be patient...
npm WARN old lockfile 

up to date, audited 1078 packages in 7s

80 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (20 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
